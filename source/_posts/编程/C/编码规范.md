---
title: 编码规范
author: 陈德强
date: 2019-09-04 20:03:00
categories:
- 字典
tags:
- other
toc: true
top: 
img: /medias/paperimg/paper.jpg
summary: refs/for/master
---

原则，像读英文一样读代码。


1. 数据成员使用`m_`前缀，参数名小写。
2. 类名首字母大写。
3. 函数名首字母小写。
4. 名称空间小写。
5. 指针后缀使用Ptr。
6. 结构体后缀使用St。
7. 编写自解释程序而不是使用注视。
8. 模版类的声明和实现放在同一个.h文件中。
9. 声明放在.h中，实现放在.cpp中，内联函数也要放在.cpp中。
10. 不在源文件中使用extern。
11. typedef使用大写字母。
12. 声明顺序，public，protected，private，friend。
13. 避免使用值传递（效率低）。
14. 使用默认参数而不是重载。
15. 删除的指针要赋予空指针。
16. 不要在循环体内定义对象。
17. 使用+=、—=、>>=等复合运算符，而不是a=a+1。（减少临时对象）。
18. 尽可能使用C++11的规范。
19. 将要做和未完成的使用 TODO 标注。
20. 全局变量使用`g_`前缀。
21. 宏全部大写，单词间用分隔符`_`隔开。
22. 枚举类型用能反应其基础类型、单数形式的前缀，例如:Color_Red,Color_Blue。
23. ifelse语句中一定要使用大括号。
24. 已删除的对象指针要赋予空指针值。
25. 使用默认参数而不是函数重载。
26. 避免利用值传递对象。
27. 判断返回值，考虑else。
28. 关于运算顺序：同时有乘除运算时，要根据操作数的取值范围决定运算顺序，以防止溢出。
29. 如果一个表达式是常量，一个表达式是变量，则常量做左操作数，变量做右操作数。这样即使少写一个等号，也会因为编译不能通过而发现。
30. 关于sizeof：因为存在数据对齐，因此，结构体的size不总是其各个成员的size的和。定义结构体时，尽量把空间占用小的变量放在前面，相同类型的变量连续放置。
31. 当有符号数与无符号数混合运算时，要进行强制类型转换，使二者类型相同。如果有符号数不会有负值则可以将有符号数转换为无符号数。如果无符号数不会大于有符号数的最大值则可以把无符号数转换为有符号数。否则，系统自行进行转换可能会有问题：将有符号数转换为无符号数，运算结果是有符号数还是无符号数取决于结果变量类型。
```c
int i = -2。
	unsigned int j = 2。
	i = i/j。
```
```
i = 2147483647
```
	因为：计算i/j时，系统把-2转换为无符号数（值很大），除以j后，符号位不是1，值仍很大，成为一个很大的正数。
32. 常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。
33. 抽象类命名使用Abstract或Base开头；异常类命名使用Exception结尾；测试类命名以它要测试的类的名称开始，以Test结尾。
33. 中括号是数组类型的一部分，数组定义如下：`String[] args`;请勿使用`String args[]`的方式来定义。
34. 包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。
正例： 应用工具类包名为com.alibaba.open.util、类名为MessageUtils
35. 枚举类名建议带上Enum后缀，枚举成员名称需要全大写，单词间用下划线隔开。
说明：枚举其实就是特殊的常量类，且构造方法被默认强制是私有。 正例：枚举名字：DealStatusEnum，成员名称：SUCCESS , UNKOWN_REASON。
36. 各层命名规约：
>A) Service/DAO层方法命名规约 
· 获取单个对象的方法用get做前缀。
· 获取多个对象的方法用list做前缀。
· 获取统计值的方法用count做前缀。
· 插入的方法用save（推荐）或insert做前缀。
· 删除的方法用remove（推荐）或delete做前缀。 
· 修改的方法用update做前缀。 
B) 领域模型命名规约
· 数据对象：xxxDO，xxx即为数据表名。
· 数据传输对象：xxxDTO，xxx为业务领域相关的名称。
· 展示对象：xxxVO，xxx一般为网页名称。
>· POJO是DO/DTO/BO/VO的统称，禁止命名成xxxPOJO。

37. long或者Long初始赋值时，必须使用大写的L，不能是小写的l，小写容易跟数字1混淆，造成误解。
38. 大括号的使用约定。如果是大括号内为空，则简洁地写成{}即可，不需要换行；如果是非空代码块则：

> 1） 左大括号前不换行。 
 2） 左大括号后换行。 
 3） 右大括号前换行。 
> 4） 右大括号后还有else等代码则不换行；表示终止右大括号后必须换行。

```java
public static void main(String args[]) {
	// 缩进4个空格
	String say = "hello";
	// 运算符的左右必须有一个空格
	int flag = 0;
	// 关键词if与括号之间必须有一个空格，括号内的f与左括号，0与右括号不需要空格
	if (flag == 0) {
		System.out.println(say);
	}
	// 左大括号前加空格且不换行；左大括号后换行
	if (flag == 1) {
		System.out.println("world");
	// 右大括号前换行，右大括号后有else，不用换行
	
	} else {
		System.out.println("ok");
	// 在右大括号后直接结束，则必须换行
	}
}
```
39. 单行字符数限制不超过 120 个，超出需要换行，换行时 遵循如下原则：

> 1.第二行相对第一行缩进 4 个空格，从第三行开始，不再继续缩进，参考示例。
2.运算符与下文一起换行。 
3.方法调用的点符号与下文一起换行。 
4.在多个参数超长，逗号后进行换行。 
> 5.在括号前不要换行，见反例。

```java
StringBuffer sb = new StringBuffer();
//超过120个字符的情况下，换行缩进4个空格，并且方法前的点符号一起换行
sb.append("zi").append("xin")...
.append("huang")...
.append("huang")...
.append("huang");
```
