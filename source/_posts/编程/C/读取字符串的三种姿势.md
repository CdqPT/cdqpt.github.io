---
title: 读取字符串的三种姿势
author: 陈德强
date: 2019-10-20 11:26:00
categories:
- 笔记
tags: CPlus
toc: true
top: false
img: /medias/paperimg/c.jpg
summary: cin、cin.get()、getline()。
---

# cin
cin>>该输入操作符是根据后面变量的类型读取数据。输入结束条件  ：遇到Enter、Space、Tab键。(这个很重要！)对结束符的处理 ：当第一个字符为分隔符时丢弃缓冲区中的结束符，当还存在其他cin输入时，会输出下一个非结束符字符串数据。

重要：当cin>>从缓冲区中读取数据时，若缓冲区中第一个字符是空格、tab或换行这些分隔符时，cin>>会将其忽略并清除，继续读取下一个字符，若缓冲区为空，则继续等待。但是如果读取成功，字符后面的分隔符是残留在缓冲区的，cin>>不做处理。

# cin.get()
该函数有三种格式：无参，一参数，二参数即cin.get(),cin.get(char ch), cin.get(array_name, Arsize)
`读取字符`
输入结束条件：Enter键对结束符处理：不丢弃缓冲区中的Enter、space和TAB（重要）。
cin.get()与cin.get(char ch)用于读取字符，他们的使用是相似的，即：ch=cin.get()与cin.get(ch)是等价的。
`读取字符串`
cin.get(array_name, Arsize)是用来读取字符串的，可以接受空格字符，遇到Enter结束输入，按照长度(Arsize)读取字符, 会丢弃最后的Enter字符（重要，但是不丢弃SPACE和TAB）。

# cin.getline()
cin.getline()与 cin.get(array_name,Arsize)的读取方式差不多，以Enter结束，可以接受空格字符。按照长度(Arsize)读取字符, 会丢弃最后的Enter字符。
但是这两个函数是有区别的：
cin.get(array_name, Arsize)当输入的字符串超长时，不会引起cin函数的错误，后面的cin操作会继续执行，只是直接从缓冲区中取数据。
但是cin.getline()当输入超长时，会引起cin函数的错误，后面的cin操作将不再执行。 

# cin错误函数
cin的错误处理机制，并且学习几个重要的函数：cin.fail(), cin.bad(), cin.good(), cin.clear(), cin.ignore()等。

ios::badbit    001   输入（输出）流出现致命错误，不可挽回 

ios::eofbit    010   已经到达文件尾

ios::failbit   100   输入（输出）流出现非致命错误，可挽回 

ios::goodbit   000   流状态完全正常, 各异常标志位都为0

相应的函数1 or true if rdstate & XXbit is nonzero; otherwise 0。

 cin.clear()的作用是重置错误标志。
重置错误标志还不够！要是能将缓冲区的残留数据清空了就好了哦！下面我们再来看一个很重要的函数！
```c
basic_istream&ignore(streamsize _Count = 1, 
					int_type _Delim = traits_type::eof());
```
这个函数用来丢弃输入缓冲区中的字符，第一参数定义一个数，第二个参数定义一个字符变量。下面解释一下函数是怎样执行的：函数不停的从缓冲区中取一个字符，并判断是不是_Delim，如果不是则丢弃并进行计数，当计数达到_Count退出，如果是则丢弃字符退出。例：cin.ignore(5, 'a'); 函数将不断从缓冲区中取一个字符丢弃，直到丢弃的字符数达到5或者读取的字符为'a'。


参考链接：
https://blog.csdn.net/Hadwin1991/article/details/81545863