---
title: 安卓入门笔记
date: 2019-05-10 11:13:00
categories: 笔记
tags: 安卓
toc: true
img: /medias/paperimg/android.jpg
summary: 安卓入门笔记。
author: 陈德强
top: 
password: 
cover: 
---

参考书籍：《android app开发入门》
说明：目前市场占有率中，android 5.0比较多，因此笔记以android5.0为开发基础，而不是最新版android。
新建工程，选择版本、运行、虚拟机之类的不再介绍，如有需要请参考：[官网教程](https://developer.android.google.cn/training/basics/firstapp/creating-project)，由于官网其他教程看的很吃力，因此看了这本小白入门书。
# 一、放大按钮
效果：点击放大按钮后，文本被放大。
新建工程后，
在布局界面新建一个按钮，并通过小圆点使其居于文本之上。
按钮的text属性改为“放大”，并通过`shift+回车`，输入id值后保存到资源中。
然后修改文本框的id为`txv`，
再返回按钮属性，添加onClick属性，“bigger”
切换到`MainActivity.java`页面中，添加bigger方法：
```java
package com.example.myapplication2;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

import static com.example.myapplication2.R.*;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(layout.activity_main);
    }

    int size=30;
    public void bigger(View view)
    {
        TextView txv;
        txv=(TextView) findViewById(id.txv);
        txv.setTextSize(++size);
    }
}
```
点击运行后，在手机界面中点击“放大按钮”，文本就会被放大了。
代码解析：
`@Override`：作用是重定向检查，如果重定向的函数名写错了，他会警报。
`onCreate（）`：android程序默认从此函数执行。

# 二、文本组件
示例：用户在Plain Text输入内容后，点击按钮，再将内容显示在TextView中。
新建Plain Text组件，id：editText，text：在此输入内容
新建Button组件，id：button，text：显示，onClick：textinput
新建Text View组件，id：txv，text：在此显示
切换到`MainActivity.java`页面中，添加textinput方法：
```java
package com.example.myapplication2;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

import static com.example.myapplication2.R.*;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(layout.activity_main);
    }


    public void textinput(View view)
    {
        EditText inputt= this.<EditText>findViewById(id.editText);
        TextView txv= this.<TextView>findViewById(id.txv);
        txv.setText(“您输入的内容是：”+inputt.getText().toString());

    }
}
```

![image](https://wx1.sinaimg.cn/large/006jQClrly1g2w30blkxwj30mu1340ye.jpg)

# 三、水平布局

示例：使用水平布局排列姓氏和名字输入框。
首先定义一些需要用到的字符，
打开app-res-values-strings.xml,添加需要用到的字符。
```
<resources>
    <string name="app_name">myapp1</string>
    <string name="TextView_firstname">姓：</string>
    <string name="TextView_lastname">名：</string>
    <string name="editText_firsrname">请输入姓氏</string>
    <string name="editText_lastname">请输入名字</string>
</resources>
```
切换到设计界面，
拖入Laouts-LinearLayout（horizental），这里叫做水平画布
然后向水平画布中添加一个TextView组件和一个Plain Text组件，使其左右水平布局，
然后将画布布局layout_width和layout_height的属性都改为wrap_conten,
然后修改TextView组件属性，id：textView_firstname，text：@string/TextView_firstname，textsize：30sp，singleLine：True
修改Plain Text组件属性，id：editText_firstname，text：，hint：@string/editText_firsrname，textsize：30sp，singleLine：True
再次拖入一个水平画布，通过拖动圆圈使其位于前一个画布的下方，否则会重叠。
同理，在第二个画布里添加有关名的组件。
最后运行就会显示：
![image](https://wx3.sinaimg.cn/large/006jQClrly1g2w6y5drjxj325e1cqnbi.jpg)
如果要输入电话号码、时间之类的特殊属性，可以更改inputType属性，点击左边的小旗选择需要的格式。
定义一定要放在onClick上边，否则索引不到。

# 四、输出app
app的位置在：`项目/app/build/outputs/apk/debug`文件夹下。这个.apk文件直接可以安装使用。

# 五、事件监听
监听要先声明成为监听类型，然后写入监听后的实现方法（中断函数）；
举个例子：

```java
public class MainActivity extends Activity implements OnClickListener{

    public void OnClick(View v){

        ........
    }
}
```
`implements OnClickListener`声明监听类型是单机；
`public void OnClick(View v)`是实现方法。

再举个例子：
实现点击文本时手机震动。
首先在布局界面建立一个TextView，id：txv，text：震动；
```java
package com.example.zhendong;


import android.content.Context;
import android.os.Vibrator;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity implements View.OnTouchListener{


    @Override
    public boolean onTouch(View view, MotionEvent event)
    {
        Vibrator vb= (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        if(event.getAction()==MotionEvent.ACTION_DOWN)
        {vb.vibrate(5000);    }
        else if(event.getAction()==MotionEvent.ACTION_UP)
        {vb.cancel();    }
        return true;
    }

    @Override
    protected void onCreate(Bundle saveInstanceState)
    {
        super.onCreate(saveInstanceState);
        setContentView(R.layout.activity_main);

        TextView txv= this.<TextView>findViewById(R.id.txv);
        txv.setOnTouchListener(this);//将组件和监听服务函数绑定到一起。
    }
}
```

虽然button按钮的属性里有onClick的函数，但是那只是“快捷方式”，常规的操作都类似上边的方式。

# 六、多事件监听
介绍一下多个事件触发同一个监听函数时该怎样处理。
举个例子：制作一个计数器，长按按钮值加2，长按显示文本（数值）值清零。
```java
package com.example.mutilevent;

import android.content.Context;
import android.os.Vibrator;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity implements View.OnClickListener,View.OnLongClickListener {

    TextView txv;
    Button btn;
    int count;

    @Override
    public boolean onLongClick(View view)
    {
        if(view.getId()==R.id.textView_plus)
        {
            count=0;
            txv.setText("0");
        }
        else if(view.getId()==R.id.button_plus)
        {
            count+=2;
            txv.setText(String.valueOf(count));

        }
    return  true;
    }

    @Override
    public void onClick(View v) {
        count+=1;
        txv.setText(String.valueOf(count));

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        txv= this.<TextView>findViewById(R.id.textView_plus);
        btn= this.<Button>findViewById(R.id.button_plus);

        btn.setOnClickListener(this);
        btn.setOnLongClickListener(this);
        txv.setOnLongClickListener(this);
    }
}
```

# 七、单选按钮
```java
package com.example.radiobutton;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.RadioGroup;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void search(View view)
    {
        TextView txv=(TextView) findViewById(R.id.textView);
        RadioGroup group=(RadioGroup)findViewById(R.id.radiogroup_tick);

        if(group.getCheckedRadioButtonId()==R.id.radioButton_adult){txv.setText("买全票");}
        if(group.getCheckedRadioButtonId()==R.id.radioButton_child){txv.setText("买半票");}
        if(group.getCheckedRadioButtonId()==R.id.radioButton_old){txv.setText("买老人票");}
    }
}
```
# 八、切换页面

主页面程序
```java
package com.example.activity2;

import android.content.Intent;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void gotosecondactivity(View view)
    {
        Intent it=new Intent(this,SecondActivity.class);

        startActivity(it);
    }
}
```
第二页程序
```java
package com.example.activity2;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;

public class SecondActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_second);
    }

    public void back(View view)
    {
        finish();
    }
}
```
# 九、拨号
```java
package com.example.openapp;

import android.content.Intent;
import android.net.Uri;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }


    public void OpenTel(View view){

        Intent it=new Intent();
        it.setAction(Intent.ACTION_VIEW);
        it.setData(Uri.parse("tel:800"));

        startActivity(it);
    }
}
```


