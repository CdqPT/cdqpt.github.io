---
title: 从0开始搭建视觉检测智能车
date: 2019-05-04 12:21:00
categories: 笔记
tags: 嵌入式
toc: true
img: /medias/paperimg/raspi.jpg
summary: 从0开始搭建视觉检测智能车。
author: 陈德强
top: 
password: 
cover: 
---

```
这段不用做，仅作保留！！
安装python3
[树莓派安装anaconda](https://purethought.cn/2019/05/02/%E7%BC%96%E7%A8%8B/Python/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%89%E8%A3%85anaconda/)
这段不用做，仅作保留！！
```

# 一、树莓派开机准备
参考前文：[树莓派系统烧录和备份](https://purethought.cn/2019/04/16/%E5%AE%89%E8%A3%85%E5%8F%8A%E6%95%99%E7%A8%8B/%E6%A0%91%E8%8E%93%E6%B4%BE%E7%B3%BB%E7%BB%9F%E7%83%A7%E5%BD%95%E5%92%8C%E5%A4%87%E4%BB%BD/#toc-heading-8),烧录原版树莓派镜像，并搭建上远程桌面。

# 二、安装opencv-python
前提是python3，可打开thonny编辑器看输出拦的提示，一般新版系统都是python3
安装python3和必要的动态链接库：
```
pip3 install opencv-python
sudo apt-get install libatlas3-base
sudo apt-get install libjasper1
sudo apt-get install libgst7
sudo apt-get install python3-gst-1.0
sudo apt-get install libqtgui4
sudo apt-get install libqt4-test
sudo apt-get install libilmbase12
sudo apt-get install openexr
sudo apt-get install libavcodec57
sudo apt-get install libavformat57
sudo apt-get install libswscale4
sudo apt-get install libhdf5-dev libhdf5-serial-dev
sudo apt-get install libqtgui4
```
然后安装opencv-contrib，这里边包含人脸识别，目标跟踪等先进的库，
```
pip3 install opencv-contrib-python
```
调用摄像头测试一下，在thonny里运行：
```
import cv2 #导入opencv库
cap = cv2.VideoCapture(0) #调用摄像头，参数是设备编号
#主循环是读取摄像头图像，按q停止
while True:
    ret, frame = cap.read()
    cv2.imshow('video',frame)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break
cap.release() #释放cap 
cv2.destroyAllWindows()#销毁所有窗口
```
这时应该有摄像头画面！

吐槽：python的环境配置太恶心了，就是上面那几行代码，竟然花了一星期才配置好，一个人搞，几度绝望，此时才感受到anaconda的伟大之处！

# 三、视觉寻线
请参考：[python-opencv视觉巡线](https://purethought.cn/2019/04/20/%E7%BC%96%E7%A8%8B/Python/python-opencv%E8%A7%86%E8%A7%89%E5%B7%A1%E7%BA%BF/)

# 四、其他知识点参考
[手把手教你搭建视觉检测智能车](https://purethought.cn/2019/04/18/%E7%BC%96%E7%A8%8B/Python/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E6%90%AD%E5%BB%BA%E8%A7%86%E8%A7%89%E6%A3%80%E6%B5%8B%E6%99%BA%E8%83%BD%E8%BD%A6/)