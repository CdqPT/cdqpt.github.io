<!DOCTYPE HTML>
<html lang="zh-CN">






<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="cmakeç¬”è®°, é™ˆå¾·å¼º ALaDing å†…è’™å¤å·¥ä¸šå¤§å­¦ æœºå™¨äºº ä¸œè½¯ ä¸œè½¯é›†å›¢ åµŒå…¥å¼ è‡ªåŠ¨é©¾é©¶ ADASIS">
    <meta name="description" content="CMakeCMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå·¥å…·ã€‚å®ƒä½¿ç”¨å¹³å°æ— å…³çš„CMakeæ¸…å•æ–‡ä»¶CMakeLists.txtæ¥æè¿°æ„å»ºè¿‡ç¨‹,å¯ä»¥äº§ç”Ÿæ ‡å‡†çš„æ„å»ºæ–‡ä»¶,å¦‚ Unix çš„ Makefile æˆ–Windows Visual C++ çš„ pro">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>cmakeç¬”è®° | ALaDing</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
        code[class*="language-"], pre[class*="language-"] {
            white-space: pre !important;
        }
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>



  <link rel="amphtml" href="https://purethought.cn/6415.html/amp/index.html">

    
<link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>






<body style="overflow-x:hidden">
    <header id="navControl" class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ALaDing</span>
                </a>
            </div>
            



<!-- <a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>é¦–é¡µ</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/dictionary" class="waves-effect waves-light">
            
            <i class="fa fa-book"></i>
            
            <span>å­—å…¸</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>åˆ†ç±»</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-heart"></i>
            
            <span>è±†ç“£</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-leaf"></i>
            
            <span>å…³äº</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-commenting"></i>
            
            <span>ç•™è¨€</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="æœç´¢"></i>
        </a>
    </li>
</ul> -->

<!-- æ”¯æŒäºŒçº§èœå•ç‰¹æ€§  -->
<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse">
  <i class="fa fa-navicon" >
     <b>å¯¼èˆª </b>
  </i>
</a>

<ul class="right nav-menu">
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/" class="waves-effect waves-light">
              
                <i class="fa fa-home"></i>
              
              <span>é¦–é¡µ</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/dictionary" class="waves-effect waves-light">
              
                <i class="fa fa-book"></i>
              
              <span>å­—å…¸</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories" class="waves-effect waves-light">
                
                  <i class="fa fa-bookmark"></i>
                
                <span>åˆ†ç±»</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="https://purethought.cn/categories/%E7%AC%94%E8%AE%B0/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>ç¼–ç¨‹ç¬”è®°</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E6%96%87%E5%8F%B2%E5%93%B2/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>æ–‡å²å“²ç†</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E6%8A%95%E8%B5%84%E7%90%86%E8%B4%A2/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>æŠ•èµ„ç†è´¢</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E9%9A%8F%E7%AC%94/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>è¿‡ç¨‹éšç¬”</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E4%BC%98%E5%8C%96/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>æ—¢æœ‰ä¼˜åŒ–</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E6%95%99%E7%A8%8B/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>å®‰è£…æ•™ç¨‹</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/" class="waves-effect waves-light">
                
                  <i class="fa fa-heart"></i>
                
                <span>è±†ç“£</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/books" >
                    
                      <i class="fa fa-book" style="margin-top: -20px;"></i>
                    
                    <span>ä¹¦å•</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/movies" >
                    
                      <i class="fa fa-film" style="margin-top: -20px;"></i>
                    
                    <span>ç”µå½±</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/games" >
                    
                      <i class="fa fa-gamepad" style="margin-top: -20px;"></i>
                    
                    <span>æ¸¸æˆ</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/" class="waves-effect waves-light">
                
                  <i class="fa fa-leaf"></i>
                
                <span>å…³äº</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/about" >
                    
                      <i class="fa fa-user" style="margin-top: -20px;"></i>
                    
                    <span>ç®€ä»‹</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/galleries" >
                    
                      <i class="fa fa-camera" style="margin-top: -20px;"></i>
                    
                    <span>ç›¸å†Œ</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/friends" >
                    
                      <i class="fa fa-handshake-o" style="margin-top: -20px;"></i>
                    
                    <span>å‹é“¾</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/log" >
                    
                      <i class="fa fa-pencil-square-o" style="margin-top: -20px;"></i>
                    
                    <span>æ—¥å¿—</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/tags" >
                    
                      <i class="fa fa-tags" style="margin-top: -20px;"></i>
                    
                    <span>æ ‡ç­¾</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/archives" >
                    
                      <i class="fa fa-archive" style="margin-top: -20px;"></i>
                    
                    <span>å½’æ¡£</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/contact" class="waves-effect waves-light">
              
                <i class="fa fa-commenting"></i>
              
              <span>ç•™è¨€</span>
            </a>

            
      </li>
    

    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">

            <i id="searchIcon" class="fa fa-search" title="æœç´¢" >
              <b>æœç´¢ </b>
            </i>

        </a>
    </li>

</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ALaDing</div>
        <div class="logo-desc">
            
            ä¸œè½¯é›†å›¢ | å†…è’™å¤å·¥ä¸šå¤§å­¦ | åµŒå…¥å¼å·¥ç¨‹å¸ˆ | ADAS
            
        </div>
    </div>

    


 <ul class="menu-list mobile-menu-list">  <li class="m-nav-item">  <a href="/" class="waves-effect waves-light">  <i class="fa fa-fw fa-home"></i>  é¦–é¡µ </a>  </li>  <li class="m-nav-item">  <a href="/dictionary" class="waves-effect waves-light">  <i class="fa fa-fw fa-book"></i>  å­—å…¸ </a>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-bookmark"></i>  åˆ†ç±» <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="https://purethought.cn/categories/%E7%AC%94%E8%AE%B0/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>ç¼–ç¨‹ç¬”è®°</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E6%96%87%E5%8F%B2%E5%93%B2/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>æ–‡å²å“²ç†</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E6%8A%95%E8%B5%84%E7%90%86%E8%B4%A2/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>æŠ•èµ„ç†è´¢</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E9%9A%8F%E7%AC%94/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>è¿‡ç¨‹éšç¬”</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E4%BC%98%E5%8C%96/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>æ—¢æœ‰ä¼˜åŒ–</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E6%95%99%E7%A8%8B/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>å®‰è£…æ•™ç¨‹</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-heart"></i>  è±†ç“£ <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="/books" >  <i class="fa fa-book" style="left: 25px; position: absolute;"></i>  <span>ä¹¦å•</span> </a> </li>  <li> <a href="/movies" >  <i class="fa fa-film" style="left: 25px; position: absolute;"></i>  <span>ç”µå½±</span> </a> </li>  <li> <a href="/games" >  <i class="fa fa-gamepad" style="left: 25px; position: absolute;"></i>  <span>æ¸¸æˆ</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-leaf"></i>  å…³äº <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="/about" >  <i class="fa fa-user" style="left: 25px; position: absolute;"></i>  <span>ç®€ä»‹</span> </a> </li>  <li> <a href="/galleries" >  <i class="fa fa-camera" style="left: 25px; position: absolute;"></i>  <span>ç›¸å†Œ</span> </a> </li>  <li> <a href="/friends" >  <i class="fa fa-handshake-o" style="left: 25px; position: absolute;"></i>  <span>å‹é“¾</span> </a> </li>  <li> <a href="/log" >  <i class="fa fa-pencil-square-o" style="left: 25px; position: absolute;"></i>  <span>æ—¥å¿—</span> </a> </li>  <li> <a href="/tags" >  <i class="fa fa-tags" style="left: 25px; position: absolute;"></i>  <span>æ ‡ç­¾</span> </a> </li>  <li> <a href="/archives" >  <i class="fa fa-archive" style="left: 25px; position: absolute;"></i>  <span>å½’æ¡£</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="/contact" class="waves-effect waves-light">  <i class="fa fa-fw fa-commenting"></i>  ç•™è¨€ </a>  </li>   <li><div class="divider"></div></li> <li> <a href="https://github.com/CdqPT" class="waves-effect waves-light" target="_blank"> <i class="fa fa-github-square fa-fw"></i>Fork Me </a> </li>  </ul>








</div>



        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #000;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/CdqPT" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>


    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç ')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://blogcdq.oss-cn-beijing.aliyuncs.com/image/other/star.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        cmakeç¬”è®°
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before  /*,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before */{
        display: block;
        content: "ğŸ”–";
        position: absolute;
        left: 50px;
        /*color: #EE7942;*/
        /*color: red;*/
    }
        @media only screen and (max-width: 992px) {
    #articleContent h1::before{
        display: block;
        content: " ";
    }
}

    /*ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼ä¸ºéšè—*/
    #toc-content {
        height: calc(105vh - 250px);
        overflow-x: hidden;
        overflow-y: scroll;
        width: 320px;
        height: 600px;
    }
    #hidden{
        overflow: hidden;
        width: 300px;    
    }  

    #articleContent :focus {
        outline: none;
    }
    .toc-fixed {
        position: fixed;
        top: 64px;
    }
    .toc-widget {
        padding-left: 20px;
    }
    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 40px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }
    .toc-widget ol {
        padding: 0;
        list-style: none;
    }
    #toc-content ol {
        padding-left: 10px;
    }
    #toc-content ol li {
        padding-left: 30px;
    }
    #toc-content .toc-link:hover {
        color: black;
        font-weight: 700;
        text-decoration: underline;
    }
    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }
    #toc-content .is-active-link {
        color: red;
    }
    #toc-content .is-active-link::before {
        background-color: red;
    }
    #floating-toc-btn {
        position: fixed;
        right: 0.6rem;
        bottom: 6rem;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
        opacity: 0.5;
    }
    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }
    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/å…¶ä»–/" target="_blank">
                                <span class="chip bg-color">å…¶ä»–</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/å­—å…¸/" class="post-category" target="_blank">
                                å­—å…¸
                            </a>
                        
                    </div>
                    
                </div>
            </div>




               <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="fa fa-pencil fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2019-12-12
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="fa fa-refresh fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2020-02-25
                </div>
                

                

                
                
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
                
            </div>
            
        </div>

        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="CMake"><a href="#CMake" class="headerlink" title="CMake"></a>CMake</h1><p>CMakeæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„æ„å»ºç³»ç»Ÿç”Ÿæˆå·¥å…·ã€‚å®ƒä½¿ç”¨å¹³å°æ— å…³çš„CMakeæ¸…å•æ–‡ä»¶CMakeLists.txtæ¥æè¿°æ„å»ºè¿‡ç¨‹,å¯ä»¥äº§ç”Ÿæ ‡å‡†çš„æ„å»ºæ–‡ä»¶,å¦‚ Unix çš„ Makefile æˆ–Windows Visual C++ çš„ projects/workspaces ã€‚æ–‡ä»¶ CMakeLists.txt éœ€è¦æ‰‹å·¥ç¼–å†™,ä¹Ÿå¯ä»¥é€šè¿‡ç¼–å†™è„šæœ¬è¿›è¡ŒåŠè‡ªåŠ¨çš„ç”Ÿæˆ.</p>
<p>äº†è§£CMakeå‰éœ€è¦å…ˆäº†è§£linuxä¸‹æºç ç¼–è¯‘æµç¨‹ï¼š<a href="https://purethought.cn/28950.html">https://purethought.cn/28950.html</a></p>
<blockquote>
<p>åœ¨ linux å¹³å°ä¸‹ä½¿ç”¨ CMake ç”Ÿæˆ Makefile å¹¶ç¼–è¯‘çš„æµç¨‹å¦‚ä¸‹ï¼š<br>1.ç¼–å†™ CMake é…ç½®æ–‡ä»¶ <code>CMakeLists.txt</code> ã€‚<br>2.<code>cmake PATH</code> ç”Ÿæˆmakefile<br>3.<code>make</code> ç¼–è¯‘æºç ã€‚<br>4.<code>make install</code> å®‰è£…å¯æ‰§è¡Œç¨‹åºã€‚</p>
</blockquote>
<h1 id="å®‰è£…CMake"><a href="#å®‰è£…CMake" class="headerlink" title="å®‰è£…CMake"></a>å®‰è£…CMake</h1><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>å®‰è£…cmake</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> apt <span class="token function">install</span> cmake<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>å®‰è£…ccmake:</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> apt <span class="token function">install</span> cmake-curses-gui<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="Win"><a href="#Win" class="headerlink" title="Win"></a>Win</h2><p>å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼š<br><a href="https://cmake.org/download/" target="_blank" rel="noopener">https://cmake.org/download/</a></p>
<h1 id="ç”Ÿæˆå™¨"><a href="#ç”Ÿæˆå™¨" class="headerlink" title="ç”Ÿæˆå™¨"></a>ç”Ÿæˆå™¨</h1><p>æ˜¾ç¤ºæ‰€æœ‰çš„é€‰é¡¹å’Œç”Ÿæˆå™¨ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">cmake --help<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>åœ¨CMake 2.8.3å¹³å°ä¸Šï¼ŒCMakeæ”¯æŒä¸‹åˆ—ç”Ÿæˆå™¨ï¼š</p>
<p>Borland Makefiles: ç”ŸæˆBorland makefileã€‚<br>MSYS Makefiles: ç”ŸæˆMSYS makefileã€‚</p>
<p>ç”Ÿæˆçš„makefileç”¨use /bin/shä½œä¸ºå®ƒçš„shellã€‚åœ¨è¿è¡ŒCMakeçš„æœºå™¨ä¸Šéœ€è¦å®‰è£…msysã€‚<br>MinGW Makefiles: ç”Ÿæˆä¾›mingw32-makeä½¿ç”¨çš„make fileã€‚</p>
<p>ç”Ÿæˆçš„makefileä½¿ç”¨cmd.exeä½œä¸ºå®ƒçš„shellã€‚ç”Ÿæˆå®ƒä»¬ä¸éœ€è¦msysæˆ–è€…unix shellã€‚<br>NMake Makefiles: ç”ŸæˆNMake makefileã€‚<br>NMake Makefiles JOM: ç”ŸæˆJOM makefileã€‚<br>Unix Makefiles: ç”Ÿæˆæ ‡å‡†çš„UNIX makefileã€‚</p>
<p>åœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆåˆ†å±‚çš„UNIX makefileã€‚ä»»ä½•æ ‡å‡†çš„UNIXé£æ ¼çš„makeç¨‹åºéƒ½å¯ä»¥é€šè¿‡é»˜è®¤çš„makeç›®æ ‡æ„å»ºå·¥ç¨‹ã€‚ç”Ÿæˆçš„makefileä¹Ÿæä¾›äº†installç›®æ ‡ã€‚<br>Visual Studio 10: ç”ŸæˆVisual Studio 10 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 10 Win64: ç”ŸæˆVisual Studio 10 Win64 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 6: ç”ŸæˆVisual Studio 6 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 7: ç”ŸæˆVisual Studio .NET 2002 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 7 .NET 2003: ç”ŸæˆVisual Studio .NET 2003å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 8 2005: ç”ŸæˆVisual Studio .NET 2005 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 8 2005 Win64: ç”ŸæˆVisual Studio .NET 2005 Win64å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 9 2008: ç”ŸæˆVisual Studio 9 2008 å·¥ç¨‹æ–‡ä»¶ã€‚<br>Visual Studio 9 2008 Win64: ç”ŸæˆVisual Studio 9 2008 Win64å·¥ç¨‹æ–‡ä»¶ã€‚<br>Watcom WMake: ç”ŸæˆWatcom WMake makefilesã€‚</p>
<p>CodeBlocks - MinGW Makefiles: ç”ŸæˆCodeBlockå·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä»¥åŠæ¯å±‚å­ç›®å½•ä¸‹ä¸ºCodeBlocksç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼Œç”Ÿæˆçš„CMakeList.txtçš„ç‰¹ç‚¹æ˜¯éƒ½åŒ…å«ä¸€ä¸ªPROJECT()è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<p>CodeBlocks - NMake Makefiles: ç”ŸæˆCodeBlockså·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä»¥åŠæ¯å±‚å­ç›®å½•ä¸‹ä¸ºCodeBlocksç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼Œç”Ÿæˆçš„CMakeList.txtçš„ç‰¹ç‚¹æ˜¯éƒ½åŒ…å«ä¸€ä¸ªPROJECT()è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<p>CodeBlocks - Unix Makefiles: ç”ŸæˆCodeBlockså·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä»¥åŠæ¯å±‚å­ç›®å½•ä¸‹ä¸ºCodeBlocksç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ï¼Œç”Ÿæˆçš„CMakeList.txtçš„ç‰¹ç‚¹æ˜¯éƒ½åŒ…å«ä¸€ä¸ªPROJECT()è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<p>Eclipse CDT4 - MinGW Makefiles: ç”ŸæˆEclipse CDT 4.0 å·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä¸‹ä¸ºEclipseç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ã€‚åœ¨è¿è¡Œæºç å¤–æ„å»ºæ—¶ï¼Œä¸€ä¸ªè¿æ¥åˆ°é¡¶å±‚æºç è·¯å¾„çš„èµ„æºæ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<p>Eclipse CDT4 - NMake Makefiles: ç”ŸæˆEclipse CDT 4.0 å·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä¸‹ä¸ºEclipseç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ã€‚åœ¨è¿è¡Œæºç å¤–æ„å»ºæ—¶ï¼Œä¸€ä¸ªè¿æ¥åˆ°é¡¶å±‚æºç è·¯å¾„çš„èµ„æºæ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<p>Eclipse CDT4 - Unix Makefiles: ç”ŸæˆEclipse CDT 4.0 å·¥ç¨‹æ–‡ä»¶ã€‚<br>åœ¨é¡¶å±‚ç›®å½•ä¸‹ä¸ºEclipseç”Ÿæˆå·¥ç¨‹æ–‡ä»¶ã€‚åœ¨è¿è¡Œæºç å¤–æ„å»ºæ—¶ï¼Œä¸€ä¸ªè¿æ¥åˆ°é¡¶å±‚æºç è·¯å¾„çš„èµ„æºæ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚é™¤æ­¤ä¹‹å¤–è¿˜ä¼šåœ¨æ„å»ºæ ‘ä¸Šç”Ÿæˆä¸€å¥—å±‚æ¬¡æ€§çš„makefileã€‚é€šè¿‡é»˜è®¤çš„makeç›®æ ‡ï¼Œæ­£ç¡®çš„makeç¨‹åºå¯ä»¥æ„å»ºè¿™ä¸ªå·¥ç¨‹ã€‚makefileè¿˜æä¾›äº†installç›®æ ‡ã€‚</p>
<h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><h2 id="æŒ‡å®š-cmake-çš„æœ€å°ç‰ˆæœ¬"><a href="#æŒ‡å®š-cmake-çš„æœ€å°ç‰ˆæœ¬" class="headerlink" title="æŒ‡å®š cmake çš„æœ€å°ç‰ˆæœ¬"></a>æŒ‡å®š cmake çš„æœ€å°ç‰ˆæœ¬</h2><pre class="line-numbers language-bash"><code class="language-bash">cmake_minimum_required<span class="token punctuation">(</span>VERSION 3.4.1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="è®¾ç½®é¡¹ç›®åç§°"><a href="#è®¾ç½®é¡¹ç›®åç§°" class="headerlink" title="è®¾ç½®é¡¹ç›®åç§°"></a>è®¾ç½®é¡¹ç›®åç§°</h2><pre class="line-numbers language-bash"><code class="language-bash">project<span class="token punctuation">(</span>demo<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="æŒ‡å®šç”Ÿæˆç±»å‹"><a href="#æŒ‡å®šç”Ÿæˆç±»å‹" class="headerlink" title="æŒ‡å®šç”Ÿæˆç±»å‹"></a>æŒ‡å®šç”Ÿæˆç±»å‹</h2><pre class="line-numbers language-bash"><code class="language-bash">add_executable<span class="token punctuation">(</span>demo demo.cpp<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</span>
add_library<span class="token punctuation">(</span>common util.cpp<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ç”Ÿæˆé™æ€åº“</span>
add_library<span class="token punctuation">(</span>common STATIC util.cpp<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ç”Ÿæˆé™æ€åº“</span>
add_library<span class="token punctuation">(</span>common SHARED util.cpp<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># ç”ŸæˆåŠ¨æ€åº“æˆ–å…±äº«åº“</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>åœ¨ <code>Linux</code> ä¸‹æ˜¯ï¼š</p>
<ul>
<li>demo</li>
<li>libcommon.a</li>
<li>libcommon.so</li>
</ul>
<p>åœ¨ <code>Windows</code> ä¸‹æ˜¯ï¼š</p>
<ul>
<li>demo.exe</li>
<li>common.lib</li>
<li>common.dll</li>
</ul>
<h2 id="æŒ‡å®šç¼–è¯‘åŒ…å«çš„æºæ–‡ä»¶"><a href="#æŒ‡å®šç¼–è¯‘åŒ…å«çš„æºæ–‡ä»¶" class="headerlink" title="æŒ‡å®šç¼–è¯‘åŒ…å«çš„æºæ–‡ä»¶"></a>æŒ‡å®šç¼–è¯‘åŒ…å«çš„æºæ–‡ä»¶</h2><p>aux_source_directory(dir VAR) æŸ¥æ‰¾æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰çš„æºä»£ç æ–‡ä»¶å¹¶å°†åˆ—è¡¨å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#@1æŒ‡å®šæºæ–‡ä»¶</span>
add_library<span class="token punctuation">(</span>demo demo.cpp test.cpp util.cpp<span class="token punctuation">)</span> 

<span class="token comment" spellcheck="true">#@2è‡ªåŠ¨æ·»åŠ æ‰€æœ‰æºæ–‡ä»¶</span>
aux_source_directory<span class="token punctuation">(</span>. SRC_LIST<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æœç´¢ å½“å‰ç›®å½•ä¸‹ çš„æ‰€æœ‰æºæ–‡ä»¶ï¼Œå¹¶å‚¨å­˜åˆ°å˜é‡ SRC_LIST ä¸­</span>
add_library<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@3è‡ªå®šä¹‰æœç´¢è§„åˆ™</span>
file<span class="token punctuation">(</span>GLOB SRC_LIST <span class="token string">"*.cpp"</span> <span class="token string">"protocol/*.cpp"</span><span class="token punctuation">)</span>
add_library<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#or</span>
file<span class="token punctuation">(</span>GLOB SRC_LIST <span class="token string">"*.cpp"</span><span class="token punctuation">)</span>
file<span class="token punctuation">(</span>GLOB SRC_PROTOCOL_LIST <span class="token string">"protocol/*.cpp"</span><span class="token punctuation">)</span>
add_library<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span> <span class="token variable">${SRC_PROTOCOL_LIST}</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">#or</span>
aux_source_directory<span class="token punctuation">(</span>. SRC_LIST<span class="token punctuation">)</span>
aux_source_directory<span class="token punctuation">(</span>protocol SRC_PROTOCOL_LIST<span class="token punctuation">)</span>
add_library<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span> <span class="token variable">${SRC_PROTOCOL_LIST}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æŸ¥æ‰¾æŒ‡å®šçš„åº“æ–‡ä»¶"><a href="#æŸ¥æ‰¾æŒ‡å®šçš„åº“æ–‡ä»¶" class="headerlink" title="æŸ¥æ‰¾æŒ‡å®šçš„åº“æ–‡ä»¶"></a>æŸ¥æ‰¾æŒ‡å®šçš„åº“æ–‡ä»¶</h2><p>find_library(VAR name path)æŸ¥æ‰¾åˆ°æŒ‡å®šçš„é¢„ç¼–è¯‘åº“ï¼Œå¹¶å°†å®ƒçš„è·¯å¾„å­˜å‚¨åœ¨å˜é‡ä¸­ã€‚<br>é»˜è®¤çš„æœç´¢è·¯å¾„ä¸º cmake åŒ…å«çš„ç³»ç»Ÿåº“ï¼Œå› æ­¤å¦‚æœæ˜¯ NDK çš„å…¬å…±åº“åªéœ€è¦æŒ‡å®šåº“çš„ name å³å¯ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash">find_library<span class="token punctuation">(</span> <span class="token comment" spellcheck="true"># Sets the name of the path variable.</span>
              log-lib

              <span class="token comment" spellcheck="true"># Specifies the name of the NDK library that</span>
              <span class="token comment" spellcheck="true"># you want CMake to locate.</span>
              log <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="è®¾ç½®åŒ…å«çš„ç›®å½•"><a href="#è®¾ç½®åŒ…å«çš„ç›®å½•" class="headerlink" title="è®¾ç½®åŒ…å«çš„ç›®å½•"></a>è®¾ç½®åŒ…å«çš„ç›®å½•</h2><pre class="line-numbers language-bash"><code class="language-bash">include_directories<span class="token punctuation">(</span>
    <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>
    <span class="token variable">${CMAKE_CURRENT_BINARY_DIR}</span>
    <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/include
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Linux ä¸‹è¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¾ç½®åŒ…å«çš„ç›®å½•</p>
<pre class="line-numbers language-bash"><code class="language-bash">set<span class="token punctuation">(</span>CMAKE_CXX_FLAGS <span class="token string">"<span class="token variable">${CMAKE_CXX_FLAGS}</span> -I<span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="è®¾ç½®é“¾æ¥åº“æœç´¢ç›®å½•"><a href="#è®¾ç½®é“¾æ¥åº“æœç´¢ç›®å½•" class="headerlink" title="è®¾ç½®é“¾æ¥åº“æœç´¢ç›®å½•"></a>è®¾ç½®é“¾æ¥åº“æœç´¢ç›®å½•</h2><pre class="line-numbers language-bash"><code class="language-bash">link_directories<span class="token punctuation">(</span>
    <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/libs
<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Linux ä¸‹è¿˜å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼è®¾ç½®åŒ…å«çš„ç›®å½•</p>
<pre class="line-numbers language-bash"><code class="language-bash">set<span class="token punctuation">(</span>CMAKE_CXX_FLAGS <span class="token string">"<span class="token variable">${CMAKE_CXX_FLAGS}</span> -L<span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/libs"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="è®¾ç½®-target-å·¥ç¨‹éœ€è¦é“¾æ¥çš„åº“"><a href="#è®¾ç½®-target-å·¥ç¨‹éœ€è¦é“¾æ¥çš„åº“" class="headerlink" title="è®¾ç½® target å·¥ç¨‹éœ€è¦é“¾æ¥çš„åº“"></a>è®¾ç½® target å·¥ç¨‹éœ€è¦é“¾æ¥çš„åº“</h2><pre class="line-numbers language-bash"><code class="language-bash">target_link_libraries<span class="token punctuation">(</span> <span class="token comment" spellcheck="true"># ç›®æ ‡åº“</span>
                       demo

                       <span class="token comment" spellcheck="true"># ç›®æ ‡åº“éœ€è¦é“¾æ¥çš„åº“</span>
                       <span class="token comment" spellcheck="true"># log-lib æ˜¯ä¸Šé¢ find_library æŒ‡å®šçš„å˜é‡å</span>
                       <span class="token variable">${log-lib}</span> <span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åœ¨ Windows ä¸‹ï¼Œç³»ç»Ÿä¼šæ ¹æ®é“¾æ¥åº“ç›®å½•ï¼Œæœç´¢xxx.lib æ–‡ä»¶ï¼ŒLinux ä¸‹ä¼šæœç´¢ xxx.so æˆ–è€… xxx.a æ–‡ä»¶ï¼Œå¦‚æœéƒ½å­˜åœ¨ä¼šä¼˜å…ˆé“¾æ¥åŠ¨æ€åº“ï¼ˆso åç¼€ï¼‰ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#@1æŒ‡å®šé“¾æ¥åŠ¨æ€åº“æˆ–é™æ€åº“</span>
target_link_libraries<span class="token punctuation">(</span>demo libface.a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é“¾æ¥libface.a</span>
target_link_libraries<span class="token punctuation">(</span>demo libface.so<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># é“¾æ¥libface.so</span>

<span class="token comment" spellcheck="true">#@2æŒ‡å®šå…¨è·¯å¾„</span>
target_link_libraries<span class="token punctuation">(</span>demo <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/libs/libface.a<span class="token punctuation">)</span>
target_link_libraries<span class="token punctuation">(</span>demo <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/libs/libface.so<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@3æŒ‡å®šé“¾æ¥å¤šä¸ªåº“</span>
target_link_libraries<span class="token punctuation">(</span>demo
    <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/libs/libface.a
    boost_system.a
    boost_thread
    pthread<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="è®¾ç½®å˜é‡"><a href="#è®¾ç½®å˜é‡" class="headerlink" title="è®¾ç½®å˜é‡"></a>è®¾ç½®å˜é‡</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#@1set ç›´æ¥è®¾ç½®å˜é‡çš„å€¼</span>
set<span class="token punctuation">(</span>SRC_LIST main.cpp test.cpp<span class="token punctuation">)</span>
add_executable<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@2set è¿½åŠ è®¾ç½®å˜é‡çš„å€¼</span>
set<span class="token punctuation">(</span>SRC_LIST main.cpp<span class="token punctuation">)</span>
set<span class="token punctuation">(</span>SRC_LIST <span class="token variable">${SRC_LIST}</span> test.cpp<span class="token punctuation">)</span>
add_executable<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@3list è¿½åŠ æˆ–è€…åˆ é™¤å˜é‡çš„å€¼</span>
set<span class="token punctuation">(</span>SRC_LIST main.cpp<span class="token punctuation">)</span>
list<span class="token punctuation">(</span>APPEND SRC_LIST test.cpp<span class="token punctuation">)</span>
list<span class="token punctuation">(</span>REMOVE_ITEM SRC_LIST main.cpp<span class="token punctuation">)</span>
add_executable<span class="token punctuation">(</span>demo <span class="token variable">${SRC_LIST}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æ¡ä»¶æ§åˆ¶"><a href="#æ¡ä»¶æ§åˆ¶" class="headerlink" title="æ¡ä»¶æ§åˆ¶"></a>æ¡ä»¶æ§åˆ¶</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#@1é€»è¾‘åˆ¤æ–­å’Œæ¯”è¾ƒï¼š</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span>ï¼šexpression ä¸ä¸ºç©ºï¼ˆ0,N,NO,OFF,FALSE,NOTFOUNDï¼‰æ—¶ä¸ºçœŸ
<span class="token keyword">if</span> <span class="token punctuation">(</span>not exp<span class="token punctuation">)</span>ï¼šä¸ä¸Šé¢ç›¸å
<span class="token keyword">if</span> <span class="token punctuation">(</span>var1 AND var2<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>var1 OR var2<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>COMMAND cmd<span class="token punctuation">)</span>ï¼šå¦‚æœ cmd ç¡®å®æ˜¯å‘½ä»¤å¹¶å¯è°ƒç”¨ä¸ºçœŸ
<span class="token keyword">if</span> <span class="token punctuation">(</span>EXISTS dir<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>EXISTS file<span class="token punctuation">)</span>ï¼šå¦‚æœç›®å½•æˆ–æ–‡ä»¶å­˜åœ¨ä¸ºçœŸ
<span class="token keyword">if</span> <span class="token punctuation">(</span>file1 IS_NEWER_THAN file2<span class="token punctuation">)</span>ï¼šå½“ file1 æ¯” file2 æ–°ï¼Œæˆ– file1/file2 ä¸­æœ‰ä¸€ä¸ªä¸å­˜åœ¨æ—¶ä¸ºçœŸï¼Œæ–‡ä»¶åéœ€ä½¿ç”¨å…¨è·¯å¾„
<span class="token keyword">if</span> <span class="token punctuation">(</span>IS_DIRECTORY dir<span class="token punctuation">)</span>ï¼šå½“ <span class="token function">dir</span> æ˜¯ç›®å½•æ—¶ä¸ºçœŸ
<span class="token keyword">if</span> <span class="token punctuation">(</span>DEFINED var<span class="token punctuation">)</span>ï¼šå¦‚æœå˜é‡è¢«å®šä¹‰ä¸ºçœŸ
<span class="token keyword">if</span> <span class="token punctuation">(</span>var MATCHES regex<span class="token punctuation">)</span>ï¼šç»™å®šçš„å˜é‡æˆ–è€…å­—ç¬¦ä¸²èƒ½å¤ŸåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ regex æ—¶ä¸ºçœŸï¼Œæ­¤å¤„ var å¯ä»¥ç”¨ var åï¼Œä¹Ÿå¯ä»¥ç”¨ <span class="token variable">${var}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>string MATCHES regex<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@2æ•°å­—æ¯”è¾ƒï¼š</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable LESS number<span class="token punctuation">)</span>ï¼šLESS å°äº
<span class="token keyword">if</span> <span class="token punctuation">(</span>string LESS number<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable GREATER number<span class="token punctuation">)</span>ï¼šGREATER å¤§äº
<span class="token keyword">if</span> <span class="token punctuation">(</span>string GREATER number<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable EQUAL number<span class="token punctuation">)</span>ï¼šEQUAL ç­‰äº
<span class="token keyword">if</span> <span class="token punctuation">(</span>string EQUAL number<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@3</span>
å­—æ¯è¡¨é¡ºåºæ¯”è¾ƒï¼š
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable STRLESS string<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>string STRLESS string<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable STRGREATER string<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>string STRGREATER string<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>variable STREQUAL string<span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>string STREQUAL string<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@4 whileâ€¦endwhile</span>
while<span class="token punctuation">(</span>condition<span class="token punctuation">)</span>
    <span class="token punctuation">..</span>.
endwhile<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">#@5 foreachâ€¦endforeach</span>

foreach<span class="token punctuation">(</span>loop_var RANGE start stop <span class="token punctuation">[</span>step<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">..</span>.
endforeach<span class="token punctuation">(</span>loop_var<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><pre class="line-numbers language-bash"><code class="language-bash">message<span class="token punctuation">(</span><span class="token variable">${PROJECT_SOURCE_DIR}</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span><span class="token string">"build with debug mode"</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span>WARNING <span class="token string">"this is warnning message"</span><span class="token punctuation">)</span>
message<span class="token punctuation">(</span>FATAL_ERROR <span class="token string">"this build has many error"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># FATAL_ERROR ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="åŒ…å«å…¶å®ƒ-cmake-æ–‡ä»¶"><a href="#åŒ…å«å…¶å®ƒ-cmake-æ–‡ä»¶" class="headerlink" title="åŒ…å«å…¶å®ƒ cmake æ–‡ä»¶"></a>åŒ…å«å…¶å®ƒ cmake æ–‡ä»¶</h2><pre class="line-numbers language-bash"><code class="language-bash">include<span class="token punctuation">(</span>./common.cmake<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># æŒ‡å®šåŒ…å«æ–‡ä»¶çš„å…¨è·¯å¾„</span>
include<span class="token punctuation">(</span>def<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># åœ¨æœç´¢è·¯å¾„ä¸­æœç´¢def.cmakeæ–‡ä»¶</span>
set<span class="token punctuation">(</span>CMAKE_MODULE_PATH <span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/cmake<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># è®¾ç½®includeçš„æœç´¢è·¯å¾„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><h2 id="é¢„å®šä¹‰å˜é‡"><a href="#é¢„å®šä¹‰å˜é‡" class="headerlink" title="é¢„å®šä¹‰å˜é‡"></a>é¢„å®šä¹‰å˜é‡</h2><pre class="line-numbers language-bash"><code class="language-bash">PROJECT_SOURCE_DIR <span class="token comment" spellcheck="true">#å·¥ç¨‹çš„æ ¹ç›®å½•</span>
PROJECT_BINARY_DIR <span class="token comment" spellcheck="true">#è¿è¡Œ cmake å‘½ä»¤çš„ç›®å½•ï¼Œé€šå¸¸æ˜¯ ${PROJECT_SOURCE_DIR}/build</span>
PROJECT_NAME <span class="token comment" spellcheck="true">#è¿”å›é€šè¿‡ project å‘½ä»¤å®šä¹‰çš„é¡¹ç›®åç§°</span>
CMAKE_CURRENT_SOURCE_DIR <span class="token comment" spellcheck="true">#å½“å‰å¤„ç†çš„ CMakeLists.txt æ‰€åœ¨çš„è·¯å¾„</span>
CMAKE_CURRENT_BINARY_DIR <span class="token comment" spellcheck="true">#target ç¼–è¯‘ç›®å½•</span>
CMAKE_CURRENT_LIST_DIR <span class="token comment" spellcheck="true">#CMakeLists.txt çš„å®Œæ•´è·¯å¾„</span>
CMAKE_CURRENT_LIST_LINE <span class="token comment" spellcheck="true">#å½“å‰æ‰€åœ¨çš„è¡Œ</span>
CMAKE_MODULE_PATH <span class="token comment" spellcheck="true">#å®šä¹‰è‡ªå·±çš„ cmake æ¨¡å—æ‰€åœ¨çš„è·¯å¾„ï¼ŒSET(CMAKE_MODULE_PATH ${PROJECT_SOURCE_DIR}/cmake)ï¼Œç„¶åå¯ä»¥ç”¨INCLUDEå‘½ä»¤æ¥è°ƒç”¨è‡ªå·±çš„æ¨¡å—</span>
EXECUTABLE_OUTPUT_PATH <span class="token comment" spellcheck="true">#é‡æ–°å®šä¹‰ç›®æ ‡äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„å­˜æ”¾ä½ç½®</span>
LIBRARY_OUTPUT_PATH <span class="token comment" spellcheck="true">#é‡æ–°å®šä¹‰ç›®æ ‡é“¾æ¥åº“æ–‡ä»¶çš„å­˜æ”¾ä½ç½®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ä½¿ç”¨ç¯å¢ƒå˜é‡</span>
<span class="token variable">$ENV</span><span class="token punctuation">{</span>Name<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">#å†™å…¥ç¯å¢ƒå˜é‡</span>
set<span class="token punctuation">(</span>ENV<span class="token punctuation">{</span>Name<span class="token punctuation">}</span> value<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ç³»ç»Ÿä¿¡æ¯"><a href="#ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="ç³»ç»Ÿä¿¡æ¯"></a>ç³»ç»Ÿä¿¡æ¯</h2><pre class="line-numbers language-bash"><code class="language-bash">Â­CMAKE_MAJOR_VERSION <span class="token comment" spellcheck="true">#cmake ä¸»ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ 3.4.1 ä¸­çš„ 3</span>
Â­CMAKE_MINOR_VERSION <span class="token comment" spellcheck="true">#cmake æ¬¡ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ 3.4.1 ä¸­çš„ 4</span>
Â­CMAKE_PATCH_VERSION <span class="token comment" spellcheck="true">#cmake è¡¥ä¸ç­‰çº§ï¼Œæ¯”å¦‚ 3.4.1 ä¸­çš„ 1</span>
Â­CMAKE_SYSTEM <span class="token comment" spellcheck="true">#ç³»ç»Ÿåç§°ï¼Œæ¯”å¦‚ Linux-Â­2.6.22</span>
Â­CMAKE_SYSTEM_NAME <span class="token comment" spellcheck="true">#ä¸åŒ…å«ç‰ˆæœ¬çš„ç³»ç»Ÿåï¼Œæ¯”å¦‚ Linux</span>
Â­CMAKE_SYSTEM_VERSION <span class="token comment" spellcheck="true">#ç³»ç»Ÿç‰ˆæœ¬ï¼Œæ¯”å¦‚ 2.6.22</span>
Â­CMAKE_SYSTEM_PROCESSOR <span class="token comment" spellcheck="true">#å¤„ç†å™¨åç§°ï¼Œæ¯”å¦‚ i686</span>
Â­UNIX <span class="token comment" spellcheck="true">#åœ¨æ‰€æœ‰çš„ç±» UNIX å¹³å°ä¸‹è¯¥å€¼ä¸º TRUEï¼ŒåŒ…æ‹¬ OS X å’Œ cygwin</span>
Â­WIN32 <span class="token comment" spellcheck="true">#åœ¨æ‰€æœ‰çš„ win32 å¹³å°ä¸‹è¯¥å€¼ä¸º TRUEï¼ŒåŒ…æ‹¬ cygwin</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ä¸»è¦å¼€å…³é€‰é¡¹"><a href="#ä¸»è¦å¼€å…³é€‰é¡¹" class="headerlink" title="ä¸»è¦å¼€å…³é€‰é¡¹"></a>ä¸»è¦å¼€å…³é€‰é¡¹</h2><pre class="line-numbers language-bash"><code class="language-bash">BUILD_SHARED_LIBS <span class="token comment" spellcheck="true">#è¿™ä¸ªå¼€å…³ç”¨æ¥æ§åˆ¶é»˜è®¤çš„åº“ç¼–è¯‘æ–¹å¼ï¼Œå¦‚æœä¸è¿›è¡Œè®¾ç½®ï¼Œä½¿ç”¨ add_library åˆæ²¡æœ‰æŒ‡å®šåº“ç±»å‹çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤ç¼–è¯‘ç”Ÿæˆçš„åº“éƒ½æ˜¯é™æ€åº“ã€‚å¦‚æœ set(BUILD_SHARED_LIBS ON) åï¼Œé»˜è®¤ç”Ÿæˆçš„ä¸ºåŠ¨æ€åº“</span>
CMAKE_C_FLAGS <span class="token comment" spellcheck="true">#è®¾ç½® C ç¼–è¯‘é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤ add_definitions() æ·»åŠ </span>
CMAKE_CXX_FLAGS <span class="token comment" spellcheck="true">#è®¾ç½® C++ ç¼–è¯‘é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤ add_definitions() æ·»åŠ </span>

add_definitions<span class="token punctuation">(</span>-DENABLE_DEBUG -DABC<span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># å‚æ•°ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="ä¾‹ç¨‹"><a href="#ä¾‹ç¨‹" class="headerlink" title="ä¾‹ç¨‹"></a>ä¾‹ç¨‹</h1><h2 id="å•ä¸ªæºæ–‡ä»¶"><a href="#å•ä¸ªæºæ–‡ä»¶" class="headerlink" title="å•ä¸ªæºæ–‡ä»¶"></a>å•ä¸ªæºæ–‡ä»¶</h2><p>å•ä¸ªæºæ–‡ä»¶æ ¹æœ¬ä¸éœ€è¦makefileï¼Œç›´æ¥å°±èƒ½ç¼–è¯‘ï¼Œå› ä¸ºä¸éœ€è¦é“¾æ¥å…¶ä»–ä»£ç ã€‚å› æ­¤è¿™é‡Œçš„ç›®çš„æ˜¯ç”±æµ…å…¥æ·±çš„ä»‹ç»cmakeã€‚<br>è¿™æ˜¯ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„æ–‡ä»¶ã€‚<br>main.cc</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>
<span class="token comment" spellcheck="true">/**
 * power - Calculate the power of number.
 * @param base: Base value.
 * @param exponent: Exponent value.
 *
 * @return base raised to the power exponent.
 */</span>
<span class="token keyword">double</span> <span class="token function">power</span><span class="token punctuation">(</span><span class="token keyword">double</span> base<span class="token punctuation">,</span> <span class="token keyword">int</span> exponent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> base<span class="token punctuation">;</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>exponent <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> exponent<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        result <span class="token operator">=</span> result <span class="token operator">*</span> base<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Usage: %s base exponent \n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">double</span> base <span class="token operator">=</span> <span class="token function">atof</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> exponent <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token function">power</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%g ^ %d is %g\n"</span><span class="token punctuation">,</span> base<span class="token punctuation">,</span> exponent<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CMakeLists.txt</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span>
cmake_minimum_required <span class="token punctuation">(</span>VERSION 2.8<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># é¡¹ç›®åç§°</span>
project <span class="token punctuation">(</span>Demo1<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æŒ‡å®šç”Ÿæˆç›®æ ‡,Demoä¸ºç›®æ ‡åç§°ï¼Œmain.ccä¸ºæºæ–‡ä»¶åç§°</span>
add_executable<span class="token punctuation">(</span>Demo main.cc<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ç¼–è¯‘ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">cmake <span class="token keyword">.</span>
<span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>æœ€åå¯å¾—åˆ° Demo1 å¯æ‰§è¡Œæ–‡ä»¶</p>
<pre class="line-numbers language-bash"><code class="language-bash">./Demo1 5 4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>5 ^ 4 is 625</code></pre><h2 id="ç¼–è¯‘å¤šæ–‡ä»¶å¤šç›®å½•"><a href="#ç¼–è¯‘å¤šæ–‡ä»¶å¤šç›®å½•" class="headerlink" title="ç¼–è¯‘å¤šæ–‡ä»¶å¤šç›®å½•"></a>ç¼–è¯‘å¤šæ–‡ä»¶å¤šç›®å½•</h2><p>æœ¬å°èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo3" target="_blank" rel="noopener">Demo3</a>ã€‚</p>
<p>ç›®å½•ç»“æ„</p>
<pre><code>./Demo3
    |
    +--- main.cc
    |
    +--- math/
          |
          +--- MathFunctions.cc
          |
          +--- MathFunctions.h</code></pre><p>å¯¹äºè¿™ç§æƒ…å†µï¼Œéœ€è¦åˆ†åˆ«åœ¨é¡¹ç›®æ ¹ç›®å½• Demo3 å’Œ math ç›®å½•é‡Œå„ç¼–å†™ä¸€ä¸ª CMakeLists.txt æ–‡ä»¶ã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°† math ç›®å½•é‡Œçš„æ–‡ä»¶ç¼–è¯‘æˆé™æ€åº“å†ç”± main å‡½æ•°è°ƒç”¨ã€‚</p>
<p>æ ¹ç›®å½•ä¸­çš„ CMakeLists.txt ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span>
cmake_minimum_required <span class="token punctuation">(</span>VERSION 2.8<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># é¡¹ç›®ä¿¡æ¯</span>
project <span class="token punctuation">(</span>Demo3<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token comment" spellcheck="true"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span>
aux_source_directory<span class="token punctuation">(</span>. DIR_SRCS<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æ·»åŠ  math å­ç›®å½•</span>
add_subdirectory<span class="token punctuation">(</span>math<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æŒ‡å®šç”Ÿæˆç›®æ ‡ </span>
add_executable<span class="token punctuation">(</span>Demo main.cc<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æ·»åŠ é“¾æ¥åº“</span>
target_link_libraries<span class="token punctuation">(</span>Demo MathFunctions<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>è¯¥æ–‡ä»¶æ·»åŠ äº†ä¸‹é¢çš„å†…å®¹: ç¬¬3è¡Œï¼Œä½¿ç”¨å‘½ä»¤ add_subdirectory æŒ‡æ˜æœ¬é¡¹ç›®åŒ…å«ä¸€ä¸ªå­ç›®å½• mathï¼Œè¿™æ · math ç›®å½•ä¸‹çš„ CMakeLists.txt æ–‡ä»¶å’Œæºä»£ç ä¹Ÿä¼šè¢«å¤„ç† ã€‚ç¬¬6è¡Œï¼Œä½¿ç”¨å‘½ä»¤ target_link_libraries æŒ‡æ˜å¯æ‰§è¡Œæ–‡ä»¶ main éœ€è¦è¿æ¥ä¸€ä¸ªåä¸º MathFunctions çš„é“¾æ¥åº“ ã€‚</p>
<p>å­ç›®å½•ä¸­çš„ CMakeLists.txtï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token comment" spellcheck="true"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_LIB_SRCS å˜é‡</span>
aux_source_directory<span class="token punctuation">(</span>. DIR_LIB_SRCS<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># ç”Ÿæˆé“¾æ¥åº“</span>
add_library <span class="token punctuation">(</span>MathFunctions <span class="token variable">${DIR_LIB_SRCS}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>åœ¨è¯¥æ–‡ä»¶ä¸­ä½¿ç”¨å‘½ä»¤ add_library å°† src ç›®å½•ä¸­çš„æºæ–‡ä»¶ç¼–è¯‘ä¸ºé™æ€é“¾æ¥åº“ã€‚</p>
<h2 id="è®¾ç½®å¯é€‰åº“"><a href="#è®¾ç½®å¯é€‰åº“" class="headerlink" title="è®¾ç½®å¯é€‰åº“"></a>è®¾ç½®å¯é€‰åº“</h2><p>ä¾‹å¦‚ï¼Œå¯ä»¥å°† MathFunctions åº“è®¾ä¸ºä¸€ä¸ªå¯é€‰çš„åº“ï¼Œå¦‚æœè¯¥é€‰é¡¹ä¸º ON ï¼Œå°±ä½¿ç”¨è¯¥åº“å®šä¹‰çš„æ•°å­¦å‡½æ•°æ¥è¿›è¡Œè¿ç®—ã€‚å¦åˆ™å°±è°ƒç”¨æ ‡å‡†åº“ä¸­çš„æ•°å­¦å‡½æ•°åº“ã€‚</p>
<p>æœ¬èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo4" target="_blank" rel="noopener">Demo4</a>ã€‚<br>CMake å…è®¸ä¸ºé¡¹ç›®å¢åŠ ç¼–è¯‘é€‰é¡¹ï¼Œä»è€Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„ç¯å¢ƒå’Œéœ€æ±‚é€‰æ‹©æœ€åˆé€‚çš„ç¼–è¯‘æ–¹æ¡ˆã€‚<br>ä¾‹å¦‚ï¼Œå¯ä»¥å°† MathFunctions åº“è®¾ä¸ºä¸€ä¸ªå¯é€‰çš„åº“ï¼Œå¦‚æœè¯¥é€‰é¡¹ä¸º ON ï¼Œå°±ä½¿ç”¨è¯¥åº“å®šä¹‰çš„æ•°å­¦å‡½æ•°æ¥è¿›è¡Œè¿ç®—ã€‚å¦åˆ™å°±è°ƒç”¨æ ‡å‡†åº“ä¸­çš„æ•°å­¦å‡½æ•°åº“ã€‚</p>
<h2 id="ä¿®æ”¹-CMakeLists-æ–‡ä»¶"><a href="#ä¿®æ”¹-CMakeLists-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ CMakeLists æ–‡ä»¶"></a>ä¿®æ”¹ CMakeLists æ–‡ä»¶</h2><p>æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€æ­¥æ˜¯åœ¨é¡¶å±‚çš„ CMakeLists.txt æ–‡ä»¶ä¸­æ·»åŠ è¯¥é€‰é¡¹ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># CMake æœ€ä½ç‰ˆæœ¬å·è¦æ±‚</span>
cmake_minimum_required <span class="token punctuation">(</span>VERSION 2.8<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># é¡¹ç›®ä¿¡æ¯</span>
project <span class="token punctuation">(</span>Demo4<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># åŠ å…¥ä¸€ä¸ªé…ç½®å¤´æ–‡ä»¶ï¼Œç”¨äºå¤„ç† CMake å¯¹æºç çš„è®¾ç½®</span>
configure_file <span class="token punctuation">(</span>
  <span class="token string">"<span class="token variable">${PROJECT_SOURCE_DIR}</span>/config.h.in"</span>
  <span class="token string">"<span class="token variable">${PROJECT_BINARY_DIR}</span>/config.h"</span>
  <span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æ˜¯å¦ä½¿ç”¨è‡ªå·±çš„ MathFunctions åº“</span>
option <span class="token punctuation">(</span>USE_MYMATH
       <span class="token string">"Use provided math implementation"</span> ON<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æ˜¯å¦åŠ å…¥ MathFunctions åº“</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>USE_MYMATH<span class="token punctuation">)</span>
  include_directories <span class="token punctuation">(</span><span class="token string">"<span class="token variable">${PROJECT_SOURCE_DIR}</span>/math"</span><span class="token punctuation">)</span>
  add_subdirectory <span class="token punctuation">(</span>math<span class="token punctuation">)</span>  
  <span class="token keyword">set</span> <span class="token punctuation">(</span>EXTRA_LIBS <span class="token variable">${EXTRA_LIBS}</span> MathFunctions<span class="token punctuation">)</span>
endif <span class="token punctuation">(</span>USE_MYMATH<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æºæ–‡ä»¶</span>
<span class="token comment" spellcheck="true"># å¹¶å°†åç§°ä¿å­˜åˆ° DIR_SRCS å˜é‡</span>
aux_source_directory<span class="token punctuation">(</span>. DIR_SRCS<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æŒ‡å®šç”Ÿæˆç›®æ ‡</span>
add_executable<span class="token punctuation">(</span>Demo <span class="token variable">${DIR_SRCS}</span><span class="token punctuation">)</span>
target_link_libraries <span class="token punctuation">(</span>Demo  <span class="token variable">${EXTRA_LIBS}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…¶ä¸­ï¼š</p>
<p>1.ç¬¬7è¡Œçš„ configure_file å‘½ä»¤ç”¨äºåŠ å…¥ä¸€ä¸ªé…ç½®å¤´æ–‡ä»¶ config.h ï¼Œè¿™ä¸ªæ–‡ä»¶ç”± CMake ä» config.h.in ç”Ÿæˆï¼Œé€šè¿‡è¿™æ ·çš„æœºåˆ¶ï¼Œå°†å¯ä»¥é€šè¿‡é¢„å®šä¹‰ä¸€äº›å‚æ•°å’Œå˜é‡æ¥æ§åˆ¶ä»£ç çš„ç”Ÿæˆã€‚<br>2.ç¬¬13è¡Œçš„ option å‘½ä»¤æ·»åŠ äº†ä¸€ä¸ª USE_MYMATH é€‰é¡¹ï¼Œå¹¶ä¸”é»˜è®¤å€¼ä¸º ON ã€‚<br>3.ç¬¬17è¡Œæ ¹æ® USE_MYMATH å˜é‡çš„å€¼æ¥å†³å®šæ˜¯å¦ä½¿ç”¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ MathFunctions åº“ã€‚</p>
<h2 id="ä¿®æ”¹-main-cc-æ–‡ä»¶"><a href="#ä¿®æ”¹-main-cc-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ main.cc æ–‡ä»¶"></a>ä¿®æ”¹ main.cc æ–‡ä»¶</h2><p>ä¹‹åä¿®æ”¹ main.cc æ–‡ä»¶ï¼Œè®©å…¶æ ¹æ® USE_MYMATH çš„é¢„å®šä¹‰å€¼æ¥å†³å®šæ˜¯å¦è°ƒç”¨æ ‡å‡†åº“è¿˜æ˜¯ MathFunctions åº“ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#include </span>
<span class="token comment" spellcheck="true">#include </span>
<span class="token comment" spellcheck="true">#include "config.h"</span>
<span class="token comment" spellcheck="true">#ifdef USE_MYMATH</span>
  <span class="token comment" spellcheck="true">#include "math/MathFunctions.h"</span>
<span class="token comment" spellcheck="true">#else</span>
  <span class="token comment" spellcheck="true">#include </span>
<span class="token comment" spellcheck="true">#endif</span>
int main<span class="token punctuation">(</span>int argc, char *argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> 3<span class="token punctuation">)</span><span class="token punctuation">{</span>
        printf<span class="token punctuation">(</span><span class="token string">"Usage: %s base exponent \n"</span>, argv<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> 1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    double base <span class="token operator">=</span> atof<span class="token punctuation">(</span>argv<span class="token punctuation">[</span>1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    int exponent <span class="token operator">=</span> atoi<span class="token punctuation">(</span>argv<span class="token punctuation">[</span>2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">#ifdef USE_MYMATH</span>
    printf<span class="token punctuation">(</span><span class="token string">"Now we use our own Math library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    double result <span class="token operator">=</span> power<span class="token punctuation">(</span>base, exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#else</span>
    printf<span class="token punctuation">(</span><span class="token string">"Now we use the standard library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    double result <span class="token operator">=</span> pow<span class="token punctuation">(</span>base, exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#endif</span>
    printf<span class="token punctuation">(</span><span class="token string">"%g ^ %d is %g\n"</span>, base, exponent, result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="ç¼–å†™-config-h-in-æ–‡ä»¶"><a href="#ç¼–å†™-config-h-in-æ–‡ä»¶" class="headerlink" title="ç¼–å†™ config.h.in æ–‡ä»¶"></a>ç¼–å†™ config.h.in æ–‡ä»¶</h2><p>ä¸Šé¢çš„ç¨‹åºå€¼å¾—æ³¨æ„çš„æ˜¯ç¬¬2è¡Œï¼Œè¿™é‡Œå¼•ç”¨äº†ä¸€ä¸ª config.h æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶é¢„å®šä¹‰äº† USE_MYMATH çš„å€¼ã€‚ä½†æˆ‘ä»¬å¹¶ä¸ç›´æ¥ç¼–å†™è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ä» CMakeLists.txt ä¸­å¯¼å…¥é…ç½®ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ª config.h.in æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#cmakedefine USE_MYMATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>è¿™æ · CMake ä¼šè‡ªåŠ¨æ ¹æ® CMakeLists é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®è‡ªåŠ¨ç”Ÿæˆ config.h æ–‡ä»¶ã€‚</p>
<h2 id="ç¼–è¯‘é¡¹ç›®"><a href="#ç¼–è¯‘é¡¹ç›®" class="headerlink" title="ç¼–è¯‘é¡¹ç›®"></a>ç¼–è¯‘é¡¹ç›®</h2><p>ç°åœ¨ç¼–è¯‘ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œä¸ºäº†ä¾¿äºäº¤äº’å¼çš„é€‰æ‹©è¯¥å˜é‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ ccmake å‘½ä»¤.</p>
<pre class="line-numbers language-bash"><code class="language-bash">ccmake <span class="token keyword">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ä»ä¸­å¯ä»¥æ‰¾åˆ°åˆšåˆšå®šä¹‰çš„ USE_MYMATH é€‰é¡¹ï¼ŒæŒ‰é”®ç›˜çš„æ–¹å‘é”®å¯ä»¥åœ¨ä¸åŒçš„é€‰é¡¹çª—å£é—´è·³è½¬ï¼ŒæŒ‰ä¸‹ enter é”®å¯ä»¥ä¿®æ”¹è¯¥é€‰é¡¹ã€‚ä¿®æ”¹å®Œæˆåå¯ä»¥æŒ‰ä¸‹ c é€‰é¡¹å®Œæˆé…ç½®ï¼Œä¹‹åå†æŒ‰ g é”®ç¡®è®¤ç”Ÿæˆ Makefile ã€‚ccmake çš„å…¶ä»–æ“ä½œå¯ä»¥å‚è€ƒçª—å£ä¸‹æ–¹ç»™å‡ºçš„æŒ‡ä»¤æç¤ºã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è¯•è¯•åˆ†åˆ«å°† USE_MYMATH è®¾ä¸º ON å’Œ OFF å¾—åˆ°çš„ç»“æœï¼š</p>
<p>USE_MYMATH ä¸º ON<br>è¿è¡Œç»“æœï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">./Demo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>Now we use our own MathFunctions library. 
 7 ^ 3 = 343.000000
 10 ^ 5 = 100000.000000
 2 ^ 10 = 1024.000000</code></pre><p>æ­¤æ—¶ config.h çš„å†…å®¹ä¸ºï¼š</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">define</span> USE_MYMATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>USE_MYMATH ä¸º OFF<br>è¿è¡Œç»“æœï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">./Demo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre><code>Now we use the standard library. 
 7 ^ 3 = 343.000000
 10 ^ 5 = 100000.000000
 2 ^ 10 = 1024.000000</code></pre><p>æ­¤æ—¶ config.h çš„å†…å®¹ä¸ºï¼š</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">/* #undef USE_MYMATH */</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h1 id="å®‰è£…å’Œæµ‹è¯•"><a href="#å®‰è£…å’Œæµ‹è¯•" class="headerlink" title="å®‰è£…å’Œæµ‹è¯•"></a>å®‰è£…å’Œæµ‹è¯•</h1><p>æœ¬èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo5" target="_blank" rel="noopener">Demo5</a>ã€‚</p>
<p>CMake ä¹Ÿå¯ä»¥æŒ‡å®šå®‰è£…è§„åˆ™ï¼Œä»¥åŠæ·»åŠ æµ‹è¯•ã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½åˆ†åˆ«å¯ä»¥é€šè¿‡åœ¨äº§ç”Ÿ Makefile åä½¿ç”¨ make install å’Œ make test æ¥æ‰§è¡Œã€‚åœ¨ä»¥å‰çš„ GNU Makefile é‡Œï¼Œä½ å¯èƒ½éœ€è¦ä¸ºæ­¤ç¼–å†™ install å’Œ test ä¸¤ä¸ªä¼ªç›®æ ‡å’Œç›¸åº”çš„è§„åˆ™ï¼Œä½†åœ¨ CMake é‡Œï¼Œè¿™æ ·çš„å·¥ä½œåŒæ ·åªéœ€è¦ç®€å•çš„è°ƒç”¨å‡ æ¡å‘½ä»¤ã€‚</p>
<h2 id="å®šåˆ¶å®‰è£…è§„åˆ™"><a href="#å®šåˆ¶å®‰è£…è§„åˆ™" class="headerlink" title="å®šåˆ¶å®‰è£…è§„åˆ™"></a>å®šåˆ¶å®‰è£…è§„åˆ™</h2><p>é¦–å…ˆå…ˆåœ¨ math/CMakeLists.txt æ–‡ä»¶é‡Œæ·»åŠ ä¸‹é¢ä¸¤è¡Œï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŒ‡å®š MathFunctions åº“çš„å®‰è£…è·¯å¾„</span>
<span class="token function">install</span> <span class="token punctuation">(</span>TARGETS MathFunctions DESTINATION bin<span class="token punctuation">)</span>
<span class="token function">install</span> <span class="token punctuation">(</span>FILES MathFunctions.h DESTINATION include<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>æŒ‡æ˜ MathFunctions åº“çš„å®‰è£…è·¯å¾„ã€‚ä¹‹ååŒæ ·ä¿®æ”¹æ ¹ç›®å½•çš„ CMakeLists æ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ ä¸‹é¢å‡ è¡Œï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æŒ‡å®šå®‰è£…è·¯å¾„</span>
<span class="token function">install</span> <span class="token punctuation">(</span>TARGETS Demo DESTINATION bin<span class="token punctuation">)</span>
<span class="token function">install</span> <span class="token punctuation">(</span>FILES <span class="token string">"<span class="token variable">${PROJECT_BINARY_DIR}</span>/config.h"</span>
         DESTINATION include<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>é€šè¿‡ä¸Šé¢çš„å®šåˆ¶ï¼Œç”Ÿæˆçš„ Demo æ–‡ä»¶å’Œ MathFunctions å‡½æ•°åº“ libMathFunctions.o æ–‡ä»¶å°†ä¼šè¢«å¤åˆ¶åˆ° /usr/local/bin ä¸­ï¼Œè€Œ MathFunctions.h å’Œç”Ÿæˆçš„ config.h æ–‡ä»¶åˆ™ä¼šè¢«å¤åˆ¶åˆ° /usr/local/include ä¸­ã€‚æˆ‘ä»¬å¯ä»¥éªŒè¯ä¸€ä¸‹:</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo5<span class="token punctuation">]</span>$ <span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token punctuation">[</span> 50%<span class="token punctuation">]</span> Built target MathFunctions
<span class="token punctuation">[</span>100%<span class="token punctuation">]</span> Built target Demo
Install the project<span class="token punctuation">..</span>.
-- Install configuration: <span class="token string">""</span>
-- Installing: /usr/local/bin/Demo
-- Installing: /usr/local/include/config.h
-- Installing: /usr/local/bin/libMathFunctions.a
-- Up-to-date: /usr/local/include/MathFunctions.h
<span class="token punctuation">[</span>ehome@xman Demo5<span class="token punctuation">]</span>$ <span class="token function">ls</span> /usr/local/bin
Demo  libMathFunctions.a
<span class="token punctuation">[</span>ehome@xman Demo5<span class="token punctuation">]</span>$ <span class="token function">ls</span> /usr/local/include
config.h  MathFunctions.h<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æ·»åŠ æµ‹è¯•"><a href="#æ·»åŠ æµ‹è¯•" class="headerlink" title="æ·»åŠ æµ‹è¯•"></a>æ·»åŠ æµ‹è¯•</h2><p>æ·»åŠ æµ‹è¯•åŒæ ·å¾ˆç®€å•ã€‚CMake æä¾›äº†ä¸€ä¸ªç§°ä¸º CTest çš„æµ‹è¯•å·¥å…·ã€‚æˆ‘ä»¬è¦åšçš„åªæ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ CMakeLists æ–‡ä»¶ä¸­è°ƒç”¨ä¸€ç³»åˆ—çš„ add_test å‘½ä»¤ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å¯ç”¨æµ‹è¯•</span>
enable_testing<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æµ‹è¯•ç¨‹åºæ˜¯å¦æˆåŠŸè¿è¡Œ</span>
add_test <span class="token punctuation">(</span>test_run Demo 5 2<span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æµ‹è¯•å¸®åŠ©ä¿¡æ¯æ˜¯å¦å¯ä»¥æ­£å¸¸æç¤º</span>
add_test <span class="token punctuation">(</span>test_usage Demo<span class="token punctuation">)</span>
set_tests_properties <span class="token punctuation">(</span>test_usage
  PROPERTIES PASS_REGULAR_EXPRESSION <span class="token string">"Usage: .* base exponent"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æµ‹è¯• 5 çš„å¹³æ–¹</span>
add_test <span class="token punctuation">(</span>test_5_2 Demo 5 2<span class="token punctuation">)</span>
set_tests_properties <span class="token punctuation">(</span>test_5_2
 PROPERTIES PASS_REGULAR_EXPRESSION <span class="token string">"is 25"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æµ‹è¯• 10 çš„ 5 æ¬¡æ–¹</span>
add_test <span class="token punctuation">(</span>test_10_5 Demo 10 5<span class="token punctuation">)</span>
set_tests_properties <span class="token punctuation">(</span>test_10_5
 PROPERTIES PASS_REGULAR_EXPRESSION <span class="token string">"is 100000"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true"># æµ‹è¯• 2 çš„ 10 æ¬¡æ–¹</span>
add_test <span class="token punctuation">(</span>test_2_10 Demo 2 10<span class="token punctuation">)</span>
set_tests_properties <span class="token punctuation">(</span>test_2_10
 PROPERTIES PASS_REGULAR_EXPRESSION <span class="token string">"is 1024"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸Šé¢çš„ä»£ç åŒ…å«äº†å››ä¸ªæµ‹è¯•ã€‚ç¬¬ä¸€ä¸ªæµ‹è¯• test_run ç”¨æ¥æµ‹è¯•ç¨‹åºæ˜¯å¦æˆåŠŸè¿è¡Œå¹¶è¿”å› 0 å€¼ã€‚å‰©ä¸‹çš„ä¸‰ä¸ªæµ‹è¯•åˆ†åˆ«ç”¨æ¥æµ‹è¯• 5 çš„ å¹³æ–¹ã€10 çš„ 5 æ¬¡æ–¹ã€2 çš„ 10 æ¬¡æ–¹æ˜¯å¦éƒ½èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚å…¶ä¸­ PASS_REGULAR_EXPRESSION ç”¨æ¥æµ‹è¯•è¾“å‡ºæ˜¯å¦åŒ…å«åé¢è·Ÿç€çš„å­—ç¬¦ä¸²ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æµ‹è¯•çš„ç»“æœï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo5<span class="token punctuation">]</span>$ <span class="token function">make</span> <span class="token function">test</span>
Running tests<span class="token punctuation">..</span>.
Test project /home/ehome/Documents/programming/C/power/Demo5
    Start 1: test_run
1/4 Test <span class="token comment" spellcheck="true">#1: test_run .........................   Passed    0.00 sec</span>
    Start 2: test_5_2
2/4 Test <span class="token comment" spellcheck="true">#2: test_5_2 .........................   Passed    0.00 sec</span>
    Start 3: test_10_5
3/4 Test <span class="token comment" spellcheck="true">#3: test_10_5 ........................   Passed    0.00 sec</span>
    Start 4: test_2_10
4/4 Test <span class="token comment" spellcheck="true">#4: test_2_10 ........................   Passed    0.00 sec</span>
100% tests passed, 0 tests failed out of 4
Total Test <span class="token function">time</span> <span class="token punctuation">(</span>real<span class="token punctuation">)</span> <span class="token operator">=</span>   0.01 sec<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¦‚æœè¦æµ‹è¯•æ›´å¤šçš„è¾“å…¥æ•°æ®ï¼Œåƒä¸Šé¢é‚£æ ·ä¸€ä¸ªä¸ªå†™æµ‹è¯•ç”¨ä¾‹æœªå…å¤ªç¹çã€‚è¿™æ—¶å¯ä»¥é€šè¿‡ç¼–å†™å®æ¥å®ç°ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># å®šä¹‰ä¸€ä¸ªå®ï¼Œç”¨æ¥ç®€åŒ–æµ‹è¯•å·¥ä½œ</span>
macro <span class="token punctuation">(</span>do_test arg1 arg2 result<span class="token punctuation">)</span>
  add_test <span class="token punctuation">(</span>test_<span class="token variable">${arg1}</span>_<span class="token variable">${arg2}</span> Demo <span class="token variable">${arg1}</span> <span class="token variable">${arg2}</span><span class="token punctuation">)</span>
  set_tests_properties <span class="token punctuation">(</span>test_<span class="token variable">${arg1}</span>_<span class="token variable">${arg2}</span>
    PROPERTIES PASS_REGULAR_EXPRESSION <span class="token variable">${result}</span><span class="token punctuation">)</span>
endmacro <span class="token punctuation">(</span>do_test<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true"># ä½¿ç”¨è¯¥å®è¿›è¡Œä¸€ç³»åˆ—çš„æ•°æ®æµ‹è¯•</span>
do_test <span class="token punctuation">(</span>5 2 <span class="token string">"is 25"</span><span class="token punctuation">)</span>
do_test <span class="token punctuation">(</span>10 5 <span class="token string">"is 100000"</span><span class="token punctuation">)</span>
do_test <span class="token punctuation">(</span>2 10 <span class="token string">"is 1024"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å…³äº CTest çš„æ›´è¯¦ç»†çš„ç”¨æ³•å¯ä»¥é€šè¿‡ man 1 ctest å‚è€ƒ CTest çš„æ–‡æ¡£ã€‚</p>
<h1 id="æ”¯æŒ-gdb"><a href="#æ”¯æŒ-gdb" class="headerlink" title="æ”¯æŒ gdb"></a>æ”¯æŒ gdb</h1><p>è®© CMake æ”¯æŒ gdb çš„è®¾ç½®ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåªéœ€è¦æŒ‡å®š Debug æ¨¡å¼ä¸‹å¼€å¯ -g é€‰é¡¹ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">set<span class="token punctuation">(</span>CMAKE_BUILD_TYPE <span class="token string">"Debug"</span><span class="token punctuation">)</span>
set<span class="token punctuation">(</span>CMAKE_CXX_FLAGS_DEBUG <span class="token string">"<span class="token variable">$ENV</span>{CXXFLAGS} -O0 -Wall -g -ggdb"</span><span class="token punctuation">)</span>
set<span class="token punctuation">(</span>CMAKE_CXX_FLAGS_RELEASE <span class="token string">"<span class="token variable">$ENV</span>{CXXFLAGS} -O3 -Wall"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>ä¹‹åå¯ä»¥ç›´æ¥å¯¹ç”Ÿæˆçš„ç¨‹åºä½¿ç”¨ gdb æ¥è°ƒè¯•ã€‚</p>
<h1 id="æ·»åŠ ç¯å¢ƒæ£€æŸ¥"><a href="#æ·»åŠ ç¯å¢ƒæ£€æŸ¥" class="headerlink" title="æ·»åŠ ç¯å¢ƒæ£€æŸ¥"></a>æ·»åŠ ç¯å¢ƒæ£€æŸ¥</h1><p>æœ¬èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š[Demo6[(<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo6)ã€‚" target="_blank" rel="noopener">https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo6)ã€‚</a></p>
<p>æœ‰æ—¶å€™å¯èƒ½è¦å¯¹ç³»ç»Ÿç¯å¢ƒåšç‚¹æ£€æŸ¥ï¼Œä¾‹å¦‚è¦ä½¿ç”¨ä¸€ä¸ªå¹³å°ç›¸å…³çš„ç‰¹æ€§çš„æ—¶å€™ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦è‡ªå¸¦ pow å‡½æ•°ã€‚å¦‚æœå¸¦æœ‰ pow å‡½æ•°ï¼Œå°±ä½¿ç”¨å®ƒï¼›å¦åˆ™ä½¿ç”¨æˆ‘ä»¬å®šä¹‰çš„ power å‡½æ•°ã€‚</p>
<h2 id="æ·»åŠ -CheckFunctionExists-å®"><a href="#æ·»åŠ -CheckFunctionExists-å®" class="headerlink" title="æ·»åŠ  CheckFunctionExists å®"></a>æ·»åŠ  CheckFunctionExists å®</h2><p>é¦–å…ˆåœ¨é¡¶å±‚ CMakeLists æ–‡ä»¶ä¸­æ·»åŠ  CheckFunctionExists.cmake å®ï¼Œå¹¶è°ƒç”¨ check_function_exists å‘½ä»¤æµ‹è¯•é“¾æ¥å™¨æ˜¯å¦èƒ½å¤Ÿåœ¨é“¾æ¥é˜¶æ®µæ‰¾åˆ° pow å‡½æ•°ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ”¯æŒ pow å‡½æ•°</span>
include <span class="token punctuation">(</span><span class="token variable">${CMAKE_ROOT}</span>/Modules/CheckFunctionExists.cmake<span class="token punctuation">)</span>
check_function_exists <span class="token punctuation">(</span>pow HAVE_POW<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>å°†ä¸Šé¢è¿™æ®µä»£ç æ”¾åœ¨ configure_file å‘½ä»¤å‰ã€‚</p>
<h2 id="é¢„å®šä¹‰ç›¸å…³å®å˜é‡"><a href="#é¢„å®šä¹‰ç›¸å…³å®å˜é‡" class="headerlink" title="é¢„å®šä¹‰ç›¸å…³å®å˜é‡"></a>é¢„å®šä¹‰ç›¸å…³å®å˜é‡</h2><p>æ¥ä¸‹æ¥ä¿®æ”¹ config.h.in æ–‡ä»¶ï¼Œé¢„å®šä¹‰ç›¸å…³çš„å®å˜é‡ã€‚</p>
<pre class="line-numbers language-bash"><code class="language-bash">// does the platform provide pow function?
<span class="token comment" spellcheck="true">#cmakedefine HAVE_POW</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="åœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°"><a href="#åœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°" class="headerlink" title="åœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°"></a>åœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°</h2><p>æœ€åä¸€æ­¥æ˜¯ä¿®æ”¹ main.cc ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨å®å’Œå‡½æ•°ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ifdef HAVE_POW</span>
    printf<span class="token punctuation">(</span><span class="token string">"Now we use the standard library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    double result <span class="token operator">=</span> pow<span class="token punctuation">(</span>base, exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#else</span>
    printf<span class="token punctuation">(</span><span class="token string">"Now we use our own Math library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    double result <span class="token operator">=</span> power<span class="token punctuation">(</span>base, exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">#endif</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="æ·»åŠ ç‰ˆæœ¬å·"><a href="#æ·»åŠ ç‰ˆæœ¬å·" class="headerlink" title="æ·»åŠ ç‰ˆæœ¬å·"></a>æ·»åŠ ç‰ˆæœ¬å·</h1><p>æœ¬èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo7" target="_blank" rel="noopener">Demo7</a>ã€‚<br>ç»™é¡¹ç›®æ·»åŠ å’Œç»´æŠ¤ç‰ˆæœ¬å·æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œè¿™æ ·æœ‰åˆ©äºç”¨æˆ·äº†è§£æ¯ä¸ªç‰ˆæœ¬çš„ç»´æŠ¤æƒ…å†µï¼Œå¹¶åŠæ—¶äº†è§£å½“å‰æ‰€ç”¨çš„ç‰ˆæœ¬æ˜¯å¦è¿‡æ—¶ï¼Œæˆ–æ˜¯å¦å¯èƒ½å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µã€‚</p>
<p>é¦–å…ˆä¿®æ”¹é¡¶å±‚ CMakeLists æ–‡ä»¶ï¼Œåœ¨ project å‘½ä»¤ä¹‹ååŠ å…¥å¦‚ä¸‹ä¸¤è¡Œï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token keyword">set</span> <span class="token punctuation">(</span>Demo_VERSION_MAJOR 1<span class="token punctuation">)</span>
<span class="token keyword">set</span> <span class="token punctuation">(</span>Demo_VERSION_MINOR 0<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>åˆ†åˆ«æŒ‡å®šå½“å‰çš„é¡¹ç›®çš„ä¸»ç‰ˆæœ¬å·å’Œå‰¯ç‰ˆæœ¬å·ã€‚</p>
<p>ä¹‹åï¼Œä¸ºäº†åœ¨ä»£ç ä¸­è·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ config.h.in æ–‡ä»¶ï¼Œæ·»åŠ ä¸¤ä¸ªé¢„å®šä¹‰å˜é‡ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash">// the configured options and settings <span class="token keyword">for</span> Tutorial
<span class="token comment" spellcheck="true">#define Demo_VERSION_MAJOR @Demo_VERSION_MAJOR@</span>
<span class="token comment" spellcheck="true">#define Demo_VERSION_MINOR @Demo_VERSION_MINOR@</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>è¿™æ ·å°±å¯ä»¥ç›´æ¥åœ¨ä»£ç ä¸­æ‰“å°ç‰ˆæœ¬ä¿¡æ¯äº†ï¼š</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;math.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"config.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"math/MathFunctions.h"</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">*</span>argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>argc <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// print version info</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s Version %d.%d\n"</span><span class="token punctuation">,</span>
            argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            Demo_VERSION_MAJOR<span class="token punctuation">,</span>
            Demo_VERSION_MINOR<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Usage: %s base exponent \n"</span><span class="token punctuation">,</span> argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">double</span> base <span class="token operator">=</span> <span class="token function">atof</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> exponent <span class="token operator">=</span> <span class="token function">atoi</span><span class="token punctuation">(</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property">#<span class="token directive keyword">if</span> defined (HAVE_POW)</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now we use the standard library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">else</span></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Now we use our own Math library. \n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> result <span class="token operator">=</span> <span class="token function">power</span><span class="token punctuation">(</span>base<span class="token punctuation">,</span> exponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%g ^ %d is %g\n"</span><span class="token punctuation">,</span> base<span class="token punctuation">,</span> exponent<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h1 id="ç”Ÿæˆå®‰è£…åŒ…"><a href="#ç”Ÿæˆå®‰è£…åŒ…" class="headerlink" title="ç”Ÿæˆå®‰è£…åŒ…"></a>ç”Ÿæˆå®‰è£…åŒ…</h1><p>æœ¬èŠ‚å¯¹åº”çš„æºä»£ç æ‰€åœ¨ç›®å½•ï¼š<a href="https://github.com/CdqPT/Demo/tree/master/cmake-demo/Demo8" target="_blank" rel="noopener">Demo8</a>ã€‚</p>
<p>æœ¬èŠ‚å°†å­¦ä¹ å¦‚ä½•é…ç½®ç”Ÿæˆå„ç§å¹³å°ä¸Šçš„å®‰è£…åŒ…ï¼ŒåŒ…æ‹¬äºŒè¿›åˆ¶å®‰è£…åŒ…å’Œæºç å®‰è£…åŒ…ã€‚ä¸ºäº†å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° CPack ï¼Œå®ƒåŒæ ·ä¹Ÿæ˜¯ç”± CMake æä¾›çš„ä¸€ä¸ªå·¥å…·ï¼Œä¸“é—¨ç”¨äºæ‰“åŒ…ã€‚</p>
<p>é¦–å…ˆåœ¨é¡¶å±‚çš„ CMakeLists.txt æ–‡ä»¶å°¾éƒ¨æ·»åŠ ä¸‹é¢å‡ è¡Œï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ„å»ºä¸€ä¸ª CPack å®‰è£…åŒ…</span>
include <span class="token punctuation">(</span>InstallRequiredSystemLibraries<span class="token punctuation">)</span>
<span class="token keyword">set</span> <span class="token punctuation">(</span>CPACK_RESOURCE_FILE_LICENSE
  <span class="token string">"<span class="token variable">${CMAKE_CURRENT_SOURCE_DIR}</span>/License.txt"</span><span class="token punctuation">)</span>
<span class="token keyword">set</span> <span class="token punctuation">(</span>CPACK_PACKAGE_VERSION_MAJOR <span class="token string">"<span class="token variable">${Demo_VERSION_MAJOR}</span>"</span><span class="token punctuation">)</span>
<span class="token keyword">set</span> <span class="token punctuation">(</span>CPACK_PACKAGE_VERSION_MINOR <span class="token string">"<span class="token variable">${Demo_VERSION_MINOR}</span>"</span><span class="token punctuation">)</span>
include <span class="token punctuation">(</span>CPack<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸Šé¢çš„ä»£ç åšäº†ä»¥ä¸‹å‡ ä¸ªå·¥ä½œï¼š<br>1.å¯¼å…¥ InstallRequiredSystemLibraries æ¨¡å—ï¼Œä»¥ä¾¿ä¹‹åå¯¼å…¥ CPack æ¨¡å—ï¼›<br>2.è®¾ç½®ä¸€äº› CPack ç›¸å…³å˜é‡ï¼ŒåŒ…æ‹¬ç‰ˆæƒä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œå…¶ä¸­ç‰ˆæœ¬ä¿¡æ¯ç”¨äº†ä¸Šä¸€èŠ‚å®šä¹‰çš„ç‰ˆæœ¬å·ï¼›<br>3.å¯¼å…¥ CPack æ¨¡å—ã€‚</p>
<p>æ¥ä¸‹æ¥çš„å·¥ä½œæ˜¯åƒå¾€å¸¸ä¸€æ ·æ„å»ºå·¥ç¨‹ï¼Œå¹¶æ‰§è¡Œ cpack å‘½ä»¤ã€‚<br><code>ç”ŸæˆäºŒè¿›åˆ¶å®‰è£…åŒ…ï¼š</code></p>
<pre class="line-numbers language-bash"><code class="language-bash">cpack -C CPackConfig.cmake<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>ç”Ÿæˆæºç å®‰è£…åŒ…</code></p>
<pre class="line-numbers language-bash"><code class="language-bash">cpack -C CPackSourceConfig.cmake<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>æˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸‹ã€‚åœ¨ç”Ÿæˆé¡¹ç›®åï¼Œæ‰§è¡Œ cpack -C CPackConfig.cmake å‘½ä»¤ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo8<span class="token punctuation">]</span>$ cpack -C CPackSourceConfig.cmake
CPack: Create package using STGZ
CPack: Install projects
CPack: - Run preinstall target for: Demo8
CPack: - Install project: Demo8
CPack: Create package
CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.sh generated.
CPack: Create package using TGZ
CPack: Install projects
CPack: - Run preinstall target for: Demo8
CPack: - Install project: Demo8
CPack: Create package
CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.gz generated.
CPack: Create package using TZ
CPack: Install projects
CPack: - Run preinstall target for: Demo8
CPack: - Install project: Demo8
CPack: Create package
CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.Z generated.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ­¤æ—¶ä¼šåœ¨è¯¥ç›®å½•ä¸‹åˆ›å»º 3 ä¸ªä¸åŒæ ¼å¼çš„äºŒè¿›åˆ¶åŒ…æ–‡ä»¶ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo8<span class="token punctuation">]</span>$ <span class="token function">ls</span> Demo8-*
Demo8-1.0.1-Linux.sh  Demo8-1.0.1-Linux.tar.gz  Demo8-1.0.1-Linux.tar.Z<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>è¿™ 3 ä¸ªäºŒè¿›åˆ¶åŒ…æ–‡ä»¶æ‰€åŒ…å«çš„å†…å®¹æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚æˆ‘ä»¬å¯ä»¥æ‰§è¡Œå…¶ä¸­ä¸€ä¸ªã€‚æ­¤æ—¶ä¼šå‡ºç°ä¸€ä¸ªç”± CPack è‡ªåŠ¨ç”Ÿæˆçš„äº¤äº’å¼å®‰è£…ç•Œé¢ï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo8<span class="token punctuation">]</span>$ sh Demo8-1.0.1-Linux.sh 
Demo8 Installer Version: 1.0.1, Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> Humanity
This is a self-extracting archive.
The archive will be extracted to: /home/ehome/Documents/programming/C/power/Demo8
If you want to stop extracting, please press <span class="token operator">&lt;</span>ctrl-C<span class="token operator">></span>.
The MIT License <span class="token punctuation">(</span>MIT<span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> 2013 Joseph Pan<span class="token punctuation">(</span>https://hahack.com<span class="token punctuation">)</span>
Permission is hereby granted, <span class="token function">free</span> of charge, to any person obtaining a copy of
this software and associated documentation files <span class="token punctuation">(</span>the <span class="token string">"Software"</span><span class="token punctuation">)</span>, to deal <span class="token keyword">in</span>
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to <span class="token keyword">do</span> so,
subject to the following conditions:
The above copyright notice and this permission notice shall be included <span class="token keyword">in</span> all
copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED <span class="token string">"AS IS"</span>, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
Do you accept the license? <span class="token punctuation">[</span>yN<span class="token punctuation">]</span>: 
y
By default the Demo8 will be installed in:
  <span class="token string">"/home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux"</span>
Do you want to include the subdirectory Demo8-1.0.1-Linux?
Saying no will <span class="token function">install</span> in: <span class="token string">"/home/ehome/Documents/programming/C/power/Demo8"</span> <span class="token punctuation">[</span>Yn<span class="token punctuation">]</span>: 
y
Using target directory: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux
Extracting, please wait<span class="token punctuation">..</span>.
Unpacking finished successfully<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å®Œæˆåæç¤ºå®‰è£…åˆ°äº† Demo8-1.0.1-Linux å­ç›®å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å»æ‰§è¡Œè¯¥ç¨‹åºï¼š</p>
<pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">[</span>ehome@xman Demo8<span class="token punctuation">]</span>$ ./Demo8-1.0.1-Linux/bin/Demo 5 2
Now we use our own Math library. 
5 ^ 2 is 25<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>å…³äº CPack çš„æ›´è¯¦ç»†çš„ç”¨æ³•å¯ä»¥é€šè¿‡ man 1 cpack å‚è€ƒ CPack çš„æ–‡æ¡£ã€‚</p>
<h1 id="å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°-CMake"><a href="#å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ°-CMake" class="headerlink" title="å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ° CMake"></a>å°†å…¶ä»–å¹³å°çš„é¡¹ç›®è¿ç§»åˆ° CMake</h1><p>CMake å¯ä»¥å¾ˆè½»æ¾åœ°æ„å»ºå‡ºåœ¨é€‚åˆå„ä¸ªå¹³å°æ‰§è¡Œçš„å·¥ç¨‹ç¯å¢ƒã€‚è€Œå¦‚æœå½“å‰çš„å·¥ç¨‹ç¯å¢ƒä¸æ˜¯ CMake ï¼Œè€Œæ˜¯åŸºäºæŸä¸ªç‰¹å®šçš„å¹³å°ï¼Œæ˜¯å¦å¯ä»¥è¿ç§»åˆ° CMake å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯èƒ½çš„ã€‚ä¸‹é¢é’ˆå¯¹å‡ ä¸ªå¸¸ç”¨çš„å¹³å°ï¼Œåˆ—å‡ºäº†å®ƒä»¬å¯¹åº”çš„è¿ç§»æ–¹æ¡ˆã€‚</p>
<p><code>autotools</code><br>am2cmake å¯ä»¥å°† autotools ç³»çš„é¡¹ç›®è½¬æ¢åˆ° CMakeï¼Œè¿™ä¸ªå·¥å…·çš„ä¸€ä¸ªæˆåŠŸæ¡ˆä¾‹æ˜¯ KDE ã€‚<br>Alternative Automake2CMake å¯ä»¥è½¬æ¢ä½¿ç”¨ automake çš„ KDevelop å·¥ç¨‹é¡¹ç›®ã€‚<br>Converting autoconf tests</p>
<p><code>qmake</code><br>qmake converter å¯ä»¥è½¬æ¢ä½¿ç”¨ QT çš„ qmake çš„å·¥ç¨‹ã€‚</p>
<p><code>Visual Studio</code><br>vcproj2cmake.rb å¯ä»¥æ ¹æ® Visual Studio çš„å·¥ç¨‹æ–‡ä»¶ï¼ˆåç¼€åæ˜¯ .vcproj æˆ– .vcxprojï¼‰ç”Ÿæˆ CMakeLists.txt æ–‡ä»¶ã€‚<br>vcproj2cmake.ps1 vcproj2cmake çš„ PowerShell ç‰ˆæœ¬ã€‚<br>folders4cmake æ ¹æ® Visual Studio é¡¹ç›®æ–‡ä»¶ç”Ÿæˆç›¸åº”çš„ â€œsource_groupâ€ ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ CMake è„šæœ¬ä¸­ä½¿ç”¨ã€‚æ”¯æŒ Visual Studio 9/10 å·¥ç¨‹æ–‡ä»¶ã€‚</p>
<p><code>CMakeLists.txt è‡ªåŠ¨æ¨å¯¼</code><br>gencmake æ ¹æ®ç°æœ‰æ–‡ä»¶æ¨å¯¼ CMakeLists.txt æ–‡ä»¶ã€‚<br>CMakeListGenerator åº”ç”¨ä¸€å¥—æ–‡ä»¶å’Œç›®å½•åˆ†æåˆ›å»ºå‡ºå®Œæ•´çš„ CMakeLists.txt æ–‡ä»¶ã€‚ä»…æ”¯æŒ Win32 å¹³å°ã€‚</p>
<h1 id="debug-ç‰ˆå’Œ-release-ç‰ˆ"><a href="#debug-ç‰ˆå’Œ-release-ç‰ˆ" class="headerlink" title="debug ç‰ˆå’Œ release ç‰ˆ"></a>debug ç‰ˆå’Œ release ç‰ˆ</h1><p>åœ¨ Visual Studio ä¸­æˆ‘ä»¬å¯ä»¥ç”Ÿæˆ debug ç‰ˆå’Œ release ç‰ˆçš„ç¨‹åº,ä½¿ç”¨ CMake æˆ‘ä»¬ä¹Ÿå¯ä»¥è¾¾åˆ°ä¸Šè¿°æ•ˆæœã€‚debug ç‰ˆçš„é¡¹ç›®ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦æœ‰è°ƒè¯•ä¿¡æ¯å¹¶ä¸”ä¸éœ€è¦è¿›è¡Œä¼˜åŒ–,è€Œ release ç‰ˆçš„ä¸éœ€è¦è°ƒè¯•ä¿¡æ¯ä½†éœ€è¦ä¼˜åŒ–ã€‚è¿™äº›ç‰¹æ€§åœ¨ gcc/g++ä¸­æ˜¯é€šè¿‡ç¼–è¯‘æ—¶çš„å‚æ•°æ¥å†³å®šçš„,å¦‚æœå°†ä¼˜åŒ–ç¨‹åº¦è°ƒåˆ°æœ€é«˜éœ€è¦è®¾ç½®å‚æ•°-O3,æœ€ä½æ˜¯ -O0 å³ä¸åšä¼˜åŒ–;æ·»åŠ è°ƒè¯•ä¿¡æ¯çš„å‚æ•°æ˜¯ -g -ggdb,å¦‚æœä¸æ·»åŠ è¿™ä¸ªå‚æ•°,è°ƒè¯•ä¿¡æ¯å°±ä¸ä¼šè¢«åŒ…å«åœ¨ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚ </p>
<p>CMake ä¸­æœ‰ä¸€ä¸ªå˜é‡ CMAKE_BUILD_TYPE ,å¯ä»¥çš„å–å€¼æ˜¯ Debug Release RelWithDebInfo å’Œ MinSizeRelã€‚å½“è¿™ä¸ªå˜é‡å€¼ä¸º Debug çš„æ—¶å€™,CMake ä¼šä½¿ç”¨å˜é‡ CMAKE_CXX_FLAGS_DEBUG å’Œ CMAKE_C_FLAGS_DEBUG ä¸­çš„å­—ç¬¦ä¸²ä½œä¸ºç¼–è¯‘é€‰é¡¹ç”Ÿæˆ Makefile ,å½“è¿™ä¸ªå˜é‡å€¼ä¸º Release çš„æ—¶å€™,å·¥ç¨‹ä¼šä½¿ç”¨å˜é‡ CMAKE_CXX_FLAGS_RELEASE å’Œ CMAKE_C_FLAGS_RELEASE é€‰é¡¹ç”Ÿæˆ Makefileã€‚</p>
<h1 id="äº¤å‰ç¼–è¯‘"><a href="#äº¤å‰ç¼–è¯‘" class="headerlink" title="äº¤å‰ç¼–è¯‘"></a>äº¤å‰ç¼–è¯‘</h1><p>ä»ç†è®ºä¸Šè¯´ï¼Œcmakeæ ¹æ®cmakeList.txtå¯ä»¥ä¸€æ­¥æ„å»ºå‡ºvså·¥ç¨‹ä»¥åŠunixå·¥ç¨‹ï¼Œ</p>
<p>åœ¨Winä¸Šä½¿ç”¨çš„æ˜¯GUIå½¢å¼ï¼Œåˆ†ä¸ºä¸‰æ­¥ï¼Œ<br>1.é…ç½®<br>2.å†é…ç½®ï¼Ÿ<br>3.ç”Ÿæˆï¼ˆåº”è¯¥æ˜¯makeå’Œmake installçš„é›†åˆï¼‰<br>4.ç„¶åå°±å¯ä»¥ä½¿ç”¨VSæ‰“å¼€å·¥ç¨‹äº†ã€‚</p>
<p>åœ¨Linuxä¸Šè²Œä¼¼å¾ˆéº»çƒ¦ï¼š<br>1.æ‰§è¡ŒåŒ…å«cmakeå‘½ä»¤çš„è„šæœ¬æ–‡ä»¶ï¼Œç”Ÿæˆdebugæ–‡ä»¶ï¼Œè¿™ä¸ªè²Œä¼¼æ˜¯æ„å»ºç›®å½•,å¾…ç¡®è®¤ï¼›<br>2.åœ¨æ„å»ºç›®å½•ä¸­æ‰§è¡Œmake<br>3.åœ¨æ„å»ºç›®å½•ä¸­æ‰§è¡Œmake installï¼Œæ­¤æ—¶ç”Ÿæˆinstallç›®å½•ï¼›<br>4.ä½¿ç”¨QTCreateræ‰“å¼€cmakeList.txtï¼Œè®¾ç½®Buildä¸­æ„å»ºç›®å½•é€‰æ‹©ç¬¬1æ­¥çš„æ„å»ºç›®å½•ï¼Œè®¾ç½®Runä¸­å‘½ä»¤è¡Œå‚æ•°ä»¥åŠç¬¬3æ­¥ç”Ÿæˆçš„å®‰è£…ç›®å½•ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://blog.csdn.net/afei__/article/details/81201039" target="_blank" rel="noopener">https://blog.csdn.net/afei__/article/details/81201039</a><br><a href="https://www.hahack.com/codes/cmake/#" target="_blank" rel="noopener">https://www.hahack.com/codes/cmake/#</a><br><a href="https://blog.csdn.net/zhuiyunzhugang/article/details/88142908" target="_blank" rel="noopener">https://blog.csdn.net/zhuiyunzhugang/article/details/88142908</a><br><a href="https://blog.csdn.net/ajianyingxiaoqinghan/article/details/70229799" target="_blank" rel="noopener">https://blog.csdn.net/ajianyingxiaoqinghan/article/details/70229799</a></p>
<link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
                 
                 <hr/>
                 

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://purethought.cn" rel="external nofollow noreferrer">é™ˆå¾·å¼º</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://purethought.cn/6415.html">https://purethought.cn/6415.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="https://purethought.cn" target="_blank">é™ˆå¾·å¼º</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


            </div>         
        </div>
    </div>
    
    <!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
    <script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>    
    <!-- ä»£ç è¯­è¨€ -->   
    <!-- <script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script> -->          
    <!-- ä»£ç å—å¤åˆ¶ -->   
    <script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
    <script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>      
    <!-- ä»£ç å—æ”¶ç¼© -->   
    <script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge ">                  
                <a href="/54148.html" target="_blank">                 
                    <font color="#0e263f">
                        <i class="fa  fa-hand-o-left"></i>
                        CANæ€»çº¿ç¬”è®°
                    </font>                    
                </a>          
            </div>
        </div>
        


        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge " >
                <a href="/43788.html" target="_blank">
                    <font color="#0e263f">
                        äº¤å‰ç¼–è¯‘æ‰¾ä¸åˆ°QT
                        <i class="fa  fa-hand-o-right"></i>
                    </font>
                 </a>  
            </div>
        </div>
        
    </div>
</article>

    
        <style>
    #reward {
        /*margin: 40px 0;*/
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.6rem;
      
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
   <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red" >Â¥</a> 
  

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-times"></i></a>
            <h4 class="reward-title">æ‚¨çš„èµèµå°±æ˜¯æˆ‘çš„åŠ¨åŠ›^</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

    

    
        <div class="livere-card card" data-aos="fade-up">
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC80Njk3Mi8yMzQ3Mw==">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScriptã€‚</noscript>
    </div>
    <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
</div>
    
    
   <!-- 
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '6190f09c0ffe658707b5',
        clientSecret: '2798e16eeba573f49ce06d2da0595188699aac41',
        repo: 'cdqpt.github.io',
        owner: 'CdqPT',
        admin: "CdqPT",
        id: '2019-12-12T16-36-00',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
     -->

    

    

    

   <!-- <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>å¾®ä¿¡é‡Œç‚¹â€œå‘ç°â€->â€œæ‰«ä¸€æ‰«â€äºŒç»´ç ä¾¿å¯æŸ¥çœ‹åˆ†äº«ã€‚</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script> -->

</div>




    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
    
        <div class="toc-widget">
        
            <div class="toc-title" ><i class="fa fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="hidden">
                <div id="toc-content"></div>
            </div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. --><!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large ">    
        <i class="fa fa-th-large"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2'
        });
        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            i++;
            $(this).attr('href', '#' + tocHeading + (i));
            $(this).attr('navTo',  tocHeading + (i));    
        });
        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });
        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }
            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };
        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(0);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(100);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    
</main>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
       <div class="col s12 m8 l8 copy-right">
             
               &copy;2018-2020 ALaDing
               &nbsp;
             Author:  <a href="https://purethought.cn/">é™ˆå¾·å¼º &nbsp  Email: 928277452@qq.com</a>

            
            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    æ¬¡,&nbsp;è®¿å®¢æ•° <span id="busuanzi_value_site_uv" class="white-color"></span> äºº.
                </span>
                       
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?147475454185ebcf440a27cc35e793ef";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>










                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/CdqPT" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:928277452@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=928277452" class="tooltipped" data-tooltip="QQè”ç³»æˆ‘: 928277452" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->


 
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

   

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>
