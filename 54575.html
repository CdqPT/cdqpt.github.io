<!DOCTYPE HTML>
<html lang="zh-CN">






<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="keywords" content="è®¾è®¡æ¨¡å¼, é™ˆå¾·å¼º ALaDing å†…è’™å¤å·¥ä¸šå¤§å­¦ æœºå™¨äºº ä¸œè½¯ ä¸œè½¯é›†å›¢ åµŒå…¥å¼ è‡ªåŠ¨é©¾é©¶ ADASIS">
    <meta name="description" content="é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³â€“é«˜å†…èšä½è€¦åˆã€‚è®¾è®¡æ¨¡å¼çš„å¤§éƒ¨åˆ†ä½œç”¨å°±æ˜¯è§£è€¦ï¼Œè§£è€¦çš„åŸºæœ¬æ–¹å¼æ˜¯å°†åŠŸèƒ½å’Œé€»è¾‘åˆ†ç¦»ã€‚
è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>è®¾è®¡æ¨¡å¼ | ALaDing</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
        code[class*="language-"], pre[class*="language-"] {
            white-space: pre !important;
        }
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>



  <link rel="amphtml" href="https://purethought.cn/54575.html/amp/index.html">

    
<link rel="stylesheet" href="/css/prism-xonokai.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>






<body style="overflow-x:hidden">
    <header id="navControl" class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">ALaDing</span>
                </a>
            </div>
            



<!-- <a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>é¦–é¡µ</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/dictionary" class="waves-effect waves-light">
            
            <i class="fa fa-book"></i>
            
            <span>å­—å…¸</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>åˆ†ç±»</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-heart"></i>
            
            <span>è±†ç“£</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-leaf"></i>
            
            <span>å…³äº</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-commenting"></i>
            
            <span>ç•™è¨€</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="æœç´¢"></i>
        </a>
    </li>
</ul> -->

<!-- æ”¯æŒäºŒçº§èœå•ç‰¹æ€§  -->
<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse">
  <i class="fa fa-navicon" >
     <b>å¯¼èˆª </b>
  </i>
</a>

<ul class="right nav-menu">
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/" class="waves-effect waves-light">
              
                <i class="fa fa-home"></i>
              
              <span>é¦–é¡µ</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/dictionary" class="waves-effect waves-light">
              
                <i class="fa fa-book"></i>
              
              <span>å­—å…¸</span>
            </a>

            
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/categories" class="waves-effect waves-light">
                
                  <i class="fa fa-bookmark"></i>
                
                <span>åˆ†ç±»</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="https://purethought.cn/categories/%E7%AC%94%E8%AE%B0/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>ç¼–ç¨‹ç¬”è®°</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E6%96%87%E5%8F%B2%E5%93%B2/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>æ–‡å²å“²ç†</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E9%9A%8F%E7%AC%94/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>è¿‡ç¨‹éšç¬”</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E4%BC%98%E5%8C%96/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>æ—¢æœ‰ä¼˜åŒ–</span>
                  </a>
                </li>
              
                <li> 
                  <a href="https://purethought.cn/categories/%E6%95%99%E7%A8%8B/" >
                    
                      <i class="fa fa-bookmark" style="margin-top: -20px;"></i>
                    
                    <span>å®‰è£…æ•™ç¨‹</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/" class="waves-effect waves-light">
                
                  <i class="fa fa-heart"></i>
                
                <span>è±†ç“£</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/books" >
                    
                      <i class="fa fa-book" style="margin-top: -20px;"></i>
                    
                    <span>ä¹¦å•</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/movies" >
                    
                      <i class="fa fa-film" style="margin-top: -20px;"></i>
                    
                    <span>ç”µå½±</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/games" >
                    
                      <i class="fa fa-gamepad" style="margin-top: -20px;"></i>
                    
                    <span>æ¸¸æˆ</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
              <a href="/" class="waves-effect waves-light">
                
                  <i class="fa fa-leaf"></i>
                
                <span>å…³äº</span>
                <i class="fa fa-chevron-down" aria-hidden="true"></i>
              </a>

            <ul class="sub-nav menus_item_child ">
              
                <li> 
                  <a href="/about" >
                    
                      <i class="fa fa-user" style="margin-top: -20px;"></i>
                    
                    <span>ç®€ä»‹</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/galleries" >
                    
                      <i class="fa fa-camera" style="margin-top: -20px;"></i>
                    
                    <span>ç›¸å†Œ</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/friends" >
                    
                      <i class="fa fa-handshake-o" style="margin-top: -20px;"></i>
                    
                    <span>å‹é“¾</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/log" >
                    
                      <i class="fa fa-pencil-square-o" style="margin-top: -20px;"></i>
                    
                    <span>æ—¥å¿—</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/tags" >
                    
                      <i class="fa fa-tags" style="margin-top: -20px;"></i>
                    
                    <span>æ ‡ç­¾</span>
                  </a>
                </li>
              
                <li> 
                  <a href="/archives" >
                    
                      <i class="fa fa-archive" style="margin-top: -20px;"></i>
                    
                    <span>å½’æ¡£</span>
                  </a>
                </li>
               
            </ul>
          
      </li>
    
      <li class="hide-on-med-and-down nav-item" >

        
            <a href="/contact" class="waves-effect waves-light">
              
                <i class="fa fa-commenting"></i>
              
              <span>ç•™è¨€</span>
            </a>

            
      </li>
    

    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">

            <i id="searchIcon" class="fa fa-search" title="æœç´¢" >
              <b>æœç´¢ </b>
            </i>

        </a>
    </li>

</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ALaDing</div>
        <div class="logo-desc">
            
            ä¸œè½¯é›†å›¢ | å†…è’™å¤å·¥ä¸šå¤§å­¦ | åµŒå…¥å¼å·¥ç¨‹å¸ˆ | ADAS
            
        </div>
    </div>

    


 <ul class="menu-list mobile-menu-list">  <li class="m-nav-item">  <a href="/" class="waves-effect waves-light">  <i class="fa fa-fw fa-home"></i>  é¦–é¡µ </a>  </li>  <li class="m-nav-item">  <a href="/dictionary" class="waves-effect waves-light">  <i class="fa fa-fw fa-book"></i>  å­—å…¸ </a>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-bookmark"></i>  åˆ†ç±» <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="https://purethought.cn/categories/%E7%AC%94%E8%AE%B0/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>ç¼–ç¨‹ç¬”è®°</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E6%96%87%E5%8F%B2%E5%93%B2/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>æ–‡å²å“²ç†</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E9%9A%8F%E7%AC%94/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>è¿‡ç¨‹éšç¬”</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E4%BC%98%E5%8C%96/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>æ—¢æœ‰ä¼˜åŒ–</span> </a> </li>  <li> <a href="https://purethought.cn/categories/%E6%95%99%E7%A8%8B/" >  <i class="fa fa-bookmark" style="left: 25px; position: absolute;"></i>  <span>å®‰è£…æ•™ç¨‹</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-heart"></i>  è±†ç“£ <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="/books" >  <i class="fa fa-book" style="left: 25px; position: absolute;"></i>  <span>ä¹¦å•</span> </a> </li>  <li> <a href="/movies" >  <i class="fa fa-film" style="left: 25px; position: absolute;"></i>  <span>ç”µå½±</span> </a> </li>  <li> <a href="/games" >  <i class="fa fa-gamepad" style="left: 25px; position: absolute;"></i>  <span>æ¸¸æˆ</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="javascript:;">  <i class="fa fa-fw fa-leaf"></i>  å…³äº <span class="m-icon"><i class="fa fa-chevron-right"></i></span> </a> <ul>  <li> <a href="/about" >  <i class="fa fa-user" style="left: 25px; position: absolute;"></i>  <span>ç®€ä»‹</span> </a> </li>  <li> <a href="/galleries" >  <i class="fa fa-camera" style="left: 25px; position: absolute;"></i>  <span>ç›¸å†Œ</span> </a> </li>  <li> <a href="/friends" >  <i class="fa fa-handshake-o" style="left: 25px; position: absolute;"></i>  <span>å‹é“¾</span> </a> </li>  <li> <a href="/log" >  <i class="fa fa-pencil-square-o" style="left: 25px; position: absolute;"></i>  <span>æ—¥å¿—</span> </a> </li>  <li> <a href="/tags" >  <i class="fa fa-tags" style="left: 25px; position: absolute;"></i>  <span>æ ‡ç­¾</span> </a> </li>  <li> <a href="/archives" >  <i class="fa fa-archive" style="left: 25px; position: absolute;"></i>  <span>å½’æ¡£</span> </a> </li>  </ul>  </li>  <li class="m-nav-item">  <a href="/contact" class="waves-effect waves-light">  <i class="fa fa-fw fa-commenting"></i>  ç•™è¨€ </a>  </li>   <li><div class="divider"></div></li> <li> <a href="https://github.com/CdqPT" class="waves-effect waves-light" target="_blank"> <i class="fa fa-github-square fa-fw"></i>Fork Me </a> </li>  </ul>








</div>



        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #000;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/CdqPT" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>
</header>


    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('è¯·è¾“å…¥è®¿é—®æœ¬æ–‡ç« çš„å¯†ç ')).toString(CryptoJS.enc.Hex)) {
                alert('å¯†ç é”™è¯¯ï¼Œå°†è¿”å›ä¸»é¡µï¼');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://blogcdq.oss-cn-beijing.aliyuncs.com/image/other/star.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        è®¾è®¡æ¨¡å¼
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before  /*,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before */{
        display: block;
        content: "ğŸ­";
        position: absolute;
        left: 50px;
        /*color: #EE7942;*/
        /*color: red;*/
    }
        @media only screen and (max-width: 992px) {
    #articleContent h1::before{
        display: block;
        content: " ";
    }
}

    /*ä¿®æ”¹æ»šåŠ¨æ¡æ ·å¼ä¸ºéšè—*/
    #toc-content {
        height: calc(105vh - 250px);
        overflow-x: hidden;
        overflow-y: scroll;
        width: 320px;
        height: 600px;
    }
    #hidden{
        overflow: hidden;
        width: 300px;    
    }  

    #articleContent :focus {
        outline: none;
    }
    .toc-fixed {
        position: fixed;
        top: 64px;
    }
    .toc-widget {
        padding-left: 20px;
    }
    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 40px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }
    .toc-widget ol {
        padding: 0;
        list-style: none;
    }
    #toc-content ol {
        padding-left: 10px;
    }
    #toc-content ol li {
        padding-left: 30px;
    }
    #toc-content .toc-link:hover {
        color: black;
        font-weight: 700;
        text-decoration: underline;
    }
    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }
    #toc-content .is-active-link {
        color: red;
    }
    #toc-content .is-active-link::before {
        background-color: red;
    }
    #floating-toc-btn {
        position: fixed;
        right: 0.6rem;
        bottom: 6rem;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
        opacity: 0.5;
    }
    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }
    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/å…¶ä»–/" target="_blank">
                                <span class="chip bg-color">å…¶ä»–</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/å­—å…¸/" class="post-category" target="_blank">
                                å­—å…¸
                            </a>
                        
                    </div>
                    
                </div>
            </div>




               <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="fa fa-pencil fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2019-12-21
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="fa fa-refresh fa-fw"></i>æ›´æ–°æ—¥æœŸ:&nbsp;&nbsp;
                    2020-03-02
                </div>
                

                

                
                
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>é˜…è¯»æ¬¡æ•°:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
                
            </div>
            
        </div>

        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³â€“é«˜å†…èšä½è€¦åˆã€‚<br>è®¾è®¡æ¨¡å¼çš„å¤§éƒ¨åˆ†ä½œç”¨å°±æ˜¯è§£è€¦ï¼Œè§£è€¦çš„åŸºæœ¬æ–¹å¼æ˜¯å°†åŠŸèƒ½å’Œé€»è¾‘åˆ†ç¦»ã€‚</p>
<p>è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚<br>è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†åœ°è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾åœ°è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°å®ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ç§æ¨¡å¼éƒ½æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼èƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚</p>
<h1 id="6ç§è®¾è®¡åŸåˆ™"><a href="#6ç§è®¾è®¡åŸåˆ™" class="headerlink" title="6ç§è®¾è®¡åŸåˆ™"></a>6ç§è®¾è®¡åŸåˆ™</h1><h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><p>å•ä¸€èŒè´£åŸåˆ™çš„è‹±æ–‡åç§°æ˜¯Single Responsibility Principleï¼Œç®€ç§°æ˜¯SRPã€‚è¿™ä¸ªåŸåˆ™å­˜åœ¨äº‰è®®ä¹‹å¤„åœ¨äºå¯¹èŒè´£çš„å®šä¹‰ï¼Œä»€ä¹ˆæ˜¯ç±»çš„èŒè´£ï¼Œä»¥åŠæ€ä¹ˆåˆ’åˆ†ç±»çš„èŒè´£ã€‚</p>
<p>å•ä¸€èŒè´£åŸåˆ™çš„å¥½å¤„ï¼š<br>1.ç±»çš„å¤æ‚æ€§é™ä½ï¼Œå®ç°ä»€ä¹ˆèŒè´£éƒ½æœ‰æ¸…æ™°æ˜ç¡®çš„å®šä¹‰ï¼›<br>2.å¯è¯»æ€§æé«˜ï¼Œå¤æ‚æ€§é™ä½ï¼Œé‚£å½“ç„¶å¯è¯»æ€§æé«˜äº†ï¼›<br>3.å¯ç»´æŠ¤æ€§æé«˜ï¼Œå¯è¯»æ€§æé«˜ï¼Œé‚£å½“ç„¶æ›´å®¹æ˜“ç»´æŠ¤äº†ï¼›<br>4.å˜æ›´å¼•èµ·çš„é£é™©é™ä½ï¼Œå˜æ›´æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¦‚æœæ¥å£çš„å•ä¸€èŒè´£åšå¾—å¥½ï¼Œä¸€ä¸ªæ¥å£ä¿®æ”¹åªå¯¹ç›¸åº”çš„å®ç°ç±»æœ‰å½±å“ï¼Œå¯¹å…¶ä»–çš„æ¥å£æ— å½±å“ï¼Œè¿™å¯¹ç³»ç»Ÿçš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§éƒ½æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚</p>
<p>æ³¨æ„ã€€å•ä¸€èŒè´£åŸåˆ™æå‡ºäº†ä¸€ä¸ªç¼–å†™ç¨‹åºçš„æ ‡å‡†ï¼Œç”¨â€œèŒè´£â€æˆ–â€œå˜åŒ–åŸå› â€æ¥è¡¡é‡æ¥å£æˆ–ç±»è®¾è®¡å¾—æ˜¯å¦ä¼˜è‰¯ï¼Œä½†æ˜¯â€œèŒè´£â€å’Œâ€œå˜åŒ–åŸå› â€éƒ½æ˜¯ä¸å¯åº¦é‡çš„ï¼Œå› é¡¹ç›®è€Œå¼‚ï¼Œå› ç¯å¢ƒè€Œå¼‚ã€‚</p>
<p>å¯¹äºå•ä¸€èŒè´£åŸåˆ™ï¼Œæˆ‘çš„å»ºè®®æ˜¯æ¥å£ä¸€å®šè¦åšåˆ°å•ä¸€èŒè´£ï¼Œç±»çš„è®¾è®¡å°½é‡åšåˆ°åªæœ‰ä¸€ä¸ªåŸå› å¼•èµ·å˜åŒ–ã€‚</p>
<h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><p>é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principleï¼ŒLSP)æœ‰ä¸¤ä¸ªå®šä¹‰ã€‚</p>
<blockquote>
<p>ç¬¬ä¸€ç§å®šä¹‰ï¼Œä¹Ÿæ˜¯æœ€æ­£å®—çš„å®šä¹‰ï¼š<br>If for each object o1 of type S there is an object o2 of type T such that for all programs P defined in terms of T,the behavior of P is unchanged when o1 is substituted for &gt;o2 then S is a subtype of T.<br><br>å¦‚æœå¯¹æ¯ä¸€ä¸ªç±»å‹ä¸ºSçš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»å‹ä¸ºTçš„å¯¹è±¡o2ï¼Œä½¿å¾—ä»¥Tå®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹Sæ˜¯ç±»å‹Tçš„å­ç±»å‹ã€‚<br><br><br>ç¬¬äºŒç§å®šä¹‰ï¼š<br>Functions that use pointers or references to base classes must be able to use objects of derived classes without knowing it.<br><br>æ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚</p>
</blockquote>
<p>ç¬¬äºŒä¸ªå®šä¹‰æ˜¯æœ€æ¸…æ™°æ˜ç¡®çš„ï¼Œé€šä¿—ç‚¹è®²ï¼Œåªè¦çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±å¯ä»¥å‡ºç°ï¼Œè€Œä¸”æ›¿æ¢ä¸ºå­ç±»ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æˆ–å¼‚å¸¸ï¼Œä½¿ç”¨è€…å¯èƒ½æ ¹æœ¬å°±ä¸éœ€è¦çŸ¥é“æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»ã€‚ä½†æ˜¯ï¼Œåè¿‡æ¥å°±ä¸è¡Œäº†ï¼Œæœ‰å­ç±»å‡ºç°çš„åœ°æ–¹ï¼Œçˆ¶ç±»æœªå¿…å°±èƒ½é€‚åº”ã€‚</p>
<p>æ³¨æ„ã€€å¦‚æœå­ç±»ä¸èƒ½å®Œæ•´åœ°å®ç°çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ–è€…çˆ¶ç±»çš„æŸäº›æ–¹æ³•åœ¨å­ç±»ä¸­å·²ç»å‘ç”Ÿâ€œç•¸å˜â€ï¼Œåˆ™å»ºè®®æ–­å¼€çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œé‡‡ç”¨ä¾èµ–ã€èšé›†ã€ç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿ã€‚</p>
<h2 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a>ä¾èµ–å€’ç½®åŸåˆ™</h2><p><strong>æ¦‚å¿µ</strong><br>ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependence Inversion Principle,DIPï¼‰</p>
<blockquote>
<p>High level modules should not depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details.Details should depend upon abstractions.<br><br>ç¿»è¯‘è¿‡æ¥ï¼ŒåŒ…å«ä¸‰å±‚å«ä¹‰ï¼š<br>1.é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›<br>2.æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼›<br>3.ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚</p>
</blockquote>
<p>ä¾èµ–å€’ç½®åŸåˆ™åœ¨Javaè¯­è¨€ä¸­çš„è¡¨ç°å°±æ˜¯ï¼š<br>â— æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®ç°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»äº§ç”Ÿçš„ï¼›<br>â— æ¥å£æˆ–æŠ½è±¡ç±»ä¸ä¾èµ–äºå®ç°ç±»ï¼›<br>â— å®ç°ç±»ä¾èµ–æ¥å£æˆ–æŠ½è±¡ç±»ã€‚</p>
<p>æ›´åŠ ç²¾ç®€çš„å®šä¹‰å°±æ˜¯â€œé¢å‘æ¥å£ç¼–ç¨‹â€â€”â€”OODï¼ˆObject-Oriented Designï¼Œé¢å‘å¯¹è±¡è®¾è®¡ï¼‰çš„ç²¾é«“ä¹‹ä¸€ã€‚</p>
<p>ä¾èµ–å€’ç½®åŸåˆ™çš„ä¼˜ç‚¹ï¼š<br>ä¾èµ–å€’ç½®åŸåˆ™å¯ä»¥å‡å°‘ç±»é—´çš„è€¦åˆæ€§ï¼Œæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œé™ä½å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™©ï¼Œæé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚<br>å‡å°‘å¹¶è¡Œå¼€å‘å¼•èµ·çš„é£é™©ã€‚</p>
<p><strong>ä¾èµ–çš„ä¸‰ç§å†™æ³•</strong><br>1.æ„é€ å‡½æ•°ä¼ é€’ä¾èµ–å¯¹è±¡ï¼›<br>2.Setteræ–¹æ³•ä¼ é€’ä¾èµ–å¯¹è±¡ï¼›<br>3.æ¥å£å£°æ˜ä¾èµ–å¯¹è±¡ã€‚</p>
<p><strong>è§„åˆ™</strong><br>1.æ¯ä¸ªç±»å°½é‡éƒ½æœ‰æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œæˆ–è€…æŠ½è±¡ç±»å’Œæ¥å£ä¸¤è€…éƒ½å…·å¤‡ã€‚<br>2.å˜é‡çš„è¡¨é¢ç±»å‹å°½é‡æ˜¯æ¥å£æˆ–è€…æ˜¯æŠ½è±¡ç±»ã€‚<br>3.ä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿã€‚<br>4.å°½é‡ä¸è¦è¦†å†™åŸºç±»çš„æ–¹æ³•ã€‚<br>5.ç»“åˆé‡Œæ°æ›¿æ¢åŸåˆ™ä½¿ç”¨ã€‚</p>
<h2 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><blockquote>
<p>æ¥å£ï¼š<br>å®ä¾‹æ¥å£ï¼ˆObject Interfaceï¼‰å’Œç±»æ¥å£ï¼ˆClass Interfaceï¼‰ã€‚<br>éš”ç¦»ï¼š<br>Clients should not be forced to depend upon interfaces that they donâ€™t use.<br>å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚<br>The dependency of one class to another one should depend on the smallest possible interface.<br>ç±»é—´çš„ä¾èµ–å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚</p>
</blockquote>
<p>åœ¨å®è·µä¸­å¯ä»¥æ ¹æ®ä»¥ä¸‹å‡ ä¸ªè§„åˆ™æ¥è¡¡é‡ï¼š<br>â— ä¸€ä¸ªæ¥å£åªæœåŠ¡äºä¸€ä¸ªå­æ¨¡å—æˆ–ä¸šåŠ¡é€»è¾‘ï¼›<br>â— é€šè¿‡ä¸šåŠ¡é€»è¾‘å‹ç¼©æ¥å£ä¸­çš„publicæ–¹æ³•ï¼Œæ¥å£æ—¶å¸¸å»å›é¡¾ï¼Œå°½é‡è®©æ¥å£è¾¾åˆ°â€œæ»¡èº«ç­‹éª¨è‚‰â€ï¼Œè€Œä¸æ˜¯â€œè‚¥å˜Ÿå˜Ÿâ€çš„ä¸€å¤§å †æ–¹æ³•ï¼›<br>â— å·²ç»è¢«æ±¡æŸ“äº†çš„æ¥å£ï¼Œå°½é‡å»ä¿®æ”¹ï¼Œè‹¥å˜æ›´çš„é£é™©è¾ƒå¤§ï¼Œåˆ™é‡‡ç”¨é€‚é…å™¨æ¨¡å¼è¿›è¡Œè½¬åŒ–å¤„ç†ï¼›<br>â— äº†è§£ç¯å¢ƒï¼Œæ‹’ç»ç›²ä»ã€‚æ¯ä¸ªé¡¹ç›®æˆ–äº§å“éƒ½æœ‰ç‰¹å®šçš„ç¯å¢ƒå› ç´ ï¼Œåˆ«çœ‹åˆ°å¤§å¸ˆæ˜¯è¿™æ ·åšçš„ä½ å°±ç…§æŠ„ã€‚åƒä¸‡åˆ«ï¼Œç¯å¢ƒä¸åŒï¼Œæ¥å£æ‹†åˆ†çš„æ ‡å‡†å°±ä¸åŒã€‚æ·±å…¥äº†è§£ä¸šåŠ¡é€»è¾‘ï¼Œæœ€å¥½çš„æ¥å£è®¾è®¡å°±å‡ºè‡ªä½ çš„æ‰‹ä¸­ï¼</p>
<h2 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><p>è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLaw of Demeterï¼ŒLoDï¼‰ä¹Ÿç§°ä¸ºæœ€å°‘çŸ¥è¯†åŸåˆ™ï¼ˆLeast Knowledge Principleï¼ŒLKPï¼‰ï¼Œè™½ç„¶åå­—ä¸åŒï¼Œä½†æè¿°çš„æ˜¯åŒä¸€ä¸ªè§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ã€‚é€šä¿—åœ°è®²ï¼Œä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“å¾—æœ€å°‘ï¼Œä½ ï¼ˆè¢«è€¦åˆæˆ–è°ƒç”¨çš„ç±»ï¼‰çš„å†…éƒ¨æ˜¯å¦‚ä½•å¤æ‚éƒ½å’Œæˆ‘æ²¡å…³ç³»ï¼Œé‚£æ˜¯ä½ çš„äº‹æƒ…ï¼Œæˆ‘å°±çŸ¥é“ä½ æä¾›çš„è¿™ä¹ˆå¤špublicæ–¹æ³•ï¼Œæˆ‘å°±è°ƒç”¨è¿™ä¹ˆå¤šï¼Œå…¶ä»–çš„æˆ‘ä¸€æ¦‚ä¸å…³å¿ƒã€‚</p>
<p>è¿ªç±³ç‰¹æ³•åˆ™è¦æ±‚ç±»â€œç¾æ¶©â€ä¸€ç‚¹ï¼Œå°½é‡ä¸è¦å¯¹å¤–å…¬å¸ƒå¤ªå¤šçš„publicæ–¹æ³•å’Œéé™æ€çš„publicå˜é‡ï¼Œå°½é‡å†…æ•›ï¼Œå¤šä½¿ç”¨privateã€package-privateã€protectedç­‰è®¿é—®æƒé™ã€‚</p>
<p>ä¸€ä¸ªç±»å…¬å¼€çš„publicå±æ€§æˆ–æ–¹æ³•è¶Šå¤šï¼Œä¿®æ”¹æ—¶æ¶‰åŠçš„é¢ä¹Ÿå°±è¶Šå¤§ï¼Œå˜æ›´å¼•èµ·çš„é£é™©æ‰©æ•£ä¹Ÿå°±è¶Šå¤§ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿æŒæœ‹å‹ç±»é—´çš„è·ç¦»ï¼Œåœ¨è®¾è®¡æ—¶éœ€è¦åå¤è¡¡é‡ï¼šæ˜¯å¦è¿˜å¯ä»¥å†å‡å°‘publicæ–¹æ³•å’Œå±æ€§ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹ä¸ºprivateã€package-privateï¼ˆåŒ…ç±»å‹ï¼Œåœ¨ç±»ã€æ–¹æ³•ã€å˜é‡å‰ä¸åŠ è®¿é—®æƒé™ï¼Œåˆ™é»˜è®¤ä¸ºåŒ…ç±»å‹ï¼‰ã€protectedç­‰è®¿é—®æƒé™ï¼Œæ˜¯å¦å¯ä»¥åŠ ä¸Šfinalå…³é”®å­—ç­‰ã€‚</p>
<p>æ€»ä¹‹ï¼Œé«˜å†…èšä½è€¦åˆï¼Œä¸€ä¸ªç±»åº”è¯¥å‡å°‘å¯¹å¤–å…¬å¼€çš„æ¥å£ï¼Œåšåˆ°å³ä½¿æ”¹å˜ä¹Ÿä¸ä¼šå½±å“å…¶ä»–ç±»ã€‚</p>
<h2 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h2><blockquote>
<p>Software entities like classes,modules and functions should be open for extension but closed for modifications.<br><br>ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</p>
</blockquote>
<p>å¼€é—­åŸåˆ™å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¹¶ä¸æ„å‘³ç€ä¸åšä»»ä½•ä¿®æ”¹ï¼Œä½å±‚æ¨¡å—çš„å˜æ›´ï¼Œå¿…ç„¶è¦æœ‰é«˜å±‚æ¨¡å—è¿›è¡Œè€¦åˆï¼Œå¦åˆ™å°±æ˜¯ä¸€ä¸ªå­¤ç«‹æ— æ„ä¹‰çš„ä»£ç ç‰‡æ®µã€‚<br>cdq:é€šè¿‡è¦†å†™æ¥å®ç°æ–°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ã€‚<br>é€šè¿‡æ‰©å±•æ¥å®ç°ä¸šåŠ¡é€»è¾‘çš„å˜åŒ–ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ã€‚</p>
<h1 id="23ç§è®¾è®¡æ¨¡å¼å½’ç±»"><a href="#23ç§è®¾è®¡æ¨¡å¼å½’ç±»" class="headerlink" title="23ç§è®¾è®¡æ¨¡å¼å½’ç±»"></a>23ç§è®¾è®¡æ¨¡å¼å½’ç±»</h1><h2 id="åˆ›å»ºå‹æ¨¡å¼"><a href="#åˆ›å»ºå‹æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹æ¨¡å¼"></a>åˆ›å»ºå‹æ¨¡å¼</h2><p>è¿™äº›è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ new è¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚     </p>
<p>-å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Method Patternï¼‰â˜…â˜…â˜…â˜…â˜…<br>-æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰â˜…â˜…â˜…â˜…â˜…<br>-å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰â˜…â˜…â˜…â˜…â˜†<br>-å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰â˜…â˜…â˜†â˜†â˜†<br>-åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰â˜…â˜…â˜…â˜†â˜†</p>
<h2 id="ç»“æ„å‹æ¨¡å¼"><a href="#ç»“æ„å‹æ¨¡å¼" class="headerlink" title="ç»“æ„å‹æ¨¡å¼"></a>ç»“æ„å‹æ¨¡å¼</h2><p>è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚     </p>
<p>-é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰â˜…â˜…â˜…â˜…â˜†<br>-æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰â˜…â˜…â˜…â˜†â˜†<br>-è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰<br>-ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰â˜…â˜…â˜…â˜…â˜†<br>-è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰â˜…â˜…â˜…â˜†â˜†<br>-å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰â˜…â˜…â˜…â˜…â˜…<br>-äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰â˜…â˜†â˜†â˜†â˜†<br>-ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰â˜…â˜…â˜…â˜…â˜†</p>
<h2 id="è¡Œä¸ºå‹æ¨¡å¼"><a href="#è¡Œä¸ºå‹æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹æ¨¡å¼"></a>è¡Œä¸ºå‹æ¨¡å¼</h2><p>è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚     </p>
<p>-è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰â˜…â˜…â˜†â˜†â˜†<br>-å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰â˜…â˜…â˜…â˜…â˜†<br>-è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰â˜…â˜†â˜†â˜†â˜†<br>-è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰â˜…â˜…â˜…â˜…â˜…<br>-ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰â˜…â˜…â˜†â˜†â˜†<br>-å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰â˜…â˜…â˜†â˜†â˜†<br>-è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰â˜…â˜…â˜…â˜…â˜…<br>-çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰â˜…â˜…â˜…â˜†â˜†<br>-ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰<br>-ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰â˜…â˜…â˜…â˜…â˜†<br>-æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰â˜…â˜…â˜…â˜†â˜†<br>-è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰â˜…â˜†â˜†â˜†â˜†</p>
<h2 id="J2EE-æ¨¡å¼"><a href="#J2EE-æ¨¡å¼" class="headerlink" title="J2EE æ¨¡å¼"></a>J2EE æ¨¡å¼</h2><p>è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ã€‚è¿™äº›æ¨¡å¼æ˜¯ç”± Sun Java Center é‰´å®šçš„ã€‚     </p>
<p>-MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰<br>-ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰<br>-ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰<br>-æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰<br>-å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰<br>-æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰<br>-æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰<br>-ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰</p>
<h1 id="23ç§è®¾è®¡æ¨¡å¼è§£æ"><a href="#23ç§è®¾è®¡æ¨¡å¼è§£æ" class="headerlink" title="23ç§è®¾è®¡æ¨¡å¼è§£æ"></a>23ç§è®¾è®¡æ¨¡å¼è§£æ</h1><h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><blockquote>
<p>Ensure a class has only one instance, and provide a global point of access to it.<br><br>ç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚</p>
</blockquote>
<p>Singletonç±»ç§°ä¸ºå•ä¾‹ç±»ï¼Œé€šè¿‡ä½¿ç”¨privateçš„æ„é€ å‡½æ•°ç¡®ä¿äº†åœ¨ä¸€ä¸ªåº”ç”¨ä¸­åªäº§ç”Ÿä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”æ˜¯è‡ªè¡Œå®ä¾‹åŒ–çš„ã€‚</p>
<p>åº”ç”¨æ¡ˆä¾‹ï¼šæ€»çº¿æ¨¡å¼ã€‚</p>
<hr>
```cpp
#include <iostream>

<p>class Singleton<br>{<br>public:<br>    ~Singleton(){<br>        std::cout&lt;&lt;â€destructor called!â€&lt;&lt;std::endl;<br>    }<br>    Singleton(const Singleton&amp;)=delete;<br>    Singleton&amp; operator=(const Singleton&amp;)=delete;<br>    static Singleton&amp; get_instance(){<br>        static Singleton instance;<br>        return instance;</p>
<pre><code>}</code></pre><p>private:<br>    Singleton(){<br>        std::cout&lt;&lt;â€constructor called!â€&lt;&lt;std::endl;<br>    }<br>};</p>
<p>int main(int argc, char *argv[])<br>{<br>    Singleton&amp; instance_1 = Singleton::get_instance();<br>    Singleton&amp; instance_2 = Singleton::get_instance();<br>    return 0;<br>}</p>
<pre><code></code></pre><p>constructor called!<br>destructor called!</p>
<pre><code>
## ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿ
æƒ³æƒ³æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ç”¨å·¥å‚æ¨¡å¼ï¼Ÿä¸‹é¢æˆ‘å°±ç®€å•ä¸¾ä¾‹å­ï¼š
æ–‡ä»¶IOçš„æ“ä½œæˆ‘ä»¬ä¼šç»å¸¸ç”¨å¾—åˆ°å§ï¼Œæ‰€ä»¥BufferedReaderå¯¹è±¡ç»å¸¸è¦åˆ›å»ºçš„ï¼š
```cpp
// åˆ›å»ºä¸€ä¸ªBufferedReaderå¯¹è±¡
File file = new File(&quot;aa.txt&quot;);
FileReader fileReader = new FileReader(file);
BufferedReader bufferedReader = new BufferedReader(fileReader);</code></pre><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œåˆ›å»ºä¸€ä¸ªBufferReaderå¯¹è±¡é‡Œé¢éœ€è¦ä¸€ä¸ªFileReaderå¯¹è±¡ï¼Œè€ŒFileReaderå¯¹è±¡åˆè¦Fileå¯¹è±¡ã€‚é‚£åˆ›å»ºè¿™ä¸ªBufferReaderå¯¹è±¡è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„(ä»£ç ä¸Šçœ‹ä¸éº»çƒ¦ï¼Œä»æ„é€ ä¸Šçœ‹è¿˜æ˜¯æŒºéº»çƒ¦çš„)ï¼</p>
<p>è™½ç„¶æ¯”è¾ƒéº»çƒ¦ï¼Œä½†æˆ‘ä»¬è¿˜èƒ½ç”¨ï¼Œèƒ½ç”¨å°±è¡Œï¼äºæ˜¯ä¹ï¼Œæˆ‘ä»¬å°±å»å†™ä»£ç äº†ï¼Œç°åœ¨æœ‰ä¸‰ä¸ªç±»éƒ½è¦è¿›è¡Œæ–‡ä»¶çš„è¯»å†™æ“ä½œï¼Œäºæ˜¯ä»–ä»¬å°±æœ‰è¿™æ ·çš„ä»£ç ï¼š</p>
<pre class="line-numbers language-c"><code class="language-c">public class FileOperateA <span class="token punctuation">{</span>

    public <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>
        File file <span class="token operator">=</span> new <span class="token function">File</span><span class="token punctuation">(</span><span class="token string">"aa.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader fileReader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufferedReader <span class="token operator">=</span> new <span class="token function">BufferedReader</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">// è¯»å†™æ–‡ä»¶....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æ­¤æ—¶ï¼šä¸Šå¤´è¯´ï¼Œæˆ‘è¦æ¢æˆLineNumberReaderæ¥è¯»å†™ï¼Œæœ‰è¿™ä¸ªéœ€æ±‚ï¼é‚£æˆ‘ä»¬ä½œä¸ºä¸€ä¸ªå†™ä»£ç çš„ï¼Œèƒ½æ€ä¹ˆåŠï¼Ÿå¾ˆç»æœ›ä¹Ÿéœ€è¦å»å®Œæˆå‘€ã€‚</p>
<ul>
<li>ä¸ç†Ÿæ‚‰IDEçš„å°ä¼™å­å°±ä¸€ä¸ªä¸€ä¸ªå°†BufferedReaderæ”¹æˆLineNumberReaderï¼Œç°åœ¨å°±3ä¸ªç±»ç”¨åˆ°äº†BufferedReaderï¼Œä¹Ÿå°±æ”¹6æ¬¡è€Œå·²ã€‚(ps:é‚£å¦‚æœå¾ˆå¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†å‘¢ï¼Ÿ)</li>
<li>ç†Ÿæ‚‰IDEçš„å°ä¼™å­å°±å…¨å±€æ›¿æ¢é‡æ„ï¼Œå¦¥å¦¥çš„ï¼</li>
</ul>
<p>é‚£æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿè®©åˆ›å»ºå¯¹è±¡å˜å¾—ç®€å•è€Œä¸”ä¿®æ”¹å¯¹è±¡æ—¶èƒ½å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿ<br>å·¥å‚æ¨¡å¼å°±è¡Œäº†ã€‚</p>
<p>å†è¯´ä»é¢å‘å¯¹è±¡çš„è§’åº¦æ¥çœ‹ï¼šæˆ‘ä¸€ä¸ªæ“ä½œæ–‡ä»¶çš„ç±»è¿˜è¦æˆ‘ä¼šåˆ›å»ºBufferReaderæ˜¯ä¸æ˜¯æœ‰ç‚¹è¿‡åˆ†äº†ï¼Ÿ(èŒè´£æ²¡æœ‰åˆ†å·¥å¥½)<br>äº¤ç»™å·¥å‚æ¥åˆ›å»ºå¯¹è±¡è¿™å°±å¾ˆé¢å‘å¯¹è±¡äº†ï¼</p>
<p>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œå®ƒå¯ä»¥ç”Ÿäº§Readerå¯¹è±¡ï¼</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// åˆ›å»ºReaderå¯¹è±¡çš„å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReaderFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Reader <span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">File</span><span class="token punctuation">(</span><span class="token string">"aa.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> reader<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>é‚£ä¹ˆæˆ‘ä»¬è¦å¾—åˆ°BufferReaderå¯¹è±¡å°±è´¼ç®€å•äº†ï¼š</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOperateA</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>


        <span class="token comment" spellcheck="true">//-------æˆ‘æœ‰å·¥å‚äº†ï¼Œè¿˜ç”¨è‡ªå·±æå—ï¼Ÿä¸ç”¨äº†ï¼</span>
        <span class="token comment" spellcheck="true">//File file = new File("aa.txt");</span>
        <span class="token comment" spellcheck="true">//FileReader fileReader = new FileReader(file);</span>
        <span class="token comment" spellcheck="true">//BufferedReader bufferedReader = new BufferedReader(fileReader);</span>
        <span class="token comment" spellcheck="true">//-------æˆ‘æœ‰å·¥å‚äº†ï¼Œè¿˜ç”¨è‡ªå·±æå—ï¼Ÿä¸ç”¨äº†ï¼</span>

        <span class="token comment" spellcheck="true">// ç”¨å·¥å‚æ¥åˆ›å»ºå‡ºå¯¹è±¡</span>
        Reader reader <span class="token operator">=</span> ReaderFactory<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// è¯»å†™æ–‡ä»¶....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å·¥å‚å°†æˆ‘ä»¬åˆ›å»ºçš„å¯¹è±¡è¿‡ç¨‹ç»™å±è”½äº†ï¼</p>
<p>æ­¤æ—¶æˆ‘è¦æ”¹æˆLineNumberReaderæ€ä¹ˆç©ï¼Ÿåœ¨å·¥å‚ä¸Šæ”¹ä¸€ä¸‹å°±å¥½äº†.</p>
<h2 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="å·¥å‚æ–¹æ³•æ¨¡å¼"></a>å·¥å‚æ–¹æ³•æ¨¡å¼</h2><blockquote>
<p>Define an interface for creating an object,but let subclasses decide which class to instantiate.Factory Method lets a class defer instantiation to subclasses.<br><br>å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå¥³å¨²</p>
<p>IHumanï¼Œäº§å“æ¥å£</p>
<p>CYellowHumanï¼Œäº§å“ä¹‹ä¸€</p>
<p>CWhiteHumanï¼Œäº§å“ä¹‹äºŒ</p>
<p>CBlackHumanï¼Œäº§å“ä¹‹ä¸‰</p>
<p>IHumanFactoryï¼Œå·¥å‚æ¥å£</p>
<p>CYellowHumanFactoryï¼Œå·¥å‚ä¹‹ä¸€</p>
<p>CWhiteHumanFactoryï¼Œå·¥å‚ä¹‹äºŒ</p>
<p>CBlackHumanFactoryï¼Œå·¥å‚ä¹‹ä¸‰</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573293086866.png?x-oss-process=image/resize,m_lfit,h_450" alt="å¥³å¨²é€ äººå›¾"></p>
<p>IHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
class CYellowHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šå¤§ç¬‘ï¼Œå¹¸ç¦å‘€ï¼"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬è¯´çš„éƒ½æ˜¯åŒå­—èŠ‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
class CWhiteHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šå¤§ç¬‘ï¼Œä¾µç•¥çš„ç¬‘å£°"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬éƒ½æ˜¯å•å­—èŠ‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
class CBlackHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººä¼šç¬‘"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººå¯ä»¥è¯´è¯ï¼Œä¸€èˆ¬äººå¬ä¸æ‡‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHuman.h"</span></span>
class IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihumanfactory.h"</span></span>
class CYellowHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowHuman.h"</span></span>
CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihumanfactory.h"</span></span>
class CWhiteHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteHuman.h"</span></span>
CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihumanfactory.h"</span></span>
class CBlackHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackHuman.h"</span></span>
CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NvWa.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ç¬¬ä¸€æ‰¹äººæ˜¯è¿™æ ·çš„ï¼šé»„ç§äººå·¥å‚æ¥ç”Ÿäº§é»„ç§äºº"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-></span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ç¬¬äºŒæ‰¹äººæ˜¯è¿™æ ·çš„ï¼šç™½ç§äººå·¥å‚æ¥ç”Ÿäº§ç™½ç§äºº"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-></span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ç¬¬ä¸‰æ‰¹äººæ˜¯è¿™æ ·çš„ï¼šé»‘ç§äººå·¥å‚æ¥ç”Ÿäº§é»‘ç§äºº"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-></span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-></span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//å·¥å‚æ–¹æ³•</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å·¥å‚æ–¹æ³•ï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------å·¥å‚æ–¹æ³•ï¼š
----------ç¬¬ä¸€æ‰¹äººæ˜¯è¿™æ ·çš„ï¼šé»„ç§äººå·¥å‚æ¥ç”Ÿäº§é»„ç§äºº
é»„è‰²äººç§ä¼šå“­
é»„è‰²äººç§ä¼šå¤§ç¬‘ï¼Œå¹¸ç¦å‘€ï¼
é»„è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬è¯´çš„éƒ½æ˜¯åŒå­—èŠ‚
----------ç¬¬äºŒæ‰¹äººæ˜¯è¿™æ ·çš„ï¼šç™½ç§äººå·¥å‚æ¥ç”Ÿäº§ç™½ç§äºº
ç™½è‰²äººç§ä¼šå“­
ç™½è‰²äººç§ä¼šå¤§ç¬‘ï¼Œä¾µç•¥çš„ç¬‘å£°
ç™½è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬éƒ½æ˜¯å•å­—èŠ‚
----------ç¬¬ä¸‰æ‰¹äººæ˜¯è¿™æ ·çš„ï¼šé»‘ç§äººå·¥å‚æ¥ç”Ÿäº§é»‘ç§äºº
é»‘äººä¼šå“­
é»‘äººä¼šç¬‘
é»‘äººå¯ä»¥è¯´è¯ï¼Œä¸€èˆ¬äººå¬ä¸æ‡‚ </code></pre><h2 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a href="#æŠ½è±¡å·¥å‚æ¨¡å¼" class="headerlink" title="æŠ½è±¡å·¥å‚æ¨¡å¼"></a>æŠ½è±¡å·¥å‚æ¨¡å¼</h2><blockquote>
<p>Provide an interface for creating families of related or dependent objects without specifying their concrete classes.<br><br>ä¸ºåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡æä¾›ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸”æ— é¡»æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚</p>
</blockquote>
<p>æŠ½è±¡å·¥å‚ï¼Œæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚å¯¹äºå·¥å‚æ–¹æ³•æ¥è¯´ï¼ŒæŠ½è±¡å·¥å‚å¯å®ç°ä¸€ç³»åˆ—äº§å“çš„ç”Ÿäº§ï¼ŒæŠ½è±¡å·¥å‚æ›´æ³¨é‡äº§å“çš„ç»„åˆã€‚</p>
<hr>

<p>main()ï¼Œå¥³å¨²</p>
<p>IHumanï¼Œäº§å“æ¥å£</p>
<p>CYellowHumanï¼ŒæŠ½è±¡äº§å“ä¹‹ä¸€</p>
<p>CYellowFemaleHumanï¼Œå…·ä½“äº§å“ä¹‹ä¸€</p>
<p>CYellowMaleHumanï¼Œå…·ä½“äº§å“ä¹‹äºŒ</p>
<p>CWhiteHumanï¼ŒæŠ½è±¡äº§å“ä¹‹äºŒ</p>
<p>CWhiteFemaleHumanï¼Œå…·ä½“äº§å“ä¹‹ä¸‰</p>
<p>CWhiteMaleHumanï¼Œå…·ä½“äº§å“ä¹‹å››</p>
<p>CBlackHumanï¼ŒæŠ½è±¡äº§å“ä¹‹ä¸‰</p>
<p>CBlackFemaleHumanï¼Œå…·ä½“äº§å“ä¹‹äº”</p>
<p>CBlackMaleHumanï¼Œå…·ä½“äº§å“ä¹‹å…­</p>
<p>IHumanFactoryï¼ŒæŠ½è±¡å·¥å‚</p>
<p>CStandardHumanFactoryï¼ŒæŠ½è±¡å·¥å‚åŸºç±»ï¼ˆæ­¤ç±»å¯æœ‰å¯æ— ï¼‰</p>
<p>CFemaleHumanFactoryï¼Œå·¥å‚ä¹‹ä¸€</p>
<p>CMaleHumanFactoryï¼Œå·¥å‚ä¹‹äºŒ</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573295669309.png?x-oss-process=image/resize,m_lfit,h_450" alt="å¥³å¨²é€ äººæ–°å›¾"></p>
<p>IHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šå¤§ç¬‘ï¼Œå¹¸ç¦å‘€ï¼"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»„è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬è¯´çš„éƒ½æ˜¯åŒå­—èŠ‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"yellowhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowFemaleHuman <span class="token punctuation">:</span>
    public CYellowHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥é»„ç§äººçš„æ€§åˆ«ä¸ºå¥³..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"yellowhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowMaleHuman <span class="token punctuation">:</span>
    public CYellowHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥é»„ç§äººçš„æ€§åˆ«ä¸ºç”·..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šå¤§ç¬‘ï¼Œä¾µç•¥çš„ç¬‘å£°"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç™½è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬éƒ½æ˜¯å•å­—èŠ‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"whitehuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteFemaleHuman <span class="token punctuation">:</span>
    public CWhiteHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥ç™½ç§äººçš„æ€§åˆ«ä¸ºå¥³..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"whitehuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteMaleHuman <span class="token punctuation">:</span>
    public CWhiteHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥ç™½ç§äººçš„æ€§åˆ«ä¸ºç”·..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ihuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººä¼šç¬‘"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººä¼šå“­"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é»‘äººå¯ä»¥è¯´è¯ï¼Œä¸€èˆ¬äººå¬ä¸æ‡‚"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"blackhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackFemaleHuman <span class="token punctuation">:</span>
    public CBlackHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥é»‘ç§äººçš„æ€§åˆ«ä¸ºå¥³..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"blackhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackMaleHuman <span class="token punctuation">:</span>
    public CBlackHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯¥é»‘ç§äººçš„æ€§åˆ«ä¸ºç”·..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHuman.h"</span></span>
class IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>MaleHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"StandardHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHumanFactory.h"</span></span>
template<span class="token operator">&lt;</span>class T<span class="token operator">></span>
class CMaleHumanFactory <span class="token punctuation">:</span>
   public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CMaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">CMaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FemaleHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"standardhumanfactory.h"</span></span>
template<span class="token operator">&lt;</span>class T<span class="token operator">></span>
class CFemaleHumanFactory <span class="token punctuation">:</span>
   public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CFemaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">CFemaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AbstractFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"FemaleHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"MaleHumanFactory.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"yellowhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowFemaleHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"YellowMaleHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"whitehuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteFemaleHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"WhiteMaleHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"blackhuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackFemaleHuman.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlackMaleHuman.h"</span></span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IHumanFactory<span class="token operator">*</span> pFemaleHumanFactory <span class="token operator">=</span> new CFemaleHumanFactory<span class="token operator">&lt;</span>CYellowFemaleHuman<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IHuman<span class="token operator">*</span> pYellowFemaleHuman <span class="token operator">=</span> pFemaleHumanFactory<span class="token operator">-></span><span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-></span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-></span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-></span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-></span><span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pYellowFemaleHuman<span class="token punctuation">;</span>
   delete pFemaleHumanFactory<span class="token punctuation">;</span>

   IHumanFactory<span class="token operator">*</span> pMaleHumanFactory <span class="token operator">=</span> new CMaleHumanFactory<span class="token operator">&lt;</span>CYellowMaleHuman<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IHuman<span class="token operator">*</span> pYellowMaleHuman <span class="token operator">=</span> pMaleHumanFactory<span class="token operator">-></span><span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-></span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-></span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-></span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-></span><span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pYellowMaleHuman<span class="token punctuation">;</span>
   delete pMaleHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>é»„è‰²äººç§ä¼šå“­
é»„è‰²äººç§ä¼šå¤§ç¬‘ï¼Œå¹¸ç¦å‘€ï¼
é»„è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬è¯´çš„éƒ½æ˜¯åŒå­—èŠ‚
è¯¥é»„ç§äººçš„æ€§åˆ«ä¸ºå¥³...
é»„è‰²äººç§ä¼šå“­
é»„è‰²äººç§ä¼šå¤§ç¬‘ï¼Œå¹¸ç¦å‘€ï¼
é»„è‰²äººç§ä¼šè¯´è¯ï¼Œä¸€èˆ¬è¯´çš„éƒ½æ˜¯åŒå­—èŠ‚
è¯¥é»„ç§äººçš„æ€§åˆ«ä¸ºç”·... </code></pre><h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h2><blockquote>
<p>Define the skeleton of an algorithm in an operation,deferring some steps to subclasses.Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithmâ€™s structure.<br><br>å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„æ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p>
</blockquote>
<p>main()ï¼Œå®¢æˆ·</p>
<p>CHummerModelï¼Œæ‚é©¬æ¨¡å‹</p>
<p>CHummerH1Modelï¼Œæ‚é©¬æ¨¡å‹å‹å·1</p>
<p>CHummerH2Modelï¼Œæ‚é©¬æ¨¡å‹å‹å·2</p>
<p>è¯´æ˜ï¼šåœ¨CHummerModelå£°æ˜Startã€Engineboomã€Alarmã€Stopè™šå‡½æ•°ï¼Œç”±æ´¾ç”Ÿç±»å®ç°ã€‚åŸºç±»çš„Runè´Ÿè´£ç»„ç»‡é€»è¾‘ï¼Œåˆ†åˆ«è°ƒç”¨è¿™å‡ ä¸ªæ´¾ç”Ÿç±»å®ç°çš„å‡½æ•°ã€‚</p>
<p>æ³¨æ„ï¼šåŸºç±»ä¸­çš„Runåº”è¯¥ç¦æ­¢æ´¾ç”Ÿç±»è¦†ç›–ã€‚<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573313617677.png?x-oss-process=image/resize,m_lfit,h_450" alt="æ‚é©¬è½¦æ¨¡ç±»å›¾"></p>
<p>HummerModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    virtual <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//å…ˆå‘åŠ¨æ±½è½¦</span>
    <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//å¼•æ“å¼€å§‹è½°é¸£</span>
    <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//ç„¶åå°±å¼€å§‹è·‘äº†ï¼Œè·‘çš„è¿‡ç¨‹ä¸­é‡åˆ°ä¸€æ¡ç‹—æŒ¡è·¯ï¼Œå°±æŒ‰å–‡å­</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//åˆ°è¾¾ç›®çš„åœ°å°±åœè½¦</span>
    <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//é’©å­æ–¹æ³•ï¼Œé»˜è®¤å–‡å­æ˜¯ä¼šå“çš„</span>
    <span class="token keyword">return</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH1Model.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"hummermodel.h"</span></span>
class CHummerH1Model <span class="token punctuation">:</span>
    public CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetAlarm</span><span class="token punctuation">(</span>bool tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    bool m_isAlarm<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH1Model.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerH1Model.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isAlarm <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H1å‘åŠ¨..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H1åœè½¦..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H1é¸£ç¬›"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H1å¼•æ“å£°éŸ³æ˜¯è¿™æ ·...."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_isAlarm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetAlarm</span><span class="token punctuation">(</span> bool tag <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_isAlarm <span class="token operator">=</span> tag<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH2Model.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"hummermodel.h"</span></span>
class CHummerH2Model <span class="token punctuation">:</span>
    public CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH2Model.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerH2Model.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H2å‘åŠ¨..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H2åœè½¦..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H2é¸£ç¬›"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‚é©¬H2å¼•æ“å£°éŸ³æ˜¯è¿™æ ·...."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>TemplateMethod.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerH1Model.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HummerH2Model.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;crtdbg.h></span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//å®¢æˆ·å¼€ç€H1å‹å·ï¼Œå‡ºå»é›å¼¯äº†</span>
    CHummerModel <span class="token operator">*</span>ph1 <span class="token operator">=</span> new <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph1<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph1<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å®¢æˆ·å¼€H2å‹å·ï¼Œå‡ºå»ç©è€äº†</span>
    CHummerModel <span class="token operator">*</span>ph2 <span class="token operator">=</span> new <span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph2<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph2<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å®¢æˆ·å¼€ç€H1å‹å·ï¼Œå‡ºå»é›å¼¯äº†ï¼Œå¹¶ä¸”ä¸è®©å–‡å­å“</span>
    CHummerH1Model <span class="token operator">*</span>ph11 <span class="token operator">=</span> new <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph11<span class="token operator">-></span><span class="token function">SetAlarm</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph11<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph11<span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>æ‚é©¬H1å‘åŠ¨...
æ‚é©¬H1å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
æ‚é©¬H1é¸£ç¬›
æ‚é©¬H1åœè½¦...æ‚é©¬H2å‘åŠ¨...æ‚é©¬H2å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
æ‚é©¬H2åœè½¦...æ‚é©¬H1å‘åŠ¨...æ‚é©¬H1å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
æ‚é©¬H1åœè½¦...</code></pre><h2 id="å»ºé€ è€…æ¨¡å¼"><a href="#å»ºé€ è€…æ¨¡å¼" class="headerlink" title="å»ºé€ è€…æ¨¡å¼"></a>å»ºé€ è€…æ¨¡å¼</h2><blockquote>
<p>Separate the construction of a complex object from its representation so that the same construction process can create different representations.<br><br>å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>CCarModelï¼Œäº§å“æ¨¡å‹</p>
<p>CBenzModelï¼Œå¥”é©°æ¨¡å‹</p>
<p>CBMWModelï¼Œå®é©¬æ¨¡å‹</p>
<p>ICarBuilderï¼Œå»ºé€ è€…æ¥å£</p>
<p>CBenzBuilderï¼Œå¥”é©°å»ºé€ è€…</p>
<p>CBMWBuilderï¼Œå®é©¬å»ºé€ è€…</p>
<p>CDirectorï¼Œå¯¼æ¼”</p>
<p>è¯´æ˜ï¼šCCarModelå®ç°æ¨¡æ¿æ–¹æ³•ï¼ŒBuilderè´Ÿè´£å¼€å§‹å»ºé€ äº§å“ã€‚å»ºé€ äº§å“æ—¶ï¼Œæ„å»ºçš„é¡ºåºç”±Directoræˆ–mainå†³å®šã€‚</p>
<p>æ³¨æ„ï¼šå»ºé€ è€…æ¨¡å¼å’ŒæŠ½è±¡å·¥å‚éå¸¸ç±»ä¼¼ã€‚å»ºé€ è€…æ›´é‡è§†äº§å“å»ºé€ æ—¶çš„é€»è¾‘é¡ºåºï¼Œè€ŒæŠ½è±¡å·¥å‚æ›´é‡è§†ç”Ÿäº§å‡ºä¸åŒå‹å·çš„äº§å“ï¼ŒæŠ½è±¡å·¥å‚ä¸å…³å¿ƒé¡ºåºã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573314518993.png?x-oss-process=image/resize,m_lfit,h_450" alt="æ±½è½¦æ¨¡å‹ç±»å›¾"></p>
<p>// Builder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CarModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Director.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">DoBenzRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ç”Ÿæˆå¥”é©°æ¨¡å‹----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   CBenzModel<span class="token operator">*</span> pBenz <span class="token operator">=</span> new <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>string<span class="token operator">></span> seq<span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"engine boom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å®¢æˆ·è¦æ±‚runçš„æ—¶å€™å…ˆå‘åŠ¨å¼•æ“</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯åŠ¨èµ·æ¥</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¼€äº†ä¸€æ®µå°±åœä¸‹æ¥</span>

   pBenz<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//ä½¿ç”¨æ¨¡å¼åï¼Œç”±benzBuilderå’ŒbmwBuilderæ¥ç”Ÿæˆï¼Œå¹¶ä¸”ä½¿ç”¨åŒæ ·çš„åˆ›å»ºé¡ºåºã€‚</span>
<span class="token keyword">void</span> <span class="token function">DoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ç”¨åŒä¸€ä¸ªé¡ºåºï¼Œç”Ÿæˆæ¨¡å‹----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>string<span class="token operator">></span> seq<span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"engine boom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CBenzBuilder benzBuilder<span class="token punctuation">;</span>
   benzBuilder<span class="token punctuation">.</span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   CBenzModel<span class="token operator">*</span> pBenz <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>benzBuilder<span class="token punctuation">.</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CBMWBuilder bmwBuilder<span class="token punctuation">;</span>
   bmwBuilder<span class="token punctuation">.</span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   CBMWModel<span class="token operator">*</span> pBmw <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>bmwBuilder<span class="token punctuation">.</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//ä½¿ç”¨æŒ‡å¯¼è€…æ¥å°è£…åˆ›å»ºçš„é€»è¾‘ï¼ŒæŠŠåˆ›å»ºçš„é¡ºåºå†…èšåœ¨æŒ‡å¯¼è€…ç±»é‡Œé¢ã€‚</span>
<span class="token keyword">void</span> <span class="token function">DoDirector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------æ‰¹é‡ç”Ÿæˆæ¨¡å‹----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   CDirector director<span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//1Wè¾†Aç±»å‹çš„å¥”é©°è½¦</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//100Wè¾†Bç±»å‹çš„å¥”é©°è½¦</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//1000Wè¾†Cç±»å‹çš„å®é©¬è½¦</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoBenzRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">DoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">DoDirector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CarModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    virtual <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span> m_pSequence<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CarModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CarModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSequence <span class="token operator">=</span> pSeq<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator it <span class="token operator">=</span> m_pSequence<span class="token operator">-></span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">&lt;</span> m_pSequence<span class="token operator">-></span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        string actionName <span class="token operator">=</span> <span class="token operator">*</span>it<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">"alarm"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">"engine boom"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"carmodel.h"</span></span>
class CBenzModel <span class="token punctuation">:</span>
    public CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¥”é©°å‘åŠ¨..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¥”é©°åœè½¦..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¥”é©°é¸£ç¬›"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¥”é©°å¼•æ“å£°éŸ³æ˜¯è¿™æ ·...."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"carmodel.h"</span></span>
class CBMWModel <span class="token punctuation">:</span>
    public CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®é©¬å‘åŠ¨..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®é©¬åœè½¦..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®é©¬é¸£ç¬›"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®é©¬å¼•æ“å£°éŸ³æ˜¯è¿™æ ·...."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICarBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CarModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ICarBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ICarBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pseq<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"icarbuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CarModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CBenzBuilder <span class="token punctuation">:</span>
    public ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CCarModel <span class="token operator">*</span>m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzBuilder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzModel.h"</span></span>
CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenz <span class="token operator">=</span> new <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenz<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CCarModel <span class="token operator">*</span> CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"icarbuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CarModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CBMWBuilder <span class="token punctuation">:</span>
    public ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CCarModel <span class="token operator">*</span>m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWBuilder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWModel.h"</span></span>
CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBMW <span class="token operator">=</span> new <span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span> vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span>pSeq <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBMW<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CCarModel <span class="token operator">*</span> CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Director.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWModel.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BenzBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BMWBuilder.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CDirector
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBenzModel <span class="token operator">*</span> <span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBenzModel <span class="token operator">*</span> <span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBMWModel <span class="token operator">*</span> <span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBMWModel <span class="token operator">*</span> <span class="token function">GetDBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">></span> <span class="token operator">*</span> m_pSeqence<span class="token punctuation">;</span>
    CBenzBuilder <span class="token operator">*</span> m_pBenzBuilder<span class="token punctuation">;</span>
    CBMWBuilder <span class="token operator">*</span> m_pBMWBuilder<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Director.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Director.h"</span></span>
CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenzBuilder <span class="token operator">=</span> new <span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBMWBuilder <span class="token operator">=</span> new <span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence <span class="token operator">=</span> new vector<span class="token operator">&lt;</span>string<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBenzBuilder<span class="token punctuation">;</span>
    delete m_pBMWBuilder<span class="token punctuation">;</span>
    delete m_pSeqence<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>m_pBenzBuilder<span class="token operator">-></span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"engine boom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>m_pBenzBuilder<span class="token operator">-></span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"alarm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"stop"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBMWBuilder<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> static_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>m_pBMWBuilder<span class="token operator">-></span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetDBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">"start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-></span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>m_pBMWBuilder<span class="token operator">-></span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------ç”¨åŒä¸€ä¸ªé¡ºåºï¼Œç”Ÿæˆæ¨¡å‹----------
å¥”é©°å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
å¥”é©°å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
----------æ‰¹é‡ç”Ÿæˆæ¨¡å‹----------
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
å¥”é©°å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
å¥”é©°å¼•æ“å£°éŸ³æ˜¯è¿™æ ·....
å¥”é©°å‘åŠ¨...
å¥”é©°åœè½¦...
å®é©¬é¸£ç¬›
å®é©¬å‘åŠ¨...
å®é©¬åœè½¦...
å®é©¬é¸£ç¬›
å®é©¬å‘åŠ¨...
å®é©¬åœè½¦... </code></pre><h2 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h2><blockquote>
<p>Provide a surrogate or placeholder for another object to control access to it.<br><br>ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
</blockquote>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1576996638986.png?x-oss-process=image/resize,m_lfit,h_450" alt="ä»£ç†æ¨¡å¼"></p>
<p>ä»£ç†æ¨¡å¼ä¹Ÿå«åšå§”æ‰˜æ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€é¡¹åŸºæœ¬è®¾è®¡æŠ€å·§ã€‚è®¸å¤šå…¶ä»–çš„æ¨¡å¼ï¼Œå¦‚çŠ¶æ€æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼æœ¬è´¨ä¸Šæ˜¯åœ¨æ›´ç‰¹æ®Šçš„åœºåˆé‡‡ç”¨äº†å§”æ‰˜æ¨¡å¼ï¼Œè€Œä¸”åœ¨æ—¥å¸¸çš„åº”ç”¨ä¸­ï¼Œä»£ç†æ¨¡å¼å¯ä»¥æä¾›éå¸¸å¥½çš„è®¿é—®æ§åˆ¶ã€‚</p>
<p>â— SubjectæŠ½è±¡ä¸»é¢˜è§’è‰²<br>æŠ½è±¡ä¸»é¢˜ç±»å¯ä»¥æ˜¯æŠ½è±¡ç±»ä¹Ÿå¯ä»¥æ˜¯æ¥å£ï¼Œæ˜¯ä¸€ä¸ªæœ€æ™®é€šçš„ä¸šåŠ¡ç±»å‹å®šä¹‰ï¼Œæ— ç‰¹æ®Šè¦æ±‚ã€‚</p>
<p>â— RealSubjectå…·ä½“ä¸»é¢˜è§’è‰²<br>ä¹Ÿå«åšè¢«å§”æ‰˜è§’è‰²ã€è¢«ä»£ç†è§’è‰²ï¼Œæ˜¯ä¸šåŠ¡é€»è¾‘çš„å…·ä½“æ‰§è¡Œè€…ã€‚</p>
<p>â— Proxyä»£ç†ä¸»é¢˜è§’è‰²<br>ä¹Ÿå«åšå§”æ‰˜ç±»ã€ä»£ç†ç±»ã€‚å®ƒè´Ÿè´£å¯¹çœŸå®è§’è‰²çš„åº”ç”¨ï¼ŒæŠŠæ‰€æœ‰æŠ½è±¡ä¸»é¢˜ç±»å®šä¹‰çš„æ–¹æ³•é™åˆ¶å§”æ‰˜ç»™çœŸå®ä¸»é¢˜è§’è‰²å®ç°ï¼Œå¹¶ä¸”åœ¨çœŸå®ä¸»é¢˜è§’è‰²å¤„ç†å®Œæ¯•å‰ååšé¢„å¤„ç†å’Œå–„åå¤„ç†å·¥ä½œã€‚</p>
<p><code>ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</code><br>â— èŒè´£æ¸…æ™°<br>çœŸå®çš„è§’è‰²å°±æ˜¯å®ç°å®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éæœ¬èŒè´£çš„äº‹åŠ¡ï¼Œé€šè¿‡åæœŸçš„ä»£ç†å®Œæˆä¸€ä»¶äº‹åŠ¡ï¼Œé™„å¸¦çš„ç»“æœå°±æ˜¯ç¼–ç¨‹ç®€æ´æ¸…æ™°ã€‚</p>
<p>â— é«˜æ‰©å±•æ€§<br>å…·ä½“ä¸»é¢˜è§’è‰²æ˜¯éšæ—¶éƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ï¼Œåªè¦å®ƒå®ç°äº†æ¥å£ï¼Œç”­ç®¡å®ƒå¦‚ä½•å˜åŒ–ï¼Œéƒ½é€ƒä¸è„±å¦‚æ¥ä½›çš„æ‰‹æŒï¼ˆæ¥å£ï¼‰ï¼Œé‚£æˆ‘ä»¬çš„ä»£ç†ç±»å®Œå…¨å°±å¯ä»¥åœ¨ä¸åšä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚</p>
<p>â— æ™ºèƒ½åŒ–<br>è¿™åœ¨æˆ‘ä»¬ä»¥ä¸Šçš„è®²è§£ä¸­è¿˜æ²¡æœ‰ä½“ç°å‡ºæ¥ï¼Œä¸è¿‡åœ¨æˆ‘ä»¬ä»¥ä¸‹çš„åŠ¨æ€ä»£ç†ç« èŠ‚ä¸­ä½ å°±ä¼šçœ‹åˆ°ä»£ç†çš„æ™ºèƒ½åŒ–æœ‰å…´è¶£çš„è¯»è€…ä¹Ÿå¯ä»¥çœ‹çœ‹Strutsæ˜¯å¦‚ä½•æŠŠè¡¨å•å…ƒç´ æ˜ å°„åˆ°å¯¹è±¡ä¸Šçš„ã€‚</p>
<p>æˆ‘ç›¸ä¿¡ç¬¬ä¸€æ¬¡æ¥è§¦åˆ°ä»£ç†æ¨¡å¼çš„è¯»è€…è‚¯å®šå¾ˆéƒé—·ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†å‘€ï¼Ÿæƒ³æƒ³ç°å®ä¸–ç•Œå§ï¼Œæ‰“å®˜å¸ä¸ºä»€ä¹ˆè¦æ‰¾ä¸ªå¾‹å¸ˆï¼Ÿå› ä¸ºä½ ä¸æƒ³å‚ä¸ä¸­é—´è¿‡ç¨‹çš„æ˜¯æ˜¯ééï¼Œåªè¦å®Œæˆè‡ªå·±çš„ç­”è¾©å°±æˆï¼Œå…¶ä»–çš„æ¯”å¦‚äº‹å‰è°ƒæŸ¥ã€äº‹åè¿½æŸ¥éƒ½ç”±å¾‹å¸ˆæ¥æå®šï¼Œè¿™å°±æ˜¯ä¸ºäº†å‡è½»ä½ çš„è´Ÿæ‹…ã€‚</p>
<p><strong>ä¸ªäººç†è§£ï¼š</strong><br>ä»£ç†æ¨¡å¼åº”è¯¥æ˜¯ç»™ä¼ å…¥çš„å¯¹è±¡ç»Ÿä¸€é™„åŠ å…¶ä»–åŠŸèƒ½ï¼ˆå‡½æ•°ï¼‰ã€‚</p>
<hr>

<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">//ä¸»é¢˜ç±»</span>
class Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
ã€€ã€€virtual <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
ã€€ã€€virtual <span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
ã€€ã€€virtual <span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å…·ä½“ä»£ç†çš„ä»»åŠ¡</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//çœŸå®ä¸»é¢˜ç±»</span>
class ConcreteSubject<span class="token punctuation">:</span>public Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
ã€€ã€€<span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€<span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€<span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//ä»£ç†ç±»</span>
class Proxy<span class="token punctuation">:</span>public Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
ã€€ã€€<span class="token function">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€<span class="token function">Proxy</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> _sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€<span class="token operator">~</span><span class="token function">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ã€€ã€€<span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//å®ç°å¯¹å§”æ‰˜è€…çš„å§”æ‰˜ä»»åŠ¡æ‰§è¡Œä¸è¡¥å¿</span>
ã€€ã€€<span class="token punctuation">{</span>
ã€€ã€€ã€€ã€€<span class="token function">bef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€ã€€ã€€this<span class="token operator">-></span>_sub<span class="token operator">-></span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€ã€€ã€€<span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ã€€ã€€<span class="token punctuation">}</span>

ã€€ã€€<span class="token keyword">void</span> <span class="token function">bef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ã€€ã€€<span class="token punctuation">{</span><span class="token punctuation">}</span>

ã€€ã€€<span class="token keyword">void</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ã€€ã€€<span class="token punctuation">{</span><span class="token punctuation">}</span>

private<span class="token punctuation">:</span>
ã€€ã€€Subject<span class="token operator">*</span> _sub<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h2><blockquote>
<p>Specify the kinds of objects to create using a prototypical instance,and create new objects by copying this prototype.<br><br>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h2 id="ä¸­ä»‹è€…æ¨¡å¼"><a href="#ä¸­ä»‹è€…æ¨¡å¼" class="headerlink" title="ä¸­ä»‹è€…æ¨¡å¼"></a>ä¸­ä»‹è€…æ¨¡å¼</h2><blockquote>
<p>Define an object that encapsulates how a set of objects interact.Mediator promotes loose coupling by keeping objects from referring to each other explicitly,and it lets you vary their interaction independently.<br><br>ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’ä½œç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p>
</blockquote>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/dfg.jpg?x-oss-process=image/resize,m_lfit,h_450" alt="ä¸­ä»‹è€…æ¨¡å¼"><br>ä»ç±»å›¾ä¸­çœ‹ï¼Œä¸­ä»‹è€…æ¨¡å¼ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š<br>â— Mediator æŠ½è±¡ä¸­ä»‹è€…è§’è‰²<br>æŠ½è±¡ä¸­ä»‹è€…è§’è‰²å®šä¹‰ç»Ÿä¸€çš„æ¥å£ï¼Œç”¨äºå„åŒäº‹è§’è‰²ä¹‹é—´çš„é€šä¿¡ã€‚<br>â— Concrete Mediator å…·ä½“ä¸­ä»‹è€…è§’è‰²<br>å…·ä½“ä¸­ä»‹è€…è§’è‰²é€šè¿‡åè°ƒå„åŒäº‹è§’è‰²å®ç°åä½œè¡Œä¸ºï¼Œå› æ­¤å®ƒå¿…é¡»ä¾èµ–äºå„ä¸ªåŒäº‹è§’è‰²ã€‚<br>â— Colleague åŒäº‹è§’è‰²<br>æ¯ä¸€ä¸ªåŒäº‹è§’è‰²éƒ½çŸ¥é“ä¸­ä»‹è€…è§’è‰²ï¼Œè€Œä¸”ä¸å…¶ä»–çš„åŒäº‹è§’è‰²é€šä¿¡çš„æ—¶å€™ï¼Œä¸€å®šè¦é€šè¿‡ä¸­ä»‹è€…è§’è‰²åä½œã€‚æ¯ä¸ªåŒäº‹ç±»çš„è¡Œä¸ºåˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯åŒäº‹æœ¬èº«çš„è¡Œä¸ºï¼Œæ¯”å¦‚æ”¹å˜å¯¹è±¡æœ¬èº«çš„çŠ¶æ€ï¼Œå¤„ç†è‡ªå·±çš„è¡Œä¸ºç­‰ï¼Œè¿™ç§è¡Œä¸ºå«åšè‡ªå‘è¡Œä¸ºï¼ˆSelf-Methodï¼‰ï¼Œä¸å…¶ä»–çš„åŒäº‹ç±»æˆ–ä¸­ä»‹è€…æ²¡æœ‰ä»»ä½•çš„ä¾èµ–ï¼›ç¬¬äºŒç§æ˜¯å¿…é¡»ä¾èµ–ä¸­ä»‹è€…æ‰èƒ½å®Œæˆçš„è¡Œä¸ºï¼Œå«åšä¾èµ–æ–¹æ³•ï¼ˆDep-Methodï¼‰ã€‚</p>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹</strong><br>ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹å°±æ˜¯å‡å°‘ç±»é—´çš„ä¾èµ–ï¼ŒæŠŠåŸæœ‰çš„ä¸€å¯¹å¤šçš„ä¾èµ–å˜æˆäº†ä¸€å¯¹ä¸€çš„ä¾èµ–ï¼ŒåŒäº‹ç±»åªä¾èµ–ä¸­ä»‹è€…ï¼Œå‡å°‘äº†ä¾èµ–ï¼Œå½“ç„¶åŒæ—¶ä¹Ÿé™ä½äº†ç±»é—´çš„è€¦åˆã€‚</p>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼çš„ç¼ºç‚¹</strong><br>ä¸­ä»‹è€…æ¨¡å¼çš„ç¼ºç‚¹å°±æ˜¯ä¸­ä»‹è€…ä¼šè†¨èƒ€å¾—å¾ˆå¤§ï¼Œè€Œä¸”é€»è¾‘å¤æ‚ï¼ŒåŸæœ¬Nä¸ªå¯¹è±¡ç›´æ¥çš„ç›¸äº’ä¾èµ–å…³ç³»è½¬æ¢ä¸ºä¸­ä»‹è€…å’ŒåŒäº‹ç±»çš„ä¾èµ–å…³ç³»ï¼ŒåŒäº‹ç±»è¶Šå¤šï¼Œä¸­ä»‹è€…çš„é€»è¾‘å°±è¶Šå¤æ‚ã€‚</p>
<p><strong>MVCæ¡†æ¶</strong><br>å¤§å®¶éƒ½åº”è¯¥ä½¿ç”¨è¿‡Strutsï¼ŒMVCæ¡†æ¶ï¼Œå…¶ä¸­çš„Cï¼ˆControllerï¼‰å°±æ˜¯ä¸€ä¸ªä¸­ä»‹è€…ï¼Œå«åšå‰ç«¯æ§åˆ¶å™¨(Front Controller)ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯æŠŠM(Modelï¼Œä¸šåŠ¡é€»è¾‘)å’ŒVï¼ˆViewï¼Œè§†å›¾ï¼‰éš”ç¦»å¼€ï¼Œåè°ƒMå’ŒVååŒå·¥ä½œï¼ŒæŠŠMè¿è¡Œçš„ç»“æœå’ŒVä»£è¡¨çš„è§†å›¾èåˆæˆä¸€ä¸ªå‰ç«¯å¯ä»¥å±•ç¤ºçš„é¡µé¢ï¼Œå‡å°‘Må’ŒVçš„ä¾èµ–å…³ç³»ã€‚MVCæ¡†æ¶å·²ç»æˆä¸ºä¸€ä¸ªéå¸¸æµè¡Œã€æˆç†Ÿçš„å¼€å‘æ¡†æ¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸­ä»‹è€…æ¨¡å¼çš„ä¼˜ç‚¹çš„ä¸€ä¸ªä½“ç°ã€‚</p>
<hr>

<p>main.cpp</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Colleague</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague<span class="token operator">*</span> colleague<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Mediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Colleague</span> <span class="token punctuation">{</span>
<span class="token keyword">protected</span><span class="token operator">:</span>
    Mediator<span class="token operator">*</span> mediator<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Colleague</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span> mediator <span class="token operator">=</span> m<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague1</span> <span class="token operator">:</span> <span class="token keyword">public</span> Colleague <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Colleague</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediator<span class="token operator">-</span><span class="token operator">></span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ConcreteColleague1 received: "</span> <span class="token operator">&lt;&lt;</span> message <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague2</span> <span class="token operator">:</span> <span class="token keyword">public</span> Colleague <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Colleague</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediator<span class="token operator">-</span><span class="token operator">></span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ConcreteColleague2 received: "</span> <span class="token operator">&lt;&lt;</span> message <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteMediator</span> <span class="token operator">:</span> <span class="token keyword">public</span> Mediator <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    ConcreteColleague1<span class="token operator">*</span> c1<span class="token punctuation">;</span>
    ConcreteColleague2<span class="token operator">*</span> c2<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>ConcreteColleague1<span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> c1 <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>ConcreteColleague2<span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> c2 <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//é€šè¿‡colleagueä¼ å…¥å¯¹è±¡è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åé€‰æ‹©è¡Œä¸ºã€‚</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague<span class="token operator">*</span> colleague<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>colleague <span class="token operator">==</span> c1<span class="token punctuation">)</span> c2<span class="token operator">-</span><span class="token operator">></span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> c1<span class="token operator">-</span><span class="token operator">></span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ConcreteMediator<span class="token operator">*</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//è®©åŒäº‹è®¤è¯†ä¸­ä»‹</span>
    ConcreteColleague1<span class="token operator">*</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ConcreteColleague2<span class="token operator">*</span> c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//è®©ä¸­ä»‹è®¤è¯†åŒäº‹</span>
    m<span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m<span class="token operator">-</span><span class="token operator">></span><span class="token function">set</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    c1<span class="token operator">-</span><span class="token operator">></span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// ConcreteColleague2 received: Hello</span>
    c2<span class="token operator">-</span><span class="token operator">></span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ConcreteColleague1 received: World</span>

    <span class="token keyword">delete</span> m<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> c1<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> c2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">g++ main.cpp
./a.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>ConcreteColleague2 received: Hello
ConcreteColleague1 received: World</code></pre><p>ä¸ºä»€ä¹ˆåŒäº‹ç±»è¦ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ä¸­ä»‹è€…ï¼Œè€Œä¸­ä»‹è€…ä½¿ç”¨getter/setteræ–¹å¼æ³¨å…¥åŒäº‹ç±»å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºåŒäº‹ç±»å¿…é¡»æœ‰ä¸­ä»‹è€…ï¼Œè€Œä¸­ä»‹è€…å´å¯ä»¥åªæœ‰éƒ¨åˆ†åŒäº‹ç±»ã€‚</p>
<h2 id="å‘½ä»¤æ¨¡å¼"><a href="#å‘½ä»¤æ¨¡å¼" class="headerlink" title="å‘½ä»¤æ¨¡å¼"></a>å‘½ä»¤æ¨¡å¼</h2><blockquote>
<p>Encapsulate a request as an object,thereby letting you parameterize clients with different requests,queue or log requests,and support undoable operations.<br><br>å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œè®©ä½ ä½¿ç”¨ä¸åŒçš„è¯·æ±‚æŠŠå®¢æˆ·ç«¯å‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œå¯ä»¥æä¾›å‘½ä»¤çš„æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ· </p>
<p>CInvokerï¼Œå‘½ä»¤æ¥æ”¶è€…ï¼Œå¦‚é¡¹ç›®ç»ç† </p>
<p>IGroupï¼Œæ‰§è¡Œè€…æ¥å£ </p>
<p>CRequirementGroupï¼Œå®é™…æ‰§è¡Œè€…ä¹‹ä¸€</p>
<p>CPageGroupï¼Œå®é™…æ‰§è¡Œè€…ä¹‹äºŒ</p>
<p>CCodePageï¼Œå®é™…æ‰§è¡Œè€…ä¹‹ä¸‰</p>
<p>ICommandï¼Œå‘½ä»¤æ¥å£</p>
<p>CAddRequirementCommandï¼ŒExecuteå‡½æ•°ï¼Œå°†è°ƒç”¨CRequirementGroupçš„å¤šä¸ªå‘½ä»¤ã€‚æ¥ç»„åˆæ‰§è¡Œç”¨æˆ·å‘å‡ºçš„å‘½ä»¤ã€‚</p>
<p>CDeletePageCommandï¼ŒåŒä¸Š</p>
<p>â€¦ â€¦ å…¶å®ƒå‘½ä»¤ã€‚</p>
<p>è¯´æ˜ï¼šå®¢æˆ·åªéœ€è¦çŸ¥é“å‘Invokerå‘å‡ºå‘½ä»¤ï¼ˆå¤šä¸ªå‘½ä»¤ï¼‰ï¼Œè€Œä¸æ˜¯å°†å‘½ä»¤ç›´æ¥ä¼ è¾¾ç»™å…·ä½“çš„æ‰§è¡Œè€…ã€‚å½“ç„¶ï¼Œå®¢æˆ·æ˜¯éœ€è¦çŸ¥é“éƒ½æœ‰ä»€ä¹ˆå‘½ä»¤çš„ã€‚ </p>
<p>æ³¨æ„ï¼šå®¢æˆ·åªå‘å‘½ä»¤ï¼Œä¸éœ€è¦çŸ¥é“ç”±è°æ¥æ‰§è¡Œå’Œæ€ä¹ˆæ‰§è¡Œï¼Œä½“ç°å‡ºé«˜å†…èšçš„ç‰¹ç‚¹ã€‚ç”¨æˆ·åœ¨å‘å‡ºå‘½ä»¤åï¼Œæ˜¯å…è®¸æ’¤å›çš„ï¼Œæ‰€ä»¥å¯ä»¥å¢åŠ ä¸€ä¸ªå‘½ä»¤â€œUndo â€ï¼ŒUndoæ˜¯çŠ¶æ€çš„å˜æ›´ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573316999566.png?x-oss-process=image/resize,m_lfit,h_450" alt="æ—…è¡Œç¤¾é¡¹ç›®å¼€å‘è¿‡ç¨‹ç±»å›¾"></p>
<p>Invoker.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ICommand.h"</span></span>
class CInvoker
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetCommand</span><span class="token punctuation">(</span>ICommand <span class="token operator">*</span>pcommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ICommand <span class="token operator">*</span>m_pCommand<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Invoker.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Invoker.h"</span></span>
CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetCommand</span><span class="token punctuation">(</span> ICommand <span class="token operator">*</span>pcommand <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pCommand <span class="token operator">=</span> pcommand<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pCommand<span class="token operator">-></span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RequirementGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"igroup.h"</span></span>
class CRequirementGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RequirementGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RequirementGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‰¾åˆ°éœ€æ±‚ç»„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹éœ€æ±‚..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¦æ±‚åˆ é™¤ä¸€é¡¹éœ€æ±‚..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚ä¿®æ”¹ä¸€é¡¹éœ€æ±‚..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚éœ€æ±‚å˜æ›´è®¡åˆ’..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PageGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"igroup.h"</span></span>
class CPageGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PageGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"PageGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‰¾åˆ°ç¾å·¥ç»„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚å¢åŠ ä¸€ä¸ªé¡µé¢..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚åˆ é™¤ä¸€ä¸ªé¡µé¢..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚ä¿®æ”¹ä¸€ä¸ªé¡µé¢..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚é¡µé¢å˜æ›´è®¡åˆ’..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CodeGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"igroup.h"</span></span>
class CCodeGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CodeGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CodeGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‰¾åˆ°ä»£ç ç»„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹åŠŸèƒ½..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚åˆ é™¤ä¸€é¡¹åŠŸèƒ½..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚ä¿®æ”¹ä¸€é¡¹åŠŸèƒ½..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¢æˆ·è¦æ±‚ä»£ç å˜æ›´è®¡åˆ’..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RequirementGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"PageGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CodeGroup.h"</span></span>
class ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ICommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        m_prg <span class="token operator">=</span> new <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_ppg <span class="token operator">=</span> new <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_pcg <span class="token operator">=</span> new <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ICommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        delete m_prg<span class="token punctuation">;</span>
        delete m_ppg<span class="token punctuation">;</span>
        delete m_pcg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    CRequirementGroup <span class="token operator">*</span>m_prg<span class="token punctuation">;</span>
    CPageGroup <span class="token operator">*</span>m_ppg<span class="token punctuation">;</span>
    CCodeGroup <span class="token operator">*</span>m_pcg<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AddRequirementCommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"icommand.h"</span></span>
class CAddRequirementCommand <span class="token punctuation">:</span>
    public ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AddRequirementCommand.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"AddRequirementCommand.h"</span></span>
CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æ‰§è¡Œå¢å¦ä¸€é¡¹éœ€æ±‚çš„å‘½ä»¤</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-></span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å¢åŠ ä¸€ä»½éœ€æ±‚</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//ç»™å‡ºè®¡åˆ’</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-></span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DeletePageCommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"icommand.h"</span></span>
class CDeletePageCommand <span class="token punctuation">:</span>
    public ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DeletePageCommand.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"DeletePageCommand.h"</span></span>
CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æ‰§è¡Œå¢å¦ä¸€é¡¹éœ€æ±‚çš„å‘½ä»¤</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-></span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å¢åŠ ä¸€ä»½éœ€æ±‚</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-></span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//ç»™å‡ºè®¡åˆ’</span>
    this<span class="token operator">-></span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-></span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Command.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CodeGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"PageGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RequirementGroup.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Invoker.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"AddRequirementCommand.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"DeletePageCommand.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·æƒ³å¢åŠ ä¸€ä¸ªéœ€æ±‚----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>rg <span class="token operator">=</span> new <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-></span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-></span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete rg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·åˆæƒ³ä¿®æ”¹ä¸€ä¸ªé¡µé¢----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>pg <span class="token operator">=</span> new <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-></span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-></span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·åˆæƒ³åˆ é™¤ä¸€ä¸ªåŠŸèƒ½----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>cg <span class="token operator">=</span> new <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-></span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-></span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete cg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·è§‰å¾—çƒ¦äº†ï¼Œå¸Œæœ›åªæ‰¾ä¸€ä¸ªäººï¼Œå¹¶å‘Šè¯‰ä»–è¦åšä»€ä¹ˆ----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹éœ€æ±‚----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CInvoker gary<span class="token punctuation">;</span>
    ICommand <span class="token operator">*</span>pcommand <span class="token operator">=</span> new <span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gary<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span>pcommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gary<span class="token punctuation">.</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pcommand<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å®¢æˆ·æƒ³è¦æ”¹åŠ¨åªéœ€è¦æ‰¾CInvokerå°±å¯ä»¥äº†ã€‚</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å®¢æˆ·è¦æ±‚åˆ é™¤ä¸€ä¸ªé¡µé¢----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CInvoker ricky<span class="token punctuation">;</span>
    ICommand <span class="token operator">*</span>pcommand2 <span class="token operator">=</span> new <span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ricky<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span>pcommand2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ricky<span class="token punctuation">.</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pcommand2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//å®¢æˆ·åŸæ¥çš„è¿è¡Œæµç¨‹</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//å®¢æˆ·è§‰å¾—éº»çƒ¦äº†ï¼Œæ¯æ¬¡æ”¹åŠ¨éƒ½è¦æ‰¾ä¸åŒçš„ç»„ï¼Œè°ˆä¸åŒçš„äº‹</span>
    <span class="token comment" spellcheck="true">//å®¢æˆ·åªæƒ³æ‰¾ä¸€ä¸ªäººï¼Œå‘Šè¯‰ä»–è¦åšä»€ä¹ˆå°±å¯ä»¥ï¼Œä¸æƒ³å…³å¿ƒç”±å“ªå‡ ä¸ªç»„æ¥åšå’Œæ€ä¹ˆåš</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------å®¢æˆ·æƒ³å¢åŠ ä¸€ä¸ªéœ€æ±‚----------
æ‰¾åˆ°éœ€æ±‚ç»„...
å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹éœ€æ±‚...
å®¢æˆ·è¦æ±‚éœ€æ±‚å˜æ›´è®¡åˆ’...
----------å®¢æˆ·åˆæƒ³ä¿®æ”¹ä¸€ä¸ªé¡µé¢---------
æ‰¾åˆ°ç¾å·¥ç»„...
å®¢æˆ·è¦æ±‚å¢åŠ ä¸€ä¸ªé¡µé¢...
å®¢æˆ·è¦æ±‚é¡µé¢å˜æ›´è®¡åˆ’...
----------å®¢æˆ·åˆæƒ³åˆ é™¤ä¸€ä¸ªåŠŸèƒ½----------
æ‰¾åˆ°ä»£ç ç»„...
å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹åŠŸèƒ½...
å®¢æˆ·è¦æ±‚ä»£ç å˜æ›´è®¡åˆ’...
----------å®¢æˆ·è§‰å¾—çƒ¦äº†ï¼Œå¸Œæœ›åªæ‰¾ä¸€ä¸ªäººï¼Œå¹¶å‘Šè¯‰ä»–è¦åšä»€ä¹ˆ----------
----------å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹éœ€æ±‚----------
æ‰¾åˆ°éœ€æ±‚ç»„...
å®¢æˆ·è¦æ±‚å¢åŠ ä¸€é¡¹éœ€æ±‚...
å®¢æˆ·è¦æ±‚éœ€æ±‚å˜æ›´è®¡åˆ’...
----------å®¢æˆ·è¦æ±‚åˆ é™¤ä¸€ä¸ªé¡µé¢----------
æ‰¾åˆ°ç¾å·¥ç»„...
å®¢æˆ·è¦æ±‚åˆ é™¤ä¸€ä¸ªé¡µé¢...
å®¢æˆ·è¦æ±‚é¡µé¢å˜æ›´è®¡åˆ’...  </code></pre><h2 id="è´£ä»»é“¾æ¨¡å¼"><a href="#è´£ä»»é“¾æ¨¡å¼" class="headerlink" title="è´£ä»»é“¾æ¨¡å¼"></a>è´£ä»»é“¾æ¨¡å¼</h2><blockquote>
<p>Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request.Chain the receiving objects and pass the request along the chain until an object handles it.<br><br>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>IWomenï¼Œå‘å‡ºè¯·æ±‚è€…æ¥å£</p>
<p>CWomenï¼Œè¯·æ±‚è€…å®ç°ç±»</p>
<p>CHandlerï¼Œå¤„ç†è¯·æ±‚æŠ½è±¡ç±»</p>
<p>CFatherï¼Œå¤„ç†è¯·æ±‚å®ç°ç±»ï¼Œè´£ä»»é“¾ä¹‹ä¸€</p>
<p>CHusbandï¼Œå¤„ç†è¯·æ±‚å®ç°ç±»ï¼Œè´£ä»»é“¾ä¹‹äºŒ</p>
<p>CSonï¼Œå¤„ç†è¯·æ±‚å®ç°ç±»ï¼Œè´£ä»»é“¾ä¹‹ä¸‰</p>
<p>è¯´æ˜ï¼šCHandleræŠ½è±¡ç±»è´Ÿè´£èšåˆè´£ä»»é“¾ä¹‹ä¸­çš„å…¶å®ƒå¤„ç†å¯¹è±¡ï¼Œç”¨SetNextæ¥å»ºç«‹è¿™ä¸ªè´£ä»»é“¾ã€‚HandleMessageåœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œä¼šåˆ¤æ–­æ˜¯å¦æ˜¯è‡ªå·±è¦å¤„ç†çš„è¯·æ±‚ï¼Œå¦‚æœæ˜¯åˆ™ç›´æ¥å¤„ç†ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™æŸ¥æ‰¾ä¸‹ä¸€ä¸ªè´£ä»»é“¾ä¸Šçš„å¤„ç†å¯¹è±¡ï¼Œæ‰¾åˆ°äº†åˆ™ç”±ä¸‹ä¸€ä¸ªå¤„ç†ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573345715766.png?x-oss-process=image/resize,m_lfit,h_450" alt="å¦‡å¥³â€œä¸‰ä»â€ç±»å›¾"></p>
<p>IWomen.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IWomen
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">int</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//Women.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iwomen.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CWomen <span class="token punctuation">:</span>
    public IWomen
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">int</span> _type<span class="token punctuation">,</span> string _request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_type<span class="token punctuation">;</span>
    string m_request<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//Women.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Women.h"</span></span>
CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWomen</span><span class="token punctuation">(</span> <span class="token keyword">int</span> _type<span class="token punctuation">,</span> string _request <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_type <span class="token operator">=</span> _type<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>this<span class="token operator">-></span>m_type<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å¥³å„¿çš„è¯·æ±‚æ˜¯ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å¦»å­çš„è¯·æ±‚æ˜¯ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"æ¯äº²çš„è¯·æ±‚æ˜¯ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_request<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Handler.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IWomen.h"</span></span>
class CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">int</span> _level<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">HandleMessage</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetNext</span><span class="token punctuation">(</span>CHandler <span class="token operator">*</span>phandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_level<span class="token punctuation">;</span>
    CHandler <span class="token operator">*</span>m_pNextHandler<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Handler.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Handler.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">int</span> _level <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_level</span><span class="token punctuation">(</span>_level<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pNextHandler <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pwomen<span class="token operator">-></span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> this<span class="token operator">-></span>m_level<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        this<span class="token operator">-></span><span class="token function">Response</span><span class="token punctuation">(</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_pNextHandler <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
            this<span class="token operator">-></span>m_pNextHandler<span class="token operator">-></span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------æ²¡åœ°æ–¹è¯·ç¤ºäº†ï¼Œä¸åšå¤„ç†ï¼----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetNext</span><span class="token punctuation">(</span> CHandler <span class="token operator">*</span>phandler <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pNextHandler <span class="token operator">=</span> phandler<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Father.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"handler.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IWomen.h"</span></span>
class CFather <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Father.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Father.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¥³å„¿å‘çˆ¶äº²è¯·ç¤ºï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-></span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"çˆ¶äº²çš„ç­”å¤æ˜¯ï¼šåŒæ„"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Husband.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"handler.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IWomen.h"</span></span>
class CHusband <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Husband.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Husband.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¦»å­å‘ä¸ˆå¤«è¯·ç¤ºï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-></span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ä¸ˆå¤«çš„ç­”å¤æ˜¯ï¼šåŒæ„"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Son.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"handler.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IWomen.h"</span></span>
class CSon <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Son.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Son.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ¯äº²å‘å„¿å­è¯·ç¤ºï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-></span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å„¿å­çš„ç­”å¤æ˜¯ï¼šåŒæ„"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// ChainofResponsibility.cpp </p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IWomen.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Women.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Handler.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Father.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Husband.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Son.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//cout &lt;&lt; "----------åŸæ¥çš„å¤„ç†æ–¹å¼----------" &lt;&lt; endl;</span>
   INormalWomen<span class="token operator">*</span> pwomen <span class="token operator">=</span> new <span class="token function">CNormalWomen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘è¦å‡ºå»é€›è¡—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> pfather <span class="token operator">=</span> new <span class="token function">CNormalFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> phusband <span class="token operator">=</span> new <span class="token function">CNormalHusband</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> pson <span class="token operator">=</span> new <span class="token function">CNormalSon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">If</span> <span class="token punctuation">(</span>pwomen<span class="token operator">-></span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; "å¥³å„¿å‘çˆ¶äº²è¯·ç¤ºï¼š" &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   pfather->HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else if (pwomen->GetType() == 2)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; "å¦»å­å‘ä¸ˆå¤«è¯·ç¤ºï¼š" &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   phusband->HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else if (pwomen->GetType() == 3)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; "æ¯äº²å‘å„¿å­è¯·ç¤ºï¼š" &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   pson->HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   //ä»€ä¹ˆä¹Ÿä¸åš</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//delete pwomen;</span>
   <span class="token comment" spellcheck="true">//delete pfather;</span>
   <span class="token comment" spellcheck="true">//delete phusband;</span>
   <span class="token comment" spellcheck="true">//delete pson;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ä½¿ç”¨æ¨¡å¼åçš„å¤„ç†æ–¹å¼----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   Handler<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Handler<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> IWomen<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Women<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Women<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> Father<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Father<span class="token punctuation">,</span>cpp<span class="token punctuation">,</span> Husband<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Husband<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> Son<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Son<span class="token punctuation">.</span>cpp
   IWomen<span class="token operator">*</span> pwomen1 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘è¦å‡ºå»é€›è¡—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen2 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘è¦å‡ºå»åƒé¥­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen3 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘ä¹Ÿè¦å‡ºå»åƒé¥­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen4 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"æˆ‘ä¹Ÿè¦å‡ºå»é€›è¡—"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CHandler<span class="token operator">*</span> pfather <span class="token operator">=</span> new <span class="token function">CFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   CHandler<span class="token operator">*</span> phusband <span class="token operator">=</span> new <span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   CHandler<span class="token operator">*</span> pson <span class="token operator">=</span> new <span class="token function">CSon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   pfather<span class="token operator">-></span><span class="token function">SetNext</span><span class="token punctuation">(</span>phusband<span class="token punctuation">)</span><span class="token punctuation">;</span>
   phusband<span class="token operator">-></span><span class="token function">SetNext</span><span class="token punctuation">(</span>pson<span class="token punctuation">)</span><span class="token punctuation">;</span>

   pfather<span class="token operator">-></span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen1<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-></span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen2<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-></span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen3<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-></span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen4<span class="token punctuation">)</span><span class="token punctuation">;</span>

   delete pfather<span class="token punctuation">;</span>
   delete phusband<span class="token punctuation">;</span>
   delete pson<span class="token punctuation">;</span>
   delete pwomen1<span class="token punctuation">;</span>
   delete pwomen2<span class="token punctuation">;</span>
   delete pwomen3<span class="token punctuation">;</span>
   delete pwomen4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//åé¢</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment" spellcheck="true">//è¦å®ç°é€»è¾‘åˆ¤æ–­ï¼Œå³å¥³æ€§çš„è¯·æ±‚å…ˆå‘é€åˆ°çˆ¶äº²ç±»ï¼Œçˆ¶äº²ç±»ä¸€çœ‹æ˜¯è‡ªå·±è¦å¤„ç†çš„ï¼Œå°±å›åº”è¿›è¡Œå¤„ç†ã€‚å¦‚æœå¥³å„¿å·²ç»å‡ºå«äº†ï¼Œé‚£å°±æŠŠè¿™ä¸ªè¯·æ±‚è½¬å‘åˆ°å¥³å©¿ç±»æ¥å¤„ç†ã€‚ä¾æ­¤ç±»æ¨ï¼Œå½¢æˆäº†ä¸€ä¸ªè´£ä»»é“¾ã€‚</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------ä½¿ç”¨æ¨¡å¼åçš„å¤„ç†æ–¹å¼----------
å¥³å„¿å‘çˆ¶äº²è¯·ç¤ºï¼š
å¥³å„¿çš„è¯·æ±‚æ˜¯ï¼šæˆ‘è¦å‡ºå»é€›è¡—
çˆ¶äº²çš„ç­”å¤æ˜¯ï¼šåŒæ„
å¦»å­å‘ä¸ˆå¤«è¯·ç¤ºï¼š
å¦»å­çš„è¯·æ±‚æ˜¯ï¼šæˆ‘è¦å‡ºå»åƒé¥­
ä¸ˆå¤«çš„ç­”å¤æ˜¯ï¼šåŒæ„
æ¯äº²å‘å„¿å­è¯·ç¤ºï¼š
æ¯äº²çš„è¯·æ±‚æ˜¯ï¼šæˆ‘ä¹Ÿè¦å‡ºå»åƒé¥­
å„¿å­çš„ç­”å¤æ˜¯ï¼šåŒæ„
----------æ²¡åœ°æ–¹è¯·ç¤ºäº†ï¼Œä¸åšå¤„ç†ï¼----------    </code></pre><h2 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h2><blockquote>
<p>Attach additional responsibilities to an object dynamically keeping the same interface.Decorators provide a flexible alternative to subclassing for extending functionality.<br><br>åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œè€çˆ¸</p>
<p>ISchoolReportï¼Œæˆç»©å•æ¥å£</p>
<p>CFourthGradeSchoolReportï¼Œå››å¹´çº§æˆç»©å•</p>
<p>ReportDecoratorï¼Œæˆç»©å•è£…é¥°å™¨åŸºç±»</p>
<p>HighScoreDecoratorï¼Œæœ€é«˜åˆ†è£…é¥°å™¨</p>
<p>SortDecoratorï¼Œç­çº§æ’åè£…é¥°å™¨</p>
<p>è¯´æ˜ï¼šå¯¹â€œå››å¹´çº§æˆç»©å•â€è¿›è¡Œè£…é¥°ï¼ŒReportDecoratorå¿…ç„¶æœ‰ä¸€ä¸ªprivateå˜é‡æŒ‡å‘ISchoolReportã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573318043354.png?x-oss-process=image/resize,m_lfit,h_450" alt="æˆç»©å•ç±»å›¾"></p>
<p>// Decorator.cpp<br>//ä¸»ç¨‹åº</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ISchoolReport.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"FouthGradeSchoolReport.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"FouthGradeSchoolReport.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HighScoreDecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"SortDecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   ISchoolReport<span class="token operator">*</span> psr <span class="token operator">=</span> new <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   psr<span class="token operator">-></span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//çœ‹æˆç»©å•</span>
   psr<span class="token operator">-></span><span class="token function">Sign</span><span class="token punctuation">(</span><span class="token string">"è€ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¾ˆå¼€å¿ƒï¼Œå°±ç­¾å­—äº†</span>
   delete psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------åˆ†éƒ¨åˆ†è¿›è¡Œè£…é¥°----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   ISchoolReport<span class="token operator">*</span> psr <span class="token operator">=</span> new <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åŸè£…æˆç»©å•</span>
   <span class="token comment" spellcheck="true">//</span>
   ISchoolReport<span class="token operator">*</span> pssr <span class="token operator">=</span> new <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆåŠ äº†æˆç»©æ’åçš„è¯´æ˜</span>
   ISchoolReport<span class="token operator">*</span> phsr <span class="token operator">=</span> new <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>pssr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åŠ äº†æœ€é«˜åˆ†è¯´æ˜çš„æˆç»©å•</span>
   phsr<span class="token operator">-></span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//çœ‹æˆç»©å•</span>
   phsr<span class="token operator">-></span><span class="token function">Sign</span><span class="token punctuation">(</span><span class="token string">"è€ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¾ˆå¼€å¿ƒï¼Œå°±ç­¾å­—äº†</span>

   <span class="token comment" spellcheck="true">//å…ˆè£…é¥°å“ªä¸ªä¸é‡è¦ï¼Œé¡ºåºå·²ç»åœ¨è£…é¥°å†…éƒ¨ç¡®å®šå¥½ï¼Œä½†ä¸€å®šè¦è°ƒç”¨æœ€åä¸€ä¸ªè£…é¥°å™¨çš„æ¥å£ã€‚</span>
   ISchoolReport <span class="token operator">*</span>phsr <span class="token operator">=</span> new <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åŠ äº†æœ€é«˜åˆ†è¯´æ˜çš„æˆç»©å•</span>
   ISchoolReport <span class="token operator">*</span>pssr <span class="token operator">=</span> new <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>phsr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//åˆåŠ äº†æˆç»©æ’åçš„è¯´æ˜</span>
   <span class="token comment" spellcheck="true">//pssr->Report();//çœ‹æˆç»©å•</span>
   <span class="token comment" spellcheck="true">//pssr->Sign("è€ä¸‰");//å¾ˆå¼€å¿ƒï¼Œå°±ç­¾å­—äº†</span>

   delete pssr<span class="token punctuation">;</span>
   delete phsr<span class="token punctuation">;</span>
   delete psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//åœ¨è£…é¥°ä¹‹å‰ï¼Œå¯ä»¥ç”¨ç»§æ‰¿çš„åŠæ³•ï¼Œæ¥è¿›è¡Œç®€å•çš„ä¿®é¥°</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//ä½†å¦‚æœéœ€è¦ä¿®é¥°çš„é¡¹ç›®å¤ªå¤šå‘¢ï¼Ÿæˆ–è€…è£…é¥°çš„é¡¹ç›®ä¸æ˜¯å›ºå®šçš„ï¼Œç»§æ‰¿æ˜¾ç„¶ä¼šå˜å¾—æ›´å¤æ‚</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ISchoolReport.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ISchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ISchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FouthGradeSchoolReport.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ischoolreport.h"</span></span>
class CFouthGradeSchoolReport <span class="token punctuation">:</span>
    public ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FouthGradeSchoolReport.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"FouthGradeSchoolReport.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å°Šæ•¬çš„XXXå®¶é•¿ï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"......"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¯­æ–‡62  æ•°å­¦65  ä½“è‚²98  è‡ªç„¶63"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"......"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"                å®¶é•¿ç­¾åï¼š"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å®¶é•¿ç­¾åä¸ºï¼š"</span> <span class="token operator">&lt;&lt;</span> name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ReportDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ischoolreport.h"</span></span>
class CReportDecorator <span class="token punctuation">:</span>
    public ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ISchoolReport <span class="token operator">*</span>m_pSchoolReport<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ReportDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ReportDecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pSchoolReport <span class="token operator">=</span> psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pSchoolReport<span class="token operator">-></span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Sign</span><span class="token punctuation">(</span> string name <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pSchoolReport<span class="token operator">-></span><span class="token function">Sign</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HighScoreDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"reportdecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ISchoolReport.h"</span></span>
class CHighScoreDecorator <span class="token punctuation">:</span>
    public CReportDecorator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HighScoreDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"HighScoreDecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span> ISchoolReport <span class="token operator">*</span>psr <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span><span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™æ¬¡è€ƒè¯•è¯­æ–‡æœ€é«˜æ˜¯75ï¼Œ æ•°å­¦æ˜¯78ï¼Œ è‡ªç„¶æ˜¯80"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>SortDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"reportdecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ISchoolReport.h"</span></span>
class CSortDecorator <span class="token punctuation">:</span>
    public CReportDecorator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>SortDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"SortDecorator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span> ISchoolReport <span class="token operator">*</span>psr <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘æ˜¯æ’åç¬¬38å..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span><span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>å°Šæ•¬çš„XXXå®¶é•¿ï¼š
......
è¯­æ–‡62  æ•°å­¦65  ä½“è‚²98  è‡ªç„¶63
......
å®¶é•¿ç­¾åï¼š
å®¶é•¿ç­¾åä¸ºï¼šè€ä¸‰
----------åˆ†éƒ¨åˆ†è¿›è¡Œè£…é¥°----------
è¿™æ¬¡è€ƒè¯•è¯­æ–‡æœ€é«˜æ˜¯75ï¼Œ æ•°å­¦æ˜¯78ï¼Œ è‡ªç„¶æ˜¯80
å°Šæ•¬çš„XXXå®¶é•¿ï¼š
......
è¯­æ–‡62  æ•°å­¦65  ä½“è‚²98  è‡ªç„¶63
......
å®¶é•¿ç­¾åï¼š
æˆ‘æ˜¯æ’åç¬¬38å...
å®¶é•¿ç­¾åä¸ºï¼šè€ä¸‰   </code></pre><h2 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h2><blockquote>
<p>Define a family of algorithms,encapsulate each one,and make them interchangeable.<br><br>å®šä¹‰ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•éƒ½å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯ä»¥äº’æ¢ã€‚</p>
</blockquote>
<p>è¿™ä¸ªå®šä¹‰æ˜¯éå¸¸æ˜ç¡®ã€æ¸…æ™°çš„ï¼Œâ€œå®šä¹‰ä¸€ç»„ç®—æ³•â€ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„ä¸‰ä¸ªè®¡è°‹æ˜¯ä¸æ˜¯ä¸‰ä¸ªç®—æ³•ï¼Ÿâ€œå°†æ¯ä¸ªç®—æ³•éƒ½å°è£…èµ·æ¥â€ï¼Œå°è£…ç±»Contextä¸å°±æ˜¯è¿™ä¸ªä½œç”¨å—ï¼Ÿâ€œä½¿å®ƒä»¬å¯ä»¥äº’æ¢â€å½“ç„¶å¯ä»¥äº’æ¢äº†ï¼Œéƒ½å®ç°æ˜¯ç›¸åŒçš„æ¥å£ï¼Œé‚£å½“ç„¶å¯ä»¥ç›¸äº’è½¬åŒ–äº†ã€‚</p>
<hr>

<p>main()ï¼Œèµµäº‘</p>
<p>CContextï¼Œé”¦å›Š</p>
<p>IStrategyï¼Œç­–ç•¥æ¥å£</p>
<p>CBackDoorï¼Œç­–ç•¥ä¹‹ä¸€</p>
<p>CGivenGreenLightï¼Œç­–ç•¥ä¹‹äºŒ</p>
<p>CBlockEnemyï¼Œç­–ç•¥ä¹‹ä¸‰</p>
<p>è¯´æ˜ï¼šä¸€ä¸ªç­–ç•¥æ”¾åˆ°ä¸€ä¸ªé”¦å›Šé‡Œã€‚å½“ç”¨çš„æ—¶å€™ï¼Œæ‰¾åˆ°è¿™ä¸ªé”¦å›Šï¼Œä»é”¦å›Šé‡Œæ‹¿å‡ºç­–ç•¥æ¥ä½¿ç”¨ã€‚</p>
<p>æ³¨æ„ï¼šé”¦å›Šåªæ˜¯ç®€å•çš„è£…è½½å’Œè°ƒç”¨ç­–ç•¥ï¼Œé”¦å›Šé‡Œæ²¡æœ‰é€»è¾‘ã€‚ç­–ç•¥ä¼šæœ‰æ›´å¤§çš„è‡ªä¸»æƒï¼Œè¿è¡Œæ›´å¤šçš„é€»è¾‘ã€‚<br>æ³¨æ„ï¼šæ²¡æœ‰<code>#include &quot;IStrategy.h&quot;</code>å¯ä»¥è‡ªå»ºä¸€ä¸ªIStrategy.hï¼ŒåŒ…å«<code>#include &quot;stdio.h</code>å³å¯ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573288235394.png?x-oss-process=image/resize,m_lfit,h_450" alt="ç­–ç•¥æ¨¡å¼"></p>
<p>IStrategy.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

class IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IStrategy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">IStrategy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IStrategy.h"</span></span>
class CContext
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CContext</span><span class="token punctuation">(</span>IStrategy <span class="token operator">*</span>pStrategy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    IStrategy <span class="token operator">*</span>m_pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CContext</span><span class="token punctuation">(</span>IStrategy <span class="token operator">*</span>pStrategy<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pStrategy <span class="token operator">=</span> pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete this<span class="token operator">-></span>m_pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pStrategy<span class="token operator">-></span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BackDoor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"istrategy.h"</span></span>
class CBackDoor <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BackDoor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BackDoor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ‰¾ä¹”å›½è€å¸®å¿™ï¼Œè®©å´å›½å¤ªç»™å­™æƒæ–½åŠ å‹åŠ›"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>GivenGreenLight.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"istrategy.h"</span></span>
class CGivenGreenLight <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>GivenGreenList.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GivenGreenLight.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æ±‚å´å›½å¤ªå¼€ä¸ªç»¿ç¯ï¼Œæ”¾è¡Œï¼"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlockEnemy.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"istrategy.h"</span></span>
class CBlockEnemy <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlockEnemy.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlockEnemy.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å­™å¤«äººæ–­åï¼ŒæŒ¡ä½è¿½å…µ"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Strategy.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BackDoor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"GivenGreenLight.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BlockEnemy.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CContext <span class="token operator">*</span>pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\14\n\n\n\n\17"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------åˆšåˆšåˆ°å´å›½çš„æ—¶å€™æ‹†ç¬¬ä¸€ä¸ª----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-></span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\14\n\n\n\n\17"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------åˆ˜å¤‡ä¹ä¸æ€èœ€äº†ï¼Œæ‹†ç¬¬äºŒä¸ªäº†----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-></span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"\14\n\n\n\n\17"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å­™æƒçš„å°å…µè¿½äº†ï¼Œå’‹åŠï¼Ÿæ‹†ç¬¬ä¸‰ä¸ª----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-></span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>                
----------åˆšåˆšåˆ°å´å›½çš„æ—¶å€™æ‹†ç¬¬ä¸€ä¸ª---------- 
æ‰¾ä¹”å›½è€å¸®å¿™ï¼Œè®©å´å›½å¤ªç»™å­™æƒæ–½åŠ å‹åŠ› 
       
----------åˆ˜å¤‡ä¹ä¸æ€èœ€äº†ï¼Œæ‹†ç¬¬äºŒä¸ªäº†----------
æ±‚å´å›½å¤ªå¼€ä¸ªç»¿ç¯ï¼Œæ”¾è¡Œï¼ 
                  
----------å­™æƒçš„å°å…µè¿½äº†ï¼Œå’‹åŠï¼Ÿæ‹†ç¬¬ä¸‰ä¸ª---------- 
å­™å¤«äººæ–­åï¼ŒæŒ¡ä½è¿½å…µ</code></pre><h2 id="é€‚é…å™¨æ¨¡å¼"><a href="#é€‚é…å™¨æ¨¡å¼" class="headerlink" title="é€‚é…å™¨æ¨¡å¼"></a>é€‚é…å™¨æ¨¡å¼</h2><blockquote>
<p>Convert the interface of a class into another interface clients expect.Adapter lets classes work together that couldnâ€™t otherwise because of incompatible interfaces.<br><br>å°†ä¸€ä¸ªç±»çš„æ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æ¥å£ï¼Œä»è€Œä½¿åŸæœ¬å› æ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œã€‚</p>
</blockquote>
<p>é€‚é…å™¨ç›¸å½“äºè½¬æ¢æ¥å¤´ï¼Œå¦‚æŠ•å½±ä»ªçš„æ¥å£æ˜¯DB9ï¼Œç”µè„‘çš„æ¥å£æ˜¯HDMIï¼Œå› æ­¤ä½¿ç”¨DB9è½¬HDMIè½¬æ¢å™¨å°±å¯ä»¥ä½¿æŠ•å½±ä»ªå’Œç”µè„‘ä¸€èµ·å·¥ä½œäº†ï¼<br>é€‚é…å™¨èµ·åˆ°äº†è§£æä½œç”¨ï¼Œå°†ä¸€ç§å½¢å¼çš„æ•°æ®ç»“æ„è§£æä¸ºå¦ä¸€ç§å½¢å¼çš„æ•°æ®ç»“æ„ã€‚</p>
<hr>

<p>main()ï¼Œä¸»ç¨‹åº</p>
<p>IUserInfoï¼Œæœ¬ç³»ç»Ÿå†…æ¥å£</p>
<p>CUserInfoï¼Œæœ¬ç³»ç»Ÿå†…å®ç°ç±»</p>
<p>IOuterUserï¼Œå¤–ç³»ç»Ÿæ¥å£</p>
<p>COuterUserï¼Œå¤–ç³»ç»Ÿå®ç°ç±»</p>
<p>COuterUserInfoï¼Œæœ¬ç³»ç»Ÿå†…é€‚é…ç±»</p>
<p>è¯´æ˜ï¼šCOuterUserInfoå®ç°IUserInfoæ¥å£ï¼Œå°†å¤–éƒ¨ç³»ç»Ÿå®ç°ç±»COuterUserè½¬æ¢æˆæœ¬ç³»ç»Ÿå†…çš„æ¥å£IUserInfoã€‚ä½¿ç”¨å¤–éƒ¨æ•°æ®è·Ÿä½¿ç”¨æœ¬ç³»ç»Ÿå†…éƒ¨æ•°æ®ä¸€æ ·ã€‚</p>
<p>æ³¨æ„ï¼šCOuterUserInfoç»§æ‰¿äº†IUserInfoï¼Œå¦‚æœåŒæ—¶ç»§æ‰¿äº†COuterUseråˆ™æ˜¯ç±»é€‚é…å™¨ã€‚å¦‚æœCOuterUserInfoåªæ˜¯ä½¿ç”¨äº†COuterUseråˆ™æ˜¯å¯¹è±¡é€‚é…å™¨ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573304754219.png?x-oss-process=image/resize,m_lfit,h_450" alt="å¤–è°ƒäººå‘˜ä¸­è½¬å¤„ç†"></p>
<p>IUserInfo.h<br>//ç³»ç»Ÿå†…éƒ¨çš„å®ä½“æ¥å£</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">IUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   virtual <span class="token operator">~</span><span class="token function">IUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   virtual string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>UserInfo.h<br>//ç³»ç»Ÿå†…éƒ¨å®ä½“ç±»</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iuserinfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CUserInfo <span class="token punctuation">:</span>
   public IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>UserInfo.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"UserInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å§“åå«åš..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™é‡Œæ˜¯å‘˜å·¥çš„å®¶åº­åœ°å€..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åŠå…¬å®¤ç”µè¯æ˜¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™ä¸ªäººçš„èŒä½æ˜¯BOSS..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å‘˜å·¥çš„å®¶åº­ç”µè¯æ˜¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IOuterUser.h<br>//å¤–éƒ¨ç³»ç»Ÿå®ä½“æ¥å£</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserBaseInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserHomeInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserOfficeInfo.h"</span></span>
class IOuterUser
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">IOuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">IOuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   COuterUserBaseInfo<span class="token operator">*</span> <span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   COuterUserHomeInfo<span class="token operator">*</span> <span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   COuterUserOfficeInfo<span class="token operator">*</span> <span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>COuterUser.h<br>//å¤–éƒ¨ç³»ç»Ÿå®ä½“ç±»</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserBaseInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserHomeInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserOfficeInfo.h"</span></span>
class COuterUser
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserBaseInfo<span class="token operator">*</span> <span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserHomeInfo<span class="token operator">*</span> <span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserOfficeInfo<span class="token operator">*</span> <span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>COuterUser.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"COuterUser.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserBaseInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserHomeInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserOfficeInfo.h"</span></span>
COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
COuterUserBaseInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserHomeInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserOfficeInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserBaseInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserBaseInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å§“åå«åš..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserHomeInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserHomeInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™é‡Œæ˜¯å‘˜å·¥çš„å®¶åº­åœ°å€..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å‘˜å·¥çš„å®¶åº­ç”µè¯æ˜¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserOfficeInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserOfficeInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"åŠå…¬å®¤ç”µè¯æ˜¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">"è¿™ä¸ªäººçš„èŒä½æ˜¯BOSS..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserInfo.h<br>//ç”±IUserInfoæ¥å£æ´¾ç”Ÿçš„å®ä½“ç±»ï¼Œå¹¶å¼•å…¥å¤–éƒ¨ç³»ç»Ÿå®ä½“çš„å®ä¾‹</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iuserinfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"COuterUser.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserInfo <span class="token punctuation">:</span>
    public IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    COuterUser <span class="token operator">*</span>m_pOuterUser<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserInfo.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserBaseInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserHomeInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserOfficeInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_pOuterUser <span class="token operator">=</span> new <span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   delete m_pOuterUser<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserBaseInfo<span class="token operator">*</span> pBaseInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBaseInfo<span class="token operator">-></span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBaseInfo<span class="token punctuation">;</span>
   pBaseInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserHomeInfo<span class="token operator">*</span> pHomeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pHomeInfo<span class="token operator">-></span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pHomeInfo<span class="token punctuation">;</span>
   pHomeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserBaseInfo<span class="token operator">*</span> pBaseInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBaseInfo<span class="token operator">-></span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBaseInfo<span class="token punctuation">;</span>
   pBaseInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserOfficeInfo<span class="token operator">*</span> pOfficeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pOfficeInfo<span class="token operator">-></span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pOfficeInfo<span class="token punctuation">;</span>
   pOfficeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserOfficeInfo<span class="token operator">*</span> pOfficeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pOfficeInfo<span class="token operator">-></span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pOfficeInfo<span class="token punctuation">;</span>
   pOfficeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserHomeInfo<span class="token operator">*</span> pHomeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-></span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pHomeInfo<span class="token operator">-></span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pHomeInfo<span class="token punctuation">;</span>
   pHomeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Adapter.cpp<br>//ä½¿ç”¨æ–¹æ³•</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IOuterUser.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IUserInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"UserInfo.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OuterUserInfo.h"</span></span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IUserInfo<span class="token operator">*</span> pYourGirl <span class="token operator">=</span> new <span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">101</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      pYourGirl<span class="token operator">-></span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   delete pYourGirl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">NowDoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IUserInfo<span class="token operator">*</span> pYourGirl <span class="token operator">=</span> new <span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">101</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      pYourGirl<span class="token operator">-></span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   delete pYourGirl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">NowDoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0000...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001...
è¿™ä¸ªäººçš„æ‰‹æœºå·ç æ˜¯0001... </code></pre><h2 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h2><blockquote>
<p>Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.<br><br>å®ƒæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>IProjectï¼Œäº§å“æ¥å£</p>
<p>CProjectï¼Œäº§å“ç±»</p>
<p>IIteratorï¼Œè¿­ä»£å™¨æ¥å£</p>
<p>IProjectIteratorï¼Œäº§å“è¿­ä»£å™¨æ¥å£</p>
<p>CProjectIteratorï¼Œäº§å“è¿­ä»£å™¨å®ç°ç±»</p>
<p>è¯´æ˜ï¼šCProjectå®ç°äº§å“ç±»ï¼Œèƒ½å¤Ÿè¿”å›ä¸€ä¸ªè¿­ä»£å™¨çš„æŒ‡é’ˆã€‚è¿™ä¸ªè¿­ä»£å™¨å°†å°è£…äº§å“ç±»é‡Œçš„ä¸€ä¸ªæ•°ç»„ã€‚æ‰€ä»¥è¿­ä»£å™¨åœ¨è¿è¡ŒNextå‡½æ•°æ—¶ï¼Œå¯ä»¥éå†è¿™ä¸ªæ•°ç»„çš„æ‰€æœ‰å…ƒç´ ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ç”¨ä»£ç å®ç°vector<int>::iteratoræˆ–vector<int>::const_iteratorã€‚<br><strong>æ³¨æ„ï¼š</strong><br>å¦‚æœä½ æ˜¯åšJavaå¼€å‘ï¼Œå°½é‡ä¸è¦è‡ªå·±å†™è¿­ä»£å™¨æ¨¡å¼ï¼çœçœå§ï¼Œä½¿ç”¨Javaæä¾›çš„Iteratorä¸€èˆ¬å°±èƒ½æ»¡è¶³ä½ çš„è¦æ±‚äº†!</int></int></p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573319086122.png?x-oss-process=image/resize,m_lfit,h_450" alt="é¡¹ç›®ä¿¡æ¯ç±»å›¾"></p>
<p>IProject.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProjectIterator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IProject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProjectIterator<span class="token operator">*</span> <span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Project.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iproject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProjectIterator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CProject <span class="token punctuation">:</span>
    public IProject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CProject</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    IProjectIterator <span class="token operator">*</span> <span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_num<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_cost<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span> m_projectList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Project.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Project.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ProjectIterator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;sstream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>ostringstream<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>to_string<span class="token punctuation">;</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
   m_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   m_cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProject</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token punctuation">:</span><span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_num</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_cost</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
string CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"é¡¹ç›®åç§°æ˜¯ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\té¡¹ç›®äººæ•°ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>m_num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\té¡¹ç›®è´¹ç”¨ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>m_cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   this<span class="token operator">-></span>m_projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> num<span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
IProjectIterator<span class="token operator">*</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">CProjectIterator</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_projectList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator projectDelIt <span class="token operator">=</span> m_projectList<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectDelIt <span class="token operator">!=</span> m_projectList<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectDelIt<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   m_projectList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IProject<span class="token punctuation">;</span>
class IIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IProjectIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iiterator.h"</span></span>
class IProject<span class="token punctuation">;</span>
class IProjectIterator <span class="token punctuation">:</span>
    public IIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ProjectIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iprojectiterator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CProjectIterator <span class="token punctuation">:</span>
    public IProjectIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CProjectIterator</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>IProject <span class="token operator">*</span><span class="token operator">></span> pl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>IProject <span class="token operator">*</span><span class="token operator">></span> m_projectList<span class="token punctuation">;</span>
    size_t m_currentItem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ProjectIterator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ProjectIterator.h"</span></span>
CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span> pl<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_projectList</span><span class="token punctuation">(</span>pl<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_currentItem <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
bool CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   bool b <span class="token operator">=</span> true<span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>m_currentItem <span class="token operator">>=</span> m_projectList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      b <span class="token operator">=</span> false<span class="token punctuation">;</span>
   <span class="token keyword">return</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
IProject<span class="token operator">*</span> CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IProject<span class="token operator">*</span> pp <span class="token operator">=</span> m_projectList<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>m_currentItem<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> pp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Iterator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Project.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ProjectIterator.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>to_string<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------æœªä½¿ç”¨è¿­ä»£æ¨¡å¼----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span> projectList<span class="token punctuation">;</span>

   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">"æ˜Ÿçƒå¤§æˆ˜é¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">"æ‰­è½¬æ—¶ç©ºé¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">"è¶…äººæ”¹é€ é¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      string name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ä¸ªé¡¹ç›®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator projectIt <span class="token operator">=</span> projectList<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectIt <span class="token operator">!=</span> projectList<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectIt<span class="token operator">++</span><span class="token punctuation">)</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectIt<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator projectDelIt <span class="token operator">=</span> projectList<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectDelIt <span class="token operator">!=</span> projectList<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectDelIt<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   projectList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ä½¿ç”¨è¿­ä»£æ¨¡å¼----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   IProject<span class="token operator">*</span> pproject <span class="token operator">=</span> new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"æ˜Ÿçƒå¤§æˆ˜é¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"æ‰­è½¬æ—¶ç©ºé¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"è¶…äººæ”¹é€ é¡¹ç›®"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      string name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ç¬¬"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ä¸ªé¡¹ç›®"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      pproject<span class="token operator">-></span><span class="token function">Add</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   IProjectIterator<span class="token operator">*</span> pprojectIt <span class="token operator">=</span> pproject<span class="token operator">-></span><span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>pprojectIt<span class="token operator">-></span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      IProject<span class="token operator">*</span> p <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span>pprojectIt<span class="token operator">-></span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cout <span class="token operator">&lt;&lt;</span> p<span class="token operator">-></span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   delete pprojectIt<span class="token punctuation">;</span>
   pprojectIt <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-></span><span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pproject<span class="token punctuation">;</span>
   pproject <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//ä½¿ç”¨Iteratoræ¨¡å¼ä¹‹å‰</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//ä½¿ç”¨Iterator</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------æœªä½¿ç”¨è¿­ä»£æ¨¡å¼----------
é¡¹ç›®åç§°æ˜¯ï¼šæ˜Ÿçƒå¤§æˆ˜é¡¹ç›®        é¡¹ç›®äººæ•°ï¼š10    é¡¹ç›®è´¹ç”¨ï¼š100000
é¡¹ç›®åç§°æ˜¯ï¼šæ‰­è½¬æ—¶ç©ºé¡¹ç›®        é¡¹ç›®äººæ•°ï¼š100   é¡¹ç›®è´¹ç”¨ï¼š10000000
é¡¹ç›®åç§°æ˜¯ï¼šè¶…äººæ”¹é€ é¡¹ç›®        é¡¹ç›®äººæ•°ï¼š10000 é¡¹ç›®è´¹ç”¨ï¼š1000000000
é¡¹ç›®åç§°æ˜¯ï¼šç¬¬4ä¸ªé¡¹ç›®   é¡¹ç›®äººæ•°ï¼š20    é¡¹ç›®è´¹ç”¨ï¼š4000000
é¡¹ç›®åç§°æ˜¯ï¼šç¬¬5ä¸ªé¡¹ç›®   é¡¹ç›®äººæ•°ï¼š25    é¡¹ç›®è´¹ç”¨ï¼š5000000
----------ä½¿ç”¨è¿­ä»£æ¨¡å¼----------
é¡¹ç›®åç§°æ˜¯ï¼šæ˜Ÿçƒå¤§æˆ˜é¡¹ç›®        é¡¹ç›®äººæ•°ï¼š10    é¡¹ç›®è´¹ç”¨ï¼š100000
é¡¹ç›®åç§°æ˜¯ï¼šæ‰­è½¬æ—¶ç©ºé¡¹ç›®        é¡¹ç›®äººæ•°ï¼š100   é¡¹ç›®è´¹ç”¨ï¼š10000000
é¡¹ç›®åç§°æ˜¯ï¼šè¶…äººæ”¹é€ é¡¹ç›®        é¡¹ç›®äººæ•°ï¼š10000 é¡¹ç›®è´¹ç”¨ï¼š1000000000
é¡¹ç›®åç§°æ˜¯ï¼šç¬¬4ä¸ªé¡¹ç›®   é¡¹ç›®äººæ•°ï¼š20    é¡¹ç›®è´¹ç”¨ï¼š4000000
é¡¹ç›®åç§°æ˜¯ï¼šç¬¬5ä¸ªé¡¹ç›®   é¡¹ç›®äººæ•°ï¼š25    é¡¹ç›®è´¹ç”¨ï¼š5000000   </code></pre><h2 id="ç»„åˆæ¨¡å¼"><a href="#ç»„åˆæ¨¡å¼" class="headerlink" title="ç»„åˆæ¨¡å¼"></a>ç»„åˆæ¨¡å¼</h2><blockquote>
<p>Compose objects into tree structures to represent part-whole hierarchies.Composite lets clients treat individual objects and compositions of objects uniformly.<br><br>å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>CCorpNodeï¼ŒæŠ½è±¡åŸºç±»ï¼Œå®ç°åŸºæœ¬ä¿¡æ¯</p>
<p>CBranchNodeï¼Œæ ‘æèŠ‚ç‚¹ï¼Œå®ç°Addordinate()å‡½æ•°å’ŒGetSubordinate()å‡½æ•°</p>
<p>CLeafNodeï¼Œå¶å­èŠ‚ç‚¹ï¼ŒIsLeafå±æ€§æ€»æ˜¯â€œtrueâ€</p>
<p>è¯´æ˜ï¼šç»„åˆæ¨¡å¼ä¸»è¦æ˜¯å®ç°åœ¨CBranchNodeå¯¹è±¡é‡Œå¢åŠ å¯¹å…¶å®ƒå¯¹è±¡çš„æ•°ç»„ï¼Œå¦‚vector&lt;CCorpNode*&gt;ï¼Œæ•°ç»„é‡Œå¯ä»¥å­˜æ”¾CBranchNodeå’ŒCLeafNodeå¯¹è±¡ã€‚è¿™æ ·æ–¹ä¾¿è¿›è¡Œéå†æ“ä½œã€‚</p>
<p>æ³¨æ„ï¼šç»„åˆæ¨¡å¼æœ‰é€æ˜ç»„åˆæ¨¡å¼å’Œå®‰å…¨ç»„åˆæ¨¡å¼ã€‚é€æ˜ç»„åˆæ¨¡å¼æ˜¯å°†Addordinateå’ŒGetSubordinateè¿™ä¸¤ä¸ªå‡½æ•°ä¹ŸæŠ½è±¡åˆ°CCorpNodeåŸºç±»é‡Œï¼Œè¿™å¢åŠ äº†æ“ä½œå¶å­èŠ‚ç‚¹çš„éš¾åº¦ï¼Œæ›´æ˜“å‡ºç°é€»è¾‘é—®é¢˜ã€‚æ‰€ä»¥å°½é‡ä½¿ç”¨å®‰å…¨æ¨¡å¼ã€‚</p>
<p>è¿™ä¸ªç®€å•äº†ï¼Œå¯ä»¥æƒ³åƒä¸€ä¸‹TreeViewå’ŒTreeNodeåŸºæœ¬ä¸Šæ˜¯è¿™ä¸ªæ„æ€äº†ï¼Œå°†å¾ˆå¤šæ•°æ®ç»„ç»‡åœ¨ä¸€å—ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573343814177.png?x-oss-process=image/resize,m_lfit,h_450" alt="ç»„ç»‡æ¶æ„"></p>
<p>Branch.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ibranch.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ICorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBranch <span class="token punctuation">:</span>
    public IBranch<span class="token punctuation">,</span> ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CBranch</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>ICorp <span class="token operator">*</span>pcorp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">></span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">></span> m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BranchNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"corpnode.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CorpNode.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBranchNode <span class="token punctuation">:</span>
    public CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CBranchNode</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>CCorpNode <span class="token operator">*</span>pcorpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">></span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">></span> m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CorpNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CCorpNode</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> string _pos<span class="token punctuation">,</span> <span class="token keyword">int</span> _salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetParent</span><span class="token punctuation">(</span>CCorpNode <span class="token operator">*</span>_pParent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCorpNode <span class="token operator">*</span> <span class="token function">GetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    bool m_isLeaf<span class="token punctuation">;</span>
    CCorpNode <span class="token operator">*</span>m_pParent<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IBranch.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ICorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IBranch
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>ICorp <span class="token operator">*</span>pcorp<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">></span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">ICorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">ICorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Leaf.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"icorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CLeaf <span class="token punctuation">:</span>
    public ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CLeaf</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LeafNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"corpnode.h"</span></span>
class CLeafNode <span class="token punctuation">:</span>
    public CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CLeafNode</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Branch.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Branch.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"..\CommonDeclare\Convert.h"</span></span>


CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranch</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>


CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span> ICorp <span class="token operator">*</span>pcorp <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_subordinateList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcorp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">></span> CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å§“åï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tèŒä½ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tè–ªæ°´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BranchNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BranchNode.h"</span></span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CCorpNode</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span> CCorpNode <span class="token operator">*</span>pcorpNode <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pcorpNode<span class="token operator">-></span><span class="token function">SetParent</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_subordinateList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcorpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">></span> CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bool CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_isLeaf<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Composite.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">// Composite.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</span>
<span class="token comment" spellcheck="true">//</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BranchNode.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LeafNode.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æ³¨æœªä½¿ç”¨æ¨¡å¼è°ƒç”¨ICorpã€CLeafã€CBranchè¿™ä¸‰ä¸ªç±»æ¥ç»„ç»‡ã€‚</span>
<span class="token punctuation">}</span>

string <span class="token function">GetTreeInfo</span><span class="token punctuation">(</span>CBranchNode <span class="token operator">*</span> proot<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">></span> subordinateList <span class="token operator">=</span> proot<span class="token operator">-></span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator it <span class="token operator">=</span> subordinateList<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> subordinateList<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">GetTreeInfo</span><span class="token punctuation">(</span>dynamic_cast<span class="token operator">&lt;</span>CBranchNode<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CBranchNode <span class="token function">root</span><span class="token punctuation">(</span><span class="token string">"èµµå¤§"</span><span class="token punctuation">,</span> <span class="token string">"æ€»ç»ç†"</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBranchNode <span class="token function">devDep</span><span class="token punctuation">(</span><span class="token string">"é’±å¤§"</span><span class="token punctuation">,</span> <span class="token string">"ç ”å‘éƒ¨é—¨ç»ç†"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">saleDep</span><span class="token punctuation">(</span><span class="token string">"å­™å¤§"</span><span class="token punctuation">,</span> <span class="token string">"é”€å”®éƒ¨é—¨ç»ç†"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">financeDep</span><span class="token punctuation">(</span><span class="token string">"æå¤§"</span><span class="token punctuation">,</span> <span class="token string">"è´¢åŠ¡éƒ¨é—¨ç»ç†"</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBranchNode <span class="token function">firstDevGroup</span><span class="token punctuation">(</span><span class="token string">"å‘¨ä¸‰ä¹Ÿæ–œ"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘ä¸€ç»„ç»„é•¿"</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">secondDevGroup</span><span class="token punctuation">(</span><span class="token string">"å´å¤§æ£’æ§Œ"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äºŒç»„ç»„é•¿"</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CLeafNode <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">b</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">c</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">"e"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">"f"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">g</span><span class="token punctuation">(</span><span class="token string">"g"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">"h"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"i"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">j</span><span class="token punctuation">(</span><span class="token string">"j"</span><span class="token punctuation">,</span> <span class="token string">"å¼€å‘äººå‘˜"</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">k</span><span class="token punctuation">(</span><span class="token string">"k"</span><span class="token punctuation">,</span> <span class="token string">"CEOç§˜ä¹¦"</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">zheng</span><span class="token punctuation">(</span><span class="token string">"éƒ‘è€å…­"</span><span class="token punctuation">,</span> <span class="token string">"ç ”å‘éƒ¨å‰¯ç»ç†"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>CEOæœ‰ä¸‰ä¸ªéƒ¨é—¨ç»ç†å’Œä¸€ä¸ªç§˜ä¹¦
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>devDep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>saleDep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>financeDep<span class="token punctuation">)</span><span class="token punctuation">;</span>

    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>zheng<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¼€å‘éƒ¨æœ‰ä¸€ä¸ªå‰¯ç»ç†å’Œä¸¤ä¸ªå°ç»„</span>
    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>firstDevGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>secondDevGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>

    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

    saleDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
    saleDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>

    financeDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    financeDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> root<span class="token punctuation">.</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">GetTreeInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æœªä½¿ç”¨æ¨¡å¼çš„è°ƒç”¨ã€‚</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//ä½¿ç”¨ç»„åˆæ¨¡å¼åçš„è°ƒç”¨ã€‚</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CorpNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CorpNode.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"..\CommonDeclare\Convert.h"</span></span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    m_position <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    m_salary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> string _pos<span class="token punctuation">,</span> <span class="token keyword">int</span> _salary<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>_name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>_pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>_salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å§“åï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tèŒä½ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tè–ªæ°´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetParent</span><span class="token punctuation">(</span> CCorpNode <span class="token operator">*</span>_parent <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pParent <span class="token operator">=</span> _parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CCorpNode <span class="token operator">*</span> CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_pParent<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Leaf.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Leaf.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"..\CommonDeclare\Convert.h"</span></span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    m_position <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    m_salary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeaf</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


string CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å§“åï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tèŒä½ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\tè–ªæ°´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LeafNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LeafNode.h"</span></span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CCorpNode</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


bool CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_isLeaf<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>å§“åï¼šèµµå¤§      èŒä½ï¼šæ€»ç»ç†    è–ªæ°´ï¼š100000
å§“åï¼šk èŒä½ï¼šCEOç§˜ä¹¦   è–ªæ°´ï¼š8000
å§“åï¼šé’±å¤§      èŒä½ï¼šç ”å‘éƒ¨é—¨ç»ç†      è–ªæ°´ï¼š10000
å§“åï¼šéƒ‘è€å…­    èŒä½ï¼šç ”å‘éƒ¨å‰¯ç»ç†      è–ªæ°´ï¼š20000
å§“åï¼šå‘¨ä¸‰ä¹Ÿæ–œ  èŒä½ï¼šå¼€å‘ä¸€ç»„ç»„é•¿      è–ªæ°´ï¼š5000
å§“åï¼ša èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šb èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šc èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šå´å¤§æ£’æ§Œ  èŒä½ï¼šå¼€å‘äºŒç»„ç»„é•¿      è–ªæ°´ï¼š6000
å§“åï¼šd èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼še èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šf èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šå­™å¤§      èŒä½ï¼šé”€å”®éƒ¨é—¨ç»ç†      è–ªæ°´ï¼š20000
å§“åï¼šg èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š2000
å§“åï¼šh èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š5000
å§“åï¼šæå¤§      èŒä½ï¼šè´¢åŠ¡éƒ¨é—¨ç»ç†      è–ªæ°´ï¼š30000
å§“åï¼ši èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š4000
å§“åï¼šj èŒä½ï¼šå¼€å‘äººå‘˜  è–ªæ°´ï¼š5000  </code></pre><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><blockquote>
<p>Define a one-to-many dependency between objects so that when one object changes state,all its dependents are notified and updated automatically.<br><br>å®šä¹‰å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
</blockquote>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1576921446447.png?x-oss-process=image/resize,m_lfit,h_450" alt="è§‚å¯Ÿè€…æ¨¡å¼"></p>
<p>â— Subjectè¢«è§‚å¯Ÿè€…<br>å®šä¹‰è¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼Œå®ƒå¿…é¡»èƒ½å¤ŸåŠ¨æ€åœ°å¢åŠ ã€å–æ¶ˆè§‚å¯Ÿè€…ã€‚å®ƒä¸€èˆ¬æ˜¯æŠ½è±¡ç±»æˆ–è€…æ˜¯å®ç°ç±»ï¼Œä»…ä»…å®Œæˆä½œä¸ºè¢«è§‚å¯Ÿè€…å¿…é¡»å®ç°çš„èŒè´£ï¼šç®¡ç†è§‚å¯Ÿè€…å¹¶é€šçŸ¥è§‚å¯Ÿè€…ã€‚<br>â— Observerè§‚å¯Ÿè€…<br>è§‚å¯Ÿè€…æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå³è¿›è¡Œupdateï¼ˆæ›´æ–°æ–¹æ³•ï¼‰æ“ä½œï¼Œå¯¹æ¥æ”¶åˆ°çš„ä¿¡æ¯è¿›è¡Œå¤„ç†ã€‚<br>â— ConcreteSubjectå…·ä½“çš„è¢«è§‚å¯Ÿè€…<br>å®šä¹‰è¢«è§‚å¯Ÿè€…è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼ŒåŒæ—¶å®šä¹‰å¯¹å“ªäº›äº‹ä»¶è¿›è¡Œé€šçŸ¥ã€‚<br>â— ConcreteObserverå…·ä½“çš„è§‚å¯Ÿè€…<br>æ¯ä¸ªè§‚å¯Ÿåœ¨æ¥æ”¶åˆ°æ¶ˆæ¯åçš„å¤„ç†ååº”æ˜¯ä¸åŒï¼Œå„ä¸ªè§‚å¯Ÿè€…æœ‰è‡ªå·±çš„å¤„ç†é€»è¾‘ã€‚</p>
<p>ä¼ ç»Ÿæ–¹å¼ç”¨å¤šçº¿ç¨‹æŠ€æœ¯å®ç°ç›‘å¬ï¼Œè€Œçº¿ç¨‹å’Œæ­»å¾ªç¯ä¼šæå¤§çš„å¢åŠ å¼€é”€ï¼Œä¸ºäº†é¿å…è¿™ç§å¼€é”€ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<p>è¿™ç§æ¨¡å¼æœ‰å¤šç§å«æ³•,ç°æ•´ç†å¦‚ä¸‹,æ¯ä¸€è¡Œéƒ½æ˜¯ç›¸åŒçš„ä¸œè¥¿:<br>ä¸»é¢˜,è¢«è§‚å¯Ÿè€…,è°ƒç”¨è€…<br>è®¢é˜…è€…,è§‚å¯Ÿè€…,è¢«è°ƒç”¨è€…<br>æ³¨å†Œ,è®¢é˜…</p>
<hr>

<p>ä¸»é¢˜ç”¨äºç®¡ç†è®¢é˜…è€…,å½“å‘å¸ƒè€…å‘ç”Ÿå˜åŒ–æ—¶,ä¸»é¢˜å¹¿æ’­ç»™æ‰€æœ‰è®¢é˜…è€…,ç„¶åæ‰€æœ‰è®¢é˜…è€…åšç»Ÿä¸€åŠ¨ä½œ.</p>
<p><code>ä¸»é¢˜</code><br>Subject.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">ifndef</span> __SUBJECT__H__</span>
<span class="token macro property">#<span class="token directive keyword">define</span> __SUBJECT__H__</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Observer.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
using namespace std<span class="token punctuation">;</span>
class Observer<span class="token punctuation">;</span>
class Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

private<span class="token punctuation">:</span>
    list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">></span><span class="token operator">*</span> _observers<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


class ConcreteSubject <span class="token punctuation">:</span> public Subject <span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Subject.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Subject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list></span></span>
using namespace std<span class="token punctuation">;</span>

Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _observers <span class="token operator">=</span> new list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obs <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _observers<span class="token operator">-></span><span class="token function">push_front</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">detach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obs <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _observers<span class="token operator">-></span><span class="token function">remove</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>iterator iter<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//éå†æ›´æ–°</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>iter <span class="token operator">=</span> _observers<span class="token operator">-></span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter <span class="token operator">!=</span> _observers<span class="token operator">-></span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>iter<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">update</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token operator">-></span>state <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

string ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token operator">-></span>state <span class="token operator">=</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>è§‚å¯Ÿè€…</code></p>
<p>Observer.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">ifndef</span> __OBSERVER__H__</span>
<span class="token macro property">#<span class="token directive keyword">define</span> __OBSERVER__H__</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Subject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string></span></span>
using namespace std<span class="token punctuation">;</span>
class Subject<span class="token punctuation">;</span>
class Observer <span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> subject<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
public<span class="token punctuation">:</span>
    std<span class="token punctuation">:</span><span class="token punctuation">:</span>string state<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

class ConcreteObserver<span class="token punctuation">:</span>public Observer 
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    Subject<span class="token operator">*</span> _sub<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Observer.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Observer.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

using namespace std<span class="token punctuation">;</span>

Observer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token string">'\0'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Observer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _sub <span class="token operator">=</span> sub<span class="token punctuation">;</span>
    _sub<span class="token operator">-></span><span class="token function">attach</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _sub<span class="token operator">-></span><span class="token function">detach</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_sub <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        delete _sub<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token keyword">void</span> ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> subject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> subject<span class="token operator">-></span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">// string str = _sub->getState();</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ConcreteObserver observer.... "</span> <span class="token operator">&lt;&lt;</span> _sub<span class="token operator">-></span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>ä¸»å‡½æ•°</code><br>main.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Observer.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Subject.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æ–°å»ºä¸€ä¸ªè¢«ç›‘å¬å¯¹è±¡subï¼ˆä¸»é¢˜ï¼‰</span>
    Subject<span class="token operator">*</span> sub <span class="token operator">=</span> new <span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//æ–°å»ºä¸€ä¸ªç›‘å¬è€…obA ï¼Œå¹¶åˆå§‹åŒ–ä¸ºç›‘å¬sub</span>
    ConcreteObserver<span class="token operator">*</span> obA <span class="token operator">=</span> new <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ConcreteObserver<span class="token operator">*</span> obB <span class="token operator">=</span> new <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//éªŒè¯æ­¤æ—¶æ¶ˆæ¯ä¸ºç©º</span>
    obA<span class="token operator">-></span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obB<span class="token operator">-></span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//è¢«ç›‘å¬è€…å¼€å§‹æ”¹å˜</span>
    sub<span class="token operator">-></span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">"å¤§å®¶å¥½ï¼Œæˆ‘ç°åœ¨å·²ç»å‘å¸ƒäº†æœ€æ–°æ¶ˆæ¯"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//è¢«ç›‘å¬è€…å‘å¸ƒå¹¿æ’­</span>
    sub<span class="token operator">-></span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">g++ main.cpp Subject.cpp Observer.cpp 
./a.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>ConcreteObserver observer.... 
ConcreteObserver observer.... 
ConcreteObserver observer.... å¤§å®¶å¥½ï¼Œæˆ‘ç°åœ¨å·²ç»å‘å¸ƒäº†æœ€æ–°æ¶ˆæ¯
ConcreteObserver observer.... å¤§å®¶å¥½ï¼Œæˆ‘ç°åœ¨å·²ç»å‘å¸ƒäº†æœ€æ–°æ¶ˆæ¯</code></pre><p>è¿™æ˜¯è¢«ç›‘å¬è€…å’Œç›‘å¬è€…ç›´æ¥å¯¹æ¥çš„æ¨¡å‹ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯å¢åŠ äº†ç¬¬ä¸‰æ–¹é€šä¿¡å¹³å°ï¼Œç›‘å¬è€…å‘å¹³å°æ³¨å†Œï¼Œè¢«ç›‘å¬è€…å°†æ›´æ–°ä¿¡æ¯å‘é€ç»™æ¶ˆæ¯å¹³å°ï¼Œç„¶åå¹³å°è¿›è¡Œå‘æ”¾å¹¿æ’­ã€‚æˆ‘æ€€ç–‘è¿™æ˜¯ä¸æ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</p>
<h2 id="é—¨é¢æ¨¡å¼"><a href="#é—¨é¢æ¨¡å¼" class="headerlink" title="é—¨é¢æ¨¡å¼"></a>é—¨é¢æ¨¡å¼</h2><blockquote>
<p>Provide a unified interface to a set of interfaces in a subsystem.Facade defines a higher-level interface that makes the subsystem easier to use.<br><br>è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸å…¶å†…éƒ¨çš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºä½¿ç”¨ã€‚</p>
</blockquote>
<p>é—¨é¢æ¨¡å¼æ³¨é‡â€œç»Ÿä¸€çš„å¯¹è±¡â€ï¼Œä¹Ÿå°±æ˜¯æä¾›ä¸€ä¸ªè®¿é—®å­ç³»ç»Ÿçš„æ¥å£ï¼Œé™¤äº†è¿™ä¸ªæ¥å£ä¸å…è®¸æœ‰ä»»ä½•è®¿é—®å­ç³»ç»Ÿçš„è¡Œä¸ºå‘ç”Ÿã€‚<br>ç®€å•è¯´ï¼Œå°±æ˜¯å°†å¤æ‚çš„é€»è¾‘å°è£…èµ·æ¥ï¼Œå¯¹å¤–å…¬å¼€ç®€å•çš„æ¥å£ï¼Œç”±å®¢æˆ·ç¨‹åºè°ƒç”¨ã€‚</p>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>ILetterProcessï¼Œæ¥å£</p>
<p>CLetterProcessImplï¼Œä¿¡ä»¶å¤„ç†çš„4ä¸ªå‡½æ•°</p>
<p>CLetterPoliceï¼Œè­¦å¯Ÿ</p>
<p>CModenPostOfficeï¼Œé‚®å±€</p>
<p>è¯´æ˜ï¼šé‚®å±€å¯¹å¤–åªæœ‰ä¸€ä¸ªçª—å£ï¼Œæ¥æ”¶ä¿¡ä»¶å†…å®¹å’Œé‚®ä»¶åœ°å€ã€‚å¯¹å†…è°ƒç”¨é‚®ä»¶å¤„ç†çš„4ä¸ªå‡½æ•°ã€‚å°†å¤æ‚é€»è¾‘å°è£…åœ¨é‚®å±€çš„é‡Œé¢ï¼Œå½“éœ€è¦å¢åŠ è­¦å¯Ÿæ¥æ£€æŸ¥ä¿¡ä»¶æ—¶ï¼Œåªéœ€åœ¨é‚®å±€å†…å¢åŠ è­¦å¯Ÿæ£€æŸ¥ä¿¡ä»¶çš„æ–¹æ³•ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573294669601.png?x-oss-process=image/resize,m_lfit,h_450" alt="å†™ä¿¡è¿‡ç¨‹ç±»å›¾"></p>
<p>ILetterProcess.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ILetterProcess
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ILetterProcess.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ILetterProcess.h"</span></span>
ILetterProcess<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
ILetterProcess<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterprocessImpl.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iletterprocess.h"</span></span>
class CLetterProcessImpl <span class="token punctuation">:</span>
    public ILetterProcess
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterProcessImpl.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LetterProcessImpl.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¡«å†™ä¿¡çš„å†…å®¹... ..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"å¡«å†™æ”¶ä»¶äººåœ°å€åŠå§“å... ..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æŠŠä¿¡æ”¾åˆ°ä¿¡å°ä¸­..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"é‚®é€’ä¿¡ä»¶..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ModenPostOffice.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ILetterProcess.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LetterProcessImpl.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LetterPolice.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CModenPostOffice
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span>string context<span class="token punctuation">,</span> string address<span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ILetterProcess <span class="token operator">*</span>m_pLetterProcess<span class="token punctuation">;</span>
    CLetterPolice <span class="token operator">*</span>m_pLetterPolice<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ModenPostOffice.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ModenPostOffice.h"</span></span>
CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLetterProcess <span class="token operator">=</span> new <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>m_pLetterPolice <span class="token operator">=</span> new <span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pLetterProcess<span class="token punctuation">;</span>
    delete m_pLetterPolice<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SendLetter</span><span class="token punctuation">(</span> string context<span class="token punctuation">,</span> string address <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//å¸®å¿™å†™ä¿¡</span>
    m_pLetterProcess<span class="token operator">-></span><span class="token function">WriteContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//å†™å¥½ä¿¡å°</span>
    m_pLetterProcess<span class="token operator">-></span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//è­¦å¯Ÿè¦æ£€æŸ¥ä¿¡ä»¶äº†</span>
    m_pLetterPolice<span class="token operator">-></span><span class="token function">CheckLetter</span><span class="token punctuation">(</span>m_pLetterProcess<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//æŠŠä¿¡æ”¾åˆ°ä¿¡å°ä¸­</span>
    m_pLetterProcess<span class="token operator">-></span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//é‚®é€’ä¿¡ä»¶</span>
    m_pLetterProcess<span class="token operator">-></span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterPolice.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ILetterProcess.h"</span></span>
class CLetterPolice
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">void</span> <span class="token function">CheckLetter</span><span class="token punctuation">(</span>ILetterProcess<span class="token operator">*</span> pLetterProcess<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterPolice.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LetterPolice.h"</span></span>
CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CheckLetter</span><span class="token punctuation">(</span> ILetterProcess <span class="token operator">*</span>pLetterProcess <span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">//æ£€æŸ¥ä¿¡ä»¶ï¼Œæ­¤å¤„çœç•¥ä¸€ä¸‡å­—ã€‚</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Facade.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ILetterProcess.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LetterProcessImpl.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ModenPostOffice.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoItByPostOffice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CModenPostOffice modenPostOffice<span class="token punctuation">;</span>
    string context <span class="token operator">=</span> <span class="token string">"Hello, It's me, do you know who I am? I'm your old lover. I'd like to ... ..."</span><span class="token punctuation">;</span>
    string address <span class="token operator">=</span> <span class="token string">"Happy Road No. 666, Beijing City, China"</span><span class="token punctuation">;</span>
    modenPostOffice<span class="token punctuation">.</span><span class="token function">SendLetter</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoItYourself</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ILetterProcess <span class="token operator">*</span>pLetterProcess <span class="token operator">=</span> new <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-></span><span class="token function">WriteContext</span><span class="token punctuation">(</span><span class="token string">"Hello, It's me, do you know who I am? I'm your old lover. I'd like to ... ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-></span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span><span class="token string">"Happy Road No. 666, Beijing City, China"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-></span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-></span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pLetterProcess<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//ç°åœ¨çš„è°ƒç”¨æ–¹å¼ã€‚å¯¹äºå®¢æˆ·æ¥è¯´ç¡®å®ç®€å•å¤šäº†ã€‚</span>
    <span class="token comment" spellcheck="true">//å¦‚éœ€è¦å¢åŠ é€»è¾‘ï¼Œä¾‹å¦‚è®©è­¦å¯Ÿæ¥æ£€æŸ¥é‚®ä»¶ã€‚å¯ä»¥åœ¨é‚®å±€é‡Œå®Œæˆè¿™é¡¹å·¥ä½œã€‚</span>
    <span class="token function">DoItByPostOffice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//åŸæ¥çš„è°ƒç”¨æ–¹å¼ã€‚</span>
    <span class="token function">DoItYourself</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>å¡«å†™ä¿¡çš„å†…å®¹... ...
å¡«å†™æ”¶ä»¶äººåœ°å€åŠå§“å... ...
æŠŠä¿¡æ”¾åˆ°ä¿¡å°ä¸­...
é‚®é€’ä¿¡ä»¶...
å¡«å†™ä¿¡çš„å†…å®¹... ...
å¡«å†™æ”¶ä»¶äººåœ°å€åŠå§“å... ...
æŠŠä¿¡æ”¾åˆ°ä¿¡å°ä¸­...
é‚®é€’ä¿¡ä»¶...   </code></pre><h2 id="å¤‡å¿˜å½•æ¨¡å¼"><a href="#å¤‡å¿˜å½•æ¨¡å¼" class="headerlink" title="å¤‡å¿˜å½•æ¨¡å¼"></a>å¤‡å¿˜å½•æ¨¡å¼</h2><blockquote>
<p>Without violating encapsulation,capture and externalize an objectâ€™s internal state so that the object can be restored to this state later.<br><br>åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</p>
</blockquote>
<h2 id="è®¿é—®è€…æ¨¡å¼"><a href="#è®¿é—®è€…æ¨¡å¼" class="headerlink" title="è®¿é—®è€…æ¨¡å¼"></a>è®¿é—®è€…æ¨¡å¼</h2><blockquote>
<p>Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. <br><br>å°è£…ä¸€äº›ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œã€‚</p>
</blockquote>
<p>BaseVisitor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ivisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CommonEmployee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Manager.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBaseVisitor <span class="token punctuation">:</span>
    public IVisitor
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string <span class="token function">GetBasicInfo</span><span class="token punctuation">(</span>CEmployee <span class="token operator">*</span>pemployee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>CCommonEmployee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> MANAGER_COEFFICENT <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> COMMONEMPLOYEE_COEFFICENT <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_commonTotal<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_managerTotal<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CalCommonSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CalManagerSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CommonEmployee.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"employee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IVisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCommonEmployee <span class="token punctuation">:</span>
    public CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetJob</span><span class="token punctuation">(</span>string job<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    string <span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_job<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Employee.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IVisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> MALE<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> FEMALE<span class="token punctuation">;</span>
    <span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetName</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSex</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IVisitor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

class CCommonEmployee<span class="token punctuation">;</span>
class CManager<span class="token punctuation">;</span>
class IVisitor
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">int</span> <span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Manager.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"employee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IVisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CManager <span class="token punctuation">:</span>
    public CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetPerformance</span><span class="token punctuation">(</span>string per<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    string <span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_performance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BaseVisitor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"..\CommonDeclare\Convert.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BaseVisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_commonTotal <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    m_managerTotal <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> this<span class="token operator">-></span><span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>commonEmployee<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    this<span class="token operator">-></span><span class="token function">CalCommonSalary</span><span class="token punctuation">(</span>commonEmployee<span class="token punctuation">.</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> this<span class="token operator">-></span><span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    this<span class="token operator">-></span><span class="token function">CalManagerSalary</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span>CEmployee <span class="token operator">*</span>pemployee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å§“åï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pemployee<span class="token operator">-></span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"æ€§åˆ«ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>pemployee<span class="token operator">-></span><span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"è–ªæ°´ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>pemployee<span class="token operator">-></span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string basicInfo <span class="token operator">=</span> this<span class="token operator">-></span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string otherInfo <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ä¸šç»©ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span><span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    basicInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>otherInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> basicInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>CCommonEmployee employee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string basicInfo <span class="token operator">=</span> this<span class="token operator">-></span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string otherInfo <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å·¥ä½œï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    basicInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>otherInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> basicInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_commonTotal <span class="token operator">+</span> this<span class="token operator">-></span>m_managerTotal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CalCommonSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_commonTotal <span class="token operator">+</span><span class="token operator">=</span> salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CalManagerSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_managerTotal <span class="token operator">+</span><span class="token operator">=</span> salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CommonEmployee.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CommonEmployee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>


CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_job <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-></span>m_job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetJob</span><span class="token punctuation">(</span>string job<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_job <span class="token operator">=</span> job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string job <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"å·¥ä½œï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_job<span class="token punctuation">)</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pVisitor<span class="token operator">-></span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Employee.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Employee.h"</span></span>
<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>MALE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetName</span><span class="token punctuation">(</span> string name <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSalary</span><span class="token punctuation">(</span> <span class="token keyword">int</span> v <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_salary <span class="token operator">=</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSex</span><span class="token punctuation">(</span> <span class="token keyword">int</span> v <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_sex <span class="token operator">=</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Manager.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Manager.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>


CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_performance <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_performance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetPerformance</span><span class="token punctuation">(</span>string per<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_performance <span class="token operator">=</span> per<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"ä¸šç»©ï¼š"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_performance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"\t"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pVisitor<span class="token operator">-></span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Visitor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">// Visitor.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</span>
<span class="token comment" spellcheck="true">//</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Employee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CommonEmployee.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Manager.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"BaseVisitor.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"..\CommonDeclare\Convert.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">MockEmployee</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">></span> <span class="token operator">*</span>pvce<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CCommonEmployee <span class="token operator">*</span>pZhangSan <span class="token operator">=</span> new <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-></span><span class="token function">SetJob</span><span class="token punctuation">(</span><span class="token string">"ç¼–å†™Javaç¨‹åºï¼Œç»å¯¹çš„è“é¢†ã€è‹¦å·¥åŠ æ¬è¿å·¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-></span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">"å¼ ä¸‰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-></span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-></span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>MALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span>pZhangSan<span class="token punctuation">)</span><span class="token punctuation">;</span>

    CCommonEmployee <span class="token operator">*</span>pLiSi <span class="token operator">=</span> new <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-></span><span class="token function">SetJob</span><span class="token punctuation">(</span><span class="token string">"é¡µé¢ç¾å·¥ï¼Œå®¡ç¾ç´ è´¨å¤ªä¸æµè¡Œäº†ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-></span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">"æå››"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-></span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-></span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span>pLiSi<span class="token punctuation">)</span><span class="token punctuation">;</span>

    CManager <span class="token operator">*</span>pWangWu <span class="token operator">=</span> new <span class="token function">CManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-></span><span class="token function">SetPerformance</span><span class="token punctuation">(</span><span class="token string">"åŸºæœ¬ä¸Šæ˜¯è´Ÿå€¼ï¼Œä½†æ˜¯æˆ‘ä¼šæ‹é©¬å±å‘€"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-></span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">"ç‹äº”"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-></span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-></span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-></span><span class="token function">push_back</span><span class="token punctuation">(</span>pWangWu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">></span> vce<span class="token punctuation">;</span>
    <span class="token function">MockEmployee</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>vce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator readIt <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBaseVisitor visitor<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> readIt <span class="token operator">!=</span> vce<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> readIt <span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>readIt<span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Accept</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æœ¬å…¬å¸çš„æœˆå·¥èµ„æ€»é¢æ˜¯ï¼š"</span> <span class="token operator">&lt;&lt;</span> CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>visitor<span class="token punctuation">.</span><span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">></span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator delIt <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> delIt <span class="token operator">!=</span> vce<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> delIt<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>delIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>delIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    vce<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>å§“åï¼šå¼ ä¸‰      æ€§åˆ«ï¼š0 è–ªæ°´ï¼š1800      å·¥ä½œï¼šç¼–å†™Javaç¨‹åºï¼Œç»å¯¹çš„è“é¢†ã€è‹¦å·¥åŠ æ¬è¿å·¥
å§“åï¼šæå››      æ€§åˆ«ï¼š1 è–ªæ°´ï¼š1900      å·¥ä½œï¼šé¡µé¢ç¾å·¥ï¼Œå®¡ç¾ç´ è´¨å¤ªä¸æµè¡Œäº†ï¼
å§“åï¼šç‹äº”      æ€§åˆ«ï¼š1 è–ªæ°´ï¼š1900      ä¸šç»©ï¼šåŸºæœ¬ä¸Šæ˜¯è´Ÿå€¼ï¼Œä½†æ˜¯æˆ‘ä¼šæ‹é©¬å±å‘€
æœ¬å…¬å¸çš„æœˆå·¥èµ„æ€»é¢æ˜¯ï¼š5600    </code></pre><h2 id="çŠ¶æ€æ¨¡å¼"><a href="#çŠ¶æ€æ¨¡å¼" class="headerlink" title="çŠ¶æ€æ¨¡å¼"></a>çŠ¶æ€æ¨¡å¼</h2><blockquote>
<p>Allow an object to alter its behavior when its internal state changes.The object will appear to change its class.<br><br>å½“ä¸€ä¸ªå¯¹è±¡å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸å…¶æ”¹å˜è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ”¹å˜äº†å…¶ç±»ã€‚</p>
</blockquote>
<p>main()ï¼Œå®¢æˆ·</p>
<p>CLiftStateï¼Œç”µæ¢¯çŠ¶æ€æŠ½è±¡ç±»</p>
<p>CCloseingStateï¼Œç”µæ¢¯é—¨å…³é—­</p>
<p>COpenningStateï¼Œç”µæ¢¯é—¨æ‰“å¼€</p>
<p>CRunningStateï¼Œç”µæ¢¯è¿è¡Œ</p>
<p>CStoppingStateï¼Œç”µæ¢¯åœæ­¢</p>
<p>CContextï¼Œç”µæ¢¯çš„æ§åˆ¶é¢æ¿</p>
<p>è¯´æ˜ï¼šCContextä¿æŒç”µæ¢¯çš„çŠ¶æ€ï¼Œå¹¶æä¾›æ“ä½œçš„æ¥å£å‡½æ•°ã€‚å½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼ŒCContextç›´æ¥è°ƒç”¨å½“å‰çŠ¶æ€çš„ç›¸åº”å‡½æ•°ã€‚ç”±çŠ¶æ€çš„æ¥å£å‡½æ•°æ¥ç¡®å®šæ˜¯å¦å¯ä»¥æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œï¼Œä»¥åŠä¿®æ”¹çŠ¶æ€ä¸ºæ‰§è¡Œè¿™ä¸ªåŠ¨ä½œåçš„çŠ¶æ€ã€‚</p>
<p>çœ‹ä»£ç ï¼šç¬¬ä¸€å—æ˜¯ä¸ä½¿ç”¨æ¨¡å¼çš„åšæ³•ï¼Œç¬¬äºŒå—æ˜¯ä½¿ç”¨æ¨¡å¼çš„åšæ³•ï¼Œåœ¨main()å‡½æ•°é‡Œä¼šæœ‰è°ƒç”¨çš„æ–¹å¼ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573351107501.png?x-oss-process=image/resize,m_lfit,h_450" alt="ç”µæ¢¯çš„ç±»å›¾"></p>
<p>ILift.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class ILift
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">ILift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">ILift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Lift.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ilift.h"</span></span>
class CLift <span class="token punctuation">:</span>
    public ILift
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_state<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Lift.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Lift.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_state <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-></span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-></span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯é—¨å¼€å¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯é—¨å…³é—­..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯ä¸Šä¸‹è·‘èµ·æ¥..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯åœæ­¢äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LiftState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class CContext<span class="token punctuation">;</span>
class CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetContext</span><span class="token punctuation">(</span>CContext <span class="token operator">*</span>pContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    CContext <span class="token operator">*</span>m_pContext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LiftState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LiftState.h"</span></span>

CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetContext</span><span class="token punctuation">(</span> CContext <span class="token operator">*</span>pContext <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pContext <span class="token operator">=</span> pContext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CloseingState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"liftstate.h"</span></span>
class CCloseingState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CloseingState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CloseingState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯é—¨å…³é—­..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OpenningState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"liftstate.h"</span></span>
class COpenningState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OpenningState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OpenningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯é—¨å¼€å¯..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pCloseingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RunningState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"liftstate.h"</span></span>
class CRunningState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RunningState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RunningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯ä¸Šä¸‹è·‘..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>StoppingState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"liftstate.h"</span></span>
class CStoppingState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>StoppingState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"StoppingState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-></span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-></span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”µæ¢¯åœæ­¢äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"LiftState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OpenningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CloseingState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RunningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"StoppingState.h"</span></span>
class CContext
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> COpenningState <span class="token operator">*</span>pOpenningState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CCloseingState <span class="token operator">*</span>pCloseingState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CRunningState <span class="token operator">*</span>pRunningState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CStoppingState <span class="token operator">*</span>pStoppingState<span class="token punctuation">;</span>
    CLiftState <span class="token operator">*</span> <span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetLiftState</span><span class="token punctuation">(</span>CLiftState <span class="token operator">*</span>pLiftState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CLiftState <span class="token operator">*</span>m_pLiftState<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
COpenningState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CCloseingState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pCloseingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CRunningState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CStoppingState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pLiftState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    pOpenningState <span class="token operator">=</span> new <span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pCloseingState <span class="token operator">=</span> new <span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pRunningState <span class="token operator">=</span> new <span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pStoppingState <span class="token operator">=</span> new <span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete pOpenningState<span class="token punctuation">;</span>
    pOpenningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pCloseingState<span class="token punctuation">;</span>
    pCloseingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pRunningState<span class="token punctuation">;</span>
    pRunningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pStoppingState<span class="token punctuation">;</span>
    pStoppingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CLiftState <span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pLiftState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CLiftState <span class="token operator">*</span>pLiftState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLiftState <span class="token operator">=</span> pLiftState<span class="token punctuation">;</span>
    this<span class="token operator">-></span>m_pLiftState<span class="token operator">-></span><span class="token function">SetContext</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLiftState<span class="token operator">-></span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLiftState<span class="token operator">-></span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLiftState<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pLiftState<span class="token operator">-></span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// State.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ILift.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Lift.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Context.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"OpenningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"CloseingState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"RunningState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"StoppingState.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ILift<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Lift<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Lift<span class="token punctuation">.</span>cpp
    ILift <span class="token operator">*</span>pLift <span class="token operator">=</span> new <span class="token function">CLift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLift<span class="token operator">-></span><span class="token function">SetState</span><span class="token punctuation">(</span>ILift<span class="token punctuation">:</span><span class="token punctuation">:</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç”µæ¢¯çš„åˆå§‹æ¡ä»¶æ˜¯åœæ­¢çŠ¶æ€ã€‚</span>
    pLift<span class="token operator">-></span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//é¦–å…ˆæ˜¯ç”µæ¢¯é—¨å¼€å¯ï¼Œäººè¿›å»</span>
    pLift<span class="token operator">-></span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç„¶åç”µæ¢¯é—¨å…³é—­</span>
    pLift<span class="token operator">-></span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å†ç„¶åï¼Œç”µæ¢¯è·‘èµ·æ¥ï¼Œå‘ä¸Šæˆ–è€…å‘ä¸‹</span>
    pLift<span class="token operator">-></span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//æœ€ååˆ°è¾¾ç›®çš„åœ°ï¼Œç”µæ¢¯åœä¸‹æ¥</span>
    delete pLift<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    LiftState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> LiftState<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> OpenningState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> CloseingState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> RunningState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> StoppingState<span class="token punctuation">.</span>h
    Context<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Context<span class="token punctuation">.</span>cpp
    CContext context<span class="token punctuation">;</span>
    CCloseingState closeingState<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ä½¿ç”¨æ¨¡å¼ä¹‹å‰----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------ä½¿ç”¨æ¨¡å¼ä¹‹å----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------ä½¿ç”¨æ¨¡å¼ä¹‹å‰----------
ç”µæ¢¯é—¨å¼€å¯...
ç”µæ¢¯é—¨å…³é—­...
ç”µæ¢¯ä¸Šä¸‹è·‘èµ·æ¥...
ç”µæ¢¯åœæ­¢äº†...
----------ä½¿ç”¨æ¨¡å¼ä¹‹å----------
ç”µæ¢¯é—¨å…³é—­...
ç”µæ¢¯é—¨å¼€å¯...     </code></pre><h2 id="è§£é‡Šå™¨æ¨¡å¼"><a href="#è§£é‡Šå™¨æ¨¡å¼" class="headerlink" title="è§£é‡Šå™¨æ¨¡å¼"></a>è§£é‡Šå™¨æ¨¡å¼</h2><blockquote>
<p>Given a language, define a representation for its grammar along with an interpreter that uses the representation to interpret sentences in the language.<br><br>ç»™å®šä¸€é—¨è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºæ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p>
</blockquote>
<h2 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h2><blockquote>
<p>Use sharing to support large numbers of fine-grained objects efficiently.<br><br>ä½¿ç”¨å…±äº«å¯¹è±¡å¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
</blockquote>
<h2 id="æ¡¥æ¢æ¨¡å¼"><a href="#æ¡¥æ¢æ¨¡å¼" class="headerlink" title="æ¡¥æ¢æ¨¡å¼"></a>æ¡¥æ¢æ¨¡å¼</h2><blockquote>
<p>Decouple an abstraction from its implementation so that the two can vary independently.<br><br>å°†æŠ½è±¡å’Œå®ç°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p>
</blockquote>
<hr>

<p>main()ï¼Œå®¢æˆ·</p>
<p>IProductï¼Œäº§å“æ¥å£</p>
<p>CHouseï¼Œæˆ¿å­</p>
<p>CIPodï¼Œipod</p>
<p>CClothesï¼Œæœè£…</p>
<p>CNewCorpï¼Œæ¡¥æ¢ç±»ï¼ŒMakeMoney()æ˜¯æ¡¥æ¢æ–¹æ³•</p>
<p>CNewHouseCorpï¼Œåªèƒ½ç”Ÿäº§æˆ¿å­ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ˜¯CHouse*</p>
<p>CShanZhaiCorpï¼Œä»€ä¹ˆèµšé’±å°±ç”Ÿäº§ä»€ä¹ˆï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ˜¯IProduct*</p>
<p>è¯´æ˜ï¼šå®¢æˆ·ç›´æ¥ä½¿ç”¨CNewHouseCorpå’ŒCShanZhaiCorpç±»ï¼Œåœ¨main()å‡½æ•°é‡Œæ„é€ äº§å“ï¼Œç„¶åä¼ åˆ°è¿™ä¸¤ä¸ªç±»é‡Œã€‚è¿™ä¸¤ä¸ªç±»çš„MakeMoney()å‡½æ•°ï¼Œå…ˆè°ƒç”¨åŸºç±»çš„MakeMoney()ï¼Œç„¶ååˆ†åˆ«æ‰§è¡Œå„è‡ªçš„é€»è¾‘ã€‚</p>
<p>æ³¨æ„ï¼šCNewCorpèµ·åˆ°äº†æ¡¥æ¢çš„ä½œç”¨ã€‚å¯ä»¥åˆ†åˆ«å¢åŠ äº§å“å’Œå…¬å¸ã€‚</p>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573316097217.png?x-oss-process=image/resize,m_lfit,h_450" alt="ä½¿ç”¨å¿«é€Ÿå˜åŒ–çš„ç±»å›¾"></p>
<p>NewCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProduct.h"</span></span>
class CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CNewCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    IProduct <span class="token operator">*</span>m_pProduct<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"NewCorp.h"</span></span>
CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span> IProduct <span class="token operator">*</span>pproduct <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>m_pProduct <span class="token operator">=</span> pproduct<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//æ¯ä¸ªå…¬å¸éƒ½æ˜¯ä¸€æ ·ï¼Œå…ˆç”Ÿäº§</span>
    this<span class="token operator">-></span>m_pProduct<span class="token operator">-></span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//ç„¶åé”€å”®</span>
    this<span class="token operator">-></span>m_pProduct<span class="token operator">-></span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewHouseCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"newcorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"House.h"</span></span>
class CNewHouseCorp <span class="token punctuation">:</span>
    public CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span>CHouse <span class="token operator">*</span>pHouse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewHouseCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"NewHouseCorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span>CHouse <span class="token operator">*</span>pHouse<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CNewCorp</span><span class="token punctuation">(</span>pHouse<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ¿åœ°äº§å…¬å¸èµšå¤§é’±äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ShanZhaiCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"newcorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IProduct.h"</span></span>
class CShanZhaiCorp <span class="token punctuation">:</span>
    public CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ShanZhaiCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ShanZhaiCorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CNewCorp</span><span class="token punctuation">(</span>pproduct<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-></span>CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"æˆ‘èµšé’±å‘€..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IProduct.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProduct</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProduct</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>House.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iproduct.h"</span></span>
class CHouse <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>House.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"House.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„æˆ¿å­æ˜¯è¿™ä¸ªæ ·å­çš„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„æˆ¿å­å–å‡ºå»äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Clothes.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iproduct.h"</span></span>
class CClothes <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Clothes.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Clothes.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„è¡£æœæ˜¯è¿™ä¸ªæ ·å­çš„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„è¡£æœå–å‡ºå»äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IPod.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"iproduct.h"</span></span>
class CIPod <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IPod.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IPod.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„ipodæ˜¯è¿™ä¸ªæ ·å­çš„..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ç”Ÿäº§å‡ºçš„ipodå–å‡ºå»äº†..."</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// Bridge.cpp : å®šä¹‰æ§åˆ¶å°åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"NewHouseCorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"Clothes.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"IPod.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">"ShanZhaiCorp.h"</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoNewRun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------æˆ¿åœ°äº§å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CHouse house<span class="token punctuation">;</span>
    CNewHouseCorp <span class="token function">newHouseCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>house<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newHouseCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å±±å¯¨å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CClothes clothes<span class="token punctuation">;</span>
    CShanZhaiCorp <span class="token function">shanZhaiCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>clothes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    shanZhaiCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">DoNewRun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------æˆ¿åœ°äº§å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CHouse house<span class="token punctuation">;</span>
    CNewHouseCorp <span class="token function">newHouseCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>house<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newHouseCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"----------å±±å¯¨å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CIPod ipod<span class="token punctuation">;</span>
    CShanZhaiCorp <span class="token function">shanZhaiCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ipod<span class="token punctuation">)</span><span class="token punctuation">;</span>
    shanZhaiCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//åªæœ‰ä¸¤å®¶å…¬å¸ï¼Œä¸€å®¶æ˜¯æˆ¿åœ°äº§å…¬å¸ï¼Œå¦ä¸€å®¶å…¬å¸æ˜¯è¡£æœèµšé’±å°±ç”Ÿäº§è¡£æœ</span>
    <span class="token function">DoNewRun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//åªæœ‰ä¸¤å®¶å…¬å¸ï¼Œä¸€å®¶æ˜¯æˆ¿åœ°äº§å…¬å¸ï¼Œå¦ä¸€å®¶å…¬å¸æ˜¯ipodèµšé’±å°±ç”Ÿäº§ipod</span>
    <span class="token function">DoNewRun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------æˆ¿åœ°äº§å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------
ç”Ÿäº§å‡ºçš„æˆ¿å­æ˜¯è¿™ä¸ªæ ·å­çš„...
ç”Ÿäº§å‡ºçš„æˆ¿å­å–å‡ºå»äº†...
æˆ¿åœ°äº§å…¬å¸èµšå¤§é’±äº†...
----------å±±å¯¨å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------
ç”Ÿäº§å‡ºçš„è¡£æœæ˜¯è¿™ä¸ªæ ·å­çš„...
ç”Ÿäº§å‡ºçš„è¡£æœå–å‡ºå»äº†...
æˆ‘èµšé’±å‘€...
----------æˆ¿åœ°äº§å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------
ç”Ÿäº§å‡ºçš„æˆ¿å­æ˜¯è¿™ä¸ªæ ·å­çš„...
ç”Ÿäº§å‡ºçš„æˆ¿å­å–å‡ºå»äº†...
æˆ¿åœ°äº§å…¬å¸èµšå¤§é’±äº†...
----------å±±å¯¨å…¬å¸æ˜¯è¿™æ ·è¿è¡Œçš„----------
ç”Ÿäº§å‡ºçš„ipodæ˜¯è¿™ä¸ªæ ·å­çš„...
ç”Ÿäº§å‡ºçš„ipodå–å‡ºå»äº†...
æˆ‘èµšé’±å‘€...  </code></pre><h1 id="æ¶ˆæ¯æ€»çº¿"><a href="#æ¶ˆæ¯æ€»çº¿" class="headerlink" title="æ¶ˆæ¯æ€»çº¿"></a>æ¶ˆæ¯æ€»çº¿</h1><h2 id="ä»€ä¹ˆæ˜¯æ¶ˆæ¯æ€»çº¿ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¶ˆæ¯æ€»çº¿ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¶ˆæ¯æ€»çº¿ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¶ˆæ¯æ€»çº¿ï¼Ÿ</h2><p>å¯¹è±¡çš„å…³ç³»ä¹‹é—´ä¸€èˆ¬æœ‰ï¼šä¾èµ–ã€å…³è”ã€èšåˆã€ç»„åˆå’Œç»§æ‰¿ï¼Œä»–ä»¬çš„è€¦åˆç¨‹åº¦ä¹Ÿæ˜¯ä¾æ¬¡åŠ å¼ºï¼å¤§è§„æ¨¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯¹è±¡å¾ˆå¤šï¼Œå…³è”å…³ç³»å¾ˆå¤æ‚ï¼Œæ²¡æœ‰ç»Ÿä¸€ã€ç®€ä»‹çš„æ–¹æ³•å»ç®¡ç†å¯¹è±¡çš„å…³ç³»å°†ä¼šå¯¼è‡´å¯¹è±¡å…³ç³»å’Œèœ˜è››ç½‘ä¸€æ ·ï¼Œæˆ–è€…å¾ªç¯ä¾èµ–é—®é¢˜ã€‚<br>åŸºäºæ¶ˆæ¯æ€»çº¿æŠ€æœ¯å¯ä»¥æœ‰æ•ˆè§£å†³è¿™äº›é—®é¢˜ï¼Œå¯¹è±¡é€šè¿‡æ¶ˆæ¯è”ç³»è€Œä¸æ˜¯ç›´æ¥ä¾èµ–æˆ–è€…å…³è”ã€‚</p>
<h2 id="æ¶ˆæ¯æ€»çº¿çš„å…³é”®æŠ€æœ¯"><a href="#æ¶ˆæ¯æ€»çº¿çš„å…³é”®æŠ€æœ¯" class="headerlink" title="æ¶ˆæ¯æ€»çº¿çš„å…³é”®æŠ€æœ¯"></a>æ¶ˆæ¯æ€»çº¿çš„å…³é”®æŠ€æœ¯</h2><ul>
<li>é€šç”¨çš„æ¶ˆæ¯ç±»å‹</li>
<li>æ¶ˆæ¯æ³¨å†Œ</li>
<li>æ¶ˆæ¯åˆ†å‘</li>
</ul>
<h2 id="é€šç”¨çš„æ¶ˆæ¯å®šä¹‰"><a href="#é€šç”¨çš„æ¶ˆæ¯å®šä¹‰" class="headerlink" title="é€šç”¨çš„æ¶ˆæ¯å®šä¹‰"></a>é€šç”¨çš„æ¶ˆæ¯å®šä¹‰</h2><p>æˆ‘ä»¬éœ€è¦ä¸€ç§æ³›å‹çš„å‡½æ•°ç­¾åæ¥å®šä¹‰æˆä¸€ä¸ªé€šç”¨çš„æ¶ˆæ¯æ ¼å¼ã€‚åŒæ—¶éœ€è¦æˆ‘ä»¬å¯ä»¥è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªä¸»é¢˜ç±»å‹ï¼Œè®©è®¢é˜…è¯¥ä¸»é¢˜çš„æ¥å—è€…æ¥æ”¶æ­¤æ¶ˆæ¯ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ï¼šstd::function&lt;Ret(Argsâ€¦)&gt;ä½œä¸ºé€šç”¨çš„å‡½æ•°ç­¾åã€‚</p>
<h2 id="æ¶ˆæ¯çš„æ³¨å†Œ"><a href="#æ¶ˆæ¯çš„æ³¨å†Œ" class="headerlink" title="æ¶ˆæ¯çš„æ³¨å†Œ"></a>æ¶ˆæ¯çš„æ³¨å†Œ</h2><p>æ€»çº¿å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ¶ˆæ¯åˆ—è¡¨ï¼Œå½“éœ€è¦å‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šéå†æ¶ˆæ¯åˆ—è¡¨ï¼Œä»ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åˆé€‚çš„æ¶ˆæ¯å’Œæ¶ˆæ¯æ¥æ”¶è€…ï¼Œæ‰¾åˆ°åˆé€‚çš„æ¥å—è€…ä¹‹åå†æ¬¡å¹¿æ’­ã€‚<br>æ¶ˆæ¯ç”±ï¼šæ¶ˆæ¯ä¸»é¢˜+æ³›å‹å‡½æ•°ç»„æˆã€‚topic + std::function&lt;Ret(Argsâ€¦)&gt;è¿™ä¸ªæ³›å‹å‡½æ•°å¯èƒ½æ˜¯æ‰€æœ‰çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šæ™®é€šå‡½æ•°ã€æˆå‘˜å‡½æ•°ã€å‡½æ•°å¯¹è±¡ã€std::functionå’Œlambdaè¡¨è¾¾å¼ã€‚æ¶ˆæ¯çš„ç»Ÿä¸€æ ¼å¼ä¸ºstd::function&lt;Ret(Argsâ€¦)&gt;æ‰€ä»¥é¦–å…ˆåº”è¯¥è®²å„ç§è°ƒç”¨ç±»å‹è½¬æ¢æˆè¯¥ç±»å‹ï¼Œæ ¼å¼ç»Ÿä¸€åå°±å¯ä»¥å°†æ¶ˆæ¯ä¿å­˜èµ·æ¥ï¼Œä»¥ä¾¿åç»­åˆ†å‘ï¼ˆä¿å­˜æ¶ˆæ¯çš„æ–¹æ³•è§åé¢ç« èŠ‚ï¼‰ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬å®ç°ä¸€ä¸ªå‡½æ•°ç±»å‹èƒå–çš„å¯¹ä¸‹ã€‚</p>
<h2 id="æ™®é€šå‡½æ•°è½¬æ¢ä¸ºstd-function"><a href="#æ™®é€šå‡½æ•°è½¬æ¢ä¸ºstd-function" class="headerlink" title="æ™®é€šå‡½æ•°è½¬æ¢ä¸ºstd::function"></a>æ™®é€šå‡½æ•°è½¬æ¢ä¸ºstd::function</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å‰ç½®å£°æ˜</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">></span>
<span class="token keyword">struct</span> function_traits<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//æ™®é€šå‡½æ•°</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">></span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">enum</span> <span class="token punctuation">{</span>arity <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>Args<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//è·å–å‚æ•°æ•°é‡</span>
    <span class="token keyword">typedef</span> Ret <span class="token function">function_type</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//å®šä¹‰å‡½æ•°ç±»å‹</span>
    <span class="token keyword">typedef</span> Ret return_type<span class="token punctuation">;</span>            
    <span class="token keyword">using</span> stl_function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span>function_type<span class="token operator">></span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//stl functionç±»å‹  lambdaå¯è½¬æ¢æˆstl function</span>
    <span class="token keyword">typedef</span> <span class="token function">Ret</span><span class="token punctuation">(</span><span class="token operator">*</span>pointer<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">template</span><span class="token operator">&lt;</span>size_t I<span class="token operator">></span>
    <span class="token keyword">struct</span> args
    <span class="token punctuation">{</span>
        <span class="token keyword">static_assert</span><span class="token punctuation">(</span>I <span class="token operator">&lt;</span> arity<span class="token punctuation">,</span> <span class="token string">"index is out of range"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//ç±»ä¼¼bind(_Binder) æºç å®ç°,ä¿å­˜å‚æ•°å¹¶ä¸”éšæ—¶å¯ç”¨.</span>
        <span class="token keyword">using</span> type <span class="token operator">=</span> <span class="token keyword">typename</span> std<span class="token operator">::</span>tuple_element<span class="token operator">&lt;</span>I<span class="token punctuation">,</span> std<span class="token operator">::</span>tuple<span class="token operator">&lt;</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">>></span><span class="token operator">::</span>type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å‡½æ•°æŒ‡é’ˆè½¬æ¢ä¸ºstd-function"><a href="#å‡½æ•°æŒ‡é’ˆè½¬æ¢ä¸ºstd-function" class="headerlink" title="å‡½æ•°æŒ‡é’ˆè½¬æ¢ä¸ºstd::function"></a>å‡½æ•°æŒ‡é’ˆè½¬æ¢ä¸ºstd::function</h2><p>å‡½æ•°æŒ‡é’ˆï¼Œé€šå¸¸åœ¨Cè¯­è¨€ä¸­ç»å¸¸ä½¿ç”¨ï¼Œä»–çš„å£°æ˜æ–¹å¼é€šå¸¸å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>PFUNC<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>æ‰€ä»¥ä¸ºäº†æˆ‘ä»¬çš„å‡½æ•°ç±»å‹èƒå–æ”¯æŒå‡½æ•°æŒ‡é’ˆï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è¿”å›å€¼å’Œå…¥å‚æå–å‡ºæ¥ã€‚<br>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//å‡½æ•°æŒ‡é’ˆ</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">></span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span>
    <span class="token operator">:</span> <span class="token keyword">public</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æå–std-functionç±»"><a href="#æå–std-functionç±»" class="headerlink" title="æå–std::functionç±»"></a>æå–std::functionç±»</h2><p>è¿™ä¸ªå°±æ¯”è¾ƒå®¹æ˜“äº†ï¼Œå…¥å‚å’Œè¿”å›å€¼ç›´æ¥æå–å³å¯ã€‚</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//std functional</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">></span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span>std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">>></span>
    <span class="token operator">:</span> <span class="token keyword">public</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd-function"><a href="#æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd-function" class="headerlink" title="æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd::function"></a>æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd::function</h2><p>è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæˆå‘˜å‡½æ•°çš„è°ƒç”¨ä¸€å®šæ˜¯è¦æœ‰å…·ä½“å¯¹è±¡è°ƒç”¨çš„ã€‚é™¤éè¿™ä¸ªå‡½æ•°æ˜¯é™æ€å‡½æ•°ï¼ˆè¿™ä¸ªå’Œæ™®é€šå‡½æ•°ç±»ä¼¼ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡½æ•°ç±»å‹å’Œå…·ä½“çš„è°ƒç”¨å¯¹è±¡ã€‚</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//ç›´æ¥æ ¹æ®å‚æ•°è°ƒç”¨</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> ReturnType<span class="token punctuation">,</span> <span class="token keyword">typename</span> ClassType<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">></span>
<span class="token keyword">void</span>  <span class="token function">help1</span><span class="token punctuation">(</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>ClassType<span class="token operator">::</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ClassType<span class="token operator">&amp;</span> obj<span class="token punctuation">,</span> Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span> func <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>obj<span class="token punctuation">,</span> f<span class="token punctuation">,</span> <span class="token operator">&amp;</span>args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">func</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//è¿”å›å¯è°ƒç”¨å®ä½“  æ­¤æ—¶Argså¯ç”±å…·ä½“è°ƒç”¨æ—¶ä¼ å…¥</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> ReturnType<span class="token punctuation">,</span> <span class="token keyword">typename</span> ClassType<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">></span>
std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span>  <span class="token function">help2</span><span class="token punctuation">(</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>ClassType<span class="token operator">::</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ClassType<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span> func <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>obj<span class="token punctuation">,</span> f<span class="token punctuation">]</span><span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//func(std::forward&lt;Args>(args)...);</span>
    <span class="token keyword">return</span> func<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd-functionçš„æ›´å¤šç»†èŠ‚"><a href="#æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd-functionçš„æ›´å¤šç»†èŠ‚" class="headerlink" title="æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd::functionçš„æ›´å¤šç»†èŠ‚"></a>æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºstd::functionçš„æ›´å¤šç»†èŠ‚</h2><p>åˆšåˆšæˆ‘ä»¬äº‹å…ˆçš„æˆå‘˜å‡½æ•°è™½ç„¶æ”¯æŒä¸åŒå…¥å‚å’Œè¿”å›ç±»å‹ï¼Œä½†æ˜¯å‡½æ•°ç±»å‹ä¾‹å¦‚constç±»å‹çš„å‡½æ•°ï¼Œå¹¶æ²¡æœ‰æ”¯æŒã€‚æ¥ä¸‹é‡Œéœ€è¦å®ç°åŒ…å«ä¸åŒé™å®šç±»å‹çš„å‡½æ•°ã€‚æˆ‘ä»¬å¯ä½¿ç”¨å®å®šä¹‰çš„æ–¹å¼ï¼ˆæ­¤æ–¹æ³•åœ¨æ ‡å‡†åº“ã€STLåº“ä¸­å¤šæ¬¡è¢«ä½¿ç”¨ï¼‰å®ç°ã€‚</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//member functional</span>
<span class="token macro property">#<span class="token directive keyword">define</span> FUNCTION_TRAITS(...) \
template&lt;typename ReturnType, typename ClassType, typename...Args> \
struct function_traits&lt;ReturnType(ClassType::*)(Args...) __VA_ARGS__> : \
function_traits&lt;ReturnType(Args...)>{}; \
</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">volatile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">volatile</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯ä»¥çœ‹åˆ°å°†constç­‰ç±»å‹æ‰©å±•åˆ°å‡½æ•°é™å®šç¬¦ä½ç½®ã€‚</p>
<h2 id="å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd-function"><a href="#å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd-function" class="headerlink" title="å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd::function"></a>å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd::function</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> CallObject
<span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"CallObject"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//å‡½æ•°å¯¹è±¡ æ¨¡æ¿å®ç°æ—¶éœ€è¦å…·ä½“å¯¹è±¡ç±»å‹</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Callable<span class="token operator">></span>
<span class="token keyword">struct</span> function_traits <span class="token operator">:</span> function_traits<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Callable<span class="token operator">::</span><span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testFunctionObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token function">to_function</span><span class="token punctuation">(</span><span class="token function">CallObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//è½¬æ¢ä¸ºstd::function</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="å°†å„ç±»å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd-functionå‡½æ•°å®ç°"><a href="#å°†å„ç±»å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd-functionå‡½æ•°å®ç°" class="headerlink" title="å°†å„ç±»å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd::functionå‡½æ•°å®ç°"></a>å°†å„ç±»å¯è°ƒç”¨å¯¹è±¡è½¬æ¢ä¸ºstd::functionå‡½æ•°å®ç°</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//è½¬æ¢æˆstlçš„function</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">></span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>stl_function_type <span class="token function">to_function</span><span class="token punctuation">(</span><span class="token keyword">const</span> Function<span class="token operator">&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>stl_function_type<span class="token operator">></span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">></span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>stl_function_type <span class="token function">to_function</span><span class="token punctuation">(</span>Function<span class="token operator">&amp;&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>stl_function_type<span class="token operator">></span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//è½¬æ¢æˆä»¿å‡½æ•°æŒ‡é’ˆ</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">></span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>pointer <span class="token function">to_function_pointer</span><span class="token punctuation">(</span><span class="token keyword">const</span> Function<span class="token operator">&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">></span><span class="token operator">::</span>pointer<span class="token operator">></span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>é€šè¿‡ä»¥ä¸Šæ–¹å¼æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªæ¥å—æ³›å‹ç±»å‹çš„æ¶ˆæ¯ï¼Œæ¥ä¸‹é‡Œæˆ‘ä»¬éœ€è¦å°†å„ç±»æ¶ˆæ¯ä¿å­˜èµ·æ¥ï¼Œä»¥ä¾¿åˆ†å‘è°ƒç”¨ã€‚<br>ä¸‹é¢ä»‹ç»æ¶ˆæ¯ä¿å­˜å’Œåˆ†å‘ã€‚</p>
<p>æ¶ˆæ¯ä¿å­˜ï¼šç”±äºæ¶ˆæ¯ç±»å‹æœ‰ä¸åŒçš„è¿”å›å€¼ä»¥åŠå…¥å‚ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨ä¹‹å‰ä»‹ç»çš„Anyä½œä¸ºæ¶ˆæ¯è½½ä½“<br>æ¶ˆæ¯åˆ†å‘ï¼šè¿™ä¸ªå°±æ¯”è¾ƒå®¹æ˜“äº†ï¼Œå–å‡ºåˆé€‚çš„å‡½æ•°å¯¹è±¡ï¼ˆæ¶ˆæ¯ï¼‰ç›´æ¥è°ƒç”¨å³å¯</p>
<h2 id="æ¶ˆæ¯æ€»çº¿è®¾è®¡æ€æƒ³"><a href="#æ¶ˆæ¯æ€»çº¿è®¾è®¡æ€æƒ³" class="headerlink" title="æ¶ˆæ¯æ€»çº¿è®¾è®¡æ€æƒ³"></a>æ¶ˆæ¯æ€»çº¿è®¾è®¡æ€æƒ³</h2><p>æ¶ˆæ¯æ€»çº¿èå’Œäº†è§‚å¯Ÿè€…å’Œä¸­ä»‹è€…æ¨¡å¼ï¼Œé€šè¿‡ç±»å‹æ“¦é™¤æ“¦é™¤å…·ä½“æ¶ˆæ¯ç±»å‹ï¼ˆAnyï¼‰ã€‚è§‚å¯Ÿè€…æ¨¡å¼ç”¨æ¥ç»´æŠ¤ä¸»é¢˜å’Œé€‚å½“çš„æ—¶å€™å‘è§‚å¯Ÿè€…å¹¿æ’­æ¶ˆæ¯ã€‚ä¸­ä»‹è€…æ¨¡å¼ä¸»è¦ç”¨æ¥é™ä½è§‚å¯Ÿè€…æ¨¡å¼äº’ç›¸ä¾èµ–äº§ç”Ÿçš„è€¦åˆæ€§ã€‚<br>æ¶ˆæ¯æ€»çº¿ç»´æŠ¤çš„æ¶ˆæ¯ä½“æ˜¯æ‰€æœ‰ç±»å‹çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œæ²¡æœ‰å¯¹è±¡ä¹‹é—´çš„ç›´æ¥è°ƒç”¨ï¼Œæ›´æ²¡æœ‰æ¥å£ç»§æ‰¿ï¼Œä¸»é¢˜å’Œè§‚å¯Ÿè€…ä»…ä»…æ˜¯é€šè¿‡æŸç§ç±»å‹çš„æ¶ˆæ¯è”ç³»èµ·æ¥ï¼Œè¿™ä¸ªæ¶ˆæ¯å°±æ˜¯ç®€å•çš„è¿”å›å€¼ç±»å‹å’Œå…¥å‚ã€‚</p>
<p>ä¸‹å›¾æ˜¯æ¶ˆæ¯æ€»çº¿æ—¶åºå›¾ï¼Œå¾ˆå¥½çš„è¯´æ˜çš„æ¶ˆæ¯æ€»çº¿å·¥ä½œåŸç†ï¼ˆæ¥è‡ªåŸä¹¦ï¼‰<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://pagepig.oss-cn-hangzhou.aliyuncs.com/20180918221836424.png?x-oss-process=image/resize,m_lfit,h_450" alt="æ¶ˆæ¯æ€»çº¿æ—¶åºå›¾"></p>
<p>å…¶ä¸­ä¸»è¦çš„å‡ ä¸ªç‚¹å°±æ˜¯ï¼š<br>1.è§‚å¯Ÿè€…æ³¨å†Œæ¶ˆæ¯ä½“<br>2.æ¶ˆæ¯æ€»çº¿ä¿å­˜æ¶ˆæ¯ä½“<br>3.ä¸»é¢˜å¯¹è±¡å‘é€æ¶ˆæ¯<br>4.æ¶ˆæ¯æ€»çº¿è°ƒç”¨åˆé€‚ä¸»é¢˜çš„æ¶ˆæ¯ä½“<br>5.è§‚å¯Ÿè€…æ”¶åˆ°æ¶ˆæ¯å¹¶å¤„ç†</p>
<h2 id="å®Œæ•´çš„æ¶ˆæ¯æ€»çº¿"><a href="#å®Œæ•´çš„æ¶ˆæ¯æ€»çº¿" class="headerlink" title="å®Œæ•´çš„æ¶ˆæ¯æ€»çº¿"></a>å®Œæ•´çš„æ¶ˆæ¯æ€»çº¿</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MessageBus</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment" spellcheck="true">//æ³¨å†Œæ¶ˆæ¯</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token operator">></span>
    <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span>F<span class="token operator">&amp;&amp;</span> f<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> func <span class="token operator">=</span> <span class="token function">to_function</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>F<span class="token operator">></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//å‘é€æ¶ˆæ¯ æ²¡æœ‰å‚æ•°</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token operator">></span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> range<span class="token punctuation">.</span>first<span class="token punctuation">;</span> iter <span class="token operator">!=</span> range<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> f <span class="token operator">=</span> iter<span class="token operator">-</span><span class="token operator">></span>second<span class="token punctuation">.</span>cast<span class="token operator">&lt;</span>function_type<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//å‘é€æ¶ˆæ¯ æœ‰å‚æ•°</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> range<span class="token punctuation">.</span>first<span class="token punctuation">;</span> iter <span class="token operator">!=</span> range<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> f <span class="token operator">=</span> iter<span class="token operator">-</span><span class="token operator">></span>second<span class="token punctuation">.</span>cast<span class="token operator">&lt;</span>function_type<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">f</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">></span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//ç§»é™¤æŸä¸ªä¸»é¢˜ éœ€è¦ä¸»é¢˜å’Œæ¶ˆæ¯ç±»å‹</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">></span>
    <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_map<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>first<span class="token punctuation">,</span> range<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token operator">></span>
    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">,</span> F<span class="token operator">&amp;&amp;</span> f<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>F<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_map<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>F<span class="token operator">></span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    std<span class="token operator">::</span>multimap<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Any<span class="token operator">></span> m_map<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">MessageBus g_bus<span class="token punctuation">;</span>
string g_topic <span class="token operator">=</span> <span class="token string">"drive"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸»é¢˜ç±»å‹</span>
<span class="token keyword">struct</span> Subject
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//ä¸»é¢˜å¯¹è±¡å‘é€æŸç§æ¶ˆæ¯,</span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Car
<span class="token punctuation">{</span>
    <span class="token function">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//è§‚å¯Ÿè€…å¯¹è±¡æ¥æ”¶åˆ°æŸç§æ¶ˆæ¯çš„å“åº”ä½“(lambdaå°è£…)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"car drive:"</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Bus
<span class="token punctuation">{</span>
    <span class="token function">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//è§‚å¯Ÿè€…å¯¹è±¡æ¥æ”¶åˆ°æŸç§æ¶ˆæ¯çš„å“åº”ä½“(lambdaå°è£…)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"bus drive:"</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Subject subject<span class="token punctuation">;</span>
    Car car<span class="token punctuation">;</span>
    Bus bus<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ä¸å‡ºæ‰€æ–™ï¼Œè§‚å¯Ÿè€…Carå’ŒBusæ¥æ”¶åˆ°ä¸»é¢˜â€driveâ€æ¶ˆæ¯ï¼Œç”±æ¶ˆæ¯ä½“è§¦å‘driveå‡½æ•°è°ƒç”¨ã€‚</p>
<p>å¤æ‚çš„å¯¹è±¡å…³ç³»æ¢³ç†<br>æˆ‘ä»¬ä¸Šé¢å®ç°çš„ä»…ä»…æ˜¯ç®€å•çš„å‘é€ä¸»é¢˜ï¼Œç„¶åå“åº”ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›ï¼Œè§‚å¯Ÿè€…å—åˆ°æ¶ˆæ¯åï¼Œå¯ä»¥è¿›è¡Œâ€œå›å¤â€ï¼Œè¿™æ—¶å€™æ¶ˆæ¯æ€»çº¿çš„ä¼˜åŠ¿å°±æ›´ä¸€æ­¥ä½“ç°äº†ï¼Œæˆ‘ä»¬åªéœ€é‡æ–°æ³¨å†Œä¸€ç§ä¸»é¢˜å³å¯ã€‚</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">MessageBus g_bus<span class="token punctuation">;</span>
string g_topic <span class="token operator">=</span> <span class="token string">"drive"</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//ä¸»é¢˜ç±»å‹</span>
string g_callbacktopic <span class="token operator">=</span> <span class="token string">"driveok"</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> Subject
<span class="token punctuation">{</span>
    <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function">driveok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_callbacktopic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">driveok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"driveok"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Car
<span class="token punctuation">{</span>
    <span class="token function">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"car drive:"</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//é¢å¤–å¢åŠ å¤„ç†å‡½æ•°</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span>g_callbacktopic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Bus
<span class="token punctuation">{</span>
    <span class="token function">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//æ³¨å†Œåˆ°æ¶ˆæ¯æ€»çº¿</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"bus drive:"</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Subject subject<span class="token punctuation">;</span>
    Car car<span class="token punctuation">;</span>
    Bus bus<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"---------------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒCaræ³¨å†Œäº†å›å¤ä¸»é¢˜ï¼Œåœ¨æ‰§è¡Œå®Œæˆåï¼Œé€šçŸ¥æ¶ˆæ¯æ€»çº¿å³å¯å®ç°â€œå›å¤â€åŠŸèƒ½ã€‚</p>
<p>æ€è€ƒ:<br>å…¶å®æˆ‘ä»¬å¯å°†æ¶ˆæ¯æ€»çº¿å’ŒçŠ¶æ€æœºç»“åˆä¸€ä¸‹ï¼Œå½“å¤„äºæŸç§çŠ¶æ€æ‰§è¡ŒæŸäº›æ“ä½œï¼Œç„¶åæ­¤æ“ä½œå®Œæˆåå¯ä»¥é€‰æ‹©ç»§ç»­æ‰§è¡ŒæŸäº›æ“ä½œï¼Œè¿™äº›æ“ä½œå¯ä»¥æ˜¯ä¸åŒçš„ä¸»é¢˜ç±»å‹ã€‚<br>æ¶ˆæ¯æ€»çº¿å°†å¤æ‚å¯¹è±¡å…³ç³»ç®€åŒ–äº†ï¼Œé™ä½äº†å¯¹è±¡å…³ç³»çš„å¤æ‚åº¦å’Œè€¦åˆåº¦ï¼Œä½†æ˜¯ä¹Ÿè¦æ³¨æ„æ¶ˆæ¯æ€»çº¿çš„ä½¿ç”¨åœºæ™¯ï¼Œå¯¹è±¡å…³ç³»å¾ˆç®€å•çš„æ—¶å€™ä½¿ç”¨ï¼Œåè€Œå°†ç³»ç»Ÿå˜çš„å¾ˆå¤æ‚ï¼Œåœ¨å¯¹è±¡å…³ç³»å¤šä¸”å¤æ‚çš„åœºæ™¯ï¼Œæ¶ˆæ¯æ€»çº¿æ‰èƒ½æ›´å¥½çš„å‘æŒ¥ä½œç”¨ã€‚</p>
<p>ä¸ªäººæ€»ç»“:<br>æ¶ˆæ¯æ€»çº¿çš„æ€æƒ³æ˜¯æ€»çº¿æ¥ç®¡æ‰€æœ‰æ¶ˆæ¯å¤„ç†é€»è¾‘,å› æ­¤æ€»çº¿éœ€è¦å°†æ‰€æœ‰å‡½æ•°æ ¼å¼åŒ–ä¸ºç»Ÿä¸€æ¥å£,æ ¼å¼åŒ–æ—¶éœ€è¦ä¼ å…¥è¢«è°ƒç”¨å‡½æ•°çš„åœ°å€,è¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°ç±»å‹,è¢«è°ƒç”¨å‡½æ•°çš„å‚æ•°(æ•°æ®).</p>
<p>æ³¨æ„ï¼š<br>æ¶ˆæ¯æ€»çº¿æ¡ˆä¾‹ä¸å®Œç¾,éœ€è¦å¢åŠ å¤šä¸ªå‘å¸ƒè€…,åŒæ—¶è§£è€¦æ€»çº¿å’Œå‘å¸ƒè€…ï¼Œè€Œä¸æ˜¯ææˆä¸€ä¸ªã€‚</p>
<h1 id="å›è°ƒæ¨¡å¼"><a href="#å›è°ƒæ¨¡å¼" class="headerlink" title="å›è°ƒæ¨¡å¼"></a>å›è°ƒæ¨¡å¼</h1><p>å›è°ƒå‡½æ•°çš„ç®€å•ä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcretSubject</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> Callback callback<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>Callback callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> callback<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       callback<span class="token punctuation">.</span><span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Callback</span> <span class="token punctuation">{</span>
   <span class="token keyword">void</span> <span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       ConcretSubject subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcretSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       Callback callback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"call"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span><span class="token punctuation">;</span>
       subject<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
       subject<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>é€šè¿‡å¯¹æ¯”ï¼Œæˆ‘ä»¬å‘ç°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å’Œå›è°ƒå‡½æ•°æ¨¡å¼åŠå…¶ç›¸ä¼¼ï¼Œå·®åˆ«ä»…åœ¨äºåœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè¢«è§‚å¯Ÿè€…ç»´æŠ¤è¿™ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨ï¼Œè€Œåœ¨å›è°ƒæ¨¡å¼ä¸­ï¼Œâ€œè¢«è§‚å¯Ÿè€…â€åªæ˜¯ä¿å­˜äº†ä¸€ä¸ªâ€œè§‚å¯Ÿè€…â€ã€‚è¿™å°±æ˜¯å½¢å¼ä¸Šçš„ç»ˆæåŒºåˆ«ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ˜¯ä¸€ç§ä¸€å¯¹ä¸€çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<br><a href="https://www.cnblogs.com/cbf4life/" target="_blank" rel="noopener">https://www.cnblogs.com/cbf4life/</a><br><a href="https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html" target="_blank" rel="noopener">https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html</a><br><a href="https://www.cnblogs.com/cbf4life/" target="_blank" rel="noopener">https://www.cnblogs.com/cbf4life/</a><br><a href="https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html" target="_blank" rel="noopener">https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html</a><br><a href="https://blog.csdn.net/xufeng0991/article/details/50267675" target="_blank" rel="noopener">https://blog.csdn.net/xufeng0991/article/details/50267675</a></p>
</iostream><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>
                 
                 <hr/>
                 

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://purethought.cn" rel="external nofollow noreferrer">é™ˆå¾·å¼º</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://purethought.cn/54575.html">https://purethought.cn/54575.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fa fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="https://purethought.cn" target="_blank">é™ˆå¾·å¼º</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


            </div>         
        </div>
    </div>
    
    <!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
    <script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>    
    <!-- ä»£ç è¯­è¨€ -->   
    <!-- <script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script> -->          
    <!-- ä»£ç å—å¤åˆ¶ -->   
    <script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
    <script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>      
    <!-- ä»£ç å—æ”¶ç¼© -->   
    <script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge ">                  
                <a href="/ad4f1e09.html" target="_blank">                 
                    <font color="#0e263f">
                        <i class="fa  fa-hand-o-left"></i>
                        C++å­¦ä¹ ç¬”è®°
                    </font>                    
                </a>          
            </div>
        </div>
        


        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge " >
                <a href="/35127.html" target="_blank">
                    <font color="#0e263f">
                        TCP-IPæ€»çº¿ä¸CANæ€»çº¿ä¼˜ç¼ºç‚¹å¯¹æ¯”
                        <i class="fa  fa-hand-o-right"></i>
                    </font>
                 </a>  
            </div>
        </div>
        
    </div>
</article>

    
        <style>
    #reward {
        /*margin: 40px 0;*/
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.6rem;
      
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
   <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red" >Â¥</a> 
  

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-times"></i></a>
            <h4 class="reward-title">æ‚¨çš„èµèµå°±æ˜¯æˆ‘çš„åŠ¨åŠ›^</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

    

    
        <div class="livere-card card" data-aos="fade-up">
    <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
    <div id="lv-container" class="card-content" data-id="city" data-uid="MTAyMC80Njk3Mi8yMzQ3Mw==">
        <script type="text/javascript">
            (function (d, s) {
                let j, e = d.getElementsByTagName(s)[0];
                if (typeof LivereTower === 'function') {
                    return;
                }

                j = d.createElement(s);
                j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
                j.async = true;

                e.parentNode.insertBefore(j, e);
            })(document, 'script');
        </script>
        <noscript>ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScriptã€‚</noscript>
    </div>
    <!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
</div>
    
    
   <!-- 
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '6190f09c0ffe658707b5',
        clientSecret: '2798e16eeba573f49ce06d2da0595188699aac41',
        repo: 'cdqpt.github.io',
        owner: 'CdqPT',
        admin: "CdqPT",
        id: '2019-12-21T18-17-00',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
     -->

    

    

    

   <!-- <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>å¾®ä¿¡é‡Œç‚¹â€œå‘ç°â€->â€œæ‰«ä¸€æ‰«â€äºŒç»´ç ä¾¿å¯æŸ¥çœ‹åˆ†äº«ã€‚</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script> -->

</div>




    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
    
        <div class="toc-widget">
        
            <div class="toc-title" ><i class="fa fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="hidden">
                <div id="toc-content"></div>
            </div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. --><!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large ">    
        <i class="fa fa-th-large"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2'
        });
        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            i++;
            $(this).attr('href', '#' + tocHeading + (i));
            $(this).attr('navTo',  tocHeading + (i));    
        });
        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });
        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });
        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }
            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };
        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(0);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(100);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    
</main>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
       <div class="col s12 m8 l8 copy-right">
             
               &copy;2018-2020 ALaDing
               &nbsp;
             Author:  <a href="https://purethought.cn/">é™ˆå¾·å¼º &nbsp  Email: 928277452@qq.com</a>

            
            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    æ¬¡,&nbsp;è®¿å®¢æ•° <span id="busuanzi_value_site_uv" class="white-color"></span> äºº.
                </span>
                       
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?147475454185ebcf440a27cc35e793ef";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>










                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/CdqPT" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:928277452@qq.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=928277452" class="tooltipped" data-tooltip="QQè”ç³»æˆ‘: 928277452" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    
    <!-- Global site tag (gtag.js) - Google Analytics -->


 
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

   

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
<script>!function(e){var c=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){for(var r=0;r<c.length;r++)t=c[r],0<=(n=t.getBoundingClientRect()).bottom&&0<=n.left&&n.top<=(e.innerHeight||document.documentElement.clientHeight)&&function(){var t,n,e,i,o=c[r];t=o,n=function(){c=c.filter(function(t){return o!==t})},e=new Image,i=t.getAttribute("data-original"),e.onload=function(){t.src=i,n&&n()},e.src=i}();var t,n}i(),e.addEventListener("scroll",function(){var t,n;t=i,n=e,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(n)},500)})}(this);</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script></body>

</html>
