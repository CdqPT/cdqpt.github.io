<!DOCTYPE html>
<html ⚡>
  <head>
    <meta charset="utf-8">
    <link rel="canonical" href="https://purethought.cn/54575.html" >
    <title>设计模式 - ALaDing</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
    <meta property="og:title" content="设计模式">
	<meta property="og:type" content="article">
	<meta property="og:url" content="https://purethought.cn/54575.html">
	
		<meta property="og:image" content="/amp-dist/sample/sample-substituteTitleImage.png">
	
	<meta property="og:site_name" content="ALaDing">
	
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:site" content="ALaDing">
	<meta name="twitter:url" content="https://purethought.cn/54575.html">
	<meta name="twitter:title" content="设计模式 - ALaDing">
	
    
    	<meta name="twitter:image" content="/amp-dist/sample/sample-substituteTitleImage.png">
	
	
	
    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style>
    <noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script>
    <!--
  	<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>
    -->
    
    
    
    
    
    
    
    
    
    
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "BlogPosting",
			"headline": "设计模式",
			
			"mainEntityOfPage":{
			    "@type":"WebPage",
			    "@id":"https://purethought.cn/54575.html"
			},
			"datePublished": "2019-12-21T10:17:00.000Z",
			"dateModified": "2020-03-02T10:40:41.054Z",
			
			"image": {
				"@type": "ImageObject",
				"url": "/amp-dist/sample/sample-substituteTitleImage.png",
				"width" : "1024",
				"height" : "800"
			},
			
			"author": {
			    "@type": "Person",
			    "name": "陈德强"
			},
			"publisher": {
			    "@type": "Organization",
			    "name": "ALaDing"
			    
			    ,
			    "logo": {
			      "@type": "ImageObject",
			      "url": "https://purethought.cn/amp-dist/sample/sample-logo.png",
			      "width": 600,
			      "height": 60
			    }
			    
			}
		}
	</script>
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	
	<style amp-custom>
		
abbr,
acronym,
address,
applet,
big,
blockquote,
body,
caption,
cite,
code,
dd,
del,
dfn,
div,
dl,
dt,
em,
fieldset,
form,
h1,
h2,
h3,
h4,
h5,
h6,
html,
iframe,
img,
ins,
kbd,
label,
legend,
li,
object,
ol,
p,
pre,
q,
s,
samp,
small,
span,
strike,
strong,
sub,
sup,
table,
tbody,
td,
tfoot,
th,
thead,
tr,
tt,
ul,
var {
  border: 0;
  font-family: inherit;
  font-size: 1rem;
  font-style: inherit;
  font-weight: inherit;
  margin: 0;
  outline: 0;
  padding: 0;
  vertical-align: baseline;
}
abbr {
  cursor: help;
  border-bottom: 1px dotted;
  font-variant: normal;
}
acronym {
  border-bottom: 1px dotted;
  font-variant: normal;
}
body {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;
  -webkit-text-size-adjust: 100%;
  background: #fff;
  color: #2d3d40;
  font-family: sans-serif;
  font-size: 1rem;
  font-weight: 500;
  line-height: 2rem;
  text-rendering: optimizelegibility;
}
button::-moz-focus-inner,
input::-moz-focus-inner,
figure.highlight td,
.post .entry-content figure.highlight th {
  border: 0;
  padding: 0;
}
caption,
table,
td,
th {
  vertical-align: middle;
}
caption,
td,
th,
.table-align-left {
  text-align: left;
}
del {
  text-decoration: line-through;
}
html {
  font-size: 14px;
}
:root sub,
:root sup {
  vertical-align: baseline;
}
table {
  border-collapse: separate;
  border-spacing: 0;
}
a {
  color: #e91e63;
  text-decoration: none;
  -webkit-transition: 0.7s;
  -ms-transition: 0.7s;
  -moz-transition: 0.7s;
  -o-transition: 0.7s;
  -webkit-transition: 0.7s;
  -moz-transition: 0.7s;
  -o-transition: 0.7s;
  -ms-transition: 0.7s;
  transition: 0.7s;
  border: 0;
  font-family: inherit;
  font-size: 1rem;
  font-style: inherit;
  font-weight: inherit;
  margin: 0;
  outline: 0;
  padding: 0;
  vertical-align: baseline;
}
a img {
  border: none;
}
a:hover {
  -webkit-transition: 0.2s;
  -ms-transition: 0.2s;
  -moz-transition: 0.2s;
  -o-transition: 0.2s;
  -webkit-transition: 0.2s;
  -moz-transition: 0.2s;
  -o-transition: 0.2s;
  -ms-transition: 0.2s;
  transition: 0.2s;
  color: #930e3b;
}
@media (min-width: 481px) {
  html {
    font-size: 16px;
  }
}
@media (min-width: 0px) and (max-width: 480px) {
  html {
    font-size: 14px;
  }
}
.clearfix:after {
  clear: both;
  visibility: hidden;
  content: ".";
  display: block;
  height: 0;
}
.left {
  float: left;
}
.right {
  float: right;
}
.circle {
  -webkit-border-radius: 50%;
  border-radius: 50%;
}
.thumbImg-w {
  width: 100px;
  height: 100px;
  display: inline-block;
  position: relative;
  overflow: hidden;
}
.thumbImg {
  top: 50%;
  left: 50%;
  position: absolute;
  -webkit-transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  -moz-transform: translate(-50%, -50%);
  -o-transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.__web-inspector-hide-shortcut__ {
  visibility: hidden ;
}
button {
  -webkit-box-align: start;
  -moz-box-align: start;
  -o-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
  text-align: center;
  cursor: default;
  color: buttontext;
  background-color: buttonface;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 2px 6px 3px;
  border-width: 2px;
  border-style: outset;
  border-color: buttonface;
  -webkit-border-image: initial;
  -moz-border-image: initial;
  -o-border-image: initial;
  border-image: initial;
  text-rendering: auto;
  color: initial;
  letter-spacing: normal;
  word-spacing: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  margin: 0em 0em 0em 0em;
  font: 11px system-ui;
  -webkit-writing-mode: horizontal-tb;
  -webkit-appearance: button;
}
.hamburger {
  display: inline-block;
  background-color: transparent;
  background-image: url("data:image/svg+xmlutf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-3 -6 24 24\"><path fill=\"#4A4A4A\" d=\"M0 12h18v-2H0v2M0 7h18V5H0v2M0 0v2h18V0H0\"/></svg>");
  background-repeat: no-repeat;
  -webkit-background-size: 30px 24px;
  -moz-background-size: 30px 24px;
  background-size: 30px 24px;
  background-position: center center;
  border: none;
  margin: 0;
  padding: 0;
  width: 60px;
  height: 60px;
  cursor: pointer;
  -ms-flex-item-align: center;
  -ms-grid-row-align: center;
  -webkit-align-self: center;
  align-self: center;
  -ms-flex-item-align: center;
}
.nav ul:after {
  clear: both;
  visibility: hidden;
}
.nav,
.nav-icon {
  position: relative;
}
.nav ul {
  display: block;
}
.nav ul li {
  display: block;
}
.nav ul li a {
  display: block;
}
.tab {
  position: relative;
  color: #424242;
  padding: 6px;
  margin: 0 4px;
  text-decoration: none;
  text-transform: uppercase;
  font-weight: 400;
  -webkit-transition: 0.1s ease color;
  -webkit-transition: 0.1s ease color;
  -moz-transition: 0.1s ease color;
  -o-transition: 0.1s ease color;
  -ms-transition: 0.1s ease color;
  transition: 0.1s ease color;
}
amp-sidebar {
  width: 200px;
}
amp-sidebar ul {
  padding: 10px 0;
}
amp-sidebar li a {
  display: block;
  padding: 10px 20px;
}
header {
  height: 60px;
  background-color: #222f31;
  -webkit-box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
  box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
  -webkit-box-shadow: 0 -1px 0 #3c5155 inset, 0 -3px 0 #1e292b inset;
}
header .header-title a {
  padding: 0 0 0 20px;
  height: 60px;
  line-height: 60px;
  font-size: 20px;
  color: #fff;
  letter-spacing: 0.2em;
}
header .nav-container {
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-box-pack: justify;
  -moz-box-pack: justify;
  -o-box-pack: justify;
  -ms-flex-pack: justify;
  -webkit-justify-content: space-between;
  justify-content: space-between;
}
header .left-nav {
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: center;
  -ms-flex-align: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  -webkit-box-pack: start;
  -moz-box-pack: start;
  -o-box-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
  font-size: 20px;
  margin-left: 0;
  font-weight: 300;
  -webkit-box-pack: start;
  -ms-flex-pack: start;
  -webkit-box-pack: start;
  -moz-box-pack: start;
  -o-box-pack: start;
  -ms-flex-pack: start;
  -webkit-justify-content: flex-start;
  justify-content: flex-start;
  -webkit-box-flex: 1;
  -ms-flex: 1 1 auto;
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  -o-box-flex: 1;
  box-flex: 1;
  -webkit-flex: 1 1 auto;
  -ms-flex: 1 1 auto;
  flex: 1 1 auto;
  text-align: left;
  width: auto;
  font-size: 15px;
}
header .right {
  font-size: 15px;
}
header .alt {
  padding: 0;
  text-align: right;
  display: -webkit-box;
  display: -ms-flexbox;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-box-align: stretch;
  -moz-box-align: stretch;
  -o-box-align: stretch;
  -ms-flex-align: stretch;
  -webkit-align-items: stretch;
  align-items: stretch;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}
.blog-title a {
  position: relative;
}
button {
  -webkit-box-align: start;
  -moz-box-align: start;
  -o-box-align: start;
  -ms-flex-align: start;
  -webkit-align-items: flex-start;
  align-items: flex-start;
  text-align: center;
  cursor: default;
  color: buttontext;
  background-color: buttonface;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  padding: 2px 6px 3px;
  border-width: 2px;
  border-style: outset;
  border-color: buttonface;
  -webkit-border-image: initial;
  -moz-border-image: initial;
  -o-border-image: initial;
  border-image: initial;
  text-rendering: auto;
  color: initial;
  letter-spacing: normal;
  word-spacing: normal;
  text-transform: none;
  text-indent: 0px;
  text-shadow: none;
  display: inline-block;
  text-align: start;
  margin: 0em 0em 0em 0em;
  font: 11px system-ui;
  -webkit-writing-mode: horizontal-tb;
  -webkit-appearance: button;
}
.__web-inspector-hide-shortcut__ {
  visibility: hidden ;
}
.hamburger {
  display: inline-block;
  background-color: transparent;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-3 -6 24 24\"><path fill=\"#FFF\" d=\"M0 12h18v-2H0v2M0 7h18V5H0v2M0 0v2h18V0H0\"/></svg>");
  background-repeat: no-repeat;
  -webkit-background-size: 30px 24px;
  -moz-background-size: 30px 24px;
  background-size: 30px 24px;
  background-position: center center;
  border: none;
  margin: 0;
  padding: 0;
  width: 60px;
  height: 60px;
  cursor: pointer;
  -ms-flex-item-align: center;
  -ms-grid-row-align: center;
  -webkit-align-self: center;
  align-self: center;
  -ms-flex-item-align: center;
}
.tab {
  position: relative;
  color: #2d3d40;
  padding: 6px;
  margin: 0 4px;
  text-decoration: none;
  text-transform: uppercase;
  font-weight: 400;
  -webkit-transition: 0.1s ease color;
  -webkit-transition: 0.1s ease color;
  -moz-transition: 0.1s ease color;
  -o-transition: 0.1s ease color;
  -ms-transition: 0.1s ease color;
  transition: 0.1s ease color;
}
amp-sidebar {
  width: 250px;
  background-color: #182022;
}
amp-sidebar ul {
  padding: 10px 0;
}
amp-sidebar li {
  border-top: 1px solid #2f4043;
}
amp-sidebar li:last-child {
  border-bottom: 1px solid #2f4043;
}
amp-sidebar li a {
  color: #fff;
  font-weight: bold;
  display: block;
  padding: 10px 20px;
}
amp-sidebar li a:hover {
  color: #ccc;
  background-color: #030404;
}
.categories-header {
  background-color: #2d3d40;
  padding: 0rem 0.8rem;
}
.categories-header a {
  color: #fff;
}
.categories-header a:hover {
  color: #fff;
}
.categories-header .breadcrumb ol li {
  list-style: none;
  display: inline-block;
  margin: 0;
}
.categories-header .breadcrumb ol li span {
  font-size: 0.8rem;
  font-weight: bold;
}
.categories-header .breadcrumb ol li:after {
  content: "/";
  color: #fff;
  display: inline-block;
  margin: 0 0.4rem;
}
.categories-header .breadcrumb ol li:last-child:after {
  content: "";
  margin: 0;
}
.entry-header {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.entry-header .flx:first-child {
  margin: 0 1rem 0 0;
}
.header-cap {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.title-cover {
  background-color: #fff;
  color: #2d3d40;
  padding: 1.5rem 0.8rem 0 0.8rem;
}
.title-cover a {
  font-size: 1.2rem;
  color: #2d3d40;
  text-align: left;
  font-weight: bold;
}
.entry-title {
  margin: 0;
}
.entry-meta-header {
  font-size: 0.85rem;
  text-align: center;
}
.entry-meta-header .date {
  font-family: sans-serif;
}
h1 a,
h2 a,
h3 a,
h4 a,
h5 a,
h6 a {
  color: #2d3d40;
  text-decoration: none;
}
h1 a:hover,
h2 a:hover,
h3 a:hover,
h4 a:hover,
h5 a:hover,
h6 a:hover {
  color: #e91e63;
}
#container {
  margin-left: auto;
  margin-right: auto;
}
#main {
  margin-bottom: 3em;
  padding-left: 0;
}
.post {
  margin-bottom: 3rem;
  position: relative;
}
.entry-content {
  margin: 0 0.6rem;
  font-size: 1rem;
}
.entry-content h1 {
  font-size: 1.7rem;
  line-height: 1.5;
  margin: 1em 0 0.8em;
}
.entry-content h2,
.entry-content h3,
.entry-content h4,
.entry-content h5,
.entry-content h6,
.entry-content h2 span,
.entry-content h3 span,
.entry-content h4 span,
.entry-content h5 span,
.entry-content h6 span {
  color: #98b8be;
  font-weight: bold;
}
.entry-content h2,
.entry-content h2 span {
  font-size: 1.8rem;
  line-height: 2.6rem;
  text-align: center;
}
.entry-content h2 {
  border-bottom: 2px solid #cce4e8;
  margin: 4.5rem 0 0.5em;
  padding: 0.8em 0;
}
.entry-content h3,
.entry-content h3 span {
  font-size: 1.6rem;
  line-height: 2.2rem;
  text-align: center;
}
.entry-content h3 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h4,
.entry-content h4 span {
  font-size: 1.4rem;
  line-height: 2rem;
  text-align: center;
}
.entry-content h4 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h5,
.entry-content h5 span {
  font-size: 1.2rem;
  line-height: 1.8rem;
  text-align: center;
}
.entry-content h5 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content h6,
.entry-content h6 span {
  font-size: 1.1rem;
  line-height: 1.6rem;
  text-align: center;
}
.entry-content h6 {
  margin: 3.6rem 0.8rem 3rem 0.8rem;
  padding: 0;
}
.entry-content p {
  font-size: 1rem;
  letter-spacing: 0.05rem;
  line-height: 2.2rem;
  margin: 3rem 0.8rem;
}
.entry-content p a {
  word-wrap: break-word;
  overflow-wrap: break-word;
  display: inline;
  border-bottom: 1px dashed #f1729d;
  padding-bottom: 0.3rem;
}
.entry-content p a:hover {
  border-bottom: 1px dashed #9c0f3f;
  padding-bottom: 0.4rem;
}
.entry-content em {
  background-color: #f9f5d1;
  color: #886d00;
  font-style: normal;
  margin: 0 2px;
  padding: 0.4em;
}
.entry-content strong {
  color: #871c1c;
  font-style: normal;
  margin: 0 2px;
  padding: 0.4em;
  background-color: #fadcdc;
}
.entry-content hr {
  border: 0;
  border-top: 3px solid #cce4e8;
  margin: 3rem auto;
  width: 20%;
}
.entry-content img,
.entry-content video {
  display: block;
  height: auto;
  margin: auto;
  max-width: 100%;
}
.entry-content iframe {
  width: 100% ;
}
.entry-content blockquote {
  margin: 3rem 0.8rem;
  padding: 1rem 1.8rem;
  position: relative;
  background-color: none;
  border-left: 3px solid #98b8be;
  font-style: italic;
}
.entry-content blockquote p {
  margin: 0.5rem 0;
}
.entry-content blockquote blockquote {
  border-left: none;
}
.entry-content .table-wrapper {
  margin: 3rem 0.8rem;
}
.entry-content table {
  border-collapse: collapse;
  border-spacing: 0;
  overflow: auto;
  display: block;
  font-size: 0.85rem;
  margin: 0 auto;
  width: auto;
}
.entry-content td,
.entry-content th {
  line-height: 1.8em;
  padding: 0.8rem 0.8rem;
  font-size: 0.85rem;
}
.entry-content td em,
.entry-content th em,
.entry-content td strong,
.entry-content th strong,
.entry-content td a,
.entry-content th a {
  font-size: 0.85rem;
}
.entry-content td {
  border: 1px solid #c4c4c4;
}
.entry-content th {
  background-color: #ecf5f7;
  border: 1px solid #c4c4c4;
}
.entry-content .table-align-center {
  text-align: center;
}
.entry-content .table-align-right {
  text-align: right;
}
.entry-content ul,
.entry-content ol,
.entry-content dl {
  margin: 3rem 0 3rem 1.6rem;
  padding: 0;
  list-style: none;
  font-size: 1rem;
}
.entry-content ul li,
.entry-content ol li,
.entry-content dl li {
  line-height: 2rem;
  position: relative;
  padding: 0;
}
.entry-content ul li p,
.entry-content ol li p,
.entry-content dl li p {
  line-height: 2rem;
  margin: 0;
}
.entry-content ul li p:not(:first-child),
.entry-content ol li p:not(:first-child),
.entry-content dl li p:not(:first-child) {
  color: #57767c;
  margin: 0.5rem;
}
.entry-content ul li ul,
.entry-content ol li ul,
.entry-content dl li ul,
.entry-content ul li ol,
.entry-content ol li ol,
.entry-content dl li ol,
.entry-content ul li dl,
.entry-content ol li dl,
.entry-content dl li dl {
  margin: 1rem;
}
.entry-content ul li {
  margin: 0.4rem 0 0.4rem 0.8rem;
}
.entry-content ul li::after {
  position: absolute;
  display: block;
  content: '';
  top: 0.75rem;
  left: -1rem;
  width: 0.5rem;
  height: 0.5rem;
  background-color: #cce4e8;
  border-radius: 100%;
}
.entry-content ol {
  counter-reset: number;
}
.entry-content ol li {
  margin: 0.4rem 0 0.4rem 2rem;
}
.entry-content ol li p:first-child {
  display: inline-block;
  line-height: 1.6rem;
  height: 1.6rem;
}
.entry-content ol li:before {
  position: absolute;
  display: inline-block;
  float: left;
  margin: 0 0.2rem 0 0;
  padding: 0;
  counter-increment: number;
  content: counter(number);
  left: -2.2rem;
  top: 0.2rem;
  background-color: #98b8be;
  width: 1.6rem;
  height: 1.6rem;
  border-radius: 50%;
  color: #fff;
  text-align: center;
  font-weight: bold;
  font-size: 0.8rem;
  line-height: 1.6rem;
}
kbd {
  font-family: sans-serif;
  text-align: center;
  display: inline-block;
  color: #425a5e;
  -moz-osx-font-smoothing: grayscale;
  -webkit-border-radius: 3px;
  -webkit-box-shadow: 0 0 10px #e8e8e8 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  box-shadow: 0 0 10px #e8e8e8 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  -webkit-box-shadow: 0 0 10px #e2e2e2 inset, 0 1px 0 #c3c3c3, 0 2px 0 #c9c9c9, 0 3px 3px #333;
  -webkit-font-smoothing: subpixel-antialiased;
  background: #fff;
  border-left: 1px solid #fff;
  border-radius: 3px;
  border-right: 1px solid #e6e6e6;
  border-top: 1px solid #fff;
  font-size: 0.85rem;
  line-height: 1rem;
  margin: 5px;
  padding: 6px 8px 3px;
  text-shadow: 0 1px 0 #fff;
  vertical-align: baseline;
  
}
img.responsive-img {
  height: auto;
  max-width: 100%;
}
video.responsive-video {
  height: auto;
  max-width: 100%;
}
amp-instagram,
amp-vimeo,
amp-video,
amp-youtube,
amp-twitter,
.soundcloud-wrapper,
.amp-img-wrapper,
.googleAdPost,
.ad-footer {
  margin: 3rem 0.8rem;
}
code,
figure.highlight .code,
pre {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: subpixel-antialiased;
}
code,
pre,
samp {
  font-family: Menlo, Consolas, Monaco, Consolas, monospace;
}
p code {
  font-size: 1rem;
}
code,
pre {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
  background-color: #ecf5f7;
  color: #007e96;
}
code {
  margin: 0 3px;
  padding: 0.4em;
}
samp {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
}
sub,
sup {
  font-size: 0.75rem;
  line-height: 0;
  position: relative;
}
sub {
  bottom: -0.2em;
}
sup {
  top: -0.5em;
}
pre {
  font-size: 1rem;
  letter-spacing: 0.05rem;
  margin: 0 3px;
  padding: 15px;
  -webkit-background-clip: padding;
  -moz-background-clip: padding;
  background-clip: padding-box;
  border: 0;
  line-height: 1.3rem;
  overflow-x: auto;
}
pre .addition,
pre .css .tag,
pre .keyword,
pre .method,
pre .nginx .title,
pre .request,
pre .status,
pre .winutils {
  color: #66d9ef;
}
pre .attr_selector,
pre .cdata,
pre .clojure .title,
pre .diff .change,
pre .important {
  color: #9882eb;
}
pre .preprocessor {
  color: #9882eb;
}
pre .preprocessor .keyword {
  color: #9882eb;
}
pre .shebang,
pre .special,
pre .subst {
  color: #9882eb;
}
pre .symbol {
  color: #9882eb;
}
pre .symbol .string {
  color: #9882eb;
}
pre .attribute,
pre .class .title,
pre .constant,
pre .haskell .type,
pre .lisp .body,
pre .parent,
pre .smalltalk .number,
pre .variable {
  color: #a6e22e;
}
pre .built_in,
pre .chunk,
pre .decorator,
pre .id,
pre .identifier,
pre .literal,
pre .localvars,
pre .title,
pre .vhdl,
pre .deletion {
  color: #f92672;
}
pre .command,
pre .hexcolor,
pre .number,
pre .phpdoc,
pre .regexp,
pre .string,
pre .tag .value,
pre .tex .formula {
  color: #e6db74;
}
pre .comment,
pre .diff .header,
pre .doctype,
pre .javadoc,
pre .lisp .string,
pre .pi,
pre .template_comment {
  color: #75715e;
  font-weight: normal;
}
.line {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
  line-height: 2rem;
  color: #f8f8f2;
}
.line span {
  font-size: 0.85rem;
  letter-spacing: 0.05rem;
}
.gist {
  background: #fff;
  border: 1px solid color-gutter;
  color: #f8f8f2;
  line-height: 1.6rem;
  margin-top: 15px;
  overflow: auto;
  padding: 7px 15px;
}
.gist .gist-file {
  border: none;
  font-family: inherit;
  font-size: 1rem;
  letter-spacing: 0;
  margin: 0;
}
.gist .gist-file .gist-data {
  background: 0 0;
  border-bottom: none;
}
.gist .gist-file .gist-data pre {
  font-family: Menlo, Consolas, Monaco, Consolas, monospace;
  padding: 0 ;
}
.gist .gist-file .gist-meta {
  background: 0 0;
  color: #f8f8f2;
  font-size: 1rem;
  margin-top: 5px;
  padding: 0;
}
.gist .gist-file .gist-meta a {
  color: #f8f8f2;
}
.gist .gist-file .gist-meta a:visited {
  color: #f8f8f2;
}
figure.highlight {
  font-size: 0.95rem;
  margin: 3rem 0.8rem;
  background: #263338;
  border: 1px solid color-gutter;
  line-height: 2rem;
  overflow: auto;
  position: relative;
}
figure.highlight .code {
  padding: 0 1em 1em 1em;
  color: #f8f8f2;
}
figure.highlight .gutter {
  display: none;
}
figure.highlight figcaption {
  font-size: 1rem;
  font-weight: bold;
  color: #e9e9d6;
  background-color: #1e282c;
  padding: 0.6em 1em;
}
figure.highlight figcaption a {
  position: absolute;
  right: 1rem;
}
figure.highlight figcaption:before {
  content: "\f121";
  font-family: "fontawesome";
  text-align: center;
  display: inline-block;
  margin-right: 0.6em;
}
figure.highlight pre {
  background: 0 0;
  border: none;
  margin: 0;
  padding: 0.5rem;
}
figure.highlight table {
  border-spacing: 0;
  margin: 0;
}
figure.highlight th {
  border: 0;
  font-weight: 400;
  padding: 0;
}
figure.highlight td {
  border: 0;
  font-size: 1.1rem;
  padding: 0;
}
.entry-content .toc {
  background: #fff;
  padding: 0.5rem;
  margin: 3rem 0;
  border: 1px solid #cce4e8;
  border-radius: 2px;
}
.entry-content .toc ul {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
  border-top: 1px solid #5d8b93;
  border-radius: 2px;
}
.entry-content .toc ul:first-child {
  border-top: none;
}
.entry-content .toc ul ul,
.entry-content .toc ul ol {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
}
.entry-content .toc ul li {
  padding: 0;
  margin: 0;
  border-top: 1px solid #5d8b93;
}
.entry-content .toc ul li:first-child {
  border-top: none;
}
.entry-content .toc ul li::after,
.entry-content .toc ul li::before {
  content: normal;
}
.entry-content .toc ul li a {
  font-size: 1.2rem;
  font-weight: bold;
  display: block;
  padding: 1rem;
  background-color: #3d5b61;
  color: #fff;
  -webkit-transition: 0.3s;
  -ms-transition: 0.3s;
  -moz-transition: 0.3s;
  -o-transition: 0.3s;
  -webkit-transition: 0.3s;
  -moz-transition: 0.3s;
  -o-transition: 0.3s;
  -ms-transition: 0.3s;
  transition: 0.3s;
}
.entry-content .toc ul li a:hover {
  color: #fff;
  background-color: #2c4145;
}
.entry-content .toc ul li a:before {
  content: "\f02d";
  font-family: "fontawesome";
  display: inline-block;
  padding: 0;
  margin: 0;
  margin-right: 0.8rem;
}
.entry-content .toc ul li ul,
.entry-content .toc ul li ol {
  margin-bottom: 0;
  padding: 0;
  margin: 0;
}
.entry-content .toc ul li ul li a,
.entry-content .toc ul li ol li a {
  padding: 0.5rem 0.75rem 0.5rem 2rem;
  font-size: 0.9rem;
  background-color: #416167;
}
.entry-content .toc ul li ul li a:before,
.entry-content .toc ul li ol li a:before {
  content: "\f0da";
  font-family: "fontawesome";
  display: inline-block;
  padding: 0;
  margin: 0;
  margin-right: 0.6rem;
}
.entry-content .toc ul li ul li ul li a,
.entry-content .toc ul li ol li ul li a {
  padding: 0.5rem 0.75rem 0.5rem 4rem;
}
.entry-content .toc ul li ul li ul li a:before,
.entry-content .toc ul li ol li ul li a:before {
  content: none;
}
.meta-content {
  background-color: #fff;
  margin: 1.5rem 0.8rem;
  padding: 0;
  border-top: 1px dotted #cce4e8;
  letter-spacing: 0.05rem;
}
.meta-wrapper {
  margin: 3rem 0.8rem;
  padding: 0;
  background-color: #fff;
}
h6.tag,
h6.categories {
  color: #2d3d40;
  font-size: 0.9rem;
  font-weight: bold;
}
.article-tag-list {
  padding: 0;
}
.article-tag,
.article-tag-list,
.article-categories,
.article-categories-list {
  padding: 0;
  margin: 0;
}
.article-categories {
  margin-bottom: 1.6em;
}
.article-tag-list li,
.article-categories-list li {
  list-style: none;
  display: inline-block;
  padding: 0;
  margin: 0.2rem 0.1rem;
}
.article-tag-list li a,
.article-categories-list li a {
  font-size: 0.8rem;
  font-weight: bold;
  padding: 0.4rem 0.8rem;
  margin: 0;
  background-color: #ecf5f7;
  color: #2d3d40;
  border-radius: 2px;
  display: block;
}
.article-tag-list li a:before,
.article-categories-list li a:before {
  content: "#";
}
.article-tag-list li a:hover,
.article-categories-list li a:hover {
  color: #fff;
  background-color: #2d3d40;
}
.widget {
  margin: 1.5rem 0.8rem;
  padding: 0;
}
.widget-h {
  text-align: center;
  margin: 1.6rem 0;
}
.widget-h h6 {
  color: #fff;
  background-color: #2d3d40;
  display: inline-block;
  padding: 0.4rem 1rem;
  font-size: 0.9rem;
  font-weight: bold;
}
.posts-list li {
  list-style: none;
  margin: 0.8rem 0;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.posts-list li .posts-list-link {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.posts-list li .posts-list-link a {
  color: #2d3d40;
  font-size: 1.1rem;
  font-weight: bold;
}
.posts-list li .posts-list-link a:hover {
  color: #e91e63;
}
.posts-list li .posts-list-meta {
  font-size: 0.7rem;
}
.posts-list li .flx:first-child {
  margin: 0 1rem 0 0;
}
.posts-list li amp-img {
  border-radius: 2px;
}
#footer {
  background-color: #2d3d40;
  color: #fff;
  display: block;
  font-size: 1rem;
  letter-spacing: 0.05rem;
  line-height: 2rem;
  margin: 3rem 0 0 0;
  padding: 0;
}
.site-author-info {
  margin: 0;
  padding: 3rem 1.6rem;
}
.site-author-info h6 {
  font-size: 1rem;
  color: #fff;
  font-weight: bold;
  display: inline-block;
  background-color: #222f31;
  padding: 0.4rem 0.8rem;
}
.site-author-info-wrapper {
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-align-items: center;
  -webkit-box-align: center;
  -moz-box-align: center;
  -o-box-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
.site-author-info-wrapper .flx:first-child {
  margin: 0 1rem 0 0;
}
.authorCap-wrapper {
  -webkit-flex-grow: 3;
  -webkit-box-flex: 3;
  -moz-box-flex: 3;
  -o-box-flex: 3;
  -ms-box-flex: 3;
  box-flex: 3;
  -webkit-flex-grow: 3;
  flex-grow: 3;
}
.authorCap {
  font-size: 1.4rem;
  font-weight: bold;
}
.authorReading {
  font-size: 0.7rem;
}
.site-author-desc {
  font-size: 0.8rem;
  line-height: 1.6rem;
  margin: 1.4rem 0;
}
.copyright-tool {
  margin: 0;
  padding: 1.5rem 1.6rem;
  border-top: 1px solid #384b4f;
}
.copyright-notice p {
  font-size: 0.6rem;
  letter-spacing: 0.05rem;
  line-height: 1.2rem;
  color: #8ba8ae;
}
.copyright-title {
  font-size: 1rem;
  text-align: center;
  margin: 0.8rem 0 0.4rem 0;
}
.copyright-license {
  margin: 0.4rem 0 0.8rem 0;
  font-size: 0.7rem;
  text-align: center;
}
.copyright-license a {
  color: #e6e6e6;
  font-size: 0.7rem;
}
.copyright-license a:hover {
  color: #b3b3b3;
}
.sns-link {
  margin: 0;
  text-align: center;
}
.sns-link a {
  display: inline-block;
  font-size: 1.6rem;
  text-align: center;
  width: 2rem;
  height: 2rem;
  line-height: 2rem;
  padding: 0.6rem;
  margin: 0 0.1rem;
  background-color: #222f31;
  color: #fff;
  border-radius: 4px;
}
.sns-link a:hover {
  color: #ccc;
  background-color: #030404;
}
.footer-menu {
  padding: 1.5rem 0.8rem;
  border-top: 1px solid #384b4f;
}
.footer-menu ul li {
  list-style: none;
  margin: 0;
  padding: 0;
}
.footer-menu ul li a {
  display: block;
  padding: 0.6rem;
  margin: 0.2rem 1.6rem;
  font-size: 1rem;
  color: #fff;
  background-color: #222f31;
  border-radius: 4px;
  text-align: center;
  font-weight: bold;
}
.footer-menu ul li a:hover {
  color: #ccc;
  background-color: #030404;
}
.social-share {
  margin: 1.5rem 0.8rem;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: box;
  display: flex;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -o-box-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
}
.social-share amp-social-share,
.social-share .sbtn {
  margin: 5px;
}
.sbtn {
  padding: 0;
  width: 4rem;
  height: 3rem;
  line-height: 3rem;
  color: #fff;
  font-size: 1.2rem;
  text-align: center;
  border-radius: 4px;
}
.sbtn:hover {
  color: #fff;
}
.tw {
  background-color: #1cafe8;
}
.tw:hover {
  background-color: #0f6b8f;
}
.fb {
  background-color: #4f677f;
}
.fb:hover {
  background-color: #283440;
}
.ht {
  background-color: #35acda;
}
.ht:hover {
  background-color: #1a6e8f;
}
.gp {
  background-color: #d56153;
}
.gp:hover {
  background-color: #9c3326;
}
.tb {
  background-color: #465f79;
}
.tb:hover {
  background-color: #212c38;
}
.icon-hatena:before {
  content: "B";
  font-weight: bold;
  font-size: 1.2rem;
}
#totop {
  position: fixed;
  bottom: 2rem;
  right: 1.6rem;
  font-size: 1.2rem;
  z-index: 995;
}
#totop a {
  background: rgba(152,184,190,0.6);
  text-decoration: none;
  color: #fff;
  padding: 0.8rem;
  border-radius: 50%;
}
#totop a:before {
  content: "\f062";
  font-family: "fontawesome";
  font-size: 1.2rem;
}
#totop a:hover {
  text-decoration: none;
  background: #5d8b93;
  color: #fff;
  line-height: 2.3em;
}
@media (min-width: 800px) {
  .title-cover,
  .entry-content,
  .categories,
  .meta-content,
  .site-author-info {
    width: 780px;
    margin: 0 auto;
  }
  .nav-container {
    width: 800px;
    margin: 0 auto;
  }
}
@media (min-width: 0px) and (max-width: 480px) {
  .site-author-info-wrapper {
    display: block;
  }
  .gravatar-area {
    text-align: center;
  }
  .gravatar-area amp-img {
    display: inline-block;
  }
  .entry-content td,
  .entry-content th {
    line-height: 1.8em;
    padding: 0.6rem 0.6rem;
    font-size: 0.5rem;
  }
  .entry-content td em,
  .entry-content th em,
  .entry-content td strong,
  .entry-content th strong,
  .entry-content td a,
  .entry-content th a {
    font-size: 0.5rem;
  }
}

	</style>
	
  </head>
  <body>
  	
  	
  	<!-- google analytics -->
  	
  	
  	
  	<!-- menu -->
  	<header>
  		<div class="nav-container">
	  		<div class="left-nav">
	  			<div class="header-title">
	  				<a href="/">ALaDing</a>
	  			</div>
	  		</div>
	  		
	  	</div>
    </header>
  	
  	
  	<!-- sidebar -->
  	
  	
  	<!-- container -->
  	<div id="container">
	  	<div id="main">
		    <article id="post-字典/设计模式" class="post">
		    
		   		<!-- categories and bread crumb -->
		    	
				<div class="categories-header">
					<div class="categories">
						<div class="breadcrumb inline-icon">
							<ol itemscope itemtype="http://schema.org/BreadcrumbList">
							  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
							    <a itemprop="item" href="/">
							    	<span class="sns-icon home-icon"></span>
							        <span itemprop="name"><span class="fa fa-fw fa-home"></span></span>
							    </a>
							    <meta itemprop="position" content="1" />
							  </li>

								
						    		<li itemprop="itemListElement" itemscope
									      itemtype="http://schema.org/ListItem">
									    <a itemprop="item" href="/categories/字典/">
									      
									      	<span class="sns-icon folder-icon"></span>
									      
									      <span itemprop="name">字典</span>
									    </a>
									    <meta itemprop="position" content="2" />
									</li>
								
							</ol>
						</div>
					</div>
				</div>
				
		    
		    	<!-- entry title -->
				<div class="title-cover">
					<div class="entry-header">
						
						
						
			          	<div class="header-thumb flx">
			          		<div class="thumbImg-w circle">
			          			<amp-img class="thumbImg" layout="fixed" width="128" height="100" src="/amp-dist/sample/sample-substituteTitleImage.png">
			          			</amp-img>
			          		</div>
			          	</div>
			            
			            
			            <div class="header-cap flx">
							
							  <h1 class="article-title entry-title" itemprop="name">
							    <a href="https://purethought.cn/54575.html" target="_blank" itemprop="url">设计模式</a>
							  </h1>
							
						</div>
					</div>
					
					<!-- datePublished -->
					<div class="entry-meta-header">
						<span class="meta-elements date">
							<span class="fa fa-fw fa-clock-o"></span>
							<time datetime="2019-12-21" itemprop="datePublished">2019.12.21</time>
						</span>
					</div>
				</div>
				
				
				
				<!-- entry content -->
			    <div class="entry-content ecp">
			    	<!-- social share button -->
			    	
			    	
			    	
                    <!-- google Adsense Matched content -->
                    
                    
			    	<!-- content -->
			  		<p>&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x7684;&#x6838;&#x5FC3;&#x601D;&#x60F3;&#x2013;&#x9AD8;&#x5185;&#x805A;&#x4F4E;&#x8026;&#x5408;&#x3002;<br>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7684;&#x5927;&#x90E8;&#x5206;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x89E3;&#x8026;&#xFF0C;&#x89E3;&#x8026;&#x7684;&#x57FA;&#x672C;&#x65B9;&#x5F0F;&#x662F;&#x5C06;&#x529F;&#x80FD;&#x548C;&#x903B;&#x8F91;&#x5206;&#x79BB;&#x3002;</p>
<p>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF08;Design pattern&#xFF09;&#x4EE3;&#x8868;&#x4E86;&#x6700;&#x4F73;&#x7684;&#x5B9E;&#x8DF5;&#xFF0C;&#x901A;&#x5E38;&#x88AB;&#x6709;&#x7ECF;&#x9A8C;&#x7684;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6240;&#x91C7;&#x7528;&#x3002;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x5728;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#x9762;&#x4E34;&#x7684;&#x4E00;&#x822C;&#x95EE;&#x9898;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x3002;&#x8FD9;&#x4E9B;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#x662F;&#x4F17;&#x591A;&#x8F6F;&#x4EF6;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x7ECF;&#x8FC7;&#x76F8;&#x5F53;&#x957F;&#x7684;&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x7684;&#x8BD5;&#x9A8C;&#x548C;&#x9519;&#x8BEF;&#x603B;&#x7ED3;&#x51FA;&#x6765;&#x7684;&#x3002;<br>&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x5957;&#x88AB;&#x53CD;&#x590D;&#x4F7F;&#x7528;&#x7684;&#x3001;&#x591A;&#x6570;&#x4EBA;&#x77E5;&#x6653;&#x7684;&#x3001;&#x7ECF;&#x8FC7;&#x5206;&#x7C7B;&#x7F16;&#x76EE;&#x7684;&#x3001;&#x4EE3;&#x7801;&#x8BBE;&#x8BA1;&#x7ECF;&#x9A8C;&#x7684;&#x603B;&#x7ED3;&#x3002;&#x4F7F;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x4E3A;&#x4E86;&#x91CD;&#x7528;&#x4EE3;&#x7801;&#x3001;&#x8BA9;&#x4EE3;&#x7801;&#x66F4;&#x5BB9;&#x6613;&#x88AB;&#x4ED6;&#x4EBA;&#x7406;&#x89E3;&#x3001;&#x4FDD;&#x8BC1;&#x4EE3;&#x7801;&#x53EF;&#x9760;&#x6027;&#x3002; &#x6BEB;&#x65E0;&#x7591;&#x95EE;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4E8E;&#x5DF1;&#x4E8E;&#x4ED6;&#x4EBA;&#x4E8E;&#x7CFB;&#x7EDF;&#x90FD;&#x662F;&#x591A;&#x8D62;&#x7684;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x4F7F;&#x4EE3;&#x7801;&#x7F16;&#x5236;&#x771F;&#x6B63;&#x5DE5;&#x7A0B;&#x5316;&#xFF0C;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x662F;&#x8F6F;&#x4EF6;&#x5DE5;&#x7A0B;&#x7684;&#x57FA;&#x77F3;&#xFF0C;&#x5982;&#x540C;&#x5927;&#x53A6;&#x7684;&#x4E00;&#x5757;&#x5757;&#x7816;&#x77F3;&#x4E00;&#x6837;&#x3002;&#x9879;&#x76EE;&#x4E2D;&#x5408;&#x7406;&#x5730;&#x8FD0;&#x7528;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x5B8C;&#x7F8E;&#x5730;&#x89E3;&#x51B3;&#x5F88;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x6BCF;&#x79CD;&#x6A21;&#x5F0F;&#x5728;&#x73B0;&#x5B9E;&#x4E2D;&#x90FD;&#x6709;&#x76F8;&#x5E94;&#x7684;&#x539F;&#x7406;&#x6765;&#x4E0E;&#x4E4B;&#x5BF9;&#x5E94;&#xFF0C;&#x6BCF;&#x79CD;&#x6A21;&#x5F0F;&#x90FD;&#x63CF;&#x8FF0;&#x4E86;&#x4E00;&#x4E2A;&#x5728;&#x6211;&#x4EEC;&#x5468;&#x56F4;&#x4E0D;&#x65AD;&#x91CD;&#x590D;&#x53D1;&#x751F;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x4EE5;&#x53CA;&#x8BE5;&#x95EE;&#x9898;&#x7684;&#x6838;&#x5FC3;&#x89E3;&#x51B3;&#x65B9;&#x6848;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x80FD;&#x88AB;&#x5E7F;&#x6CDB;&#x5E94;&#x7528;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<h1 id="6&#x79CD;&#x8BBE;&#x8BA1;&#x539F;&#x5219;"><a href="#6&#x79CD;&#x8BBE;&#x8BA1;&#x539F;&#x5219;" class="headerlink" title="6&#x79CD;&#x8BBE;&#x8BA1;&#x539F;&#x5219;"></a>6&#x79CD;&#x8BBE;&#x8BA1;&#x539F;&#x5219;</h1><h2 id="&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;"><a href="#&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;" class="headerlink" title="&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;"></a>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;</h2><p>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#x7684;&#x82F1;&#x6587;&#x540D;&#x79F0;&#x662F;Single Responsibility Principle&#xFF0C;&#x7B80;&#x79F0;&#x662F;SRP&#x3002;&#x8FD9;&#x4E2A;&#x539F;&#x5219;&#x5B58;&#x5728;&#x4E89;&#x8BAE;&#x4E4B;&#x5904;&#x5728;&#x4E8E;&#x5BF9;&#x804C;&#x8D23;&#x7684;&#x5B9A;&#x4E49;&#xFF0C;&#x4EC0;&#x4E48;&#x662F;&#x7C7B;&#x7684;&#x804C;&#x8D23;&#xFF0C;&#x4EE5;&#x53CA;&#x600E;&#x4E48;&#x5212;&#x5206;&#x7C7B;&#x7684;&#x804C;&#x8D23;&#x3002;</p>
<p>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#x7684;&#x597D;&#x5904;&#xFF1A;<br>1.&#x7C7B;&#x7684;&#x590D;&#x6742;&#x6027;&#x964D;&#x4F4E;&#xFF0C;&#x5B9E;&#x73B0;&#x4EC0;&#x4E48;&#x804C;&#x8D23;&#x90FD;&#x6709;&#x6E05;&#x6670;&#x660E;&#x786E;&#x7684;&#x5B9A;&#x4E49;&#xFF1B;<br>2.&#x53EF;&#x8BFB;&#x6027;&#x63D0;&#x9AD8;&#xFF0C;&#x590D;&#x6742;&#x6027;&#x964D;&#x4F4E;&#xFF0C;&#x90A3;&#x5F53;&#x7136;&#x53EF;&#x8BFB;&#x6027;&#x63D0;&#x9AD8;&#x4E86;&#xFF1B;<br>3.&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x63D0;&#x9AD8;&#xFF0C;&#x53EF;&#x8BFB;&#x6027;&#x63D0;&#x9AD8;&#xFF0C;&#x90A3;&#x5F53;&#x7136;&#x66F4;&#x5BB9;&#x6613;&#x7EF4;&#x62A4;&#x4E86;&#xFF1B;<br>4.&#x53D8;&#x66F4;&#x5F15;&#x8D77;&#x7684;&#x98CE;&#x9669;&#x964D;&#x4F4E;&#xFF0C;&#x53D8;&#x66F4;&#x662F;&#x5FC5;&#x4E0D;&#x53EF;&#x5C11;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x63A5;&#x53E3;&#x7684;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x505A;&#x5F97;&#x597D;&#xFF0C;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x4FEE;&#x6539;&#x53EA;&#x5BF9;&#x76F8;&#x5E94;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;&#x6709;&#x5F71;&#x54CD;&#xFF0C;&#x5BF9;&#x5176;&#x4ED6;&#x7684;&#x63A5;&#x53E3;&#x65E0;&#x5F71;&#x54CD;&#xFF0C;&#x8FD9;&#x5BF9;&#x7CFB;&#x7EDF;&#x7684;&#x6269;&#x5C55;&#x6027;&#x3001;&#x7EF4;&#x62A4;&#x6027;&#x90FD;&#x6709;&#x975E;&#x5E38;&#x5927;&#x7684;&#x5E2E;&#x52A9;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#x3000;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#x63D0;&#x51FA;&#x4E86;&#x4E00;&#x4E2A;&#x7F16;&#x5199;&#x7A0B;&#x5E8F;&#x7684;&#x6807;&#x51C6;&#xFF0C;&#x7528;&#x201C;&#x804C;&#x8D23;&#x201D;&#x6216;&#x201C;&#x53D8;&#x5316;&#x539F;&#x56E0;&#x201D;&#x6765;&#x8861;&#x91CF;&#x63A5;&#x53E3;&#x6216;&#x7C7B;&#x8BBE;&#x8BA1;&#x5F97;&#x662F;&#x5426;&#x4F18;&#x826F;&#xFF0C;&#x4F46;&#x662F;&#x201C;&#x804C;&#x8D23;&#x201D;&#x548C;&#x201C;&#x53D8;&#x5316;&#x539F;&#x56E0;&#x201D;&#x90FD;&#x662F;&#x4E0D;&#x53EF;&#x5EA6;&#x91CF;&#x7684;&#xFF0C;&#x56E0;&#x9879;&#x76EE;&#x800C;&#x5F02;&#xFF0C;&#x56E0;&#x73AF;&#x5883;&#x800C;&#x5F02;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219;&#xFF0C;&#x6211;&#x7684;&#x5EFA;&#x8BAE;&#x662F;&#x63A5;&#x53E3;&#x4E00;&#x5B9A;&#x8981;&#x505A;&#x5230;&#x5355;&#x4E00;&#x804C;&#x8D23;&#xFF0C;&#x7C7B;&#x7684;&#x8BBE;&#x8BA1;&#x5C3D;&#x91CF;&#x505A;&#x5230;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x539F;&#x56E0;&#x5F15;&#x8D77;&#x53D8;&#x5316;&#x3002;</p>
<h2 id="&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;"><a href="#&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;" class="headerlink" title="&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;"></a>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;</h2><p>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;(Liskov Substitution Principle&#xFF0C;LSP)&#x6709;&#x4E24;&#x4E2A;&#x5B9A;&#x4E49;&#x3002;</p>
<blockquote>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#xFF0C;&#x4E5F;&#x662F;&#x6700;&#x6B63;&#x5B97;&#x7684;&#x5B9A;&#x4E49;&#xFF1A;<br>If for each object o1 of type S there is an object o2 of type T such that for all programs P defined in terms of T,the behavior of P is unchanged when o1 is substituted for &gt;o2 then S is a subtype of T.<br><br>&#x5982;&#x679C;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x7C7B;&#x578B;&#x4E3A;S&#x7684;&#x5BF9;&#x8C61;o1&#xFF0C;&#x90FD;&#x6709;&#x7C7B;&#x578B;&#x4E3A;T&#x7684;&#x5BF9;&#x8C61;o2&#xFF0C;&#x4F7F;&#x5F97;&#x4EE5;T&#x5B9A;&#x4E49;&#x7684;&#x6240;&#x6709;&#x7A0B;&#x5E8F;P&#x5728;&#x6240;&#x6709;&#x7684;&#x5BF9;&#x8C61;o1&#x90FD;&#x4EE3;&#x6362;&#x6210;o2&#x65F6;&#xFF0C;&#x7A0B;&#x5E8F;P&#x7684;&#x884C;&#x4E3A;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x53D8;&#x5316;&#xFF0C;&#x90A3;&#x4E48;&#x7C7B;&#x578B;S&#x662F;&#x7C7B;&#x578B;T&#x7684;&#x5B50;&#x7C7B;&#x578B;&#x3002;<br><br><br>&#x7B2C;&#x4E8C;&#x79CD;&#x5B9A;&#x4E49;&#xFF1A;<br>Functions that use pointers or references to base classes must be able to use objects of derived classes without knowing it.<br><br>&#x6240;&#x6709;&#x5F15;&#x7528;&#x57FA;&#x7C7B;&#x7684;&#x5730;&#x65B9;&#x5FC5;&#x987B;&#x80FD;&#x900F;&#x660E;&#x5730;&#x4F7F;&#x7528;&#x5176;&#x5B50;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<p>&#x7B2C;&#x4E8C;&#x4E2A;&#x5B9A;&#x4E49;&#x662F;&#x6700;&#x6E05;&#x6670;&#x660E;&#x786E;&#x7684;&#xFF0C;&#x901A;&#x4FD7;&#x70B9;&#x8BB2;&#xFF0C;&#x53EA;&#x8981;&#x7236;&#x7C7B;&#x80FD;&#x51FA;&#x73B0;&#x7684;&#x5730;&#x65B9;&#x5B50;&#x7C7B;&#x5C31;&#x53EF;&#x4EE5;&#x51FA;&#x73B0;&#xFF0C;&#x800C;&#x4E14;&#x66FF;&#x6362;&#x4E3A;&#x5B50;&#x7C7B;&#x4E5F;&#x4E0D;&#x4F1A;&#x4EA7;&#x751F;&#x4EFB;&#x4F55;&#x9519;&#x8BEF;&#x6216;&#x5F02;&#x5E38;&#xFF0C;&#x4F7F;&#x7528;&#x8005;&#x53EF;&#x80FD;&#x6839;&#x672C;&#x5C31;&#x4E0D;&#x9700;&#x8981;&#x77E5;&#x9053;&#x662F;&#x7236;&#x7C7B;&#x8FD8;&#x662F;&#x5B50;&#x7C7B;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x53CD;&#x8FC7;&#x6765;&#x5C31;&#x4E0D;&#x884C;&#x4E86;&#xFF0C;&#x6709;&#x5B50;&#x7C7B;&#x51FA;&#x73B0;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x7236;&#x7C7B;&#x672A;&#x5FC5;&#x5C31;&#x80FD;&#x9002;&#x5E94;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#x3000;&#x5982;&#x679C;&#x5B50;&#x7C7B;&#x4E0D;&#x80FD;&#x5B8C;&#x6574;&#x5730;&#x5B9E;&#x73B0;&#x7236;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6216;&#x8005;&#x7236;&#x7C7B;&#x7684;&#x67D0;&#x4E9B;&#x65B9;&#x6CD5;&#x5728;&#x5B50;&#x7C7B;&#x4E2D;&#x5DF2;&#x7ECF;&#x53D1;&#x751F;&#x201C;&#x7578;&#x53D8;&#x201D;&#xFF0C;&#x5219;&#x5EFA;&#x8BAE;&#x65AD;&#x5F00;&#x7236;&#x5B50;&#x7EE7;&#x627F;&#x5173;&#x7CFB;&#xFF0C;&#x91C7;&#x7528;&#x4F9D;&#x8D56;&#x3001;&#x805A;&#x96C6;&#x3001;&#x7EC4;&#x5408;&#x7B49;&#x5173;&#x7CFB;&#x4EE3;&#x66FF;&#x7EE7;&#x627F;&#x3002;</p>
<h2 id="&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;"><a href="#&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;" class="headerlink" title="&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;"></a>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;</h2><p><strong>&#x6982;&#x5FF5;</strong><br>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#xFF08;Dependence Inversion Principle,DIP&#xFF09;</p>
<blockquote>
<p>High level modules should not depend upon low level modules.Both should depend upon abstractions.Abstractions should not depend upon details.Details should depend upon abstractions.<br><br>&#x7FFB;&#x8BD1;&#x8FC7;&#x6765;&#xFF0C;&#x5305;&#x542B;&#x4E09;&#x5C42;&#x542B;&#x4E49;&#xFF1A;<br>1.&#x9AD8;&#x5C42;&#x6A21;&#x5757;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x4F4E;&#x5C42;&#x6A21;&#x5757;&#xFF0C;&#x4E24;&#x8005;&#x90FD;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5176;&#x62BD;&#x8C61;&#xFF1B;<br>2.&#x62BD;&#x8C61;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x7EC6;&#x8282;&#xFF1B;<br>3.&#x7EC6;&#x8282;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x62BD;&#x8C61;&#x3002;</p>
</blockquote>
<p>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#x5728;Java&#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x8868;&#x73B0;&#x5C31;&#x662F;&#xFF1A;<br>&#x25CF; &#x6A21;&#x5757;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x901A;&#x8FC7;&#x62BD;&#x8C61;&#x53D1;&#x751F;&#xFF0C;&#x5B9E;&#x73B0;&#x7C7B;&#x4E4B;&#x95F4;&#x4E0D;&#x53D1;&#x751F;&#x76F4;&#x63A5;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x5176;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x662F;&#x901A;&#x8FC7;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#x4EA7;&#x751F;&#x7684;&#xFF1B;<br>&#x25CF; &#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#x4E0D;&#x4F9D;&#x8D56;&#x4E8E;&#x5B9E;&#x73B0;&#x7C7B;&#xFF1B;<br>&#x25CF; &#x5B9E;&#x73B0;&#x7C7B;&#x4F9D;&#x8D56;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</p>
<p>&#x66F4;&#x52A0;&#x7CBE;&#x7B80;&#x7684;&#x5B9A;&#x4E49;&#x5C31;&#x662F;&#x201C;&#x9762;&#x5411;&#x63A5;&#x53E3;&#x7F16;&#x7A0B;&#x201D;&#x2014;&#x2014;OOD&#xFF08;Object-Oriented Design&#xFF0C;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x8BBE;&#x8BA1;&#xFF09;&#x7684;&#x7CBE;&#x9AD3;&#x4E4B;&#x4E00;&#x3002;</p>
<p>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#x7684;&#x4F18;&#x70B9;&#xFF1A;<br>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219;&#x53EF;&#x4EE5;&#x51CF;&#x5C11;&#x7C7B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x6027;&#xFF0C;&#x63D0;&#x9AD8;&#x7CFB;&#x7EDF;&#x7684;&#x7A33;&#x5B9A;&#x6027;&#xFF0C;&#x964D;&#x4F4E;&#x5E76;&#x884C;&#x5F00;&#x53D1;&#x5F15;&#x8D77;&#x7684;&#x98CE;&#x9669;&#xFF0C;&#x63D0;&#x9AD8;&#x4EE3;&#x7801;&#x7684;&#x53EF;&#x8BFB;&#x6027;&#x548C;&#x53EF;&#x7EF4;&#x62A4;&#x6027;&#x3002;<br>&#x51CF;&#x5C11;&#x5E76;&#x884C;&#x5F00;&#x53D1;&#x5F15;&#x8D77;&#x7684;&#x98CE;&#x9669;&#x3002;</p>
<p><strong>&#x4F9D;&#x8D56;&#x7684;&#x4E09;&#x79CD;&#x5199;&#x6CD5;</strong><br>1.&#x6784;&#x9020;&#x51FD;&#x6570;&#x4F20;&#x9012;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#xFF1B;<br>2.Setter&#x65B9;&#x6CD5;&#x4F20;&#x9012;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#xFF1B;<br>3.&#x63A5;&#x53E3;&#x58F0;&#x660E;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#x3002;</p>
<p><strong>&#x89C4;&#x5219;</strong><br>1.&#x6BCF;&#x4E2A;&#x7C7B;&#x5C3D;&#x91CF;&#x90FD;&#x6709;&#x63A5;&#x53E3;&#x6216;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x6216;&#x8005;&#x62BD;&#x8C61;&#x7C7B;&#x548C;&#x63A5;&#x53E3;&#x4E24;&#x8005;&#x90FD;&#x5177;&#x5907;&#x3002;<br>2.&#x53D8;&#x91CF;&#x7684;&#x8868;&#x9762;&#x7C7B;&#x578B;&#x5C3D;&#x91CF;&#x662F;&#x63A5;&#x53E3;&#x6216;&#x8005;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x3002;<br>3.&#x4EFB;&#x4F55;&#x7C7B;&#x90FD;&#x4E0D;&#x5E94;&#x8BE5;&#x4ECE;&#x5177;&#x4F53;&#x7C7B;&#x6D3E;&#x751F;&#x3002;<br>4.&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x8986;&#x5199;&#x57FA;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x3002;<br>5.&#x7ED3;&#x5408;&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219;&#x4F7F;&#x7528;&#x3002;</p>
<h2 id="&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;"><a href="#&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;" class="headerlink" title="&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;"></a>&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</h2><blockquote>
<p>&#x63A5;&#x53E3;&#xFF1A;<br>&#x5B9E;&#x4F8B;&#x63A5;&#x53E3;&#xFF08;Object Interface&#xFF09;&#x548C;&#x7C7B;&#x63A5;&#x53E3;&#xFF08;Class Interface&#xFF09;&#x3002;<br>&#x9694;&#x79BB;&#xFF1A;<br>Clients should not be forced to depend upon interfaces that they don&#x2019;t use.<br>&#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x5E94;&#x8BE5;&#x4F9D;&#x8D56;&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x7684;&#x63A5;&#x53E3;&#x3002;<br>The dependency of one class to another one should depend on the smallest possible interface.<br>&#x7C7B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5E94;&#x8BE5;&#x5EFA;&#x7ACB;&#x5728;&#x6700;&#x5C0F;&#x7684;&#x63A5;&#x53E3;&#x4E0A;&#x3002;</p>
</blockquote>
<p>&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x89C4;&#x5219;&#x6765;&#x8861;&#x91CF;&#xFF1A;<br>&#x25CF; &#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x53EA;&#x670D;&#x52A1;&#x4E8E;&#x4E00;&#x4E2A;&#x5B50;&#x6A21;&#x5757;&#x6216;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF1B;<br>&#x25CF; &#x901A;&#x8FC7;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x538B;&#x7F29;&#x63A5;&#x53E3;&#x4E2D;&#x7684;public&#x65B9;&#x6CD5;&#xFF0C;&#x63A5;&#x53E3;&#x65F6;&#x5E38;&#x53BB;&#x56DE;&#x987E;&#xFF0C;&#x5C3D;&#x91CF;&#x8BA9;&#x63A5;&#x53E3;&#x8FBE;&#x5230;&#x201C;&#x6EE1;&#x8EAB;&#x7B4B;&#x9AA8;&#x8089;&#x201D;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x201C;&#x80A5;&#x561F;&#x561F;&#x201D;&#x7684;&#x4E00;&#x5927;&#x5806;&#x65B9;&#x6CD5;&#xFF1B;<br>&#x25CF; &#x5DF2;&#x7ECF;&#x88AB;&#x6C61;&#x67D3;&#x4E86;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x5C3D;&#x91CF;&#x53BB;&#x4FEE;&#x6539;&#xFF0C;&#x82E5;&#x53D8;&#x66F4;&#x7684;&#x98CE;&#x9669;&#x8F83;&#x5927;&#xFF0C;&#x5219;&#x91C7;&#x7528;&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#x8FDB;&#x884C;&#x8F6C;&#x5316;&#x5904;&#x7406;&#xFF1B;<br>&#x25CF; &#x4E86;&#x89E3;&#x73AF;&#x5883;&#xFF0C;&#x62D2;&#x7EDD;&#x76F2;&#x4ECE;&#x3002;&#x6BCF;&#x4E2A;&#x9879;&#x76EE;&#x6216;&#x4EA7;&#x54C1;&#x90FD;&#x6709;&#x7279;&#x5B9A;&#x7684;&#x73AF;&#x5883;&#x56E0;&#x7D20;&#xFF0C;&#x522B;&#x770B;&#x5230;&#x5927;&#x5E08;&#x662F;&#x8FD9;&#x6837;&#x505A;&#x7684;&#x4F60;&#x5C31;&#x7167;&#x6284;&#x3002;&#x5343;&#x4E07;&#x522B;&#xFF0C;&#x73AF;&#x5883;&#x4E0D;&#x540C;&#xFF0C;&#x63A5;&#x53E3;&#x62C6;&#x5206;&#x7684;&#x6807;&#x51C6;&#x5C31;&#x4E0D;&#x540C;&#x3002;&#x6DF1;&#x5165;&#x4E86;&#x89E3;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;&#x6700;&#x597D;&#x7684;&#x63A5;&#x53E3;&#x8BBE;&#x8BA1;&#x5C31;&#x51FA;&#x81EA;&#x4F60;&#x7684;&#x624B;&#x4E2D;&#xFF01;</p>
<h2 id="&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;"><a href="#&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;" class="headerlink" title="&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;"></a>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;</h2><p>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#xFF08;Law of Demeter&#xFF0C;LoD&#xFF09;&#x4E5F;&#x79F0;&#x4E3A;&#x6700;&#x5C11;&#x77E5;&#x8BC6;&#x539F;&#x5219;&#xFF08;Least Knowledge Principle&#xFF0C;LKP&#xFF09;&#xFF0C;&#x867D;&#x7136;&#x540D;&#x5B57;&#x4E0D;&#x540C;&#xFF0C;&#x4F46;&#x63CF;&#x8FF0;&#x7684;&#x662F;&#x540C;&#x4E00;&#x4E2A;&#x89C4;&#x5219;&#xFF1A;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5E94;&#x8BE5;&#x5BF9;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x6709;&#x6700;&#x5C11;&#x7684;&#x4E86;&#x89E3;&#x3002;&#x901A;&#x4FD7;&#x5730;&#x8BB2;&#xFF0C;&#x4E00;&#x4E2A;&#x7C7B;&#x5E94;&#x8BE5;&#x5BF9;&#x81EA;&#x5DF1;&#x9700;&#x8981;&#x8026;&#x5408;&#x6216;&#x8C03;&#x7528;&#x7684;&#x7C7B;&#x77E5;&#x9053;&#x5F97;&#x6700;&#x5C11;&#xFF0C;&#x4F60;&#xFF08;&#x88AB;&#x8026;&#x5408;&#x6216;&#x8C03;&#x7528;&#x7684;&#x7C7B;&#xFF09;&#x7684;&#x5185;&#x90E8;&#x662F;&#x5982;&#x4F55;&#x590D;&#x6742;&#x90FD;&#x548C;&#x6211;&#x6CA1;&#x5173;&#x7CFB;&#xFF0C;&#x90A3;&#x662F;&#x4F60;&#x7684;&#x4E8B;&#x60C5;&#xFF0C;&#x6211;&#x5C31;&#x77E5;&#x9053;&#x4F60;&#x63D0;&#x4F9B;&#x7684;&#x8FD9;&#x4E48;&#x591A;public&#x65B9;&#x6CD5;&#xFF0C;&#x6211;&#x5C31;&#x8C03;&#x7528;&#x8FD9;&#x4E48;&#x591A;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x6211;&#x4E00;&#x6982;&#x4E0D;&#x5173;&#x5FC3;&#x3002;</p>
<p>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;&#x8981;&#x6C42;&#x7C7B;&#x201C;&#x7F9E;&#x6DA9;&#x201D;&#x4E00;&#x70B9;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x5BF9;&#x5916;&#x516C;&#x5E03;&#x592A;&#x591A;&#x7684;public&#x65B9;&#x6CD5;&#x548C;&#x975E;&#x9759;&#x6001;&#x7684;public&#x53D8;&#x91CF;&#xFF0C;&#x5C3D;&#x91CF;&#x5185;&#x655B;&#xFF0C;&#x591A;&#x4F7F;&#x7528;private&#x3001;package-private&#x3001;protected&#x7B49;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#x3002;</p>
<p>&#x4E00;&#x4E2A;&#x7C7B;&#x516C;&#x5F00;&#x7684;public&#x5C5E;&#x6027;&#x6216;&#x65B9;&#x6CD5;&#x8D8A;&#x591A;&#xFF0C;&#x4FEE;&#x6539;&#x65F6;&#x6D89;&#x53CA;&#x7684;&#x9762;&#x4E5F;&#x5C31;&#x8D8A;&#x5927;&#xFF0C;&#x53D8;&#x66F4;&#x5F15;&#x8D77;&#x7684;&#x98CE;&#x9669;&#x6269;&#x6563;&#x4E5F;&#x5C31;&#x8D8A;&#x5927;&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x6301;&#x670B;&#x53CB;&#x7C7B;&#x95F4;&#x7684;&#x8DDD;&#x79BB;&#xFF0C;&#x5728;&#x8BBE;&#x8BA1;&#x65F6;&#x9700;&#x8981;&#x53CD;&#x590D;&#x8861;&#x91CF;&#xFF1A;&#x662F;&#x5426;&#x8FD8;&#x53EF;&#x4EE5;&#x518D;&#x51CF;&#x5C11;public&#x65B9;&#x6CD5;&#x548C;&#x5C5E;&#x6027;&#xFF0C;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x4E3A;private&#x3001;package-private&#xFF08;&#x5305;&#x7C7B;&#x578B;&#xFF0C;&#x5728;&#x7C7B;&#x3001;&#x65B9;&#x6CD5;&#x3001;&#x53D8;&#x91CF;&#x524D;&#x4E0D;&#x52A0;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x5219;&#x9ED8;&#x8BA4;&#x4E3A;&#x5305;&#x7C7B;&#x578B;&#xFF09;&#x3001;protected&#x7B49;&#x8BBF;&#x95EE;&#x6743;&#x9650;&#xFF0C;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x52A0;&#x4E0A;final&#x5173;&#x952E;&#x5B57;&#x7B49;&#x3002;</p>
<p>&#x603B;&#x4E4B;&#xFF0C;&#x9AD8;&#x5185;&#x805A;&#x4F4E;&#x8026;&#x5408;&#xFF0C;&#x4E00;&#x4E2A;&#x7C7B;&#x5E94;&#x8BE5;&#x51CF;&#x5C11;&#x5BF9;&#x5916;&#x516C;&#x5F00;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x505A;&#x5230;&#x5373;&#x4F7F;&#x6539;&#x53D8;&#x4E5F;&#x4E0D;&#x4F1A;&#x5F71;&#x54CD;&#x5176;&#x4ED6;&#x7C7B;&#x3002;</p>
<h2 id="&#x5F00;&#x95ED;&#x539F;&#x5219;"><a href="#&#x5F00;&#x95ED;&#x539F;&#x5219;" class="headerlink" title="&#x5F00;&#x95ED;&#x539F;&#x5219;"></a>&#x5F00;&#x95ED;&#x539F;&#x5219;</h2><blockquote>
<p>Software entities like classes,modules and functions should be open for extension but closed for modifications.<br><br>&#x4E00;&#x4E2A;&#x8F6F;&#x4EF6;&#x5B9E;&#x4F53;&#x5982;&#x7C7B;&#x3001;&#x6A21;&#x5757;&#x548C;&#x51FD;&#x6570;&#x5E94;&#x8BE5;&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#xFF0C;&#x5BF9;&#x4FEE;&#x6539;&#x5173;&#x95ED;&#x3002;</p>
</blockquote>
<p>&#x5F00;&#x95ED;&#x539F;&#x5219;&#x5BF9;&#x6269;&#x5C55;&#x5F00;&#x653E;&#xFF0C;&#x5BF9;&#x4FEE;&#x6539;&#x5173;&#x95ED;&#xFF0C;&#x5E76;&#x4E0D;&#x610F;&#x5473;&#x7740;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#xFF0C;&#x4F4E;&#x5C42;&#x6A21;&#x5757;&#x7684;&#x53D8;&#x66F4;&#xFF0C;&#x5FC5;&#x7136;&#x8981;&#x6709;&#x9AD8;&#x5C42;&#x6A21;&#x5757;&#x8FDB;&#x884C;&#x8026;&#x5408;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x5B64;&#x7ACB;&#x65E0;&#x610F;&#x4E49;&#x7684;&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x3002;<br>cdq:&#x901A;&#x8FC7;&#x8986;&#x5199;&#x6765;&#x5B9E;&#x73B0;&#x65B0;&#x529F;&#x80FD;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4FEE;&#x6539;&#x3002;<br>&#x901A;&#x8FC7;&#x6269;&#x5C55;&#x6765;&#x5B9E;&#x73B0;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4FEE;&#x6539;&#x3002;</p>
<h1 id="23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5F52;&#x7C7B;"><a href="#23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5F52;&#x7C7B;" class="headerlink" title="23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5F52;&#x7C7B;"></a>23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5F52;&#x7C7B;</h1><h2 id="&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;"></a>&#x521B;&#x5EFA;&#x578B;&#x6A21;&#x5F0F;</h2><p>&#x8FD9;&#x4E9B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5728;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x540C;&#x65F6;&#x9690;&#x85CF;&#x521B;&#x5EFA;&#x903B;&#x8F91;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4F7F;&#x7528; new &#x8FD0;&#x7B97;&#x7B26;&#x76F4;&#x63A5;&#x5B9E;&#x4F8B;&#x5316;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x4F7F;&#x5F97;&#x7A0B;&#x5E8F;&#x5728;&#x5224;&#x65AD;&#x9488;&#x5BF9;&#x67D0;&#x4E2A;&#x7ED9;&#x5B9A;&#x5B9E;&#x4F8B;&#x9700;&#x8981;&#x521B;&#x5EFA;&#x54EA;&#x4E9B;&#x5BF9;&#x8C61;&#x65F6;&#x66F4;&#x52A0;&#x7075;&#x6D3B;&#x3002;     </p>
<p>-&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#xFF08;Factory Method Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;<br>-&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF08;Abstract Factory Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;<br>-&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#xFF08;Singleton Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;<br>-&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#xFF08;Builder Pattern&#xFF09;&#x2605;&#x2605;&#x2606;&#x2606;&#x2606;<br>-&#x539F;&#x578B;&#x6A21;&#x5F0F;&#xFF08;Prototype Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;</p>
<h2 id="&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;"></a>&#x7ED3;&#x6784;&#x578B;&#x6A21;&#x5F0F;</h2><p>&#x8FD9;&#x4E9B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x5173;&#x6CE8;&#x7C7B;&#x548C;&#x5BF9;&#x8C61;&#x7684;&#x7EC4;&#x5408;&#x3002;&#x7EE7;&#x627F;&#x7684;&#x6982;&#x5FF5;&#x88AB;&#x7528;&#x6765;&#x7EC4;&#x5408;&#x63A5;&#x53E3;&#x548C;&#x5B9A;&#x4E49;&#x7EC4;&#x5408;&#x5BF9;&#x8C61;&#x83B7;&#x5F97;&#x65B0;&#x529F;&#x80FD;&#x7684;&#x65B9;&#x5F0F;&#x3002;     </p>
<p>-&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Adapter Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;<br>-&#x6865;&#x63A5;&#x6A21;&#x5F0F;&#xFF08;Bridge Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;<br>-&#x8FC7;&#x6EE4;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Filter&#x3001;Criteria Pattern&#xFF09;<br>-&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#xFF08;Composite Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;<br>-&#x88C5;&#x9970;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Decorator Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;<br>-&#x5916;&#x89C2;&#x6A21;&#x5F0F;&#xFF08;Facade Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;<br>-&#x4EAB;&#x5143;&#x6A21;&#x5F0F;&#xFF08;Flyweight Pattern&#xFF09;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;<br>-&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#xFF08;Proxy Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;</p>
<h2 id="&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;"></a>&#x884C;&#x4E3A;&#x578B;&#x6A21;&#x5F0F;</h2><p>&#x8FD9;&#x4E9B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7279;&#x522B;&#x5173;&#x6CE8;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;     </p>
<p>-&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;&#xFF08;Chain of Responsibility Pattern&#xFF09;&#x2605;&#x2605;&#x2606;&#x2606;&#x2606;<br>-&#x547D;&#x4EE4;&#x6A21;&#x5F0F;&#xFF08;Command Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;<br>-&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Interpreter Pattern&#xFF09;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;<br>-&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Iterator Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;<br>-&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#xFF08;Mediator Pattern&#xFF09;&#x2605;&#x2605;&#x2606;&#x2606;&#x2606;<br>-&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;&#xFF08;Memento Pattern&#xFF09;&#x2605;&#x2605;&#x2606;&#x2606;&#x2606;<br>-&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#xFF08;Observer Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2605;<br>-&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#xFF08;State Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;<br>-&#x7A7A;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF08;Null Object Pattern&#xFF09;<br>-&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#xFF08;Strategy Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2605;&#x2606;<br>-&#x6A21;&#x677F;&#x6A21;&#x5F0F;&#xFF08;Template Pattern&#xFF09;&#x2605;&#x2605;&#x2605;&#x2606;&#x2606;<br>-&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#xFF08;Visitor Pattern&#xFF09;&#x2605;&#x2606;&#x2606;&#x2606;&#x2606;</p>
<h2 id="J2EE-&#x6A21;&#x5F0F;"><a href="#J2EE-&#x6A21;&#x5F0F;" class="headerlink" title="J2EE &#x6A21;&#x5F0F;"></a>J2EE &#x6A21;&#x5F0F;</h2><p>&#x8FD9;&#x4E9B;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x7279;&#x522B;&#x5173;&#x6CE8;&#x8868;&#x793A;&#x5C42;&#x3002;&#x8FD9;&#x4E9B;&#x6A21;&#x5F0F;&#x662F;&#x7531; Sun Java Center &#x9274;&#x5B9A;&#x7684;&#x3002;     </p>
<p>-MVC &#x6A21;&#x5F0F;&#xFF08;MVC Pattern&#xFF09;<br>-&#x4E1A;&#x52A1;&#x4EE3;&#x8868;&#x6A21;&#x5F0F;&#xFF08;Business Delegate Pattern&#xFF09;<br>-&#x7EC4;&#x5408;&#x5B9E;&#x4F53;&#x6A21;&#x5F0F;&#xFF08;Composite Entity Pattern&#xFF09;<br>-&#x6570;&#x636E;&#x8BBF;&#x95EE;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF08;Data Access Object Pattern&#xFF09;<br>-&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Front Controller Pattern&#xFF09;<br>-&#x62E6;&#x622A;&#x8FC7;&#x6EE4;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Intercepting Filter Pattern&#xFF09;<br>-&#x670D;&#x52A1;&#x5B9A;&#x4F4D;&#x5668;&#x6A21;&#x5F0F;&#xFF08;Service Locator Pattern&#xFF09;<br>-&#x4F20;&#x8F93;&#x5BF9;&#x8C61;&#x6A21;&#x5F0F;&#xFF08;Transfer Object Pattern&#xFF09;</p>
<h1 id="23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x89E3;&#x6790;"><a href="#23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x89E3;&#x6790;" class="headerlink" title="23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x89E3;&#x6790;"></a>23&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#x89E3;&#x6790;</h1><h2 id="&#x5355;&#x4F8B;&#x6A21;&#x5F0F;"><a href="#&#x5355;&#x4F8B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5355;&#x4F8B;&#x6A21;&#x5F0F;"></a>&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Ensure a class has only one instance, and provide a global point of access to it.<br><br>&#x786E;&#x4FDD;&#x67D0;&#x4E00;&#x4E2A;&#x7C7B;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x800C;&#x4E14;&#x81EA;&#x884C;&#x5B9E;&#x4F8B;&#x5316;&#x5E76;&#x5411;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x63D0;&#x4F9B;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F8B;&#x3002;</p>
</blockquote>
<p>Singleton&#x7C7B;&#x79F0;&#x4E3A;&#x5355;&#x4F8B;&#x7C7B;&#xFF0C;&#x901A;&#x8FC7;&#x4F7F;&#x7528;private&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x786E;&#x4FDD;&#x4E86;&#x5728;&#x4E00;&#x4E2A;&#x5E94;&#x7528;&#x4E2D;&#x53EA;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x4E14;&#x662F;&#x81EA;&#x884C;&#x5B9E;&#x4F8B;&#x5316;&#x7684;&#x3002;</p>
<p>&#x5E94;&#x7528;&#x6848;&#x4F8B;&#xFF1A;&#x603B;&#x7EBF;&#x6A21;&#x5F0F;&#x3002;</p>
<hr>
```cpp
#include <iostream>

<p>class Singleton<br>{<br>public:<br>    ~Singleton(){<br>        std::cout&lt;&lt;&#x201D;destructor called!&#x201D;&lt;&lt;std::endl;<br>    }<br>    Singleton(const Singleton&amp;)=delete;<br>    Singleton&amp; operator=(const Singleton&amp;)=delete;<br>    static Singleton&amp; get_instance(){<br>        static Singleton instance;<br>        return instance;</p>
<pre><code>}</code></pre><p>private:<br>    Singleton(){<br>        std::cout&lt;&lt;&#x201D;constructor called!&#x201D;&lt;&lt;std::endl;<br>    }<br>};</p>
<p>int main(int argc, char *argv[])<br>{<br>    Singleton&amp; instance_1 = Singleton::get_instance();<br>    Singleton&amp; instance_2 = Singleton::get_instance();<br>    return 0;<br>}</p>
<pre><code></code></pre><p>constructor called!<br>destructor called!</p>
<pre><code>
## &#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF1F;
&#x60F3;&#x60F3;&#x6211;&#x4EEC;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#xFF1F;&#x4E0B;&#x9762;&#x6211;&#x5C31;&#x7B80;&#x5355;&#x4E3E;&#x4F8B;&#x5B50;&#xFF1A;
&#x6587;&#x4EF6;IO&#x7684;&#x64CD;&#x4F5C;&#x6211;&#x4EEC;&#x4F1A;&#x7ECF;&#x5E38;&#x7528;&#x5F97;&#x5230;&#x5427;&#xFF0C;&#x6240;&#x4EE5;BufferedReader&#x5BF9;&#x8C61;&#x7ECF;&#x5E38;&#x8981;&#x521B;&#x5EFA;&#x7684;&#xFF1A;
```cpp
// &#x521B;&#x5EFA;&#x4E00;&#x4E2A;BufferedReader&#x5BF9;&#x8C61;
File file = new File(&quot;aa.txt&quot;);
FileReader fileReader = new FileReader(file);
BufferedReader bufferedReader = new BufferedReader(fileReader);</code></pre><p>&#x53EF;&#x4EE5;&#x770B;&#x51FA;&#x6765;&#xFF0C;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;BufferReader&#x5BF9;&#x8C61;&#x91CC;&#x9762;&#x9700;&#x8981;&#x4E00;&#x4E2A;FileReader&#x5BF9;&#x8C61;&#xFF0C;&#x800C;FileReader&#x5BF9;&#x8C61;&#x53C8;&#x8981;File&#x5BF9;&#x8C61;&#x3002;&#x90A3;&#x521B;&#x5EFA;&#x8FD9;&#x4E2A;BufferReader&#x5BF9;&#x8C61;&#x8FD8;&#x662F;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#x7684;(&#x4EE3;&#x7801;&#x4E0A;&#x770B;&#x4E0D;&#x9EBB;&#x70E6;&#xFF0C;&#x4ECE;&#x6784;&#x9020;&#x4E0A;&#x770B;&#x8FD8;&#x662F;&#x633A;&#x9EBB;&#x70E6;&#x7684;)&#xFF01;</p>
<p>&#x867D;&#x7136;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x4F46;&#x6211;&#x4EEC;&#x8FD8;&#x80FD;&#x7528;&#xFF0C;&#x80FD;&#x7528;&#x5C31;&#x884C;&#xFF01;&#x4E8E;&#x662F;&#x4E4E;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53BB;&#x5199;&#x4EE3;&#x7801;&#x4E86;&#xFF0C;&#x73B0;&#x5728;&#x6709;&#x4E09;&#x4E2A;&#x7C7B;&#x90FD;&#x8981;&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x7684;&#x8BFB;&#x5199;&#x64CD;&#x4F5C;&#xFF0C;&#x4E8E;&#x662F;&#x4ED6;&#x4EEC;&#x5C31;&#x6709;&#x8FD9;&#x6837;&#x7684;&#x4EE3;&#x7801;&#xFF1A;</p>
<pre class="line-numbers language-c"><code class="language-c">public class FileOperateA <span class="token punctuation">{</span>

    public <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>
        File file <span class="token operator">=</span> new <span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;aa.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader fileReader <span class="token operator">=</span> new <span class="token function">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufferedReader <span class="token operator">=</span> new <span class="token function">BufferedReader</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment" spellcheck="true">// &#x8BFB;&#x5199;&#x6587;&#x4EF6;....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6B64;&#x65F6;&#xFF1A;&#x4E0A;&#x5934;&#x8BF4;&#xFF0C;&#x6211;&#x8981;&#x6362;&#x6210;LineNumberReader&#x6765;&#x8BFB;&#x5199;&#xFF0C;&#x6709;&#x8FD9;&#x4E2A;&#x9700;&#x6C42;&#xFF01;&#x90A3;&#x6211;&#x4EEC;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5199;&#x4EE3;&#x7801;&#x7684;&#xFF0C;&#x80FD;&#x600E;&#x4E48;&#x529E;&#xFF1F;&#x5F88;&#x7EDD;&#x671B;&#x4E5F;&#x9700;&#x8981;&#x53BB;&#x5B8C;&#x6210;&#x5440;&#x3002;</p>
<ul>
<li>&#x4E0D;&#x719F;&#x6089;IDE&#x7684;&#x5C0F;&#x4F19;&#x5B50;&#x5C31;&#x4E00;&#x4E2A;&#x4E00;&#x4E2A;&#x5C06;BufferedReader&#x6539;&#x6210;LineNumberReader&#xFF0C;&#x73B0;&#x5728;&#x5C31;3&#x4E2A;&#x7C7B;&#x7528;&#x5230;&#x4E86;BufferedReader&#xFF0C;&#x4E5F;&#x5C31;&#x6539;6&#x6B21;&#x800C;&#x5DF2;&#x3002;(ps:&#x90A3;&#x5982;&#x679C;&#x5F88;&#x591A;&#x5730;&#x65B9;&#x90FD;&#x7528;&#x5230;&#x4E86;&#x5462;&#xFF1F;)</li>
<li>&#x719F;&#x6089;IDE&#x7684;&#x5C0F;&#x4F19;&#x5B50;&#x5C31;&#x5168;&#x5C40;&#x66FF;&#x6362;&#x91CD;&#x6784;&#xFF0C;&#x59A5;&#x59A5;&#x7684;&#xFF01;</li>
</ul>
<p>&#x90A3;&#x6709;&#x6CA1;&#x6709;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x80FD;&#x591F;&#x8BA9;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x53D8;&#x5F97;&#x7B80;&#x5355;&#x800C;&#x4E14;&#x4FEE;&#x6539;&#x5BF9;&#x8C61;&#x65F6;&#x80FD;&#x5F88;&#x65B9;&#x4FBF;&#x5462;&#xFF1F;<br>&#x5DE5;&#x5382;&#x6A21;&#x5F0F;&#x5C31;&#x884C;&#x4E86;&#x3002;</p>
<p>&#x518D;&#x8BF4;&#x4ECE;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x89D2;&#x5EA6;&#x6765;&#x770B;&#xFF1A;&#x6211;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x6587;&#x4EF6;&#x7684;&#x7C7B;&#x8FD8;&#x8981;&#x6211;&#x4F1A;&#x521B;&#x5EFA;BufferReader&#x662F;&#x4E0D;&#x662F;&#x6709;&#x70B9;&#x8FC7;&#x5206;&#x4E86;&#xFF1F;(&#x804C;&#x8D23;&#x6CA1;&#x6709;&#x5206;&#x5DE5;&#x597D;)<br>&#x4EA4;&#x7ED9;&#x5DE5;&#x5382;&#x6765;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x8FD9;&#x5C31;&#x5F88;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x4E86;&#xFF01;</p>
<p>&#x9996;&#x5148;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x5DE5;&#x5382;&#x7C7B;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x751F;&#x4EA7;Reader&#x5BF9;&#x8C61;&#xFF01;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">// &#x521B;&#x5EFA;Reader&#x5BF9;&#x8C61;&#x7684;&#x5DE5;&#x5382;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReaderFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Reader <span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">File</span><span class="token punctuation">(</span><span class="token string">&quot;aa.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">BufferedReader</span><span class="token punctuation">(</span>fileReader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> reader<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x90A3;&#x4E48;&#x6211;&#x4EEC;&#x8981;&#x5F97;&#x5230;BufferReader&#x5BF9;&#x8C61;&#x5C31;&#x8D3C;&#x7B80;&#x5355;&#x4E86;&#xFF1A;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileOperateA</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> throws FileNotFoundException <span class="token punctuation">{</span>


        <span class="token comment" spellcheck="true">//-------&#x6211;&#x6709;&#x5DE5;&#x5382;&#x4E86;&#xFF0C;&#x8FD8;&#x7528;&#x81EA;&#x5DF1;&#x641E;&#x5417;&#xFF1F;&#x4E0D;&#x7528;&#x4E86;&#xFF01;</span>
        <span class="token comment" spellcheck="true">//File file = new File(&quot;aa.txt&quot;);</span>
        <span class="token comment" spellcheck="true">//FileReader fileReader = new FileReader(file);</span>
        <span class="token comment" spellcheck="true">//BufferedReader bufferedReader = new BufferedReader(fileReader);</span>
        <span class="token comment" spellcheck="true">//-------&#x6211;&#x6709;&#x5DE5;&#x5382;&#x4E86;&#xFF0C;&#x8FD8;&#x7528;&#x81EA;&#x5DF1;&#x641E;&#x5417;&#xFF1F;&#x4E0D;&#x7528;&#x4E86;&#xFF01;</span>

        <span class="token comment" spellcheck="true">// &#x7528;&#x5DE5;&#x5382;&#x6765;&#x521B;&#x5EFA;&#x51FA;&#x5BF9;&#x8C61;</span>
        Reader reader <span class="token operator">=</span> ReaderFactory<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// &#x8BFB;&#x5199;&#x6587;&#x4EF6;....</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x5DE5;&#x5382;&#x5C06;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x7684;&#x5BF9;&#x8C61;&#x8FC7;&#x7A0B;&#x7ED9;&#x5C4F;&#x853D;&#x4E86;&#xFF01;</p>
<p>&#x6B64;&#x65F6;&#x6211;&#x8981;&#x6539;&#x6210;LineNumberReader&#x600E;&#x4E48;&#x73A9;&#xFF1F;&#x5728;&#x5DE5;&#x5382;&#x4E0A;&#x6539;&#x4E00;&#x4E0B;&#x5C31;&#x597D;&#x4E86;.</p>
<h2 id="&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;"><a href="#&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;"></a>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Define an interface for creating an object,but let subclasses decide which class to instantiate.Factory Method lets a class defer instantiation to subclasses.<br><br>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x8BA9;&#x5B50;&#x7C7B;&#x51B3;&#x5B9A;&#x5B9E;&#x4F8B;&#x5316;&#x54EA;&#x4E00;&#x4E2A;&#x7C7B;&#x3002;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x4F7F;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x5316;&#x5EF6;&#x8FDF;&#x5230;&#x5176;&#x5B50;&#x7C7B;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5973;&#x5A32;</p>
<p>IHuman&#xFF0C;&#x4EA7;&#x54C1;&#x63A5;&#x53E3;</p>
<p>CYellowHuman&#xFF0C;&#x4EA7;&#x54C1;&#x4E4B;&#x4E00;</p>
<p>CWhiteHuman&#xFF0C;&#x4EA7;&#x54C1;&#x4E4B;&#x4E8C;</p>
<p>CBlackHuman&#xFF0C;&#x4EA7;&#x54C1;&#x4E4B;&#x4E09;</p>
<p>IHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x63A5;&#x53E3;</p>
<p>CYellowHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x4E4B;&#x4E00;</p>
<p>CWhiteHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x4E4B;&#x4E8C;</p>
<p>CBlackHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x4E4B;&#x4E09;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573293086866.png?x-oss-process=image/resize,m_lfit,h_450" width="654" height="368" layout="responsive"></amp-img></div>
<p>IHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
class CYellowHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x5E78;&#x798F;&#x5440;&#xFF01;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CYellowHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x8BF4;&#x7684;&#x90FD;&#x662F;&#x53CC;&#x5B57;&#x8282;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
class CWhiteHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x4FB5;&#x7565;&#x7684;&#x7B11;&#x58F0;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CWhiteHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5355;&#x5B57;&#x8282;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
class CBlackHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x4F1A;&#x7B11;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlackHuman<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x53EF;&#x4EE5;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x4EBA;&#x542C;&#x4E0D;&#x61C2;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHuman.h&quot;</span></span>
class IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihumanfactory.h&quot;</span></span>
class CYellowHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowHuman.h&quot;</span></span>
CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CYellowHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihumanfactory.h&quot;</span></span>
class CWhiteHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteHuman.h&quot;</span></span>
CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CWhiteHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihumanfactory.h&quot;</span></span>
class CBlackHumanFactory <span class="token punctuation">:</span>
    public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHumanFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackHuman.h&quot;</span></span>
CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
IHuman <span class="token operator">*</span> CBlackHumanFactory<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> new <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NvWa.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x7B2C;&#x4E00;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x9EC4;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x9EC4;&#x79CD;&#x4EBA;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CYellowHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-&gt;</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x7B2C;&#x4E8C;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x767D;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x767D;&#x79CD;&#x4EBA;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CWhiteHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-&gt;</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoFactoryMethod3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x7B2C;&#x4E09;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x9ED1;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x9ED1;&#x79CD;&#x4EBA;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IHumanFactory <span class="token operator">*</span>pHumanFactory <span class="token operator">=</span> new <span class="token function">CBlackHumanFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IHuman <span class="token operator">*</span>pHuman <span class="token operator">=</span> pHumanFactory<span class="token operator">-&gt;</span><span class="token function">CreateHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pHuman<span class="token operator">-&gt;</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pHuman<span class="token punctuation">;</span>
    delete pHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x5DE5;&#x5382;&#x65B9;&#x6CD5;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DoFactoryMethod3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#xFF1A;
----------&#x7B2C;&#x4E00;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x9EC4;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x9EC4;&#x79CD;&#x4EBA;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x5E78;&#x798F;&#x5440;&#xFF01;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x8BF4;&#x7684;&#x90FD;&#x662F;&#x53CC;&#x5B57;&#x8282;
----------&#x7B2C;&#x4E8C;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x767D;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x767D;&#x79CD;&#x4EBA;
&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;
&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x4FB5;&#x7565;&#x7684;&#x7B11;&#x58F0;
&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5355;&#x5B57;&#x8282;
----------&#x7B2C;&#x4E09;&#x6279;&#x4EBA;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;&#x9ED1;&#x79CD;&#x4EBA;&#x5DE5;&#x5382;&#x6765;&#x751F;&#x4EA7;&#x9ED1;&#x79CD;&#x4EBA;
&#x9ED1;&#x4EBA;&#x4F1A;&#x54ED;
&#x9ED1;&#x4EBA;&#x4F1A;&#x7B11;
&#x9ED1;&#x4EBA;&#x53EF;&#x4EE5;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x4EBA;&#x542C;&#x4E0D;&#x61C2; </code></pre><h2 id="&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;"><a href="#&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;" class="headerlink" title="&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;"></a>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Provide an interface for creating families of related or dependent objects without specifying their concrete classes.<br><br>&#x4E3A;&#x521B;&#x5EFA;&#x4E00;&#x7EC4;&#x76F8;&#x5173;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x7684;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x4E14;&#x65E0;&#x987B;&#x6307;&#x5B9A;&#x5B83;&#x4EEC;&#x7684;&#x5177;&#x4F53;&#x7C7B;&#x3002;</p>
</blockquote>
<p>&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#xFF0C;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x521B;&#x5EFA;&#x4E00;&#x7CFB;&#x5217;&#x76F8;&#x5173;&#x6216;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x5BF9;&#x8C61;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x800C;&#x65E0;&#x9700;&#x6307;&#x5B9A;&#x5B83;&#x4EEC;&#x5177;&#x4F53;&#x7684;&#x7C7B;&#x3002;&#x5BF9;&#x4E8E;&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6765;&#x8BF4;&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x53EF;&#x5B9E;&#x73B0;&#x4E00;&#x7CFB;&#x5217;&#x4EA7;&#x54C1;&#x7684;&#x751F;&#x4EA7;&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x66F4;&#x6CE8;&#x91CD;&#x4EA7;&#x54C1;&#x7684;&#x7EC4;&#x5408;&#x3002;</p>
<hr>

<p>main()&#xFF0C;&#x5973;&#x5A32;</p>
<p>IHuman&#xFF0C;&#x4EA7;&#x54C1;&#x63A5;&#x53E3;</p>
<p>CYellowHuman&#xFF0C;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x4E4B;&#x4E00;</p>
<p>CYellowFemaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x4E00;</p>
<p>CYellowMaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x4E8C;</p>
<p>CWhiteHuman&#xFF0C;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x4E4B;&#x4E8C;</p>
<p>CWhiteFemaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x4E09;</p>
<p>CWhiteMaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x56DB;</p>
<p>CBlackHuman&#xFF0C;&#x62BD;&#x8C61;&#x4EA7;&#x54C1;&#x4E4B;&#x4E09;</p>
<p>CBlackFemaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x4E94;</p>
<p>CBlackMaleHuman&#xFF0C;&#x5177;&#x4F53;&#x4EA7;&#x54C1;&#x4E4B;&#x516D;</p>
<p>IHumanFactory&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;</p>
<p>CStandardHumanFactory&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x57FA;&#x7C7B;&#xFF08;&#x6B64;&#x7C7B;&#x53EF;&#x6709;&#x53EF;&#x65E0;&#xFF09;</p>
<p>CFemaleHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x4E4B;&#x4E00;</p>
<p>CMaleHumanFactory&#xFF0C;&#x5DE5;&#x5382;&#x4E4B;&#x4E8C;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573295669309.png?x-oss-process=image/resize,m_lfit,h_450" width="528" height="450" layout="responsive"></amp-img></div>
<p>IHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x5E78;&#x798F;&#x5440;&#xFF01;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x8BF4;&#x7684;&#x90FD;&#x662F;&#x53CC;&#x5B57;&#x8282;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;yellowhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowFemaleHuman <span class="token punctuation">:</span>
    public CYellowHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x9EC4;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x5973;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>YellowMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;yellowhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CYellowMaleHuman <span class="token punctuation">:</span>
    public CYellowHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CYellowMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CYellowMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x9EC4;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x7537;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x4FB5;&#x7565;&#x7684;&#x7B11;&#x58F0;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x767D;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x5355;&#x5B57;&#x8282;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;whitehuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteFemaleHuman <span class="token punctuation">:</span>
    public CWhiteHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x767D;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x5973;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//WhiteMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;whitehuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CWhiteMaleHuman <span class="token punctuation">:</span>
    public CWhiteHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWhiteMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CWhiteMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x767D;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x7537;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ihuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackHuman <span class="token punctuation">:</span>
    public IHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x4F1A;&#x7B11;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x4F1A;&#x54ED;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x9ED1;&#x4EBA;&#x53EF;&#x4EE5;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x4EBA;&#x542C;&#x4E0D;&#x61C2;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    virtual <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackFemaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;blackhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackFemaleHuman <span class="token punctuation">:</span>
    public CBlackHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackFemaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x9ED1;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x5973;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlackMaleHuman.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;blackhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
class CBlackMaleHuman <span class="token punctuation">:</span>
    public CBlackHuman
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlackMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token operator">~</span><span class="token function">CBlackMaleHuman</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BE5;&#x9ED1;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x7537;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHuman.h&quot;</span></span>
class IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IHuman <span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>MaleHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;StandardHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHumanFactory.h&quot;</span></span>
template<span class="token operator">&lt;</span>class T<span class="token operator">&gt;</span>
class CMaleHumanFactory <span class="token punctuation">:</span>
   public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CMaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">CMaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FemaleHumanFactory.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;standardhumanfactory.h&quot;</span></span>
template<span class="token operator">&lt;</span>class T<span class="token operator">&gt;</span>
class CFemaleHumanFactory <span class="token punctuation">:</span>
   public IHumanFactory
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CFemaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">CFemaleHumanFactory</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateWhiteHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   IHuman<span class="token operator">*</span> <span class="token function">CreateBlackHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token keyword">return</span> new T<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AbstractFactory.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;FemaleHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;MaleHumanFactory.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;yellowhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowFemaleHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;YellowMaleHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;whitehuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteFemaleHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;WhiteMaleHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;blackhuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackFemaleHuman.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlackMaleHuman.h&quot;</span></span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IHumanFactory<span class="token operator">*</span> pFemaleHumanFactory <span class="token operator">=</span> new CFemaleHumanFactory<span class="token operator">&lt;</span>CYellowFemaleHuman<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IHuman<span class="token operator">*</span> pYellowFemaleHuman <span class="token operator">=</span> pFemaleHumanFactory<span class="token operator">-&gt;</span><span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-&gt;</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-&gt;</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-&gt;</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowFemaleHuman<span class="token operator">-&gt;</span><span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pYellowFemaleHuman<span class="token punctuation">;</span>
   delete pFemaleHumanFactory<span class="token punctuation">;</span>

   IHumanFactory<span class="token operator">*</span> pMaleHumanFactory <span class="token operator">=</span> new CMaleHumanFactory<span class="token operator">&lt;</span>CYellowMaleHuman<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IHuman<span class="token operator">*</span> pYellowMaleHuman <span class="token operator">=</span> pMaleHumanFactory<span class="token operator">-&gt;</span><span class="token function">CreateYellowHuman</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-&gt;</span><span class="token function">Cry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-&gt;</span><span class="token function">Laugh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-&gt;</span><span class="token function">Talk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pYellowMaleHuman<span class="token operator">-&gt;</span><span class="token function">Sex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pYellowMaleHuman<span class="token punctuation">;</span>
   delete pMaleHumanFactory<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x5E78;&#x798F;&#x5440;&#xFF01;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x8BF4;&#x7684;&#x90FD;&#x662F;&#x53CC;&#x5B57;&#x8282;
&#x8BE5;&#x9EC4;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x5973;...
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x54ED;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x5927;&#x7B11;&#xFF0C;&#x5E78;&#x798F;&#x5440;&#xFF01;
&#x9EC4;&#x8272;&#x4EBA;&#x79CD;&#x4F1A;&#x8BF4;&#x8BDD;&#xFF0C;&#x4E00;&#x822C;&#x8BF4;&#x7684;&#x90FD;&#x662F;&#x53CC;&#x5B57;&#x8282;
&#x8BE5;&#x9EC4;&#x79CD;&#x4EBA;&#x7684;&#x6027;&#x522B;&#x4E3A;&#x7537;... </code></pre><h2 id="&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;"><a href="#&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;" class="headerlink" title="&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;"></a>&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Define the skeleton of an algorithm in an operation,deferring some steps to subclasses.Template Method lets subclasses redefine certain steps of an algorithm without changing the algorithm&#x2019;s structure.<br><br>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x4E2D;&#x7684;&#x7B97;&#x6CD5;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x800C;&#x5C06;&#x4E00;&#x4E9B;&#x6B65;&#x9AA4;&#x5EF6;&#x8FDF;&#x5230;&#x5B50;&#x7C7B;&#x4E2D;&#x3002;&#x4F7F;&#x5F97;&#x5B50;&#x7C7B;&#x53EF;&#x4EE5;&#x4E0D;&#x6539;&#x53D8;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x7684;&#x7ED3;&#x6784;&#x5373;&#x53EF;&#x91CD;&#x5B9A;&#x4E49;&#x8BE5;&#x7B97;&#x6CD5;&#x7684;&#x67D0;&#x4E9B;&#x7279;&#x5B9A;&#x6B65;&#x9AA4;&#x3002;</p>
</blockquote>
<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>CHummerModel&#xFF0C;&#x608D;&#x9A6C;&#x6A21;&#x578B;</p>
<p>CHummerH1Model&#xFF0C;&#x608D;&#x9A6C;&#x6A21;&#x578B;&#x578B;&#x53F7;1</p>
<p>CHummerH2Model&#xFF0C;&#x608D;&#x9A6C;&#x6A21;&#x578B;&#x578B;&#x53F7;2</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x5728;CHummerModel&#x58F0;&#x660E;Start&#x3001;Engineboom&#x3001;Alarm&#x3001;Stop&#x865A;&#x51FD;&#x6570;&#xFF0C;&#x7531;&#x6D3E;&#x751F;&#x7C7B;&#x5B9E;&#x73B0;&#x3002;&#x57FA;&#x7C7B;&#x7684;Run&#x8D1F;&#x8D23;&#x7EC4;&#x7EC7;&#x903B;&#x8F91;&#xFF0C;&#x5206;&#x522B;&#x8C03;&#x7528;&#x8FD9;&#x51E0;&#x4E2A;&#x6D3E;&#x751F;&#x7C7B;&#x5B9E;&#x73B0;&#x7684;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x57FA;&#x7C7B;&#x4E2D;&#x7684;Run&#x5E94;&#x8BE5;&#x7981;&#x6B62;&#x6D3E;&#x751F;&#x7C7B;&#x8986;&#x76D6;&#x3002;<br></p><div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573313617677.png?x-oss-process=image/resize,m_lfit,h_450" width="659" height="450" layout="responsive"></amp-img></div>
<p>HummerModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    virtual <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x5148;&#x53D1;&#x52A8;&#x6C7D;&#x8F66;</span>
    <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x5F15;&#x64CE;&#x5F00;&#x59CB;&#x8F70;&#x9E23;</span>
    <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x7136;&#x540E;&#x5C31;&#x5F00;&#x59CB;&#x8DD1;&#x4E86;&#xFF0C;&#x8DD1;&#x7684;&#x8FC7;&#x7A0B;&#x4E2D;&#x9047;&#x5230;&#x4E00;&#x6761;&#x72D7;&#x6321;&#x8DEF;&#xFF0C;&#x5C31;&#x6309;&#x5587;&#x53ED;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#x5C31;&#x505C;&#x8F66;</span>
    <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x94A9;&#x5B50;&#x65B9;&#x6CD5;&#xFF0C;&#x9ED8;&#x8BA4;&#x5587;&#x53ED;&#x662F;&#x4F1A;&#x54CD;&#x7684;</span>
    <span class="token keyword">return</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH1Model.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;hummermodel.h&quot;</span></span>
class CHummerH1Model <span class="token punctuation">:</span>
    public CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetAlarm</span><span class="token punctuation">(</span>bool tag<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    bool m_isAlarm<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH1Model.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerH1Model.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isAlarm <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H1&#x53D1;&#x52A8;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H1&#x505C;&#x8F66;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H1&#x9E23;&#x7B1B;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H1&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_isAlarm<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH1Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetAlarm</span><span class="token punctuation">(</span> bool tag <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_isAlarm <span class="token operator">=</span> tag<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH2Model.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;hummermodel.h&quot;</span></span>
class CHummerH2Model <span class="token punctuation">:</span>
    public CHummerModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HummerH2Model.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerH2Model.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H2&#x53D1;&#x52A8;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H2&#x505C;&#x8F66;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H2&#x9E23;&#x7B1B;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x608D;&#x9A6C;H2&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
bool CHummerH2Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsAlarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>TemplateMethod.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerH1Model.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HummerH2Model.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;crtdbg.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x5F00;&#x7740;H1&#x578B;&#x53F7;&#xFF0C;&#x51FA;&#x53BB;&#x905B;&#x5F2F;&#x4E86;</span>
    CHummerModel <span class="token operator">*</span>ph1 <span class="token operator">=</span> new <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph1<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph1<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x5F00;H2&#x578B;&#x53F7;&#xFF0C;&#x51FA;&#x53BB;&#x73A9;&#x800D;&#x4E86;</span>
    CHummerModel <span class="token operator">*</span>ph2 <span class="token operator">=</span> new <span class="token function">CHummerH2Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph2<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph2<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x5F00;&#x7740;H1&#x578B;&#x53F7;&#xFF0C;&#x51FA;&#x53BB;&#x905B;&#x5F2F;&#x4E86;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x8BA9;&#x5587;&#x53ED;&#x54CD;</span>
    CHummerH1Model <span class="token operator">*</span>ph11 <span class="token operator">=</span> new <span class="token function">CHummerH1Model</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph11<span class="token operator">-&gt;</span><span class="token function">SetAlarm</span><span class="token punctuation">(</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ph11<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete ph11<span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x608D;&#x9A6C;H1&#x53D1;&#x52A8;...
&#x608D;&#x9A6C;H1&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x608D;&#x9A6C;H1&#x9E23;&#x7B1B;
&#x608D;&#x9A6C;H1&#x505C;&#x8F66;...&#x608D;&#x9A6C;H2&#x53D1;&#x52A8;...&#x608D;&#x9A6C;H2&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x608D;&#x9A6C;H2&#x505C;&#x8F66;...&#x608D;&#x9A6C;H1&#x53D1;&#x52A8;...&#x608D;&#x9A6C;H1&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x608D;&#x9A6C;H1&#x505C;&#x8F66;...</code></pre><h2 id="&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;"><a href="#&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;"></a>&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Separate the construction of a complex object from its representation so that the same construction process can create different representations.<br><br>&#x5C06;&#x4E00;&#x4E2A;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x7684;&#x6784;&#x5EFA;&#x4E0E;&#x5B83;&#x7684;&#x8868;&#x793A;&#x5206;&#x79BB;&#xFF0C;&#x4F7F;&#x5F97;&#x540C;&#x6837;&#x7684;&#x6784;&#x5EFA;&#x8FC7;&#x7A0B;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x4E0D;&#x540C;&#x7684;&#x8868;&#x793A;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>CCarModel&#xFF0C;&#x4EA7;&#x54C1;&#x6A21;&#x578B;</p>
<p>CBenzModel&#xFF0C;&#x5954;&#x9A70;&#x6A21;&#x578B;</p>
<p>CBMWModel&#xFF0C;&#x5B9D;&#x9A6C;&#x6A21;&#x578B;</p>
<p>ICarBuilder&#xFF0C;&#x5EFA;&#x9020;&#x8005;&#x63A5;&#x53E3;</p>
<p>CBenzBuilder&#xFF0C;&#x5954;&#x9A70;&#x5EFA;&#x9020;&#x8005;</p>
<p>CBMWBuilder&#xFF0C;&#x5B9D;&#x9A6C;&#x5EFA;&#x9020;&#x8005;</p>
<p>CDirector&#xFF0C;&#x5BFC;&#x6F14;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;CCarModel&#x5B9E;&#x73B0;&#x6A21;&#x677F;&#x65B9;&#x6CD5;&#xFF0C;Builder&#x8D1F;&#x8D23;&#x5F00;&#x59CB;&#x5EFA;&#x9020;&#x4EA7;&#x54C1;&#x3002;&#x5EFA;&#x9020;&#x4EA7;&#x54C1;&#x65F6;&#xFF0C;&#x6784;&#x5EFA;&#x7684;&#x987A;&#x5E8F;&#x7531;Director&#x6216;main&#x51B3;&#x5B9A;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5EFA;&#x9020;&#x8005;&#x6A21;&#x5F0F;&#x548C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x975E;&#x5E38;&#x7C7B;&#x4F3C;&#x3002;&#x5EFA;&#x9020;&#x8005;&#x66F4;&#x91CD;&#x89C6;&#x4EA7;&#x54C1;&#x5EFA;&#x9020;&#x65F6;&#x7684;&#x903B;&#x8F91;&#x987A;&#x5E8F;&#xFF0C;&#x800C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x66F4;&#x91CD;&#x89C6;&#x751F;&#x4EA7;&#x51FA;&#x4E0D;&#x540C;&#x578B;&#x53F7;&#x7684;&#x4EA7;&#x54C1;&#xFF0C;&#x62BD;&#x8C61;&#x5DE5;&#x5382;&#x4E0D;&#x5173;&#x5FC3;&#x987A;&#x5E8F;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573314518993.png?x-oss-process=image/resize,m_lfit,h_450" width="470" height="450" layout="responsive"></amp-img></div>
<p>// Builder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CarModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Director.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">DoBenzRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x751F;&#x6210;&#x5954;&#x9A70;&#x6A21;&#x578B;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   CBenzModel<span class="token operator">*</span> pBenz <span class="token operator">=</span> new <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> seq<span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;engine boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x8981;&#x6C42;run&#x7684;&#x65F6;&#x5019;&#x5148;&#x53D1;&#x52A8;&#x5F15;&#x64CE;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x542F;&#x52A8;&#x8D77;&#x6765;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5F00;&#x4E86;&#x4E00;&#x6BB5;&#x5C31;&#x505C;&#x4E0B;&#x6765;</span>

   pBenz<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x540E;&#xFF0C;&#x7531;benzBuilder&#x548C;bmwBuilder&#x6765;&#x751F;&#x6210;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x7528;&#x540C;&#x6837;&#x7684;&#x521B;&#x5EFA;&#x987A;&#x5E8F;&#x3002;</span>
<span class="token keyword">void</span> <span class="token function">DoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x987A;&#x5E8F;&#xFF0C;&#x751F;&#x6210;&#x6A21;&#x578B;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> seq<span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;engine boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   seq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CBenzBuilder benzBuilder<span class="token punctuation">;</span>
   benzBuilder<span class="token punctuation">.</span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   CBenzModel<span class="token operator">*</span> pBenz <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>benzBuilder<span class="token punctuation">.</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CBMWBuilder bmwBuilder<span class="token punctuation">;</span>
   bmwBuilder<span class="token punctuation">.</span><span class="token function">SetSequence</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>seq<span class="token punctuation">)</span><span class="token punctuation">;</span>
   CBMWModel<span class="token operator">*</span> pBmw <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>bmwBuilder<span class="token punctuation">.</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBenz<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//&#x4F7F;&#x7528;&#x6307;&#x5BFC;&#x8005;&#x6765;&#x5C01;&#x88C5;&#x521B;&#x5EFA;&#x7684;&#x903B;&#x8F91;&#xFF0C;&#x628A;&#x521B;&#x5EFA;&#x7684;&#x987A;&#x5E8F;&#x5185;&#x805A;&#x5728;&#x6307;&#x5BFC;&#x8005;&#x7C7B;&#x91CC;&#x9762;&#x3002;</span>
<span class="token keyword">void</span> <span class="token function">DoDirector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x6279;&#x91CF;&#x751F;&#x6210;&#x6A21;&#x578B;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   CDirector director<span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//1W&#x8F86;A&#x7C7B;&#x578B;&#x7684;&#x5954;&#x9A70;&#x8F66;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//100W&#x8F86;B&#x7C7B;&#x578B;&#x7684;&#x5954;&#x9A70;&#x8F66;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//1000W&#x8F86;C&#x7C7B;&#x578B;&#x7684;&#x5B9D;&#x9A6C;&#x8F66;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
      director<span class="token punctuation">.</span><span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoBenzRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">DoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">DoDirector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CarModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    virtual <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span> m_pSequence<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CarModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CarModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCarModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSequence <span class="token operator">=</span> pSeq<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCarModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator it <span class="token operator">=</span> m_pSequence<span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">&lt;</span> m_pSequence<span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        string actionName <span class="token operator">=</span> <span class="token operator">*</span>it<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;alarm&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>actionName<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token string">&quot;engine boom&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;carmodel.h&quot;</span></span>
class CBenzModel <span class="token punctuation">:</span>
    public CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5954;&#x9A70;&#x53D1;&#x52A8;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5954;&#x9A70;&#x505C;&#x8F66;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5954;&#x9A70;&#x9E23;&#x7B1B;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5954;&#x9A70;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWModel.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;carmodel.h&quot;</span></span>
class CBMWModel <span class="token punctuation">:</span>
    public CCarModel
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWModel.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5B9D;&#x9A6C;&#x53D1;&#x52A8;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5B9D;&#x9A6C;&#x505C;&#x8F66;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Alarm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5B9D;&#x9A6C;&#x9E23;&#x7B1B;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWModel<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">EngineBoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5B9D;&#x9A6C;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICarBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CarModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ICarBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ICarBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pseq<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;icarbuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CarModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CBenzBuilder <span class="token punctuation">:</span>
    public ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CCarModel <span class="token operator">*</span>m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BenzBuilder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzModel.h&quot;</span></span>
CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenz <span class="token operator">=</span> new <span class="token function">CBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenz<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CCarModel <span class="token operator">*</span> CBenzBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pBenz<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWBuilder.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;icarbuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CarModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CBMWBuilder <span class="token punctuation">:</span>
    public ICarBuilder
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSequence</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCarModel <span class="token operator">*</span> <span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CCarModel <span class="token operator">*</span>m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BMWBuilder.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWModel.h&quot;</span></span>
CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBMW <span class="token operator">=</span> new <span class="token function">CBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSequence</span><span class="token punctuation">(</span> vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span>pSeq <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBMW<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>pSeq<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CCarModel <span class="token operator">*</span> CBMWBuilder<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pBMW<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Director.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWModel.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BenzBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BMWBuilder.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CDirector
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBenzModel <span class="token operator">*</span> <span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBenzModel <span class="token operator">*</span> <span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBMWModel <span class="token operator">*</span> <span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBMWModel <span class="token operator">*</span> <span class="token function">GetDBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">*</span> m_pSeqence<span class="token punctuation">;</span>
    CBenzBuilder <span class="token operator">*</span> m_pBenzBuilder<span class="token punctuation">;</span>
    CBMWBuilder <span class="token operator">*</span> m_pBMWBuilder<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Director.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Director.h&quot;</span></span>
CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pBenzBuilder <span class="token operator">=</span> new <span class="token function">CBenzBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBMWBuilder <span class="token operator">=</span> new <span class="token function">CBMWBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence <span class="token operator">=</span> new vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CDirector</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pBenzBuilder<span class="token punctuation">;</span>
    delete m_pBMWBuilder<span class="token punctuation">;</span>
    delete m_pSeqence<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetABenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m_pBenzBuilder<span class="token operator">-&gt;</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBenzModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetBBenzModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;engine boom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBenzModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m_pBenzBuilder<span class="token operator">-&gt;</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;alarm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;stop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBMWBuilder<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> static_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m_pBMWBuilder<span class="token operator">-&gt;</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CBMWModel <span class="token operator">*</span> CDirector<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetDBMWModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pSeqence<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pBenzBuilder<span class="token operator">-&gt;</span><span class="token function">SetSequence</span><span class="token punctuation">(</span>m_pSeqence<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dynamic_cast<span class="token operator">&lt;</span>CBMWModel<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>m_pBMWBuilder<span class="token operator">-&gt;</span><span class="token function">GetCarModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x987A;&#x5E8F;&#xFF0C;&#x751F;&#x6210;&#x6A21;&#x578B;----------
&#x5954;&#x9A70;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
&#x5954;&#x9A70;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
----------&#x6279;&#x91CF;&#x751F;&#x6210;&#x6A21;&#x578B;----------
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
&#x5954;&#x9A70;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
&#x5954;&#x9A70;&#x5F15;&#x64CE;&#x58F0;&#x97F3;&#x662F;&#x8FD9;&#x6837;....
&#x5954;&#x9A70;&#x53D1;&#x52A8;...
&#x5954;&#x9A70;&#x505C;&#x8F66;...
&#x5B9D;&#x9A6C;&#x9E23;&#x7B1B;
&#x5B9D;&#x9A6C;&#x53D1;&#x52A8;...
&#x5B9D;&#x9A6C;&#x505C;&#x8F66;...
&#x5B9D;&#x9A6C;&#x9E23;&#x7B1B;
&#x5B9D;&#x9A6C;&#x53D1;&#x52A8;...
&#x5B9D;&#x9A6C;&#x505C;&#x8F66;... </code></pre><h2 id="&#x4EE3;&#x7406;&#x6A21;&#x5F0F;"><a href="#&#x4EE3;&#x7406;&#x6A21;&#x5F0F;" class="headerlink" title="&#x4EE3;&#x7406;&#x6A21;&#x5F0F;"></a>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Provide a surrogate or placeholder for another object to control access to it.<br><br>&#x4E3A;&#x5176;&#x4ED6;&#x5BF9;&#x8C61;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x4EE3;&#x7406;&#x4EE5;&#x63A7;&#x5236;&#x5BF9;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x8BBF;&#x95EE;&#x3002;</p>
</blockquote>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1576996638986.png?x-oss-process=image/resize,m_lfit,h_450" width="458" height="277" layout="responsive"></amp-img></div>
<p>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x4E5F;&#x53EB;&#x505A;&#x59D4;&#x6258;&#x6A21;&#x5F0F;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x9879;&#x57FA;&#x672C;&#x8BBE;&#x8BA1;&#x6280;&#x5DE7;&#x3002;&#x8BB8;&#x591A;&#x5176;&#x4ED6;&#x7684;&#x6A21;&#x5F0F;&#xFF0C;&#x5982;&#x72B6;&#x6001;&#x6A21;&#x5F0F;&#x3001;&#x7B56;&#x7565;&#x6A21;&#x5F0F;&#x3001;&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;&#x672C;&#x8D28;&#x4E0A;&#x662F;&#x5728;&#x66F4;&#x7279;&#x6B8A;&#x7684;&#x573A;&#x5408;&#x91C7;&#x7528;&#x4E86;&#x59D4;&#x6258;&#x6A21;&#x5F0F;&#xFF0C;&#x800C;&#x4E14;&#x5728;&#x65E5;&#x5E38;&#x7684;&#x5E94;&#x7528;&#x4E2D;&#xFF0C;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x975E;&#x5E38;&#x597D;&#x7684;&#x8BBF;&#x95EE;&#x63A7;&#x5236;&#x3002;</p>
<p>&#x25CF; Subject&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x89D2;&#x8272;<br>&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x7C7B;&#x53EF;&#x4EE5;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x63A5;&#x53E3;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x6700;&#x666E;&#x901A;&#x7684;&#x4E1A;&#x52A1;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#xFF0C;&#x65E0;&#x7279;&#x6B8A;&#x8981;&#x6C42;&#x3002;</p>
<p>&#x25CF; RealSubject&#x5177;&#x4F53;&#x4E3B;&#x9898;&#x89D2;&#x8272;<br>&#x4E5F;&#x53EB;&#x505A;&#x88AB;&#x59D4;&#x6258;&#x89D2;&#x8272;&#x3001;&#x88AB;&#x4EE3;&#x7406;&#x89D2;&#x8272;&#xFF0C;&#x662F;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#x7684;&#x5177;&#x4F53;&#x6267;&#x884C;&#x8005;&#x3002;</p>
<p>&#x25CF; Proxy&#x4EE3;&#x7406;&#x4E3B;&#x9898;&#x89D2;&#x8272;<br>&#x4E5F;&#x53EB;&#x505A;&#x59D4;&#x6258;&#x7C7B;&#x3001;&#x4EE3;&#x7406;&#x7C7B;&#x3002;&#x5B83;&#x8D1F;&#x8D23;&#x5BF9;&#x771F;&#x5B9E;&#x89D2;&#x8272;&#x7684;&#x5E94;&#x7528;&#xFF0C;&#x628A;&#x6240;&#x6709;&#x62BD;&#x8C61;&#x4E3B;&#x9898;&#x7C7B;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x9650;&#x5236;&#x59D4;&#x6258;&#x7ED9;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x89D2;&#x8272;&#x5B9E;&#x73B0;&#xFF0C;&#x5E76;&#x4E14;&#x5728;&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x89D2;&#x8272;&#x5904;&#x7406;&#x5B8C;&#x6BD5;&#x524D;&#x540E;&#x505A;&#x9884;&#x5904;&#x7406;&#x548C;&#x5584;&#x540E;&#x5904;&#x7406;&#x5DE5;&#x4F5C;&#x3002;</p>
<p><code>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;&#xFF1A;</code><br>&#x25CF; &#x804C;&#x8D23;&#x6E05;&#x6670;<br>&#x771F;&#x5B9E;&#x7684;&#x89D2;&#x8272;&#x5C31;&#x662F;&#x5B9E;&#x73B0;&#x5B9E;&#x9645;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;&#x4E0D;&#x7528;&#x5173;&#x5FC3;&#x5176;&#x4ED6;&#x975E;&#x672C;&#x804C;&#x8D23;&#x7684;&#x4E8B;&#x52A1;&#xFF0C;&#x901A;&#x8FC7;&#x540E;&#x671F;&#x7684;&#x4EE3;&#x7406;&#x5B8C;&#x6210;&#x4E00;&#x4EF6;&#x4E8B;&#x52A1;&#xFF0C;&#x9644;&#x5E26;&#x7684;&#x7ED3;&#x679C;&#x5C31;&#x662F;&#x7F16;&#x7A0B;&#x7B80;&#x6D01;&#x6E05;&#x6670;&#x3002;</p>
<p>&#x25CF; &#x9AD8;&#x6269;&#x5C55;&#x6027;<br>&#x5177;&#x4F53;&#x4E3B;&#x9898;&#x89D2;&#x8272;&#x662F;&#x968F;&#x65F6;&#x90FD;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x5B83;&#x5B9E;&#x73B0;&#x4E86;&#x63A5;&#x53E3;&#xFF0C;&#x752D;&#x7BA1;&#x5B83;&#x5982;&#x4F55;&#x53D8;&#x5316;&#xFF0C;&#x90FD;&#x9003;&#x4E0D;&#x8131;&#x5982;&#x6765;&#x4F5B;&#x7684;&#x624B;&#x638C;&#xFF08;&#x63A5;&#x53E3;&#xFF09;&#xFF0C;&#x90A3;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7406;&#x7C7B;&#x5B8C;&#x5168;&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x505A;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x25CF; &#x667A;&#x80FD;&#x5316;<br>&#x8FD9;&#x5728;&#x6211;&#x4EEC;&#x4EE5;&#x4E0A;&#x7684;&#x8BB2;&#x89E3;&#x4E2D;&#x8FD8;&#x6CA1;&#x6709;&#x4F53;&#x73B0;&#x51FA;&#x6765;&#xFF0C;&#x4E0D;&#x8FC7;&#x5728;&#x6211;&#x4EEC;&#x4EE5;&#x4E0B;&#x7684;&#x52A8;&#x6001;&#x4EE3;&#x7406;&#x7AE0;&#x8282;&#x4E2D;&#x4F60;&#x5C31;&#x4F1A;&#x770B;&#x5230;&#x4EE3;&#x7406;&#x7684;&#x667A;&#x80FD;&#x5316;&#x6709;&#x5174;&#x8DA3;&#x7684;&#x8BFB;&#x8005;&#x4E5F;&#x53EF;&#x4EE5;&#x770B;&#x770B;Struts&#x662F;&#x5982;&#x4F55;&#x628A;&#x8868;&#x5355;&#x5143;&#x7D20;&#x6620;&#x5C04;&#x5230;&#x5BF9;&#x8C61;&#x4E0A;&#x7684;&#x3002;</p>
<p>&#x6211;&#x76F8;&#x4FE1;&#x7B2C;&#x4E00;&#x6B21;&#x63A5;&#x89E6;&#x5230;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x7684;&#x8BFB;&#x8005;&#x80AF;&#x5B9A;&#x5F88;&#x90C1;&#x95F7;&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x7528;&#x4EE3;&#x7406;&#x5440;&#xFF1F;&#x60F3;&#x60F3;&#x73B0;&#x5B9E;&#x4E16;&#x754C;&#x5427;&#xFF0C;&#x6253;&#x5B98;&#x53F8;&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x627E;&#x4E2A;&#x5F8B;&#x5E08;&#xFF1F;&#x56E0;&#x4E3A;&#x4F60;&#x4E0D;&#x60F3;&#x53C2;&#x4E0E;&#x4E2D;&#x95F4;&#x8FC7;&#x7A0B;&#x7684;&#x662F;&#x662F;&#x975E;&#x975E;&#xFF0C;&#x53EA;&#x8981;&#x5B8C;&#x6210;&#x81EA;&#x5DF1;&#x7684;&#x7B54;&#x8FA9;&#x5C31;&#x6210;&#xFF0C;&#x5176;&#x4ED6;&#x7684;&#x6BD4;&#x5982;&#x4E8B;&#x524D;&#x8C03;&#x67E5;&#x3001;&#x4E8B;&#x540E;&#x8FFD;&#x67E5;&#x90FD;&#x7531;&#x5F8B;&#x5E08;&#x6765;&#x641E;&#x5B9A;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x4E3A;&#x4E86;&#x51CF;&#x8F7B;&#x4F60;&#x7684;&#x8D1F;&#x62C5;&#x3002;</p>
<p><strong>&#x4E2A;&#x4EBA;&#x7406;&#x89E3;&#xFF1A;</strong><br>&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#x5E94;&#x8BE5;&#x662F;&#x7ED9;&#x4F20;&#x5165;&#x7684;&#x5BF9;&#x8C61;&#x7EDF;&#x4E00;&#x9644;&#x52A0;&#x5176;&#x4ED6;&#x529F;&#x80FD;&#xFF08;&#x51FD;&#x6570;&#xFF09;&#x3002;</p>
<hr>

<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">//&#x4E3B;&#x9898;&#x7C7B;</span>
class Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
&#x3000;&#x3000;virtual <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
&#x3000;&#x3000;virtual <span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
&#x3000;&#x3000;virtual <span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5177;&#x4F53;&#x4EE3;&#x7406;&#x7684;&#x4EFB;&#x52A1;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//&#x771F;&#x5B9E;&#x4E3B;&#x9898;&#x7C7B;</span>
class ConcreteSubject<span class="token punctuation">:</span>public Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
&#x3000;&#x3000;<span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;<span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;<span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//&#x4EE3;&#x7406;&#x7C7B;</span>
class Proxy<span class="token punctuation">:</span>public Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
&#x3000;&#x3000;<span class="token function">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;<span class="token function">Proxy</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> _sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;<span class="token operator">~</span><span class="token function">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

&#x3000;&#x3000;<span class="token keyword">void</span> <span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//&#x5B9E;&#x73B0;&#x5BF9;&#x59D4;&#x6258;&#x8005;&#x7684;&#x59D4;&#x6258;&#x4EFB;&#x52A1;&#x6267;&#x884C;&#x4E0E;&#x8865;&#x507F;</span>
&#x3000;&#x3000;<span class="token punctuation">{</span>
&#x3000;&#x3000;&#x3000;&#x3000;<span class="token function">bef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;&#x3000;&#x3000;this<span class="token operator">-&gt;</span>_sub<span class="token operator">-&gt;</span><span class="token function">Request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;&#x3000;&#x3000;<span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
&#x3000;&#x3000;<span class="token punctuation">}</span>

&#x3000;&#x3000;<span class="token keyword">void</span> <span class="token function">bef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
&#x3000;&#x3000;<span class="token punctuation">{</span><span class="token punctuation">}</span>

&#x3000;&#x3000;<span class="token keyword">void</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
&#x3000;&#x3000;<span class="token punctuation">{</span><span class="token punctuation">}</span>

private<span class="token punctuation">:</span>
&#x3000;&#x3000;Subject<span class="token operator">*</span> _sub<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x539F;&#x578B;&#x6A21;&#x5F0F;"><a href="#&#x539F;&#x578B;&#x6A21;&#x5F0F;" class="headerlink" title="&#x539F;&#x578B;&#x6A21;&#x5F0F;"></a>&#x539F;&#x578B;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Specify the kinds of objects to create using a prototypical instance,and create new objects by copying this prototype.<br><br>&#x7528;&#x539F;&#x578B;&#x5B9E;&#x4F8B;&#x6307;&#x5B9A;&#x521B;&#x5EFA;&#x5BF9;&#x8C61;&#x7684;&#x79CD;&#x7C7B;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x62F7;&#x8D1D;&#x8FD9;&#x4E9B;&#x539F;&#x578B;&#x521B;&#x5EFA;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<h2 id="&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;"><a href="#&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;" class="headerlink" title="&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;"></a>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Define an object that encapsulates how a set of objects interact.Mediator promotes loose coupling by keeping objects from referring to each other explicitly,and it lets you vary their interaction independently.<br><br>&#x7528;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x5BF9;&#x8C61;&#x5C01;&#x88C5;&#x4E00;&#x7CFB;&#x5217;&#x7684;&#x5BF9;&#x8C61;&#x4EA4;&#x4E92;&#xFF0C;&#x4E2D;&#x4ECB;&#x8005;&#x4F7F;&#x5404;&#x5BF9;&#x8C61;&#x4E0D;&#x9700;&#x8981;&#x663E;&#x793A;&#x5730;&#x76F8;&#x4E92;&#x4F5C;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x5176;&#x8026;&#x5408;&#x677E;&#x6563;&#xFF0C;&#x800C;&#x4E14;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x6539;&#x53D8;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x4EA4;&#x4E92;&#x3002;</p>
</blockquote>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/dfg.jpg?x-oss-process=image/resize,m_lfit,h_450" width="643" height="450" layout="responsive"></amp-img></div><br>&#x4ECE;&#x7C7B;&#x56FE;&#x4E2D;&#x770B;&#xFF0C;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7531;&#x4EE5;&#x4E0B;&#x51E0;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;<br>&#x25CF; Mediator &#x62BD;&#x8C61;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;<br>&#x62BD;&#x8C61;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;&#x5B9A;&#x4E49;&#x7EDF;&#x4E00;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7528;&#x4E8E;&#x5404;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x4E4B;&#x95F4;&#x7684;&#x901A;&#x4FE1;&#x3002;<br>&#x25CF; Concrete Mediator &#x5177;&#x4F53;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;<br>&#x5177;&#x4F53;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;&#x901A;&#x8FC7;&#x534F;&#x8C03;&#x5404;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x5B9E;&#x73B0;&#x534F;&#x4F5C;&#x884C;&#x4E3A;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x5FC5;&#x987B;&#x4F9D;&#x8D56;&#x4E8E;&#x5404;&#x4E2A;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x3002;<br>&#x25CF; Colleague &#x540C;&#x4E8B;&#x89D2;&#x8272;<br>&#x6BCF;&#x4E00;&#x4E2A;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x90FD;&#x77E5;&#x9053;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;&#xFF0C;&#x800C;&#x4E14;&#x4E0E;&#x5176;&#x4ED6;&#x7684;&#x540C;&#x4E8B;&#x89D2;&#x8272;&#x901A;&#x4FE1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E00;&#x5B9A;&#x8981;&#x901A;&#x8FC7;&#x4E2D;&#x4ECB;&#x8005;&#x89D2;&#x8272;&#x534F;&#x4F5C;&#x3002;&#x6BCF;&#x4E2A;&#x540C;&#x4E8B;&#x7C7B;&#x7684;&#x884C;&#x4E3A;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;&#x4E00;&#x79CD;&#x662F;&#x540C;&#x4E8B;&#x672C;&#x8EAB;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x6BD4;&#x5982;&#x6539;&#x53D8;&#x5BF9;&#x8C61;&#x672C;&#x8EAB;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5904;&#x7406;&#x81EA;&#x5DF1;&#x7684;&#x884C;&#x4E3A;&#x7B49;&#xFF0C;&#x8FD9;&#x79CD;&#x884C;&#x4E3A;&#x53EB;&#x505A;&#x81EA;&#x53D1;&#x884C;&#x4E3A;&#xFF08;Self-Method&#xFF09;&#xFF0C;&#x4E0E;&#x5176;&#x4ED6;&#x7684;&#x540C;&#x4E8B;&#x7C7B;&#x6216;&#x4E2D;&#x4ECB;&#x8005;&#x6CA1;&#x6709;&#x4EFB;&#x4F55;&#x7684;&#x4F9D;&#x8D56;&#xFF1B;&#x7B2C;&#x4E8C;&#x79CD;&#x662F;&#x5FC5;&#x987B;&#x4F9D;&#x8D56;&#x4E2D;&#x4ECB;&#x8005;&#x624D;&#x80FD;&#x5B8C;&#x6210;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x53EB;&#x505A;&#x4F9D;&#x8D56;&#x65B9;&#x6CD5;&#xFF08;Dep-Method&#xFF09;&#x3002;
<p><strong>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;</strong><br>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;&#x5C31;&#x662F;&#x51CF;&#x5C11;&#x7C7B;&#x95F4;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x628A;&#x539F;&#x6709;&#x7684;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x4F9D;&#x8D56;&#x53D8;&#x6210;&#x4E86;&#x4E00;&#x5BF9;&#x4E00;&#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x540C;&#x4E8B;&#x7C7B;&#x53EA;&#x4F9D;&#x8D56;&#x4E2D;&#x4ECB;&#x8005;&#xFF0C;&#x51CF;&#x5C11;&#x4E86;&#x4F9D;&#x8D56;&#xFF0C;&#x5F53;&#x7136;&#x540C;&#x65F6;&#x4E5F;&#x964D;&#x4F4E;&#x4E86;&#x7C7B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x3002;</p>
<p><strong>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x7F3A;&#x70B9;</strong><br>&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x7F3A;&#x70B9;&#x5C31;&#x662F;&#x4E2D;&#x4ECB;&#x8005;&#x4F1A;&#x81A8;&#x80C0;&#x5F97;&#x5F88;&#x5927;&#xFF0C;&#x800C;&#x4E14;&#x903B;&#x8F91;&#x590D;&#x6742;&#xFF0C;&#x539F;&#x672C;N&#x4E2A;&#x5BF9;&#x8C61;&#x76F4;&#x63A5;&#x7684;&#x76F8;&#x4E92;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x8F6C;&#x6362;&#x4E3A;&#x4E2D;&#x4ECB;&#x8005;&#x548C;&#x540C;&#x4E8B;&#x7C7B;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x540C;&#x4E8B;&#x7C7B;&#x8D8A;&#x591A;&#xFF0C;&#x4E2D;&#x4ECB;&#x8005;&#x7684;&#x903B;&#x8F91;&#x5C31;&#x8D8A;&#x590D;&#x6742;&#x3002;</p>
<p><strong>MVC&#x6846;&#x67B6;</strong><br>&#x5927;&#x5BB6;&#x90FD;&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x8FC7;Struts&#xFF0C;MVC&#x6846;&#x67B6;&#xFF0C;&#x5176;&#x4E2D;&#x7684;C&#xFF08;Controller&#xFF09;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x4E2D;&#x4ECB;&#x8005;&#xFF0C;&#x53EB;&#x505A;&#x524D;&#x7AEF;&#x63A7;&#x5236;&#x5668;(Front Controller)&#xFF0C;&#x5B83;&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x662F;&#x628A;M(Model&#xFF0C;&#x4E1A;&#x52A1;&#x903B;&#x8F91;)&#x548C;V&#xFF08;View&#xFF0C;&#x89C6;&#x56FE;&#xFF09;&#x9694;&#x79BB;&#x5F00;&#xFF0C;&#x534F;&#x8C03;M&#x548C;V&#x534F;&#x540C;&#x5DE5;&#x4F5C;&#xFF0C;&#x628A;M&#x8FD0;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x548C;V&#x4EE3;&#x8868;&#x7684;&#x89C6;&#x56FE;&#x878D;&#x5408;&#x6210;&#x4E00;&#x4E2A;&#x524D;&#x7AEF;&#x53EF;&#x4EE5;&#x5C55;&#x793A;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x51CF;&#x5C11;M&#x548C;V&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x3002;MVC&#x6846;&#x67B6;&#x5DF2;&#x7ECF;&#x6210;&#x4E3A;&#x4E00;&#x4E2A;&#x975E;&#x5E38;&#x6D41;&#x884C;&#x3001;&#x6210;&#x719F;&#x7684;&#x5F00;&#x53D1;&#x6846;&#x67B6;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;&#x7684;&#x4E00;&#x4E2A;&#x4F53;&#x73B0;&#x3002;</p>
<hr>

<p>main.cpp</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Colleague</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague<span class="token operator">*</span> colleague<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">virtual</span> <span class="token operator">~</span><span class="token function">Mediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Colleague</span> <span class="token punctuation">{</span>
<span class="token keyword">protected</span><span class="token operator">:</span>
    Mediator<span class="token operator">*</span> mediator<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">Colleague</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span> mediator <span class="token operator">=</span> m<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague1</span> <span class="token operator">:</span> <span class="token keyword">public</span> Colleague <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Colleague</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediator<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ConcreteColleague1 received: &quot;</span> <span class="token operator">&lt;&lt;</span> message <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteColleague2</span> <span class="token operator">:</span> <span class="token keyword">public</span> Colleague <span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>Mediator<span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Colleague</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mediator<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Send</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span>string message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ConcreteColleague2 received: &quot;</span> <span class="token operator">&lt;&lt;</span> message <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConcreteMediator</span> <span class="token operator">:</span> <span class="token keyword">public</span> Mediator <span class="token punctuation">{</span>
<span class="token keyword">private</span><span class="token operator">:</span>
    ConcreteColleague1<span class="token operator">*</span> c1<span class="token punctuation">;</span>
    ConcreteColleague2<span class="token operator">*</span> c2<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>ConcreteColleague1<span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> c1 <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>ConcreteColleague2<span class="token operator">*</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> c2 <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//&#x901A;&#x8FC7;colleague&#x4F20;&#x5165;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x7136;&#x540E;&#x9009;&#x62E9;&#x884C;&#x4E3A;&#x3002;</span>
    <span class="token keyword">void</span> <span class="token function">Send</span><span class="token punctuation">(</span>string message<span class="token punctuation">,</span> Colleague<span class="token operator">*</span> colleague<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>colleague <span class="token operator">==</span> c1<span class="token punctuation">)</span> c2<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> c1<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Notify</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ConcreteMediator<span class="token operator">*</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteMediator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x8BA9;&#x540C;&#x4E8B;&#x8BA4;&#x8BC6;&#x4E2D;&#x4ECB;</span>
    ConcreteColleague1<span class="token operator">*</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague1</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ConcreteColleague2<span class="token operator">*</span> c2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">ConcreteColleague2</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x8BA9;&#x4E2D;&#x4ECB;&#x8BA4;&#x8BC6;&#x540C;&#x4E8B;</span>
    m<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set</span><span class="token punctuation">(</span>c2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    c1<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// ConcreteColleague2 received: Hello</span>
    c2<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">Send</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// ConcreteColleague1 received: World</span>

    <span class="token keyword">delete</span> m<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> c1<span class="token punctuation">;</span>
    <span class="token keyword">delete</span> c2<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">g++ main.cpp
./a.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>ConcreteColleague2 received: Hello
ConcreteColleague1 received: World</code></pre><p>&#x4E3A;&#x4EC0;&#x4E48;&#x540C;&#x4E8B;&#x7C7B;&#x8981;&#x4F7F;&#x7528;&#x6784;&#x9020;&#x51FD;&#x6570;&#x6CE8;&#x5165;&#x4E2D;&#x4ECB;&#x8005;&#xFF0C;&#x800C;&#x4E2D;&#x4ECB;&#x8005;&#x4F7F;&#x7528;getter/setter&#x65B9;&#x5F0F;&#x6CE8;&#x5165;&#x540C;&#x4E8B;&#x7C7B;&#x5462;&#xFF1F;&#x8FD9;&#x662F;&#x56E0;&#x4E3A;&#x540C;&#x4E8B;&#x7C7B;&#x5FC5;&#x987B;&#x6709;&#x4E2D;&#x4ECB;&#x8005;&#xFF0C;&#x800C;&#x4E2D;&#x4ECB;&#x8005;&#x5374;&#x53EF;&#x4EE5;&#x53EA;&#x6709;&#x90E8;&#x5206;&#x540C;&#x4E8B;&#x7C7B;&#x3002;</p>
<h2 id="&#x547D;&#x4EE4;&#x6A21;&#x5F0F;"><a href="#&#x547D;&#x4EE4;&#x6A21;&#x5F0F;" class="headerlink" title="&#x547D;&#x4EE4;&#x6A21;&#x5F0F;"></a>&#x547D;&#x4EE4;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Encapsulate a request as an object,thereby letting you parameterize clients with different requests,queue or log requests,and support undoable operations.<br><br>&#x5C06;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF0C;&#x4ECE;&#x800C;&#x8BA9;&#x4F60;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8BF7;&#x6C42;&#x628A;&#x5BA2;&#x6237;&#x7AEF;&#x53C2;&#x6570;&#x5316;&#xFF0C;&#x5BF9;&#x8BF7;&#x6C42;&#x6392;&#x961F;&#x6216;&#x8005;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x65E5;&#x5FD7;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x547D;&#x4EE4;&#x7684;&#x64A4;&#x9500;&#x548C;&#x6062;&#x590D;&#x529F;&#x80FD;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237; </p>
<p>CInvoker&#xFF0C;&#x547D;&#x4EE4;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x5982;&#x9879;&#x76EE;&#x7ECF;&#x7406; </p>
<p>IGroup&#xFF0C;&#x6267;&#x884C;&#x8005;&#x63A5;&#x53E3; </p>
<p>CRequirementGroup&#xFF0C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x8005;&#x4E4B;&#x4E00;</p>
<p>CPageGroup&#xFF0C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x8005;&#x4E4B;&#x4E8C;</p>
<p>CCodePage&#xFF0C;&#x5B9E;&#x9645;&#x6267;&#x884C;&#x8005;&#x4E4B;&#x4E09;</p>
<p>ICommand&#xFF0C;&#x547D;&#x4EE4;&#x63A5;&#x53E3;</p>
<p>CAddRequirementCommand&#xFF0C;Execute&#x51FD;&#x6570;&#xFF0C;&#x5C06;&#x8C03;&#x7528;CRequirementGroup&#x7684;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#x3002;&#x6765;&#x7EC4;&#x5408;&#x6267;&#x884C;&#x7528;&#x6237;&#x53D1;&#x51FA;&#x7684;&#x547D;&#x4EE4;&#x3002;</p>
<p>CDeletePageCommand&#xFF0C;&#x540C;&#x4E0A;</p>
<p>&#x2026; &#x2026; &#x5176;&#x5B83;&#x547D;&#x4EE4;&#x3002;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x5BA2;&#x6237;&#x53EA;&#x9700;&#x8981;&#x77E5;&#x9053;&#x5411;Invoker&#x53D1;&#x51FA;&#x547D;&#x4EE4;&#xFF08;&#x591A;&#x4E2A;&#x547D;&#x4EE4;&#xFF09;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x5C06;&#x547D;&#x4EE4;&#x76F4;&#x63A5;&#x4F20;&#x8FBE;&#x7ED9;&#x5177;&#x4F53;&#x7684;&#x6267;&#x884C;&#x8005;&#x3002;&#x5F53;&#x7136;&#xFF0C;&#x5BA2;&#x6237;&#x662F;&#x9700;&#x8981;&#x77E5;&#x9053;&#x90FD;&#x6709;&#x4EC0;&#x4E48;&#x547D;&#x4EE4;&#x7684;&#x3002; </p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x5BA2;&#x6237;&#x53EA;&#x53D1;&#x547D;&#x4EE4;&#xFF0C;&#x4E0D;&#x9700;&#x8981;&#x77E5;&#x9053;&#x7531;&#x8C01;&#x6765;&#x6267;&#x884C;&#x548C;&#x600E;&#x4E48;&#x6267;&#x884C;&#xFF0C;&#x4F53;&#x73B0;&#x51FA;&#x9AD8;&#x5185;&#x805A;&#x7684;&#x7279;&#x70B9;&#x3002;&#x7528;&#x6237;&#x5728;&#x53D1;&#x51FA;&#x547D;&#x4EE4;&#x540E;&#xFF0C;&#x662F;&#x5141;&#x8BB8;&#x64A4;&#x56DE;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x53EF;&#x4EE5;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x547D;&#x4EE4;&#x201C;Undo &#x201D;&#xFF0C;Undo&#x662F;&#x72B6;&#x6001;&#x7684;&#x53D8;&#x66F4;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573316999566.png?x-oss-process=image/resize,m_lfit,h_450" width="328" height="450" layout="responsive"></amp-img></div>
<p>Invoker.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ICommand.h&quot;</span></span>
class CInvoker
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetCommand</span><span class="token punctuation">(</span>ICommand <span class="token operator">*</span>pcommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ICommand <span class="token operator">*</span>m_pCommand<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Invoker.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Invoker.h&quot;</span></span>
CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CInvoker</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetCommand</span><span class="token punctuation">(</span> ICommand <span class="token operator">*</span>pcommand <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pCommand <span class="token operator">=</span> pcommand<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CInvoker<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pCommand<span class="token operator">-&gt;</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RequirementGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;igroup.h&quot;</span></span>
class CRequirementGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RequirementGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RequirementGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x627E;&#x5230;&#x9700;&#x6C42;&#x7EC4;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x9700;&#x6C42;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x9879;&#x9700;&#x6C42;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x4FEE;&#x6539;&#x4E00;&#x9879;&#x9700;&#x6C42;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CRequirementGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9700;&#x6C42;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PageGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;igroup.h&quot;</span></span>
class CPageGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>PageGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;PageGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x627E;&#x5230;&#x7F8E;&#x5DE5;&#x7EC4;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x9875;&#x9762;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x9875;&#x9762;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x9875;&#x9762;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CPageGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9875;&#x9762;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CodeGroup.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;igroup.h&quot;</span></span>
class CCodeGroup <span class="token punctuation">:</span>
    public IGroup
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CodeGroup.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CodeGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x627E;&#x5230;&#x4EE3;&#x7801;&#x7EC4;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x529F;&#x80FD;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x9879;&#x529F;&#x80FD;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x4FEE;&#x6539;&#x4E00;&#x9879;&#x529F;&#x80FD;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CCodeGroup<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x4EE3;&#x7801;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RequirementGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;PageGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CodeGroup.h&quot;</span></span>
class ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ICommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        m_prg <span class="token operator">=</span> new <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_ppg <span class="token operator">=</span> new <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_pcg <span class="token operator">=</span> new <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ICommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        delete m_prg<span class="token punctuation">;</span>
        delete m_ppg<span class="token punctuation">;</span>
        delete m_pcg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    CRequirementGroup <span class="token operator">*</span>m_prg<span class="token punctuation">;</span>
    CPageGroup <span class="token operator">*</span>m_ppg<span class="token punctuation">;</span>
    CCodeGroup <span class="token operator">*</span>m_pcg<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AddRequirementCommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;icommand.h&quot;</span></span>
class CAddRequirementCommand <span class="token punctuation">:</span>
    public ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>AddRequirementCommand.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;AddRequirementCommand.h&quot;</span></span>
CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CAddRequirementCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x6267;&#x884C;&#x589E;&#x53E6;&#x4E00;&#x9879;&#x9700;&#x6C42;&#x7684;&#x547D;&#x4EE4;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-&gt;</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x589E;&#x52A0;&#x4E00;&#x4EFD;&#x9700;&#x6C42;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x7ED9;&#x51FA;&#x8BA1;&#x5212;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_prg<span class="token operator">-&gt;</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DeletePageCommand.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;icommand.h&quot;</span></span>
class CDeletePageCommand <span class="token punctuation">:</span>
    public ICommand
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>DeletePageCommand.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;DeletePageCommand.h&quot;</span></span>
CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CDeletePageCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x6267;&#x884C;&#x589E;&#x53E6;&#x4E00;&#x9879;&#x9700;&#x6C42;&#x7684;&#x547D;&#x4EE4;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-&gt;</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x589E;&#x52A0;&#x4E00;&#x4EFD;&#x9700;&#x6C42;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-&gt;</span><span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x7ED9;&#x51FA;&#x8BA1;&#x5212;</span>
    this<span class="token operator">-&gt;</span>ICommand<span class="token punctuation">:</span><span class="token punctuation">:</span>m_ppg<span class="token operator">-&gt;</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Command.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CodeGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;PageGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RequirementGroup.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Invoker.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;AddRequirementCommand.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;DeletePageCommand.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x60F3;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x9700;&#x6C42;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>rg <span class="token operator">=</span> new <span class="token function">CRequirementGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-&gt;</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rg<span class="token operator">-&gt;</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete rg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x53C8;&#x60F3;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x9875;&#x9762;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>pg <span class="token operator">=</span> new <span class="token function">CPageGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-&gt;</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pg<span class="token operator">-&gt;</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x53C8;&#x60F3;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x529F;&#x80FD;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    IGroup <span class="token operator">*</span>cg <span class="token operator">=</span> new <span class="token function">CCodeGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-&gt;</span><span class="token function">Find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cg<span class="token operator">-&gt;</span><span class="token function">Plan</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete cg<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x89C9;&#x5F97;&#x70E6;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x53EA;&#x627E;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x5E76;&#x544A;&#x8BC9;&#x4ED6;&#x8981;&#x505A;&#x4EC0;&#x4E48;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x9700;&#x6C42;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CInvoker gary<span class="token punctuation">;</span>
    ICommand <span class="token operator">*</span>pcommand <span class="token operator">=</span> new <span class="token function">CAddRequirementCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gary<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span>pcommand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gary<span class="token punctuation">.</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pcommand<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x60F3;&#x8981;&#x6539;&#x52A8;&#x53EA;&#x9700;&#x8981;&#x627E;CInvoker&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x9875;&#x9762;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CInvoker ricky<span class="token punctuation">;</span>
    ICommand <span class="token operator">*</span>pcommand2 <span class="token operator">=</span> new <span class="token function">CDeletePageCommand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ricky<span class="token punctuation">.</span><span class="token function">SetCommand</span><span class="token punctuation">(</span>pcommand2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ricky<span class="token punctuation">.</span><span class="token function">Action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pcommand2<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x539F;&#x6765;&#x7684;&#x8FD0;&#x884C;&#x6D41;&#x7A0B;</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x89C9;&#x5F97;&#x9EBB;&#x70E6;&#x4E86;&#xFF0C;&#x6BCF;&#x6B21;&#x6539;&#x52A8;&#x90FD;&#x8981;&#x627E;&#x4E0D;&#x540C;&#x7684;&#x7EC4;&#xFF0C;&#x8C08;&#x4E0D;&#x540C;&#x7684;&#x4E8B;</span>
    <span class="token comment" spellcheck="true">//&#x5BA2;&#x6237;&#x53EA;&#x60F3;&#x627E;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x544A;&#x8BC9;&#x4ED6;&#x8981;&#x505A;&#x4EC0;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#xFF0C;&#x4E0D;&#x60F3;&#x5173;&#x5FC3;&#x7531;&#x54EA;&#x51E0;&#x4E2A;&#x7EC4;&#x6765;&#x505A;&#x548C;&#x600E;&#x4E48;&#x505A;</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x5BA2;&#x6237;&#x60F3;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x9700;&#x6C42;----------
&#x627E;&#x5230;&#x9700;&#x6C42;&#x7EC4;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x9700;&#x6C42;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9700;&#x6C42;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...
----------&#x5BA2;&#x6237;&#x53C8;&#x60F3;&#x4FEE;&#x6539;&#x4E00;&#x4E2A;&#x9875;&#x9762;---------
&#x627E;&#x5230;&#x7F8E;&#x5DE5;&#x7EC4;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x4E2A;&#x9875;&#x9762;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9875;&#x9762;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...
----------&#x5BA2;&#x6237;&#x53C8;&#x60F3;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x529F;&#x80FD;----------
&#x627E;&#x5230;&#x4EE3;&#x7801;&#x7EC4;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x529F;&#x80FD;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x4EE3;&#x7801;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...
----------&#x5BA2;&#x6237;&#x89C9;&#x5F97;&#x70E6;&#x4E86;&#xFF0C;&#x5E0C;&#x671B;&#x53EA;&#x627E;&#x4E00;&#x4E2A;&#x4EBA;&#xFF0C;&#x5E76;&#x544A;&#x8BC9;&#x4ED6;&#x8981;&#x505A;&#x4EC0;&#x4E48;----------
----------&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x9700;&#x6C42;----------
&#x627E;&#x5230;&#x9700;&#x6C42;&#x7EC4;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x589E;&#x52A0;&#x4E00;&#x9879;&#x9700;&#x6C42;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9700;&#x6C42;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...
----------&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x9875;&#x9762;----------
&#x627E;&#x5230;&#x7F8E;&#x5DE5;&#x7EC4;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x5220;&#x9664;&#x4E00;&#x4E2A;&#x9875;&#x9762;...
&#x5BA2;&#x6237;&#x8981;&#x6C42;&#x9875;&#x9762;&#x53D8;&#x66F4;&#x8BA1;&#x5212;...  </code></pre><h2 id="&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;"><a href="#&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;" class="headerlink" title="&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;"></a>&#x8D23;&#x4EFB;&#x94FE;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Avoid coupling the sender of a request to its receiver by giving more than one object a chance to handle the request.Chain the receiving objects and pass the request along the chain until an object handles it.<br><br>&#x4F7F;&#x591A;&#x4E2A;&#x5BF9;&#x8C61;&#x90FD;&#x6709;&#x673A;&#x4F1A;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;&#x8BF7;&#x6C42;&#x7684;&#x53D1;&#x9001;&#x8005;&#x548C;&#x63A5;&#x53D7;&#x8005;&#x4E4B;&#x95F4;&#x7684;&#x8026;&#x5408;&#x5173;&#x7CFB;&#x3002;&#x5C06;&#x8FD9;&#x4E9B;&#x5BF9;&#x8C61;&#x8FDE;&#x6210;&#x4E00;&#x6761;&#x94FE;&#xFF0C;&#x5E76;&#x6CBF;&#x7740;&#x8FD9;&#x6761;&#x94FE;&#x4F20;&#x9012;&#x8BE5;&#x8BF7;&#x6C42;&#xFF0C;&#x76F4;&#x5230;&#x6709;&#x5BF9;&#x8C61;&#x5904;&#x7406;&#x5B83;&#x4E3A;&#x6B62;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>IWomen&#xFF0C;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x8005;&#x63A5;&#x53E3;</p>
<p>CWomen&#xFF0C;&#x8BF7;&#x6C42;&#x8005;&#x5B9E;&#x73B0;&#x7C7B;</p>
<p>CHandler&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x62BD;&#x8C61;&#x7C7B;</p>
<p>CFather&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x8D23;&#x4EFB;&#x94FE;&#x4E4B;&#x4E00;</p>
<p>CHusband&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x8D23;&#x4EFB;&#x94FE;&#x4E4B;&#x4E8C;</p>
<p>CSon&#xFF0C;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x8D23;&#x4EFB;&#x94FE;&#x4E4B;&#x4E09;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;CHandler&#x62BD;&#x8C61;&#x7C7B;&#x8D1F;&#x8D23;&#x805A;&#x5408;&#x8D23;&#x4EFB;&#x94FE;&#x4E4B;&#x4E2D;&#x7684;&#x5176;&#x5B83;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x7528;SetNext&#x6765;&#x5EFA;&#x7ACB;&#x8FD9;&#x4E2A;&#x8D23;&#x4EFB;&#x94FE;&#x3002;HandleMessage&#x5728;&#x5904;&#x7406;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4F1A;&#x5224;&#x65AD;&#x662F;&#x5426;&#x662F;&#x81EA;&#x5DF1;&#x8981;&#x5904;&#x7406;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5219;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x662F;&#xFF0C;&#x5219;&#x67E5;&#x627E;&#x4E0B;&#x4E00;&#x4E2A;&#x8D23;&#x4EFB;&#x94FE;&#x4E0A;&#x7684;&#x5904;&#x7406;&#x5BF9;&#x8C61;&#xFF0C;&#x627E;&#x5230;&#x4E86;&#x5219;&#x7531;&#x4E0B;&#x4E00;&#x4E2A;&#x5904;&#x7406;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573345715766.png?x-oss-process=image/resize,m_lfit,h_450" width="822" height="450" layout="responsive"></amp-img></div>
<p>IWomen.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IWomen
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">int</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//Women.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iwomen.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CWomen <span class="token punctuation">:</span>
    public IWomen
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">int</span> _type<span class="token punctuation">,</span> string _request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_type<span class="token punctuation">;</span>
    string m_request<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>//Women.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Women.h&quot;</span></span>
CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CWomen</span><span class="token punctuation">(</span> <span class="token keyword">int</span> _type<span class="token punctuation">,</span> string _request <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_type <span class="token operator">=</span> _type<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_type<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5973;&#x513F;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x59BB;&#x5B50;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6BCD;&#x4EB2;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span>m_request<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CWomen<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_request<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Handler.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IWomen.h&quot;</span></span>
class CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">int</span> _level<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">HandleMessage</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetNext</span><span class="token punctuation">(</span>CHandler <span class="token operator">*</span>phandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_level<span class="token punctuation">;</span>
    CHandler <span class="token operator">*</span>m_pNextHandler<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Handler.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Handler.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">int</span> _level <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_level</span><span class="token punctuation">(</span>_level<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pNextHandler <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pwomen<span class="token operator">-&gt;</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> this<span class="token operator">-&gt;</span>m_level<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        this<span class="token operator">-&gt;</span><span class="token function">Response</span><span class="token punctuation">(</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_pNextHandler <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
            this<span class="token operator">-&gt;</span>m_pNextHandler<span class="token operator">-&gt;</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x6CA1;&#x5730;&#x65B9;&#x8BF7;&#x793A;&#x4E86;&#xFF0C;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF01;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHandler<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetNext</span><span class="token punctuation">(</span> CHandler <span class="token operator">*</span>phandler <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pNextHandler <span class="token operator">=</span> phandler<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Father.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;handler.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IWomen.h&quot;</span></span>
class CFather <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Father.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Father.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CFather</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFather<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5973;&#x513F;&#x5411;&#x7236;&#x4EB2;&#x8BF7;&#x793A;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-&gt;</span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7236;&#x4EB2;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Husband.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;handler.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IWomen.h&quot;</span></span>
class CHusband <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Husband.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Husband.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHusband<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x59BB;&#x5B50;&#x5411;&#x4E08;&#x592B;&#x8BF7;&#x793A;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-&gt;</span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x4E08;&#x592B;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Son.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;handler.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IWomen.h&quot;</span></span>
class CSon <span class="token punctuation">:</span>
    public CHandler
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Response</span><span class="token punctuation">(</span>IWomen <span class="token operator">*</span>pwomen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Son.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Son.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CHandler</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CSon</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Response</span><span class="token punctuation">(</span> IWomen <span class="token operator">*</span>pwomen <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x6BCD;&#x4EB2;&#x5411;&#x513F;&#x5B50;&#x8BF7;&#x793A;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> pwomen<span class="token operator">-&gt;</span><span class="token function">GetRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x513F;&#x5B50;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// ChainofResponsibility.cpp </p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IWomen.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Women.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Handler.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Father.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Husband.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Son.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//cout &lt;&lt; &quot;----------&#x539F;&#x6765;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;----------&quot; &lt;&lt; endl;</span>
   INormalWomen<span class="token operator">*</span> pwomen <span class="token operator">=</span> new <span class="token function">CNormalWomen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x6211;&#x8981;&#x51FA;&#x53BB;&#x901B;&#x8857;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> pfather <span class="token operator">=</span> new <span class="token function">CNormalFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> phusband <span class="token operator">=</span> new <span class="token function">CNormalHusband</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   INormalHandler<span class="token operator">*</span> pson <span class="token operator">=</span> new <span class="token function">CNormalSon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">If</span> <span class="token punctuation">(</span>pwomen<span class="token operator">-&gt;</span><span class="token function">GetType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; &quot;&#x5973;&#x513F;&#x5411;&#x7236;&#x4EB2;&#x8BF7;&#x793A;&#xFF1A;&quot; &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   pfather-&gt;HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else if (pwomen-&gt;GetType() == 2)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; &quot;&#x59BB;&#x5B50;&#x5411;&#x4E08;&#x592B;&#x8BF7;&#x793A;&#xFF1A;&quot; &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   phusband-&gt;HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else if (pwomen-&gt;GetType() == 3)</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   cout &lt;&lt; &quot;&#x6BCD;&#x4EB2;&#x5411;&#x513F;&#x5B50;&#x8BF7;&#x793A;&#xFF1A;&quot; &lt;&lt; endl;</span>
   <span class="token comment" spellcheck="true">//   pson-&gt;HandleMessage(pwomen);</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//else</span>
   <span class="token comment" spellcheck="true">//{</span>
   <span class="token comment" spellcheck="true">//   //&#x4EC0;&#x4E48;&#x4E5F;&#x4E0D;&#x505A;</span>
   <span class="token comment" spellcheck="true">//}</span>
   <span class="token comment" spellcheck="true">//delete pwomen;</span>
   <span class="token comment" spellcheck="true">//delete pfather;</span>
   <span class="token comment" spellcheck="true">//delete phusband;</span>
   <span class="token comment" spellcheck="true">//delete pson;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x540E;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   Handler<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Handler<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> IWomen<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Women<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Women<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> Father<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Father<span class="token punctuation">,</span>cpp<span class="token punctuation">,</span> Husband<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Husband<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> Son<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Son<span class="token punctuation">.</span>cpp
   IWomen<span class="token operator">*</span> pwomen1 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x6211;&#x8981;&#x51FA;&#x53BB;&#x901B;&#x8857;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen2 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x6211;&#x8981;&#x51FA;&#x53BB;&#x5403;&#x996D;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen3 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x6211;&#x4E5F;&#x8981;&#x51FA;&#x53BB;&#x5403;&#x996D;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   IWomen<span class="token operator">*</span> pwomen4 <span class="token operator">=</span> new <span class="token function">CWomen</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x6211;&#x4E5F;&#x8981;&#x51FA;&#x53BB;&#x901B;&#x8857;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   CHandler<span class="token operator">*</span> pfather <span class="token operator">=</span> new <span class="token function">CFather</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   CHandler<span class="token operator">*</span> phusband <span class="token operator">=</span> new <span class="token function">CHusband</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   CHandler<span class="token operator">*</span> pson <span class="token operator">=</span> new <span class="token function">CSon</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   pfather<span class="token operator">-&gt;</span><span class="token function">SetNext</span><span class="token punctuation">(</span>phusband<span class="token punctuation">)</span><span class="token punctuation">;</span>
   phusband<span class="token operator">-&gt;</span><span class="token function">SetNext</span><span class="token punctuation">(</span>pson<span class="token punctuation">)</span><span class="token punctuation">;</span>

   pfather<span class="token operator">-&gt;</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen1<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-&gt;</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen2<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-&gt;</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen3<span class="token punctuation">)</span><span class="token punctuation">;</span>
   pfather<span class="token operator">-&gt;</span><span class="token function">HandleMessage</span><span class="token punctuation">(</span>pwomen4<span class="token punctuation">)</span><span class="token punctuation">;</span>

   delete pfather<span class="token punctuation">;</span>
   delete phusband<span class="token punctuation">;</span>
   delete pson<span class="token punctuation">;</span>
   delete pwomen1<span class="token punctuation">;</span>
   delete pwomen2<span class="token punctuation">;</span>
   delete pwomen3<span class="token punctuation">;</span>
   delete pwomen4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//&#x53CD;&#x9762;</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment" spellcheck="true">//&#x8981;&#x5B9E;&#x73B0;&#x903B;&#x8F91;&#x5224;&#x65AD;&#xFF0C;&#x5373;&#x5973;&#x6027;&#x7684;&#x8BF7;&#x6C42;&#x5148;&#x53D1;&#x9001;&#x5230;&#x7236;&#x4EB2;&#x7C7B;&#xFF0C;&#x7236;&#x4EB2;&#x7C7B;&#x4E00;&#x770B;&#x662F;&#x81EA;&#x5DF1;&#x8981;&#x5904;&#x7406;&#x7684;&#xFF0C;&#x5C31;&#x56DE;&#x5E94;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;&#x5982;&#x679C;&#x5973;&#x513F;&#x5DF2;&#x7ECF;&#x51FA;&#x5AC1;&#x4E86;&#xFF0C;&#x90A3;&#x5C31;&#x628A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x8F6C;&#x53D1;&#x5230;&#x5973;&#x5A7F;&#x7C7B;&#x6765;&#x5904;&#x7406;&#x3002;&#x4F9D;&#x6B64;&#x7C7B;&#x63A8;&#xFF0C;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x4E2A;&#x8D23;&#x4EFB;&#x94FE;&#x3002;</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x540E;&#x7684;&#x5904;&#x7406;&#x65B9;&#x5F0F;----------
&#x5973;&#x513F;&#x5411;&#x7236;&#x4EB2;&#x8BF7;&#x793A;&#xFF1A;
&#x5973;&#x513F;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&#x6211;&#x8981;&#x51FA;&#x53BB;&#x901B;&#x8857;
&#x7236;&#x4EB2;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;
&#x59BB;&#x5B50;&#x5411;&#x4E08;&#x592B;&#x8BF7;&#x793A;&#xFF1A;
&#x59BB;&#x5B50;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&#x6211;&#x8981;&#x51FA;&#x53BB;&#x5403;&#x996D;
&#x4E08;&#x592B;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;
&#x6BCD;&#x4EB2;&#x5411;&#x513F;&#x5B50;&#x8BF7;&#x793A;&#xFF1A;
&#x6BCD;&#x4EB2;&#x7684;&#x8BF7;&#x6C42;&#x662F;&#xFF1A;&#x6211;&#x4E5F;&#x8981;&#x51FA;&#x53BB;&#x5403;&#x996D;
&#x513F;&#x5B50;&#x7684;&#x7B54;&#x590D;&#x662F;&#xFF1A;&#x540C;&#x610F;
----------&#x6CA1;&#x5730;&#x65B9;&#x8BF7;&#x793A;&#x4E86;&#xFF0C;&#x4E0D;&#x505A;&#x5904;&#x7406;&#xFF01;----------    </code></pre><h2 id="&#x88C5;&#x9970;&#x6A21;&#x5F0F;"><a href="#&#x88C5;&#x9970;&#x6A21;&#x5F0F;" class="headerlink" title="&#x88C5;&#x9970;&#x6A21;&#x5F0F;"></a>&#x88C5;&#x9970;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Attach additional responsibilities to an object dynamically keeping the same interface.Decorators provide a flexible alternative to subclassing for extending functionality.<br><br>&#x52A8;&#x6001;&#x5730;&#x7ED9;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6DFB;&#x52A0;&#x4E00;&#x4E9B;&#x989D;&#x5916;&#x7684;&#x804C;&#x8D23;&#x3002;&#x5C31;&#x589E;&#x52A0;&#x529F;&#x80FD;&#x6765;&#x8BF4;&#xFF0C;&#x88C5;&#x9970;&#x6A21;&#x5F0F;&#x76F8;&#x6BD4;&#x751F;&#x6210;&#x5B50;&#x7C7B;&#x66F4;&#x4E3A;&#x7075;&#x6D3B;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x8001;&#x7238;</p>
<p>ISchoolReport&#xFF0C;&#x6210;&#x7EE9;&#x5355;&#x63A5;&#x53E3;</p>
<p>CFourthGradeSchoolReport&#xFF0C;&#x56DB;&#x5E74;&#x7EA7;&#x6210;&#x7EE9;&#x5355;</p>
<p>ReportDecorator&#xFF0C;&#x6210;&#x7EE9;&#x5355;&#x88C5;&#x9970;&#x5668;&#x57FA;&#x7C7B;</p>
<p>HighScoreDecorator&#xFF0C;&#x6700;&#x9AD8;&#x5206;&#x88C5;&#x9970;&#x5668;</p>
<p>SortDecorator&#xFF0C;&#x73ED;&#x7EA7;&#x6392;&#x540D;&#x88C5;&#x9970;&#x5668;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x5BF9;&#x201C;&#x56DB;&#x5E74;&#x7EA7;&#x6210;&#x7EE9;&#x5355;&#x201D;&#x8FDB;&#x884C;&#x88C5;&#x9970;&#xFF0C;ReportDecorator&#x5FC5;&#x7136;&#x6709;&#x4E00;&#x4E2A;private&#x53D8;&#x91CF;&#x6307;&#x5411;ISchoolReport&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573318043354.png?x-oss-process=image/resize,m_lfit,h_450" width="611" height="450" layout="responsive"></amp-img></div>
<p>// Decorator.cpp<br>//&#x4E3B;&#x7A0B;&#x5E8F;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ISchoolReport.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;FouthGradeSchoolReport.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;FouthGradeSchoolReport.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HighScoreDecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;SortDecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   ISchoolReport<span class="token operator">*</span> psr <span class="token operator">=</span> new <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   psr<span class="token operator">-&gt;</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x770B;&#x6210;&#x7EE9;&#x5355;</span>
   psr<span class="token operator">-&gt;</span><span class="token function">Sign</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8001;&#x4E09;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5F88;&#x5F00;&#x5FC3;&#xFF0C;&#x5C31;&#x7B7E;&#x5B57;&#x4E86;</span>
   delete psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5206;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x88C5;&#x9970;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   ISchoolReport<span class="token operator">*</span> psr <span class="token operator">=</span> new <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x539F;&#x88C5;&#x6210;&#x7EE9;&#x5355;</span>
   <span class="token comment" spellcheck="true">//</span>
   ISchoolReport<span class="token operator">*</span> pssr <span class="token operator">=</span> new <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x53C8;&#x52A0;&#x4E86;&#x6210;&#x7EE9;&#x6392;&#x540D;&#x7684;&#x8BF4;&#x660E;</span>
   ISchoolReport<span class="token operator">*</span> phsr <span class="token operator">=</span> new <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>pssr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x52A0;&#x4E86;&#x6700;&#x9AD8;&#x5206;&#x8BF4;&#x660E;&#x7684;&#x6210;&#x7EE9;&#x5355;</span>
   phsr<span class="token operator">-&gt;</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x770B;&#x6210;&#x7EE9;&#x5355;</span>
   phsr<span class="token operator">-&gt;</span><span class="token function">Sign</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8001;&#x4E09;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5F88;&#x5F00;&#x5FC3;&#xFF0C;&#x5C31;&#x7B7E;&#x5B57;&#x4E86;</span>

   <span class="token comment" spellcheck="true">//&#x5148;&#x88C5;&#x9970;&#x54EA;&#x4E2A;&#x4E0D;&#x91CD;&#x8981;&#xFF0C;&#x987A;&#x5E8F;&#x5DF2;&#x7ECF;&#x5728;&#x88C5;&#x9970;&#x5185;&#x90E8;&#x786E;&#x5B9A;&#x597D;&#xFF0C;&#x4F46;&#x4E00;&#x5B9A;&#x8981;&#x8C03;&#x7528;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x88C5;&#x9970;&#x5668;&#x7684;&#x63A5;&#x53E3;&#x3002;</span>
   ISchoolReport <span class="token operator">*</span>phsr <span class="token operator">=</span> new <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x52A0;&#x4E86;&#x6700;&#x9AD8;&#x5206;&#x8BF4;&#x660E;&#x7684;&#x6210;&#x7EE9;&#x5355;</span>
   ISchoolReport <span class="token operator">*</span>pssr <span class="token operator">=</span> new <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>phsr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x53C8;&#x52A0;&#x4E86;&#x6210;&#x7EE9;&#x6392;&#x540D;&#x7684;&#x8BF4;&#x660E;</span>
   <span class="token comment" spellcheck="true">//pssr-&gt;Report();//&#x770B;&#x6210;&#x7EE9;&#x5355;</span>
   <span class="token comment" spellcheck="true">//pssr-&gt;Sign(&quot;&#x8001;&#x4E09;&quot;);//&#x5F88;&#x5F00;&#x5FC3;&#xFF0C;&#x5C31;&#x7B7E;&#x5B57;&#x4E86;</span>

   delete pssr<span class="token punctuation">;</span>
   delete phsr<span class="token punctuation">;</span>
   delete psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//&#x5728;&#x88C5;&#x9970;&#x4E4B;&#x524D;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;&#x7EE7;&#x627F;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x6765;&#x8FDB;&#x884C;&#x7B80;&#x5355;&#x7684;&#x4FEE;&#x9970;</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//&#x4F46;&#x5982;&#x679C;&#x9700;&#x8981;&#x4FEE;&#x9970;&#x7684;&#x9879;&#x76EE;&#x592A;&#x591A;&#x5462;&#xFF1F;&#x6216;&#x8005;&#x88C5;&#x9970;&#x7684;&#x9879;&#x76EE;&#x4E0D;&#x662F;&#x56FA;&#x5B9A;&#x7684;&#xFF0C;&#x7EE7;&#x627F;&#x663E;&#x7136;&#x4F1A;&#x53D8;&#x5F97;&#x66F4;&#x590D;&#x6742;</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ISchoolReport.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ISchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">ISchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FouthGradeSchoolReport.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ischoolreport.h&quot;</span></span>
class CFouthGradeSchoolReport <span class="token punctuation">:</span>
    public ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>FouthGradeSchoolReport.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;FouthGradeSchoolReport.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CFouthGradeSchoolReport</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5C0A;&#x656C;&#x7684;XXX&#x5BB6;&#x957F;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;......&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8BED;&#x6587;62  &#x6570;&#x5B66;65  &#x4F53;&#x80B2;98  &#x81EA;&#x7136;63&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;......&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;                &#x5BB6;&#x957F;&#x7B7E;&#x540D;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CFouthGradeSchoolReport<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5BB6;&#x957F;&#x7B7E;&#x540D;&#x4E3A;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> name<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ReportDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ischoolreport.h&quot;</span></span>
class CReportDecorator <span class="token punctuation">:</span>
    public ISchoolReport
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Sign</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ISchoolReport <span class="token operator">*</span>m_pSchoolReport<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ReportDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ReportDecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pSchoolReport <span class="token operator">=</span> psr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CReportDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pSchoolReport<span class="token operator">-&gt;</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Sign</span><span class="token punctuation">(</span> string name <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pSchoolReport<span class="token operator">-&gt;</span><span class="token function">Sign</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HighScoreDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;reportdecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ISchoolReport.h&quot;</span></span>
class CHighScoreDecorator <span class="token punctuation">:</span>
    public CReportDecorator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>HighScoreDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;HighScoreDecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span> ISchoolReport <span class="token operator">*</span>psr <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHighScoreDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span><span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHighScoreDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ReportHighScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x6B21;&#x8003;&#x8BD5;&#x8BED;&#x6587;&#x6700;&#x9AD8;&#x662F;75&#xFF0C; &#x6570;&#x5B66;&#x662F;78&#xFF0C; &#x81EA;&#x7136;&#x662F;80&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>SortDecorator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;reportdecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ISchoolReport.h&quot;</span></span>
class CSortDecorator <span class="token punctuation">:</span>
    public CReportDecorator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CSortDecorator</span><span class="token punctuation">(</span>ISchoolReport <span class="token operator">*</span>psr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">void</span> <span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>SortDecorator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;SortDecorator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span> ISchoolReport <span class="token operator">*</span>psr <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CReportDecorator</span><span class="token punctuation">(</span>psr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CSortDecorator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x6211;&#x662F;&#x6392;&#x540D;&#x7B2C;38&#x540D;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CSortDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CReportDecorator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Report</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">ReportSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x5C0A;&#x656C;&#x7684;XXX&#x5BB6;&#x957F;&#xFF1A;
......
&#x8BED;&#x6587;62  &#x6570;&#x5B66;65  &#x4F53;&#x80B2;98  &#x81EA;&#x7136;63
......
&#x5BB6;&#x957F;&#x7B7E;&#x540D;&#xFF1A;
&#x5BB6;&#x957F;&#x7B7E;&#x540D;&#x4E3A;&#xFF1A;&#x8001;&#x4E09;
----------&#x5206;&#x90E8;&#x5206;&#x8FDB;&#x884C;&#x88C5;&#x9970;----------
&#x8FD9;&#x6B21;&#x8003;&#x8BD5;&#x8BED;&#x6587;&#x6700;&#x9AD8;&#x662F;75&#xFF0C; &#x6570;&#x5B66;&#x662F;78&#xFF0C; &#x81EA;&#x7136;&#x662F;80
&#x5C0A;&#x656C;&#x7684;XXX&#x5BB6;&#x957F;&#xFF1A;
......
&#x8BED;&#x6587;62  &#x6570;&#x5B66;65  &#x4F53;&#x80B2;98  &#x81EA;&#x7136;63
......
&#x5BB6;&#x957F;&#x7B7E;&#x540D;&#xFF1A;
&#x6211;&#x662F;&#x6392;&#x540D;&#x7B2C;38&#x540D;...
&#x5BB6;&#x957F;&#x7B7E;&#x540D;&#x4E3A;&#xFF1A;&#x8001;&#x4E09;   </code></pre><h2 id="&#x7B56;&#x7565;&#x6A21;&#x5F0F;"><a href="#&#x7B56;&#x7565;&#x6A21;&#x5F0F;" class="headerlink" title="&#x7B56;&#x7565;&#x6A21;&#x5F0F;"></a>&#x7B56;&#x7565;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Define a family of algorithms,encapsulate each one,and make them interchangeable.<br><br>&#x5B9A;&#x4E49;&#x4E00;&#x7EC4;&#x7B97;&#x6CD5;&#xFF0C;&#x5C06;&#x6BCF;&#x4E2A;&#x7B97;&#x6CD5;&#x90FD;&#x5C01;&#x88C5;&#x8D77;&#x6765;&#xFF0C;&#x5E76;&#x4E14;&#x4F7F;&#x5B83;&#x4EEC;&#x4E4B;&#x95F4;&#x53EF;&#x4EE5;&#x4E92;&#x6362;&#x3002;</p>
</blockquote>
<p>&#x8FD9;&#x4E2A;&#x5B9A;&#x4E49;&#x662F;&#x975E;&#x5E38;&#x660E;&#x786E;&#x3001;&#x6E05;&#x6670;&#x7684;&#xFF0C;&#x201C;&#x5B9A;&#x4E49;&#x4E00;&#x7EC4;&#x7B97;&#x6CD5;&#x201D;&#xFF0C;&#x770B;&#x770B;&#x6211;&#x4EEC;&#x7684;&#x4E09;&#x4E2A;&#x8BA1;&#x8C0B;&#x662F;&#x4E0D;&#x662F;&#x4E09;&#x4E2A;&#x7B97;&#x6CD5;&#xFF1F;&#x201C;&#x5C06;&#x6BCF;&#x4E2A;&#x7B97;&#x6CD5;&#x90FD;&#x5C01;&#x88C5;&#x8D77;&#x6765;&#x201D;&#xFF0C;&#x5C01;&#x88C5;&#x7C7B;Context&#x4E0D;&#x5C31;&#x662F;&#x8FD9;&#x4E2A;&#x4F5C;&#x7528;&#x5417;&#xFF1F;&#x201C;&#x4F7F;&#x5B83;&#x4EEC;&#x53EF;&#x4EE5;&#x4E92;&#x6362;&#x201D;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x4E92;&#x6362;&#x4E86;&#xFF0C;&#x90FD;&#x5B9E;&#x73B0;&#x662F;&#x76F8;&#x540C;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x90A3;&#x5F53;&#x7136;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x8F6C;&#x5316;&#x4E86;&#x3002;</p>
<hr>

<p>main()&#xFF0C;&#x8D75;&#x4E91;</p>
<p>CContext&#xFF0C;&#x9526;&#x56CA;</p>
<p>IStrategy&#xFF0C;&#x7B56;&#x7565;&#x63A5;&#x53E3;</p>
<p>CBackDoor&#xFF0C;&#x7B56;&#x7565;&#x4E4B;&#x4E00;</p>
<p>CGivenGreenLight&#xFF0C;&#x7B56;&#x7565;&#x4E4B;&#x4E8C;</p>
<p>CBlockEnemy&#xFF0C;&#x7B56;&#x7565;&#x4E4B;&#x4E09;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x4E00;&#x4E2A;&#x7B56;&#x7565;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x9526;&#x56CA;&#x91CC;&#x3002;&#x5F53;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x627E;&#x5230;&#x8FD9;&#x4E2A;&#x9526;&#x56CA;&#xFF0C;&#x4ECE;&#x9526;&#x56CA;&#x91CC;&#x62FF;&#x51FA;&#x7B56;&#x7565;&#x6765;&#x4F7F;&#x7528;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x9526;&#x56CA;&#x53EA;&#x662F;&#x7B80;&#x5355;&#x7684;&#x88C5;&#x8F7D;&#x548C;&#x8C03;&#x7528;&#x7B56;&#x7565;&#xFF0C;&#x9526;&#x56CA;&#x91CC;&#x6CA1;&#x6709;&#x903B;&#x8F91;&#x3002;&#x7B56;&#x7565;&#x4F1A;&#x6709;&#x66F4;&#x5927;&#x7684;&#x81EA;&#x4E3B;&#x6743;&#xFF0C;&#x8FD0;&#x884C;&#x66F4;&#x591A;&#x7684;&#x903B;&#x8F91;&#x3002;<br>&#x6CE8;&#x610F;&#xFF1A;&#x6CA1;&#x6709;<code>#include &quot;IStrategy.h&quot;</code>&#x53EF;&#x4EE5;&#x81EA;&#x5EFA;&#x4E00;&#x4E2A;IStrategy.h&#xFF0C;&#x5305;&#x542B;<code>#include &quot;stdio.h</code>&#x5373;&#x53EF;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573288235394.png?x-oss-process=image/resize,m_lfit,h_450" width="1026" height="450" layout="responsive"></amp-img></div>
<p>IStrategy.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

class IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IStrategy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">IStrategy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IStrategy.h&quot;</span></span>
class CContext
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CContext</span><span class="token punctuation">(</span>IStrategy <span class="token operator">*</span>pStrategy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    IStrategy <span class="token operator">*</span>m_pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CContext</span><span class="token punctuation">(</span>IStrategy <span class="token operator">*</span>pStrategy<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pStrategy <span class="token operator">=</span> pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete this<span class="token operator">-&gt;</span>m_pStrategy<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pStrategy<span class="token operator">-&gt;</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BackDoor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;istrategy.h&quot;</span></span>
class CBackDoor <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BackDoor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BackDoor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBackDoor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x627E;&#x4E54;&#x56FD;&#x8001;&#x5E2E;&#x5FD9;&#xFF0C;&#x8BA9;&#x5434;&#x56FD;&#x592A;&#x7ED9;&#x5B59;&#x6743;&#x65BD;&#x52A0;&#x538B;&#x529B;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>GivenGreenLight.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;istrategy.h&quot;</span></span>
class CGivenGreenLight <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>GivenGreenList.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;GivenGreenLight.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CGivenGreenLight<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x6C42;&#x5434;&#x56FD;&#x592A;&#x5F00;&#x4E2A;&#x7EFF;&#x706F;&#xFF0C;&#x653E;&#x884C;&#xFF01;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlockEnemy.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;istrategy.h&quot;</span></span>
class CBlockEnemy <span class="token punctuation">:</span>
    public IStrategy
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Operate</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BlockEnemy.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlockEnemy.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CBlockEnemy<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5B59;&#x592B;&#x4EBA;&#x65AD;&#x540E;&#xFF0C;&#x6321;&#x4F4F;&#x8FFD;&#x5175;&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Strategy.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BackDoor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;GivenGreenLight.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BlockEnemy.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CContext <span class="token operator">*</span>pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\14\n\n\n\n\17&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x521A;&#x521A;&#x5230;&#x5434;&#x56FD;&#x7684;&#x65F6;&#x5019;&#x62C6;&#x7B2C;&#x4E00;&#x4E2A;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CBackDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-&gt;</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\14\n\n\n\n\17&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5218;&#x5907;&#x4E50;&#x4E0D;&#x601D;&#x8700;&#x4E86;&#xFF0C;&#x62C6;&#x7B2C;&#x4E8C;&#x4E2A;&#x4E86;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CGivenGreenLight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-&gt;</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;\14\n\n\n\n\17&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5B59;&#x6743;&#x7684;&#x5C0F;&#x5175;&#x8FFD;&#x4E86;&#xFF0C;&#x548B;&#x529E;&#xFF1F;&#x62C6;&#x7B2C;&#x4E09;&#x4E2A;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    pContext <span class="token operator">=</span> new <span class="token function">CContext</span><span class="token punctuation">(</span>new <span class="token function">CBlockEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pContext<span class="token operator">-&gt;</span><span class="token function">Operate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pContext<span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>                
----------&#x521A;&#x521A;&#x5230;&#x5434;&#x56FD;&#x7684;&#x65F6;&#x5019;&#x62C6;&#x7B2C;&#x4E00;&#x4E2A;---------- 
&#x627E;&#x4E54;&#x56FD;&#x8001;&#x5E2E;&#x5FD9;&#xFF0C;&#x8BA9;&#x5434;&#x56FD;&#x592A;&#x7ED9;&#x5B59;&#x6743;&#x65BD;&#x52A0;&#x538B;&#x529B; 
       
----------&#x5218;&#x5907;&#x4E50;&#x4E0D;&#x601D;&#x8700;&#x4E86;&#xFF0C;&#x62C6;&#x7B2C;&#x4E8C;&#x4E2A;&#x4E86;----------
&#x6C42;&#x5434;&#x56FD;&#x592A;&#x5F00;&#x4E2A;&#x7EFF;&#x706F;&#xFF0C;&#x653E;&#x884C;&#xFF01; 
                  
----------&#x5B59;&#x6743;&#x7684;&#x5C0F;&#x5175;&#x8FFD;&#x4E86;&#xFF0C;&#x548B;&#x529E;&#xFF1F;&#x62C6;&#x7B2C;&#x4E09;&#x4E2A;---------- 
&#x5B59;&#x592B;&#x4EBA;&#x65AD;&#x540E;&#xFF0C;&#x6321;&#x4F4F;&#x8FFD;&#x5175;</code></pre><h2 id="&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;"><a href="#&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;" class="headerlink" title="&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;"></a>&#x9002;&#x914D;&#x5668;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Convert the interface of a class into another interface clients expect.Adapter lets classes work together that couldn&#x2019;t otherwise because of incompatible interfaces.<br><br>&#x5C06;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x63A5;&#x53E3;&#x53D8;&#x6362;&#x6210;&#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x671F;&#x5F85;&#x7684;&#x53E6;&#x4E00;&#x79CD;&#x63A5;&#x53E3;&#xFF0C;&#x4ECE;&#x800C;&#x4F7F;&#x539F;&#x672C;&#x56E0;&#x63A5;&#x53E3;&#x4E0D;&#x5339;&#x914D;&#x800C;&#x65E0;&#x6CD5;&#x5728;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x7684;&#x4E24;&#x4E2A;&#x7C7B;&#x80FD;&#x591F;&#x5728;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x3002;</p>
</blockquote>
<p>&#x9002;&#x914D;&#x5668;&#x76F8;&#x5F53;&#x4E8E;&#x8F6C;&#x6362;&#x63A5;&#x5934;&#xFF0C;&#x5982;&#x6295;&#x5F71;&#x4EEA;&#x7684;&#x63A5;&#x53E3;&#x662F;DB9&#xFF0C;&#x7535;&#x8111;&#x7684;&#x63A5;&#x53E3;&#x662F;HDMI&#xFF0C;&#x56E0;&#x6B64;&#x4F7F;&#x7528;DB9&#x8F6C;HDMI&#x8F6C;&#x6362;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x6295;&#x5F71;&#x4EEA;&#x548C;&#x7535;&#x8111;&#x4E00;&#x8D77;&#x5DE5;&#x4F5C;&#x4E86;&#xFF01;<br>&#x9002;&#x914D;&#x5668;&#x8D77;&#x5230;&#x4E86;&#x89E3;&#x6790;&#x4F5C;&#x7528;&#xFF0C;&#x5C06;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x89E3;&#x6790;&#x4E3A;&#x53E6;&#x4E00;&#x79CD;&#x5F62;&#x5F0F;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x3002;</p>
<hr>

<p>main()&#xFF0C;&#x4E3B;&#x7A0B;&#x5E8F;</p>
<p>IUserInfo&#xFF0C;&#x672C;&#x7CFB;&#x7EDF;&#x5185;&#x63A5;&#x53E3;</p>
<p>CUserInfo&#xFF0C;&#x672C;&#x7CFB;&#x7EDF;&#x5185;&#x5B9E;&#x73B0;&#x7C7B;</p>
<p>IOuterUser&#xFF0C;&#x5916;&#x7CFB;&#x7EDF;&#x63A5;&#x53E3;</p>
<p>COuterUser&#xFF0C;&#x5916;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x7C7B;</p>
<p>COuterUserInfo&#xFF0C;&#x672C;&#x7CFB;&#x7EDF;&#x5185;&#x9002;&#x914D;&#x7C7B;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;COuterUserInfo&#x5B9E;&#x73B0;IUserInfo&#x63A5;&#x53E3;&#xFF0C;&#x5C06;&#x5916;&#x90E8;&#x7CFB;&#x7EDF;&#x5B9E;&#x73B0;&#x7C7B;COuterUser&#x8F6C;&#x6362;&#x6210;&#x672C;&#x7CFB;&#x7EDF;&#x5185;&#x7684;&#x63A5;&#x53E3;IUserInfo&#x3002;&#x4F7F;&#x7528;&#x5916;&#x90E8;&#x6570;&#x636E;&#x8DDF;&#x4F7F;&#x7528;&#x672C;&#x7CFB;&#x7EDF;&#x5185;&#x90E8;&#x6570;&#x636E;&#x4E00;&#x6837;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;COuterUserInfo&#x7EE7;&#x627F;&#x4E86;IUserInfo&#xFF0C;&#x5982;&#x679C;&#x540C;&#x65F6;&#x7EE7;&#x627F;&#x4E86;COuterUser&#x5219;&#x662F;&#x7C7B;&#x9002;&#x914D;&#x5668;&#x3002;&#x5982;&#x679C;COuterUserInfo&#x53EA;&#x662F;&#x4F7F;&#x7528;&#x4E86;COuterUser&#x5219;&#x662F;&#x5BF9;&#x8C61;&#x9002;&#x914D;&#x5668;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573304754219.png?x-oss-process=image/resize,m_lfit,h_450" width="695" height="409" layout="responsive"></amp-img></div>
<p>IUserInfo.h<br>//&#x7CFB;&#x7EDF;&#x5185;&#x90E8;&#x7684;&#x5B9E;&#x4F53;&#x63A5;&#x53E3;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">IUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   virtual <span class="token operator">~</span><span class="token function">IUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   virtual string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   virtual string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>UserInfo.h<br>//&#x7CFB;&#x7EDF;&#x5185;&#x90E8;&#x5B9E;&#x4F53;&#x7C7B;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iuserinfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CUserInfo <span class="token punctuation">:</span>
   public IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>UserInfo.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;UserInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x59D3;&#x540D;&#x53EB;&#x505A;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x91CC;&#x662F;&#x5458;&#x5DE5;&#x7684;&#x5BB6;&#x5EAD;&#x5730;&#x5740;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x529E;&#x516C;&#x5BA4;&#x7535;&#x8BDD;&#x662F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x804C;&#x4F4D;&#x662F;BOSS...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string CUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5458;&#x5DE5;&#x7684;&#x5BB6;&#x5EAD;&#x7535;&#x8BDD;&#x662F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IOuterUser.h<br>//&#x5916;&#x90E8;&#x7CFB;&#x7EDF;&#x5B9E;&#x4F53;&#x63A5;&#x53E3;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserBaseInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserHomeInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserOfficeInfo.h&quot;</span></span>
class IOuterUser
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">IOuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">IOuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   COuterUserBaseInfo<span class="token operator">*</span> <span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   COuterUserHomeInfo<span class="token operator">*</span> <span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   COuterUserOfficeInfo<span class="token operator">*</span> <span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>COuterUser.h<br>//&#x5916;&#x90E8;&#x7CFB;&#x7EDF;&#x5B9E;&#x4F53;&#x7C7B;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserBaseInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserHomeInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserOfficeInfo.h&quot;</span></span>
class COuterUser
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserBaseInfo<span class="token operator">*</span> <span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserHomeInfo<span class="token operator">*</span> <span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   COuterUserOfficeInfo<span class="token operator">*</span> <span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>COuterUser.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;COuterUser.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserBaseInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserHomeInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserOfficeInfo.h&quot;</span></span>
COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
COuterUserBaseInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserHomeInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserOfficeInfo<span class="token operator">*</span> COuterUser<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserBaseInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserBaseInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserBaseInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x59D3;&#x540D;&#x53EB;&#x505A;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserHomeInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserHomeInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserHomeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x91CC;&#x662F;&#x5458;&#x5DE5;&#x7684;&#x5BB6;&#x5EAD;&#x5730;&#x5740;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x5458;&#x5DE5;&#x7684;&#x5BB6;&#x5EAD;&#x7535;&#x8BDD;&#x662F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserOfficeInfo.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserOfficeInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   <span class="token operator">~</span><span class="token function">COuterUserOfficeInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x529E;&#x516C;&#x5BA4;&#x7535;&#x8BDD;&#x662F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x804C;&#x4F4D;&#x662F;BOSS...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
      <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserInfo.h<br>//&#x7531;IUserInfo&#x63A5;&#x53E3;&#x6D3E;&#x751F;&#x7684;&#x5B9E;&#x4F53;&#x7C7B;&#xFF0C;&#x5E76;&#x5F15;&#x5165;&#x5916;&#x90E8;&#x7CFB;&#x7EDF;&#x5B9E;&#x4F53;&#x7684;&#x5B9E;&#x4F8B;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iuserinfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;COuterUser.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class COuterUserInfo <span class="token punctuation">:</span>
    public IUserInfo
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    COuterUser <span class="token operator">*</span>m_pOuterUser<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OuterUserInfo.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserBaseInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserHomeInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserOfficeInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_pOuterUser <span class="token operator">=</span> new <span class="token function">COuterUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   delete m_pOuterUser<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserBaseInfo<span class="token operator">*</span> pBaseInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBaseInfo<span class="token operator">-&gt;</span><span class="token function">GetUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBaseInfo<span class="token punctuation">;</span>
   pBaseInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserHomeInfo<span class="token operator">*</span> pHomeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pHomeInfo<span class="token operator">-&gt;</span><span class="token function">GetHomeAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pHomeInfo<span class="token punctuation">;</span>
   pHomeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserBaseInfo<span class="token operator">*</span> pBaseInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserBaseInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pBaseInfo<span class="token operator">-&gt;</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pBaseInfo<span class="token punctuation">;</span>
   pBaseInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserOfficeInfo<span class="token operator">*</span> pOfficeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pOfficeInfo<span class="token operator">-&gt;</span><span class="token function">GetOfficeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pOfficeInfo<span class="token punctuation">;</span>
   pOfficeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserOfficeInfo<span class="token operator">*</span> pOfficeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserOfficeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pOfficeInfo<span class="token operator">-&gt;</span><span class="token function">GetJobPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pOfficeInfo<span class="token punctuation">;</span>
   pOfficeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
string COuterUserInfo<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   COuterUserHomeInfo<span class="token operator">*</span> pHomeInfo <span class="token operator">=</span> m_pOuterUser<span class="token operator">-&gt;</span><span class="token function">GetUserHomeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pHomeInfo<span class="token operator">-&gt;</span><span class="token function">GetHomeTelNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pHomeInfo<span class="token punctuation">;</span>
   pHomeInfo <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Adapter.cpp<br>//&#x4F7F;&#x7528;&#x65B9;&#x6CD5;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IOuterUser.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IUserInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;UserInfo.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OuterUserInfo.h&quot;</span></span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IUserInfo<span class="token operator">*</span> pYourGirl <span class="token operator">=</span> new <span class="token function">CUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">101</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      pYourGirl<span class="token operator">-&gt;</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   delete pYourGirl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">NowDoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IUserInfo<span class="token operator">*</span> pYourGirl <span class="token operator">=</span> new <span class="token function">COuterUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">101</span><span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      pYourGirl<span class="token operator">-&gt;</span><span class="token function">GetMobileNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   delete pYourGirl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">NowDoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0000...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001...
&#x8FD9;&#x4E2A;&#x4EBA;&#x7684;&#x624B;&#x673A;&#x53F7;&#x7801;&#x662F;0001... </code></pre><h2 id="&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;"><a href="#&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;" class="headerlink" title="&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;"></a>&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.<br><br>&#x5B83;&#x63D0;&#x4F9B;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x8BBF;&#x95EE;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x5BF9;&#x8C61;&#x4E2D;&#x5404;&#x4E2A;&#x5143;&#x7D20;&#xFF0C;&#x800C;&#x53C8;&#x4E0D;&#x9700;&#x66B4;&#x9732;&#x8BE5;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x7EC6;&#x8282;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>IProject&#xFF0C;&#x4EA7;&#x54C1;&#x63A5;&#x53E3;</p>
<p>CProject&#xFF0C;&#x4EA7;&#x54C1;&#x7C7B;</p>
<p>IIterator&#xFF0C;&#x8FED;&#x4EE3;&#x5668;&#x63A5;&#x53E3;</p>
<p>IProjectIterator&#xFF0C;&#x4EA7;&#x54C1;&#x8FED;&#x4EE3;&#x5668;&#x63A5;&#x53E3;</p>
<p>CProjectIterator&#xFF0C;&#x4EA7;&#x54C1;&#x8FED;&#x4EE3;&#x5668;&#x5B9E;&#x73B0;&#x7C7B;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;CProject&#x5B9E;&#x73B0;&#x4EA7;&#x54C1;&#x7C7B;&#xFF0C;&#x80FD;&#x591F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x7684;&#x6307;&#x9488;&#x3002;&#x8FD9;&#x4E2A;&#x8FED;&#x4EE3;&#x5668;&#x5C06;&#x5C01;&#x88C5;&#x4EA7;&#x54C1;&#x7C7B;&#x91CC;&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x3002;&#x6240;&#x4EE5;&#x8FED;&#x4EE3;&#x5668;&#x5728;&#x8FD0;&#x884C;Next&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x53EF;&#x4EE5;&#x904D;&#x5386;&#x8FD9;&#x4E2A;&#x6570;&#x7EC4;&#x7684;&#x6240;&#x6709;&#x5143;&#x7D20;&#x3002;</p>
<p>&#x7B80;&#x5355;&#x6765;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x7528;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;vector<int>::iterator&#x6216;vector<int>::const_iterator&#x3002;<br><strong>&#x6CE8;&#x610F;&#xFF1A;</strong><br>&#x5982;&#x679C;&#x4F60;&#x662F;&#x505A;Java&#x5F00;&#x53D1;&#xFF0C;&#x5C3D;&#x91CF;&#x4E0D;&#x8981;&#x81EA;&#x5DF1;&#x5199;&#x8FED;&#x4EE3;&#x5668;&#x6A21;&#x5F0F;&#xFF01;&#x7701;&#x7701;&#x5427;&#xFF0C;&#x4F7F;&#x7528;Java&#x63D0;&#x4F9B;&#x7684;Iterator&#x4E00;&#x822C;&#x5C31;&#x80FD;&#x6EE1;&#x8DB3;&#x4F60;&#x7684;&#x8981;&#x6C42;&#x4E86;!</int></int></p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573319086122.png?x-oss-process=image/resize,m_lfit,h_450" width="658" height="450" layout="responsive"></amp-img></div>
<p>IProject.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProjectIterator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IProject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProjectIterator<span class="token operator">*</span> <span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Project.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iproject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProjectIterator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CProject <span class="token punctuation">:</span>
    public IProject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CProject</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    IProjectIterator <span class="token operator">*</span> <span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_num<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_cost<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span> m_projectList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Project.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Project.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ProjectIterator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;sstream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>ostringstream<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>to_string<span class="token punctuation">;</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
   m_num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
   m_cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProject</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span> <span class="token punctuation">:</span><span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_num</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_cost</span><span class="token punctuation">(</span>cost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CProject</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
string CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>m_num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>m_cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token keyword">int</span> cost<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   this<span class="token operator">-&gt;</span>m_projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> num<span class="token punctuation">,</span> cost<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
IProjectIterator<span class="token operator">*</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token keyword">return</span> new <span class="token function">CProjectIterator</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_projectList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CProject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator projectDelIt <span class="token operator">=</span> m_projectList<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectDelIt <span class="token operator">!=</span> m_projectList<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectDelIt<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   m_projectList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IProject<span class="token punctuation">;</span>
class IIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IProjectIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iiterator.h&quot;</span></span>
class IProject<span class="token punctuation">;</span>
class IProjectIterator <span class="token punctuation">:</span>
    public IIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ProjectIterator.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iprojectiterator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
class CProjectIterator <span class="token punctuation">:</span>
    public IProjectIterator
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CProjectIterator</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>IProject <span class="token operator">*</span><span class="token operator">&gt;</span> pl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    IProject <span class="token operator">*</span> <span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>IProject <span class="token operator">*</span><span class="token operator">&gt;</span> m_projectList<span class="token punctuation">;</span>
    size_t m_currentItem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ProjectIterator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ProjectIterator.h&quot;</span></span>
CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span> pl<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_projectList</span><span class="token punctuation">(</span>pl<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   m_currentItem <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CProjectIterator</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
bool CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   bool b <span class="token operator">=</span> true<span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>m_currentItem <span class="token operator">&gt;=</span> m_projectList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      b <span class="token operator">=</span> false<span class="token punctuation">;</span>
   <span class="token keyword">return</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
IProject<span class="token operator">*</span> CProjectIterator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   IProject<span class="token operator">*</span> pp <span class="token operator">=</span> m_projectList<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span>m_currentItem<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> pp<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Iterator.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Project.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ProjectIterator.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>to_string<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x672A;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x6A21;&#x5F0F;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span> projectList<span class="token punctuation">;</span>

   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">&quot;&#x661F;&#x7403;&#x5927;&#x6218;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">&quot;&#x626D;&#x8F6C;&#x65F6;&#x7A7A;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8D85;&#x4EBA;&#x6539;&#x9020;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      string name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7B2C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E2A;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      projectList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>new <span class="token function">CProject</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator projectIt <span class="token operator">=</span> projectList<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectIt <span class="token operator">!=</span> projectList<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectIt<span class="token operator">++</span><span class="token punctuation">)</span>
      cout <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectIt<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

   vector<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator projectDelIt <span class="token operator">=</span> projectList<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> projectDelIt <span class="token operator">!=</span> projectList<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> projectDelIt<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">(</span><span class="token operator">*</span>projectDelIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   projectList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x6A21;&#x5F0F;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   IProject<span class="token operator">*</span> pproject <span class="token operator">=</span> new <span class="token function">CProject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x661F;&#x7403;&#x5927;&#x6218;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x626D;&#x8F6C;&#x65F6;&#x7A7A;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8D85;&#x4EBA;&#x6539;&#x9020;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      string name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7B2C;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">to_string</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      name<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E2A;&#x9879;&#x76EE;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      pproject<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   IProjectIterator<span class="token operator">*</span> pprojectIt <span class="token operator">=</span> pproject<span class="token operator">-&gt;</span><span class="token function">GetIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">while</span> <span class="token punctuation">(</span>pprojectIt<span class="token operator">-&gt;</span><span class="token function">HasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">{</span>
      IProject<span class="token operator">*</span> p <span class="token operator">=</span> dynamic_cast<span class="token operator">&lt;</span>IProject<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>pprojectIt<span class="token operator">-&gt;</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      cout <span class="token operator">&lt;&lt;</span> p<span class="token operator">-&gt;</span><span class="token function">GetProjectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   delete pprojectIt<span class="token punctuation">;</span>
   pprojectIt <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
   pproject<span class="token operator">-&gt;</span><span class="token function">Erase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   delete pproject<span class="token punctuation">;</span>
   pproject <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">//&#x4F7F;&#x7528;Iterator&#x6A21;&#x5F0F;&#x4E4B;&#x524D;</span>
   <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment" spellcheck="true">//&#x4F7F;&#x7528;Iterator</span>
   <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x672A;&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x6A21;&#x5F0F;----------
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x661F;&#x7403;&#x5927;&#x6218;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;10    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;100000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x626D;&#x8F6C;&#x65F6;&#x7A7A;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;100   &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;10000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x8D85;&#x4EBA;&#x6539;&#x9020;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;10000 &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;1000000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x7B2C;4&#x4E2A;&#x9879;&#x76EE;   &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;20    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;4000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x7B2C;5&#x4E2A;&#x9879;&#x76EE;   &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;25    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;5000000
----------&#x4F7F;&#x7528;&#x8FED;&#x4EE3;&#x6A21;&#x5F0F;----------
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x661F;&#x7403;&#x5927;&#x6218;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;10    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;100000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x626D;&#x8F6C;&#x65F6;&#x7A7A;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;100   &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;10000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x8D85;&#x4EBA;&#x6539;&#x9020;&#x9879;&#x76EE;        &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;10000 &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;1000000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x7B2C;4&#x4E2A;&#x9879;&#x76EE;   &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;20    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;4000000
&#x9879;&#x76EE;&#x540D;&#x79F0;&#x662F;&#xFF1A;&#x7B2C;5&#x4E2A;&#x9879;&#x76EE;   &#x9879;&#x76EE;&#x4EBA;&#x6570;&#xFF1A;25    &#x9879;&#x76EE;&#x8D39;&#x7528;&#xFF1A;5000000   </code></pre><h2 id="&#x7EC4;&#x5408;&#x6A21;&#x5F0F;"><a href="#&#x7EC4;&#x5408;&#x6A21;&#x5F0F;" class="headerlink" title="&#x7EC4;&#x5408;&#x6A21;&#x5F0F;"></a>&#x7EC4;&#x5408;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Compose objects into tree structures to represent part-whole hierarchies.Composite lets clients treat individual objects and compositions of objects uniformly.<br><br>&#x5C06;&#x5BF9;&#x8C61;&#x7EC4;&#x5408;&#x6210;&#x6811;&#x5F62;&#x7ED3;&#x6784;&#x4EE5;&#x8868;&#x793A;&#x201C;&#x90E8;&#x5206;-&#x6574;&#x4F53;&#x201D;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#xFF0C;&#x4F7F;&#x5F97;&#x7528;&#x6237;&#x5BF9;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x548C;&#x7EC4;&#x5408;&#x5BF9;&#x8C61;&#x7684;&#x4F7F;&#x7528;&#x5177;&#x6709;&#x4E00;&#x81F4;&#x6027;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>CCorpNode&#xFF0C;&#x62BD;&#x8C61;&#x57FA;&#x7C7B;&#xFF0C;&#x5B9E;&#x73B0;&#x57FA;&#x672C;&#x4FE1;&#x606F;</p>
<p>CBranchNode&#xFF0C;&#x6811;&#x679D;&#x8282;&#x70B9;&#xFF0C;&#x5B9E;&#x73B0;Addordinate()&#x51FD;&#x6570;&#x548C;GetSubordinate()&#x51FD;&#x6570;</p>
<p>CLeafNode&#xFF0C;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#xFF0C;IsLeaf&#x5C5E;&#x6027;&#x603B;&#x662F;&#x201C;true&#x201D;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x662F;&#x5B9E;&#x73B0;&#x5728;CBranchNode&#x5BF9;&#x8C61;&#x91CC;&#x589E;&#x52A0;&#x5BF9;&#x5176;&#x5B83;&#x5BF9;&#x8C61;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x5982;vector&lt;CCorpNode*&gt;&#xFF0C;&#x6570;&#x7EC4;&#x91CC;&#x53EF;&#x4EE5;&#x5B58;&#x653E;CBranchNode&#x548C;CLeafNode&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x6837;&#x65B9;&#x4FBF;&#x8FDB;&#x884C;&#x904D;&#x5386;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x6709;&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x548C;&#x5B89;&#x5168;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x3002;&#x900F;&#x660E;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x662F;&#x5C06;Addordinate&#x548C;GetSubordinate&#x8FD9;&#x4E24;&#x4E2A;&#x51FD;&#x6570;&#x4E5F;&#x62BD;&#x8C61;&#x5230;CCorpNode&#x57FA;&#x7C7B;&#x91CC;&#xFF0C;&#x8FD9;&#x589E;&#x52A0;&#x4E86;&#x64CD;&#x4F5C;&#x53F6;&#x5B50;&#x8282;&#x70B9;&#x7684;&#x96BE;&#x5EA6;&#xFF0C;&#x66F4;&#x6613;&#x51FA;&#x73B0;&#x903B;&#x8F91;&#x95EE;&#x9898;&#x3002;&#x6240;&#x4EE5;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x5B89;&#x5168;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x7B80;&#x5355;&#x4E86;&#xFF0C;&#x53EF;&#x4EE5;&#x60F3;&#x50CF;&#x4E00;&#x4E0B;TreeView&#x548C;TreeNode&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x8FD9;&#x4E2A;&#x610F;&#x601D;&#x4E86;&#xFF0C;&#x5C06;&#x5F88;&#x591A;&#x6570;&#x636E;&#x7EC4;&#x7EC7;&#x5728;&#x4E00;&#x5757;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573343814177.png?x-oss-process=image/resize,m_lfit,h_450" width="778" height="293" layout="responsive"></amp-img></div>
<p>Branch.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ibranch.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ICorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBranch <span class="token punctuation">:</span>
    public IBranch<span class="token punctuation">,</span> ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CBranch</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>ICorp <span class="token operator">*</span>pcorp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">&gt;</span> m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BranchNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;corpnode.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CorpNode.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBranchNode <span class="token punctuation">:</span>
    public CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CBranchNode</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>CCorpNode <span class="token operator">*</span>pcorpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">&gt;</span> m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CorpNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CCorpNode</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> string _pos<span class="token punctuation">,</span> <span class="token keyword">int</span> _salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetParent</span><span class="token punctuation">(</span>CCorpNode <span class="token operator">*</span>_pParent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    CCorpNode <span class="token operator">*</span> <span class="token function">GetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    bool m_isLeaf<span class="token punctuation">;</span>
    CCorpNode <span class="token operator">*</span>m_pParent<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IBranch.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ICorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class IBranch
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Add</span><span class="token punctuation">(</span>ICorp <span class="token operator">*</span>pcorp<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ICorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">ICorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">ICorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Leaf.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;icorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CLeaf <span class="token punctuation">:</span>
    public ICorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CLeaf</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    string m_position<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LeafNode.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;corpnode.h&quot;</span></span>
class CLeafNode <span class="token punctuation">:</span>
    public CCorpNode
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">CLeafNode</span><span class="token punctuation">(</span>string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bool <span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Branch.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Branch.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;..\CommonDeclare\Convert.h&quot;</span></span>


CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranch</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>

<span class="token punctuation">}</span>


CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBranch</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span> ICorp <span class="token operator">*</span>pcorp <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_subordinateList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcorp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>ICorp<span class="token operator">*</span><span class="token operator">&gt;</span> CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBranch<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x59D3;&#x540D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x804C;&#x4F4D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x85AA;&#x6C34;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BranchNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BranchNode.h&quot;</span></span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CCorpNode</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> false<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBranchNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Add</span><span class="token punctuation">(</span> CCorpNode <span class="token operator">*</span>pcorpNode <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pcorpNode<span class="token operator">-&gt;</span><span class="token function">SetParent</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_subordinateList<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>pcorpNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">&gt;</span> CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_subordinateList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bool CBranchNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_isLeaf<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Composite.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">// Composite.cpp : &#x5B9A;&#x4E49;&#x63A7;&#x5236;&#x53F0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x3002;</span>
<span class="token comment" spellcheck="true">//</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BranchNode.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LeafNode.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x6CE8;&#x672A;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x8C03;&#x7528;ICorp&#x3001;CLeaf&#x3001;CBranch&#x8FD9;&#x4E09;&#x4E2A;&#x7C7B;&#x6765;&#x7EC4;&#x7EC7;&#x3002;</span>
<span class="token punctuation">}</span>

string <span class="token function">GetTreeInfo</span><span class="token punctuation">(</span>CBranchNode <span class="token operator">*</span> proot<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">&gt;</span> subordinateList <span class="token operator">=</span> proot<span class="token operator">-&gt;</span><span class="token function">GetSubordinateInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

    vector<span class="token operator">&lt;</span>CCorpNode<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator it <span class="token operator">=</span> subordinateList<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> subordinateList<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">GetTreeInfo</span><span class="token punctuation">(</span>dynamic_cast<span class="token operator">&lt;</span>CBranchNode<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">*</span>it<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CBranchNode <span class="token function">root</span><span class="token punctuation">(</span><span class="token string">&quot;&#x8D75;&#x5927;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x603B;&#x7ECF;&#x7406;&quot;</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBranchNode <span class="token function">devDep</span><span class="token punctuation">(</span><span class="token string">&quot;&#x94B1;&#x5927;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x7814;&#x53D1;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&quot;</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">saleDep</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5B59;&#x5927;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x9500;&#x552E;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&quot;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">financeDep</span><span class="token punctuation">(</span><span class="token string">&quot;&#x674E;&#x5927;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x8D22;&#x52A1;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&quot;</span><span class="token punctuation">,</span> <span class="token number">30000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBranchNode <span class="token function">firstDevGroup</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5468;&#x4E09;&#x4E5F;&#x659C;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4E00;&#x7EC4;&#x7EC4;&#x957F;&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CBranchNode <span class="token function">secondDevGroup</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5434;&#x5927;&#x68D2;&#x69CC;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4E8C;&#x7EC4;&#x7EC4;&#x957F;&quot;</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CLeafNode <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">b</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">c</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">d</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">g</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">h</span><span class="token punctuation">(</span><span class="token string">&quot;h&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">i</span><span class="token punctuation">(</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">j</span><span class="token punctuation">(</span><span class="token string">&quot;j&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">k</span><span class="token punctuation">(</span><span class="token string">&quot;k&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CEO&#x79D8;&#x4E66;&quot;</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CLeafNode <span class="token function">zheng</span><span class="token punctuation">(</span><span class="token string">&quot;&#x90D1;&#x8001;&#x516D;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&#x7814;&#x53D1;&#x90E8;&#x526F;&#x7ECF;&#x7406;&quot;</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>CEO&#x6709;&#x4E09;&#x4E2A;&#x90E8;&#x95E8;&#x7ECF;&#x7406;&#x548C;&#x4E00;&#x4E2A;&#x79D8;&#x4E66;
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>devDep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>saleDep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    root<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>financeDep<span class="token punctuation">)</span><span class="token punctuation">;</span>

    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>zheng<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x5F00;&#x53D1;&#x90E8;&#x6709;&#x4E00;&#x4E2A;&#x526F;&#x7ECF;&#x7406;&#x548C;&#x4E24;&#x4E2A;&#x5C0F;&#x7EC4;</span>
    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>firstDevGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
    devDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>secondDevGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>

    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    firstDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    secondDevGroup<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

    saleDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
    saleDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>

    financeDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    financeDep<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> root<span class="token punctuation">.</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token function">GetTreeInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x672A;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x7684;&#x8C03;&#x7528;&#x3002;</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x4F7F;&#x7528;&#x7EC4;&#x5408;&#x6A21;&#x5F0F;&#x540E;&#x7684;&#x8C03;&#x7528;&#x3002;</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CorpNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CorpNode.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;..\CommonDeclare\Convert.h&quot;</span></span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    m_position <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    m_salary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span>string _name<span class="token punctuation">,</span> string _pos<span class="token punctuation">,</span> <span class="token keyword">int</span> _salary<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>_name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>_pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>_salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCorpNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x59D3;&#x540D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x804C;&#x4F4D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x85AA;&#x6C34;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetParent</span><span class="token punctuation">(</span> CCorpNode <span class="token operator">*</span>_parent <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pParent <span class="token operator">=</span> _parent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CCorpNode <span class="token operator">*</span> CCorpNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_pParent<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Leaf.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Leaf.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;..\CommonDeclare\Convert.h&quot;</span></span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    m_position <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    m_salary <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeaf</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">m_name</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_position</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">m_salary</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLeaf</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


string CLeaf<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x59D3;&#x540D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x804C;&#x4F4D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&#x85AA;&#x6C34;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_salary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LeafNode.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LeafNode.h&quot;</span></span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span> string name<span class="token punctuation">,</span> string pos<span class="token punctuation">,</span> <span class="token keyword">int</span> salary <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CCorpNode</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_isLeaf <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLeafNode</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


bool CLeafNode<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">IsLeaf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_isLeaf<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x59D3;&#x540D;&#xFF1A;&#x8D75;&#x5927;      &#x804C;&#x4F4D;&#xFF1A;&#x603B;&#x7ECF;&#x7406;    &#x85AA;&#x6C34;&#xFF1A;100000
&#x59D3;&#x540D;&#xFF1A;k &#x804C;&#x4F4D;&#xFF1A;CEO&#x79D8;&#x4E66;   &#x85AA;&#x6C34;&#xFF1A;8000
&#x59D3;&#x540D;&#xFF1A;&#x94B1;&#x5927;      &#x804C;&#x4F4D;&#xFF1A;&#x7814;&#x53D1;&#x90E8;&#x95E8;&#x7ECF;&#x7406;      &#x85AA;&#x6C34;&#xFF1A;10000
&#x59D3;&#x540D;&#xFF1A;&#x90D1;&#x8001;&#x516D;    &#x804C;&#x4F4D;&#xFF1A;&#x7814;&#x53D1;&#x90E8;&#x526F;&#x7ECF;&#x7406;      &#x85AA;&#x6C34;&#xFF1A;20000
&#x59D3;&#x540D;&#xFF1A;&#x5468;&#x4E09;&#x4E5F;&#x659C;  &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4E00;&#x7EC4;&#x7EC4;&#x957F;      &#x85AA;&#x6C34;&#xFF1A;5000
&#x59D3;&#x540D;&#xFF1A;a &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;b &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;c &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;&#x5434;&#x5927;&#x68D2;&#x69CC;  &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4E8C;&#x7EC4;&#x7EC4;&#x957F;      &#x85AA;&#x6C34;&#xFF1A;6000
&#x59D3;&#x540D;&#xFF1A;d &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;e &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;f &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;&#x5B59;&#x5927;      &#x804C;&#x4F4D;&#xFF1A;&#x9500;&#x552E;&#x90E8;&#x95E8;&#x7ECF;&#x7406;      &#x85AA;&#x6C34;&#xFF1A;20000
&#x59D3;&#x540D;&#xFF1A;g &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;2000
&#x59D3;&#x540D;&#xFF1A;h &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;5000
&#x59D3;&#x540D;&#xFF1A;&#x674E;&#x5927;      &#x804C;&#x4F4D;&#xFF1A;&#x8D22;&#x52A1;&#x90E8;&#x95E8;&#x7ECF;&#x7406;      &#x85AA;&#x6C34;&#xFF1A;30000
&#x59D3;&#x540D;&#xFF1A;i &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;4000
&#x59D3;&#x540D;&#xFF1A;j &#x804C;&#x4F4D;&#xFF1A;&#x5F00;&#x53D1;&#x4EBA;&#x5458;  &#x85AA;&#x6C34;&#xFF1A;5000  </code></pre><h2 id="&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;"><a href="#&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;" class="headerlink" title="&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;"></a>&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Define a one-to-many dependency between objects so that when one object changes state,all its dependents are notified and updated automatically.<br><br>&#x5B9A;&#x4E49;&#x5BF9;&#x8C61;&#x95F4;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x591A;&#x7684;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x4F7F;&#x5F97;&#x6BCF;&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x6539;&#x53D8;&#x72B6;&#x6001;&#xFF0C;&#x5219;&#x6240;&#x6709;&#x4F9D;&#x8D56;&#x4E8E;&#x5B83;&#x7684;&#x5BF9;&#x8C61;&#x90FD;&#x4F1A;&#x5F97;&#x5230;&#x901A;&#x77E5;&#x5E76;&#x88AB;&#x81EA;&#x52A8;&#x66F4;&#x65B0;&#x3002;</p>
</blockquote>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1576921446447.png?x-oss-process=image/resize,m_lfit,h_450" width="734" height="450" layout="responsive"></amp-img></div>
<p>&#x25CF; Subject&#x88AB;&#x89C2;&#x5BDF;&#x8005;<br>&#x5B9A;&#x4E49;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x7684;&#x804C;&#x8D23;&#xFF0C;&#x5B83;&#x5FC5;&#x987B;&#x80FD;&#x591F;&#x52A8;&#x6001;&#x5730;&#x589E;&#x52A0;&#x3001;&#x53D6;&#x6D88;&#x89C2;&#x5BDF;&#x8005;&#x3002;&#x5B83;&#x4E00;&#x822C;&#x662F;&#x62BD;&#x8C61;&#x7C7B;&#x6216;&#x8005;&#x662F;&#x5B9E;&#x73B0;&#x7C7B;&#xFF0C;&#x4EC5;&#x4EC5;&#x5B8C;&#x6210;&#x4F5C;&#x4E3A;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x5FC5;&#x987B;&#x5B9E;&#x73B0;&#x7684;&#x804C;&#x8D23;&#xFF1A;&#x7BA1;&#x7406;&#x89C2;&#x5BDF;&#x8005;&#x5E76;&#x901A;&#x77E5;&#x89C2;&#x5BDF;&#x8005;&#x3002;<br>&#x25CF; Observer&#x89C2;&#x5BDF;&#x8005;<br>&#x89C2;&#x5BDF;&#x8005;&#x63A5;&#x6536;&#x5230;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x5373;&#x8FDB;&#x884C;update&#xFF08;&#x66F4;&#x65B0;&#x65B9;&#x6CD5;&#xFF09;&#x64CD;&#x4F5C;&#xFF0C;&#x5BF9;&#x63A5;&#x6536;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;<br>&#x25CF; ConcreteSubject&#x5177;&#x4F53;&#x7684;&#x88AB;&#x89C2;&#x5BDF;&#x8005;<br>&#x5B9A;&#x4E49;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x81EA;&#x5DF1;&#x7684;&#x4E1A;&#x52A1;&#x903B;&#x8F91;&#xFF0C;&#x540C;&#x65F6;&#x5B9A;&#x4E49;&#x5BF9;&#x54EA;&#x4E9B;&#x4E8B;&#x4EF6;&#x8FDB;&#x884C;&#x901A;&#x77E5;&#x3002;<br>&#x25CF; ConcreteObserver&#x5177;&#x4F53;&#x7684;&#x89C2;&#x5BDF;&#x8005;<br>&#x6BCF;&#x4E2A;&#x89C2;&#x5BDF;&#x5728;&#x63A5;&#x6536;&#x5230;&#x6D88;&#x606F;&#x540E;&#x7684;&#x5904;&#x7406;&#x53CD;&#x5E94;&#x662F;&#x4E0D;&#x540C;&#xFF0C;&#x5404;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#x6709;&#x81EA;&#x5DF1;&#x7684;&#x5904;&#x7406;&#x903B;&#x8F91;&#x3002;</p>
<p>&#x4F20;&#x7EDF;&#x65B9;&#x5F0F;&#x7528;&#x591A;&#x7EBF;&#x7A0B;&#x6280;&#x672F;&#x5B9E;&#x73B0;&#x76D1;&#x542C;&#xFF0C;&#x800C;&#x7EBF;&#x7A0B;&#x548C;&#x6B7B;&#x5FAA;&#x73AF;&#x4F1A;&#x6781;&#x5927;&#x7684;&#x589E;&#x52A0;&#x5F00;&#x9500;&#xFF0C;&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x79CD;&#x5F00;&#x9500;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x6A21;&#x5F0F;&#x6709;&#x591A;&#x79CD;&#x53EB;&#x6CD5;,&#x73B0;&#x6574;&#x7406;&#x5982;&#x4E0B;,&#x6BCF;&#x4E00;&#x884C;&#x90FD;&#x662F;&#x76F8;&#x540C;&#x7684;&#x4E1C;&#x897F;:<br>&#x4E3B;&#x9898;,&#x88AB;&#x89C2;&#x5BDF;&#x8005;,&#x8C03;&#x7528;&#x8005;<br>&#x8BA2;&#x9605;&#x8005;,&#x89C2;&#x5BDF;&#x8005;,&#x88AB;&#x8C03;&#x7528;&#x8005;<br>&#x6CE8;&#x518C;,&#x8BA2;&#x9605;</p>
<hr>

<p>&#x4E3B;&#x9898;&#x7528;&#x4E8E;&#x7BA1;&#x7406;&#x8BA2;&#x9605;&#x8005;,&#x5F53;&#x53D1;&#x5E03;&#x8005;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x65F6;,&#x4E3B;&#x9898;&#x5E7F;&#x64AD;&#x7ED9;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8005;,&#x7136;&#x540E;&#x6240;&#x6709;&#x8BA2;&#x9605;&#x8005;&#x505A;&#x7EDF;&#x4E00;&#x52A8;&#x4F5C;.</p>
<p><code>&#x4E3B;&#x9898;</code><br>Subject.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">ifndef</span> __SUBJECT__H__</span>
<span class="token macro property">#<span class="token directive keyword">define</span> __SUBJECT__H__</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Observer.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
using namespace std<span class="token punctuation">;</span>
class Observer<span class="token punctuation">;</span>
class Subject
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual string <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

private<span class="token punctuation">:</span>
    list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token operator">*</span> _observers<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


class ConcreteSubject <span class="token punctuation">:</span> public Subject <span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string state<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Subject.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Subject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list&gt;</span></span>
using namespace std<span class="token punctuation">;</span>

Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _observers <span class="token operator">=</span> new list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obs <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _observers<span class="token operator">-&gt;</span><span class="token function">push_front</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">detach</span><span class="token punctuation">(</span>Observer<span class="token operator">*</span> obs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obs <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _observers<span class="token operator">-&gt;</span><span class="token function">remove</span><span class="token punctuation">(</span>obs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> Subject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    list<span class="token operator">&lt;</span>Observer<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>iterator iter<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x904D;&#x5386;&#x66F4;&#x65B0;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>iter <span class="token operator">=</span> _observers<span class="token operator">-&gt;</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter <span class="token operator">!=</span> _observers<span class="token operator">-&gt;</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>iter<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>state <span class="token operator">=</span> <span class="token string">&apos;\0&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

string ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> ConcreteSubject<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>state <span class="token operator">=</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>&#x89C2;&#x5BDF;&#x8005;</code></p>
<p>Observer.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">ifndef</span> __OBSERVER__H__</span>
<span class="token macro property">#<span class="token directive keyword">define</span> __OBSERVER__H__</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Subject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
using namespace std<span class="token punctuation">;</span>
class Subject<span class="token punctuation">;</span>
class Observer <span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> subject<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
public<span class="token punctuation">:</span>
    std<span class="token punctuation">:</span><span class="token punctuation">:</span>string state<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>

class ConcreteObserver<span class="token punctuation">:</span>public Observer 
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    Subject<span class="token operator">*</span> _sub<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property">#<span class="token directive keyword">endif</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Observer.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Observer.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;list&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

using namespace std<span class="token punctuation">;</span>

Observer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token string">&apos;\0&apos;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Observer<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">Observer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _sub <span class="token operator">=</span> sub<span class="token punctuation">;</span>
    _sub<span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ConcreteObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    _sub<span class="token operator">-&gt;</span><span class="token function">detach</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_sub <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        delete _sub<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



<span class="token keyword">void</span> ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">update</span><span class="token punctuation">(</span>Subject<span class="token operator">*</span> subject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> subject<span class="token operator">-&gt;</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> ConcreteObserver<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment" spellcheck="true">// string str = _sub-&gt;getState();</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;ConcreteObserver observer.... &quot;</span> <span class="token operator">&lt;&lt;</span> _sub<span class="token operator">-&gt;</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>&#x4E3B;&#x51FD;&#x6570;</code><br>main.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Observer.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Subject.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x88AB;&#x76D1;&#x542C;&#x5BF9;&#x8C61;sub&#xFF08;&#x4E3B;&#x9898;&#xFF09;</span>
    Subject<span class="token operator">*</span> sub <span class="token operator">=</span> new <span class="token function">ConcreteSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;&#x76D1;&#x542C;&#x8005;obA &#xFF0C;&#x5E76;&#x521D;&#x59CB;&#x5316;&#x4E3A;&#x76D1;&#x542C;sub</span>
    ConcreteObserver<span class="token operator">*</span> obA <span class="token operator">=</span> new <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ConcreteObserver<span class="token operator">*</span> obB <span class="token operator">=</span> new <span class="token function">ConcreteObserver</span><span class="token punctuation">(</span>sub<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x9A8C;&#x8BC1;&#x6B64;&#x65F6;&#x6D88;&#x606F;&#x4E3A;&#x7A7A;</span>
    obA<span class="token operator">-&gt;</span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obB<span class="token operator">-&gt;</span><span class="token function">printInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x88AB;&#x76D1;&#x542C;&#x8005;&#x5F00;&#x59CB;&#x6539;&#x53D8;</span>
    sub<span class="token operator">-&gt;</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03;&#x4E86;&#x6700;&#x65B0;&#x6D88;&#x606F;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x88AB;&#x76D1;&#x542C;&#x8005;&#x53D1;&#x5E03;&#x5E7F;&#x64AD;</span>
    sub<span class="token operator">-&gt;</span><span class="token function">Notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-bash"><code class="language-bash">g++ main.cpp Subject.cpp Observer.cpp 
./a.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre><code>ConcreteObserver observer.... 
ConcreteObserver observer.... 
ConcreteObserver observer.... &#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03;&#x4E86;&#x6700;&#x65B0;&#x6D88;&#x606F;
ConcreteObserver observer.... &#x5927;&#x5BB6;&#x597D;&#xFF0C;&#x6211;&#x73B0;&#x5728;&#x5DF2;&#x7ECF;&#x53D1;&#x5E03;&#x4E86;&#x6700;&#x65B0;&#x6D88;&#x606F;</code></pre><p>&#x8FD9;&#x662F;&#x88AB;&#x76D1;&#x542C;&#x8005;&#x548C;&#x76D1;&#x542C;&#x8005;&#x76F4;&#x63A5;&#x5BF9;&#x63A5;&#x7684;&#x6A21;&#x578B;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x79CD;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x7B2C;&#x4E09;&#x65B9;&#x901A;&#x4FE1;&#x5E73;&#x53F0;&#xFF0C;&#x76D1;&#x542C;&#x8005;&#x5411;&#x5E73;&#x53F0;&#x6CE8;&#x518C;&#xFF0C;&#x88AB;&#x76D1;&#x542C;&#x8005;&#x5C06;&#x66F4;&#x65B0;&#x4FE1;&#x606F;&#x53D1;&#x9001;&#x7ED9;&#x6D88;&#x606F;&#x5E73;&#x53F0;&#xFF0C;&#x7136;&#x540E;&#x5E73;&#x53F0;&#x8FDB;&#x884C;&#x53D1;&#x653E;&#x5E7F;&#x64AD;&#x3002;&#x6211;&#x6000;&#x7591;&#x8FD9;&#x662F;&#x4E0D;&#x662F;&#x4EE3;&#x7406;&#x6A21;&#x5F0F;&#xFF1F;</p>
<h2 id="&#x95E8;&#x9762;&#x6A21;&#x5F0F;"><a href="#&#x95E8;&#x9762;&#x6A21;&#x5F0F;" class="headerlink" title="&#x95E8;&#x9762;&#x6A21;&#x5F0F;"></a>&#x95E8;&#x9762;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Provide a unified interface to a set of interfaces in a subsystem.Facade defines a higher-level interface that makes the subsystem easier to use.<br><br>&#x8981;&#x6C42;&#x4E00;&#x4E2A;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x5916;&#x90E8;&#x4E0E;&#x5176;&#x5185;&#x90E8;&#x7684;&#x901A;&#x4FE1;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x4E00;&#x4E2A;&#x7EDF;&#x4E00;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x3002;&#x95E8;&#x9762;&#x6A21;&#x5F0F;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x9AD8;&#x5C42;&#x6B21;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x4F7F;&#x5F97;&#x5B50;&#x7CFB;&#x7EDF;&#x66F4;&#x6613;&#x4E8E;&#x4F7F;&#x7528;&#x3002;</p>
</blockquote>
<p>&#x95E8;&#x9762;&#x6A21;&#x5F0F;&#x6CE8;&#x91CD;&#x201C;&#x7EDF;&#x4E00;&#x7684;&#x5BF9;&#x8C61;&#x201D;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x8BBF;&#x95EE;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x9664;&#x4E86;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x4E0D;&#x5141;&#x8BB8;&#x6709;&#x4EFB;&#x4F55;&#x8BBF;&#x95EE;&#x5B50;&#x7CFB;&#x7EDF;&#x7684;&#x884C;&#x4E3A;&#x53D1;&#x751F;&#x3002;<br>&#x7B80;&#x5355;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x5C06;&#x590D;&#x6742;&#x7684;&#x903B;&#x8F91;&#x5C01;&#x88C5;&#x8D77;&#x6765;&#xFF0C;&#x5BF9;&#x5916;&#x516C;&#x5F00;&#x7B80;&#x5355;&#x7684;&#x63A5;&#x53E3;&#xFF0C;&#x7531;&#x5BA2;&#x6237;&#x7A0B;&#x5E8F;&#x8C03;&#x7528;&#x3002;</p>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>ILetterProcess&#xFF0C;&#x63A5;&#x53E3;</p>
<p>CLetterProcessImpl&#xFF0C;&#x4FE1;&#x4EF6;&#x5904;&#x7406;&#x7684;4&#x4E2A;&#x51FD;&#x6570;</p>
<p>CLetterPolice&#xFF0C;&#x8B66;&#x5BDF;</p>
<p>CModenPostOffice&#xFF0C;&#x90AE;&#x5C40;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x90AE;&#x5C40;&#x5BF9;&#x5916;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x7A97;&#x53E3;&#xFF0C;&#x63A5;&#x6536;&#x4FE1;&#x4EF6;&#x5185;&#x5BB9;&#x548C;&#x90AE;&#x4EF6;&#x5730;&#x5740;&#x3002;&#x5BF9;&#x5185;&#x8C03;&#x7528;&#x90AE;&#x4EF6;&#x5904;&#x7406;&#x7684;4&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x5C06;&#x590D;&#x6742;&#x903B;&#x8F91;&#x5C01;&#x88C5;&#x5728;&#x90AE;&#x5C40;&#x7684;&#x91CC;&#x9762;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x589E;&#x52A0;&#x8B66;&#x5BDF;&#x6765;&#x68C0;&#x67E5;&#x4FE1;&#x4EF6;&#x65F6;&#xFF0C;&#x53EA;&#x9700;&#x5728;&#x90AE;&#x5C40;&#x5185;&#x589E;&#x52A0;&#x8B66;&#x5BDF;&#x68C0;&#x67E5;&#x4FE1;&#x4EF6;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573294669601.png?x-oss-process=image/resize,m_lfit,h_450" width="797" height="450" layout="responsive"></amp-img></div>
<p>ILetterProcess.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class ILetterProcess
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ILetterProcess.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ILetterProcess.h&quot;</span></span>
ILetterProcess<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
ILetterProcess<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">ILetterProcess</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterprocessImpl.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iletterprocess.h&quot;</span></span>
class CLetterProcessImpl <span class="token punctuation">:</span>
    public ILetterProcess
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterProcessImpl.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LetterProcessImpl.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">WriteContext</span><span class="token punctuation">(</span>string context<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x586B;&#x5199;&#x4FE1;&#x7684;&#x5185;&#x5BB9;... ...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span>string address<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x586B;&#x5199;&#x6536;&#x4EF6;&#x4EBA;&#x5730;&#x5740;&#x53CA;&#x59D3;&#x540D;... ...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x628A;&#x4FE1;&#x653E;&#x5230;&#x4FE1;&#x5C01;&#x4E2D;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterProcessImpl<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x90AE;&#x9012;&#x4FE1;&#x4EF6;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ModenPostOffice.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ILetterProcess.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LetterProcessImpl.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LetterPolice.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CModenPostOffice
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SendLetter</span><span class="token punctuation">(</span>string context<span class="token punctuation">,</span> string address<span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    ILetterProcess <span class="token operator">*</span>m_pLetterProcess<span class="token punctuation">;</span>
    CLetterPolice <span class="token operator">*</span>m_pLetterPolice<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ModenPostOffice.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ModenPostOffice.h&quot;</span></span>
CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLetterProcess <span class="token operator">=</span> new <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>m_pLetterPolice <span class="token operator">=</span> new <span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CModenPostOffice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete m_pLetterProcess<span class="token punctuation">;</span>
    delete m_pLetterPolice<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CModenPostOffice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SendLetter</span><span class="token punctuation">(</span> string context<span class="token punctuation">,</span> string address <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x5E2E;&#x5FD9;&#x5199;&#x4FE1;</span>
    m_pLetterProcess<span class="token operator">-&gt;</span><span class="token function">WriteContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x5199;&#x597D;&#x4FE1;&#x5C01;</span>
    m_pLetterProcess<span class="token operator">-&gt;</span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x8B66;&#x5BDF;&#x8981;&#x68C0;&#x67E5;&#x4FE1;&#x4EF6;&#x4E86;</span>
    m_pLetterPolice<span class="token operator">-&gt;</span><span class="token function">CheckLetter</span><span class="token punctuation">(</span>m_pLetterProcess<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x628A;&#x4FE1;&#x653E;&#x5230;&#x4FE1;&#x5C01;&#x4E2D;</span>
    m_pLetterProcess<span class="token operator">-&gt;</span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//&#x90AE;&#x9012;&#x4FE1;&#x4EF6;</span>
    m_pLetterProcess<span class="token operator">-&gt;</span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterPolice.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ILetterProcess.h&quot;</span></span>
class CLetterPolice
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
   <span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token operator">~</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
   <span class="token keyword">void</span> <span class="token function">CheckLetter</span><span class="token punctuation">(</span>ILetterProcess<span class="token operator">*</span> pLetterProcess<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LetterPolice.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LetterPolice.h&quot;</span></span>
CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLetterPolice</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CLetterPolice<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CheckLetter</span><span class="token punctuation">(</span> ILetterProcess <span class="token operator">*</span>pLetterProcess <span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token comment" spellcheck="true">//&#x68C0;&#x67E5;&#x4FE1;&#x4EF6;&#xFF0C;&#x6B64;&#x5904;&#x7701;&#x7565;&#x4E00;&#x4E07;&#x5B57;&#x3002;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Facade.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ILetterProcess.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LetterProcessImpl.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ModenPostOffice.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DoItByPostOffice</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CModenPostOffice modenPostOffice<span class="token punctuation">;</span>
    string context <span class="token operator">=</span> <span class="token string">&quot;Hello, It&apos;s me, do you know who I am? I&apos;m your old lover. I&apos;d like to ... ...&quot;</span><span class="token punctuation">;</span>
    string address <span class="token operator">=</span> <span class="token string">&quot;Happy Road No. 666, Beijing City, China&quot;</span><span class="token punctuation">;</span>
    modenPostOffice<span class="token punctuation">.</span><span class="token function">SendLetter</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> address<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">DoItYourself</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ILetterProcess <span class="token operator">*</span>pLetterProcess <span class="token operator">=</span> new <span class="token function">CLetterProcessImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-&gt;</span><span class="token function">WriteContext</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, It&apos;s me, do you know who I am? I&apos;m your old lover. I&apos;d like to ... ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-&gt;</span><span class="token function">FillEnvelope</span><span class="token punctuation">(</span><span class="token string">&quot;Happy Road No. 666, Beijing City, China&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-&gt;</span><span class="token function">LetterIntoEnvelope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLetterProcess<span class="token operator">-&gt;</span><span class="token function">SendLetter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    delete pLetterProcess<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x73B0;&#x5728;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x3002;&#x5BF9;&#x4E8E;&#x5BA2;&#x6237;&#x6765;&#x8BF4;&#x786E;&#x5B9E;&#x7B80;&#x5355;&#x591A;&#x4E86;&#x3002;</span>
    <span class="token comment" spellcheck="true">//&#x5982;&#x9700;&#x8981;&#x589E;&#x52A0;&#x903B;&#x8F91;&#xFF0C;&#x4F8B;&#x5982;&#x8BA9;&#x8B66;&#x5BDF;&#x6765;&#x68C0;&#x67E5;&#x90AE;&#x4EF6;&#x3002;&#x53EF;&#x4EE5;&#x5728;&#x90AE;&#x5C40;&#x91CC;&#x5B8C;&#x6210;&#x8FD9;&#x9879;&#x5DE5;&#x4F5C;&#x3002;</span>
    <span class="token function">DoItByPostOffice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x539F;&#x6765;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x5F0F;&#x3002;</span>
    <span class="token function">DoItYourself</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x586B;&#x5199;&#x4FE1;&#x7684;&#x5185;&#x5BB9;... ...
&#x586B;&#x5199;&#x6536;&#x4EF6;&#x4EBA;&#x5730;&#x5740;&#x53CA;&#x59D3;&#x540D;... ...
&#x628A;&#x4FE1;&#x653E;&#x5230;&#x4FE1;&#x5C01;&#x4E2D;...
&#x90AE;&#x9012;&#x4FE1;&#x4EF6;...
&#x586B;&#x5199;&#x4FE1;&#x7684;&#x5185;&#x5BB9;... ...
&#x586B;&#x5199;&#x6536;&#x4EF6;&#x4EBA;&#x5730;&#x5740;&#x53CA;&#x59D3;&#x540D;... ...
&#x628A;&#x4FE1;&#x653E;&#x5230;&#x4FE1;&#x5C01;&#x4E2D;...
&#x90AE;&#x9012;&#x4FE1;&#x4EF6;...   </code></pre><h2 id="&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;"><a href="#&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;" class="headerlink" title="&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;"></a>&#x5907;&#x5FD8;&#x5F55;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Without violating encapsulation,capture and externalize an object&#x2019;s internal state so that the object can be restored to this state later.<br><br>&#x5728;&#x4E0D;&#x7834;&#x574F;&#x5C01;&#x88C5;&#x6027;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#xFF0C;&#x6355;&#x83B7;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x5185;&#x90E8;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x5728;&#x8BE5;&#x5BF9;&#x8C61;&#x4E4B;&#x5916;&#x4FDD;&#x5B58;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x3002;&#x8FD9;&#x6837;&#x4EE5;&#x540E;&#x5C31;&#x53EF;&#x5C06;&#x8BE5;&#x5BF9;&#x8C61;&#x6062;&#x590D;&#x5230;&#x539F;&#x5148;&#x4FDD;&#x5B58;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
</blockquote>
<h2 id="&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;"><a href="#&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;" class="headerlink" title="&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;"></a>&#x8BBF;&#x95EE;&#x8005;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Represent an operation to be performed on the elements of an object structure. Visitor lets you define a new operation without changing the classes of the elements on which it operates. <br><br>&#x5C01;&#x88C5;&#x4E00;&#x4E9B;&#x4F5C;&#x7528;&#x4E8E;&#x67D0;&#x79CD;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5404;&#x5143;&#x7D20;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x6539;&#x53D8;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x7684;&#x524D;&#x63D0;&#x4E0B;&#x5B9A;&#x4E49;&#x4F5C;&#x7528;&#x4E8E;&#x8FD9;&#x4E9B;&#x5143;&#x7D20;&#x7684;&#x65B0;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
</blockquote>
<p>BaseVisitor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ivisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CommonEmployee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Manager.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CBaseVisitor <span class="token punctuation">:</span>
    public IVisitor
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string <span class="token function">GetBasicInfo</span><span class="token punctuation">(</span>CEmployee <span class="token operator">*</span>pemployee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>CCommonEmployee employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> MANAGER_COEFFICENT <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> COMMONEMPLOYEE_COEFFICENT <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_commonTotal<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_managerTotal<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CalCommonSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CalManagerSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CommonEmployee.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;employee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IVisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CCommonEmployee <span class="token punctuation">:</span>
    public CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetJob</span><span class="token punctuation">(</span>string job<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    string <span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_job<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Employee.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IVisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> MALE<span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">int</span> FEMALE<span class="token punctuation">;</span>
    <span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetName</span><span class="token punctuation">(</span>string name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetSex</span><span class="token punctuation">(</span><span class="token keyword">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_name<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_salary<span class="token punctuation">;</span>
    <span class="token keyword">int</span> m_sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IVisitor.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>

class CCommonEmployee<span class="token punctuation">;</span>
class CManager<span class="token punctuation">;</span>
class IVisitor
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">IVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">IVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">int</span> <span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Manager.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;employee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IVisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
class CManager <span class="token punctuation">:</span>
    public CEmployee
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string <span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetPerformance</span><span class="token punctuation">(</span>string per<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    string <span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    string m_performance<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>BaseVisitor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;..\CommonDeclare\Convert.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BaseVisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_commonTotal <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    m_managerTotal <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CBaseVisitor</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Visit</span><span class="token punctuation">(</span>CCommonEmployee commonEmployee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> this<span class="token operator">-&gt;</span><span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>commonEmployee<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">CalCommonSalary</span><span class="token punctuation">(</span>commonEmployee<span class="token punctuation">.</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Visit</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> this<span class="token operator">-&gt;</span><span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span><span class="token function">CalManagerSalary</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span>CEmployee <span class="token operator">*</span>pemployee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x59D3;&#x540D;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>pemployee<span class="token operator">-&gt;</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x6027;&#x522B;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>pemployee<span class="token operator">-&gt;</span><span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x85AA;&#x6C34;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>pemployee<span class="token operator">-&gt;</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetManagerInfo</span><span class="token punctuation">(</span>CManager manager<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string basicInfo <span class="token operator">=</span> this<span class="token operator">-&gt;</span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string otherInfo <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E1A;&#x7EE9;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>manager<span class="token punctuation">.</span><span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    basicInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>otherInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> basicInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetCommonEmployee</span><span class="token punctuation">(</span>CCommonEmployee employee<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string basicInfo <span class="token operator">=</span> this<span class="token operator">-&gt;</span><span class="token function">GetBasicInfo</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
    string otherInfo <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5DE5;&#x4F5C;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>employee<span class="token punctuation">.</span><span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    otherInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    basicInfo<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>otherInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> basicInfo<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_commonTotal <span class="token operator">+</span> this<span class="token operator">-&gt;</span>m_managerTotal<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CalCommonSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_commonTotal <span class="token operator">+</span><span class="token operator">=</span> salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CBaseVisitor<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CalManagerSalary</span><span class="token punctuation">(</span><span class="token keyword">int</span> salary<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_managerTotal <span class="token operator">+</span><span class="token operator">=</span> salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CommonEmployee.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CommonEmployee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>


CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_job <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetJob</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> this<span class="token operator">-&gt;</span>m_job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetJob</span><span class="token punctuation">(</span>string job<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_job <span class="token operator">=</span> job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string job <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5DE5;&#x4F5C;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_job<span class="token punctuation">)</span><span class="token punctuation">;</span>
    job<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> job<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCommonEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pVisitor<span class="token operator">-&gt;</span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Employee.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Employee.h&quot;</span></span>
<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>MALE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>


CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CEmployee</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetName</span><span class="token punctuation">(</span> string name <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_salary<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSalary</span><span class="token punctuation">(</span> <span class="token keyword">int</span> v <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_salary <span class="token operator">=</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetSex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetSex</span><span class="token punctuation">(</span> <span class="token keyword">int</span> v <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_sex <span class="token operator">=</span> v<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Manager.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Manager.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>string<span class="token punctuation">;</span>


CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_performance <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CManager</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

string CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetPerformance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_performance<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetPerformance</span><span class="token punctuation">(</span>string per<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_performance <span class="token operator">=</span> per<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetOtherInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    string info <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;&#x4E1A;&#x7EE9;&#xFF1A;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_performance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    info<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CManager<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Accept</span><span class="token punctuation">(</span>IVisitor <span class="token operator">*</span>pVisitor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    pVisitor<span class="token operator">-&gt;</span><span class="token function">Visit</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Visitor.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token comment" spellcheck="true">// Visitor.cpp : &#x5B9A;&#x4E49;&#x63A7;&#x5236;&#x53F0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x3002;</span>
<span class="token comment" spellcheck="true">//</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Employee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CommonEmployee.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Manager.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;BaseVisitor.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;..\CommonDeclare\Convert.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>vector<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>


<span class="token keyword">void</span> <span class="token function">MockEmployee</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">&gt;</span> <span class="token operator">*</span>pvce<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    CCommonEmployee <span class="token operator">*</span>pZhangSan <span class="token operator">=</span> new <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-&gt;</span><span class="token function">SetJob</span><span class="token punctuation">(</span><span class="token string">&quot;&#x7F16;&#x5199;Java&#x7A0B;&#x5E8F;&#xFF0C;&#x7EDD;&#x5BF9;&#x7684;&#x84DD;&#x9886;&#x3001;&#x82E6;&#x5DE5;&#x52A0;&#x642C;&#x8FD0;&#x5DE5;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-&gt;</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;&#x5F20;&#x4E09;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-&gt;</span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pZhangSan<span class="token operator">-&gt;</span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>MALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pZhangSan<span class="token punctuation">)</span><span class="token punctuation">;</span>

    CCommonEmployee <span class="token operator">*</span>pLiSi <span class="token operator">=</span> new <span class="token function">CCommonEmployee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-&gt;</span><span class="token function">SetJob</span><span class="token punctuation">(</span><span class="token string">&quot;&#x9875;&#x9762;&#x7F8E;&#x5DE5;&#xFF0C;&#x5BA1;&#x7F8E;&#x7D20;&#x8D28;&#x592A;&#x4E0D;&#x6D41;&#x884C;&#x4E86;&#xFF01;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-&gt;</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;&#x674E;&#x56DB;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-&gt;</span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLiSi<span class="token operator">-&gt;</span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pLiSi<span class="token punctuation">)</span><span class="token punctuation">;</span>

    CManager <span class="token operator">*</span>pWangWu <span class="token operator">=</span> new <span class="token function">CManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-&gt;</span><span class="token function">SetPerformance</span><span class="token punctuation">(</span><span class="token string">&quot;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x8D1F;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4F1A;&#x62CD;&#x9A6C;&#x5C41;&#x5440;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-&gt;</span><span class="token function">SetName</span><span class="token punctuation">(</span><span class="token string">&quot;&#x738B;&#x4E94;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-&gt;</span><span class="token function">SetSalary</span><span class="token punctuation">(</span><span class="token number">1900</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pWangWu<span class="token operator">-&gt;</span><span class="token function">SetSex</span><span class="token punctuation">(</span>CEmployee<span class="token punctuation">:</span><span class="token punctuation">:</span>FEMALE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pvce<span class="token operator">-&gt;</span><span class="token function">push_back</span><span class="token punctuation">(</span>pWangWu<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">&gt;</span> vce<span class="token punctuation">;</span>
    <span class="token function">MockEmployee</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>vce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>const_iterator readIt <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    CBaseVisitor visitor<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> readIt <span class="token operator">!=</span> vce<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> readIt <span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>readIt<span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Accept</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>visitor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x672C;&#x516C;&#x53F8;&#x7684;&#x6708;&#x5DE5;&#x8D44;&#x603B;&#x989D;&#x662F;&#xFF1A;&quot;</span> <span class="token operator">&lt;&lt;</span> CConvert<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ToString</span><span class="token punctuation">(</span>visitor<span class="token punctuation">.</span><span class="token function">GetTotalSalary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    vector<span class="token operator">&lt;</span>CEmployee<span class="token operator">*</span><span class="token operator">&gt;</span><span class="token punctuation">:</span><span class="token punctuation">:</span>reverse_iterator delIt <span class="token operator">=</span> vce<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> delIt <span class="token operator">!=</span> vce<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> delIt<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">delete</span> <span class="token punctuation">(</span><span class="token operator">*</span>delIt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">(</span><span class="token operator">*</span>delIt<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    vce<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>&#x59D3;&#x540D;&#xFF1A;&#x5F20;&#x4E09;      &#x6027;&#x522B;&#xFF1A;0 &#x85AA;&#x6C34;&#xFF1A;1800      &#x5DE5;&#x4F5C;&#xFF1A;&#x7F16;&#x5199;Java&#x7A0B;&#x5E8F;&#xFF0C;&#x7EDD;&#x5BF9;&#x7684;&#x84DD;&#x9886;&#x3001;&#x82E6;&#x5DE5;&#x52A0;&#x642C;&#x8FD0;&#x5DE5;
&#x59D3;&#x540D;&#xFF1A;&#x674E;&#x56DB;      &#x6027;&#x522B;&#xFF1A;1 &#x85AA;&#x6C34;&#xFF1A;1900      &#x5DE5;&#x4F5C;&#xFF1A;&#x9875;&#x9762;&#x7F8E;&#x5DE5;&#xFF0C;&#x5BA1;&#x7F8E;&#x7D20;&#x8D28;&#x592A;&#x4E0D;&#x6D41;&#x884C;&#x4E86;&#xFF01;
&#x59D3;&#x540D;&#xFF1A;&#x738B;&#x4E94;      &#x6027;&#x522B;&#xFF1A;1 &#x85AA;&#x6C34;&#xFF1A;1900      &#x4E1A;&#x7EE9;&#xFF1A;&#x57FA;&#x672C;&#x4E0A;&#x662F;&#x8D1F;&#x503C;&#xFF0C;&#x4F46;&#x662F;&#x6211;&#x4F1A;&#x62CD;&#x9A6C;&#x5C41;&#x5440;
&#x672C;&#x516C;&#x53F8;&#x7684;&#x6708;&#x5DE5;&#x8D44;&#x603B;&#x989D;&#x662F;&#xFF1A;5600    </code></pre><h2 id="&#x72B6;&#x6001;&#x6A21;&#x5F0F;"><a href="#&#x72B6;&#x6001;&#x6A21;&#x5F0F;" class="headerlink" title="&#x72B6;&#x6001;&#x6A21;&#x5F0F;"></a>&#x72B6;&#x6001;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Allow an object to alter its behavior when its internal state changes.The object will appear to change its class.<br><br>&#x5F53;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5185;&#x5728;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x65F6;&#x5141;&#x8BB8;&#x5176;&#x6539;&#x53D8;&#x884C;&#x4E3A;&#xFF0C;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x6539;&#x53D8;&#x4E86;&#x5176;&#x7C7B;&#x3002;</p>
</blockquote>
<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>CLiftState&#xFF0C;&#x7535;&#x68AF;&#x72B6;&#x6001;&#x62BD;&#x8C61;&#x7C7B;</p>
<p>CCloseingState&#xFF0C;&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;</p>
<p>COpenningState&#xFF0C;&#x7535;&#x68AF;&#x95E8;&#x6253;&#x5F00;</p>
<p>CRunningState&#xFF0C;&#x7535;&#x68AF;&#x8FD0;&#x884C;</p>
<p>CStoppingState&#xFF0C;&#x7535;&#x68AF;&#x505C;&#x6B62;</p>
<p>CContext&#xFF0C;&#x7535;&#x68AF;&#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;</p>
<p>&#x8BF4;&#x660E;&#xFF1A;CContext&#x4FDD;&#x6301;&#x7535;&#x68AF;&#x7684;&#x72B6;&#x6001;&#xFF0C;&#x5E76;&#x63D0;&#x4F9B;&#x64CD;&#x4F5C;&#x7684;&#x63A5;&#x53E3;&#x51FD;&#x6570;&#x3002;&#x5F53;&#x51FD;&#x6570;&#x88AB;&#x8C03;&#x7528;&#x65F6;&#xFF0C;CContext&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5F53;&#x524D;&#x72B6;&#x6001;&#x7684;&#x76F8;&#x5E94;&#x51FD;&#x6570;&#x3002;&#x7531;&#x72B6;&#x6001;&#x7684;&#x63A5;&#x53E3;&#x51FD;&#x6570;&#x6765;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x53EF;&#x4EE5;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#xFF0C;&#x4EE5;&#x53CA;&#x4FEE;&#x6539;&#x72B6;&#x6001;&#x4E3A;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x52A8;&#x4F5C;&#x540E;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<p>&#x770B;&#x4EE3;&#x7801;&#xFF1A;&#x7B2C;&#x4E00;&#x5757;&#x662F;&#x4E0D;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x7B2C;&#x4E8C;&#x5757;&#x662F;&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x7684;&#x505A;&#x6CD5;&#xFF0C;&#x5728;main()&#x51FD;&#x6570;&#x91CC;&#x4F1A;&#x6709;&#x8C03;&#x7528;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573351107501.png?x-oss-process=image/resize,m_lfit,h_450" width="831" height="450" layout="responsive"></amp-img></div>
<p>ILift.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class ILift
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>

    <span class="token function">ILift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    virtual <span class="token operator">~</span><span class="token function">ILift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> OPENING_STATE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> CLOSING_STATE <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> RUNNING_STATE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> STOPPING_STATE <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Lift.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ilift.h&quot;</span></span>
class CLift <span class="token punctuation">:</span>
    public ILift
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    <span class="token keyword">int</span> m_state<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Lift.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Lift.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLift</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetState</span><span class="token punctuation">(</span><span class="token keyword">int</span> state<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_state <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>OPENING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>RUNNING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>this<span class="token operator">-&gt;</span>m_state<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">case</span> OPENING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> CLOSING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> RUNNING_STATE<span class="token punctuation">:</span>
        this<span class="token operator">-&gt;</span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        this<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>CLOSING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> STOPPING_STATE<span class="token punctuation">:</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">OpenWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CloseWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">RunWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x4E0A;&#x4E0B;&#x8DD1;&#x8D77;&#x6765;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLift<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">StopWithoutLogic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LiftState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class CContext<span class="token punctuation">;</span>
class CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetContext</span><span class="token punctuation">(</span>CContext <span class="token operator">*</span>pContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
protected<span class="token punctuation">:</span>
    CContext <span class="token operator">*</span>m_pContext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>LiftState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LiftState.h&quot;</span></span>

CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CLiftState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetContext</span><span class="token punctuation">(</span> CContext <span class="token operator">*</span>pContext <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pContext <span class="token operator">=</span> pContext<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CloseingState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;liftstate.h&quot;</span></span>
class CCloseingState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>CloseingState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CloseingState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CCloseingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OpenningState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;liftstate.h&quot;</span></span>
class COpenningState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>OpenningState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OpenningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pCloseingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> COpenningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RunningState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;liftstate.h&quot;</span></span>
class CRunningState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>RunningState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RunningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x4E0A;&#x4E0B;&#x8DD1;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CRunningState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>StoppingState.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;liftstate.h&quot;</span></span>
class CStoppingState <span class="token punctuation">:</span>
    public CLiftState
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>StoppingState.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;StoppingState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//do nothing</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>CLiftState<span class="token punctuation">:</span><span class="token punctuation">:</span>m_pContext<span class="token operator">-&gt;</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CStoppingState<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;LiftState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OpenningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CloseingState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RunningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;StoppingState.h&quot;</span></span>
class CContext
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> COpenningState <span class="token operator">*</span>pOpenningState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CCloseingState <span class="token operator">*</span>pCloseingState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CRunningState <span class="token operator">*</span>pRunningState<span class="token punctuation">;</span>
    <span class="token keyword">static</span> CStoppingState <span class="token operator">*</span>pStoppingState<span class="token punctuation">;</span>
    CLiftState <span class="token operator">*</span> <span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">SetLiftState</span><span class="token punctuation">(</span>CLiftState <span class="token operator">*</span>pLiftState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    CLiftState <span class="token operator">*</span>m_pLiftState<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Context.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
COpenningState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pOpenningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CCloseingState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pCloseingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CRunningState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pRunningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
CStoppingState<span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span>pStoppingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>

CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    m_pLiftState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    pOpenningState <span class="token operator">=</span> new <span class="token function">COpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pCloseingState <span class="token operator">=</span> new <span class="token function">CCloseingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pRunningState <span class="token operator">=</span> new <span class="token function">CRunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pStoppingState <span class="token operator">=</span> new <span class="token function">CStoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CContext</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    delete pOpenningState<span class="token punctuation">;</span>
    pOpenningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pCloseingState<span class="token punctuation">;</span>
    pCloseingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pRunningState<span class="token punctuation">;</span>
    pRunningState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    delete pStoppingState<span class="token punctuation">;</span>
    pStoppingState <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

CLiftState <span class="token operator">*</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">GetLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> m_pLiftState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span>CLiftState <span class="token operator">*</span>pLiftState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLiftState <span class="token operator">=</span> pLiftState<span class="token punctuation">;</span>
    this<span class="token operator">-&gt;</span>m_pLiftState<span class="token operator">-&gt;</span><span class="token function">SetContext</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLiftState<span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLiftState<span class="token operator">-&gt;</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLiftState<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> CContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pLiftState<span class="token operator">-&gt;</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// State.cpp : &#x5B9A;&#x4E49;&#x63A7;&#x5236;&#x53F0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x3002;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ILift.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Lift.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Context.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;OpenningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;CloseingState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;RunningState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;StoppingState.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    ILift<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Lift<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Lift<span class="token punctuation">.</span>cpp
    ILift <span class="token operator">*</span>pLift <span class="token operator">=</span> new <span class="token function">CLift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pLift<span class="token operator">-&gt;</span><span class="token function">SetState</span><span class="token punctuation">(</span>ILift<span class="token punctuation">:</span><span class="token punctuation">:</span>STOPPING_STATE<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x7535;&#x68AF;&#x7684;&#x521D;&#x59CB;&#x6761;&#x4EF6;&#x662F;&#x505C;&#x6B62;&#x72B6;&#x6001;&#x3002;</span>
    pLift<span class="token operator">-&gt;</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x9996;&#x5148;&#x662F;&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;&#xFF0C;&#x4EBA;&#x8FDB;&#x53BB;</span>
    pLift<span class="token operator">-&gt;</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x7136;&#x540E;&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;</span>
    pLift<span class="token operator">-&gt;</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x518D;&#x7136;&#x540E;&#xFF0C;&#x7535;&#x68AF;&#x8DD1;&#x8D77;&#x6765;&#xFF0C;&#x5411;&#x4E0A;&#x6216;&#x8005;&#x5411;&#x4E0B;</span>
    pLift<span class="token operator">-&gt;</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&#x6700;&#x540E;&#x5230;&#x8FBE;&#x76EE;&#x7684;&#x5730;&#xFF0C;&#x7535;&#x68AF;&#x505C;&#x4E0B;&#x6765;</span>
    delete pLift<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    LiftState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> LiftState<span class="token punctuation">.</span>cpp<span class="token punctuation">,</span> OpenningState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> CloseingState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> RunningState<span class="token punctuation">.</span>h<span class="token punctuation">,</span> StoppingState<span class="token punctuation">.</span>h
    Context<span class="token punctuation">.</span>h<span class="token punctuation">,</span> Context<span class="token punctuation">.</span>cpp
    CContext context<span class="token punctuation">;</span>
    CCloseingState closeingState<span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">SetLiftState</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x4E4B;&#x524D;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoIt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x4E4B;&#x540E;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token function">DoNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x4E4B;&#x524D;----------
&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;...
&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;...
&#x7535;&#x68AF;&#x4E0A;&#x4E0B;&#x8DD1;&#x8D77;&#x6765;...
&#x7535;&#x68AF;&#x505C;&#x6B62;&#x4E86;...
----------&#x4F7F;&#x7528;&#x6A21;&#x5F0F;&#x4E4B;&#x540E;----------
&#x7535;&#x68AF;&#x95E8;&#x5173;&#x95ED;...
&#x7535;&#x68AF;&#x95E8;&#x5F00;&#x542F;...     </code></pre><h2 id="&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;"><a href="#&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;" class="headerlink" title="&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;"></a>&#x89E3;&#x91CA;&#x5668;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Given a language, define a representation for its grammar along with an interpreter that uses the representation to interpret sentences in the language.<br><br>&#x7ED9;&#x5B9A;&#x4E00;&#x95E8;&#x8BED;&#x8A00;&#xFF0C;&#x5B9A;&#x4E49;&#x5B83;&#x7684;&#x6587;&#x6CD5;&#x7684;&#x4E00;&#x79CD;&#x8868;&#x793A;&#xFF0C;&#x5E76;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x89E3;&#x91CA;&#x5668;&#xFF0C;&#x8BE5;&#x89E3;&#x91CA;&#x5668;&#x4F7F;&#x7528;&#x8BE5;&#x8868;&#x793A;&#x6765;&#x89E3;&#x91CA;&#x8BED;&#x8A00;&#x4E2D;&#x7684;&#x53E5;&#x5B50;&#x3002;</p>
</blockquote>
<h2 id="&#x4EAB;&#x5143;&#x6A21;&#x5F0F;"><a href="#&#x4EAB;&#x5143;&#x6A21;&#x5F0F;" class="headerlink" title="&#x4EAB;&#x5143;&#x6A21;&#x5F0F;"></a>&#x4EAB;&#x5143;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Use sharing to support large numbers of fine-grained objects efficiently.<br><br>&#x4F7F;&#x7528;&#x5171;&#x4EAB;&#x5BF9;&#x8C61;&#x53EF;&#x6709;&#x6548;&#x5730;&#x652F;&#x6301;&#x5927;&#x91CF;&#x7684;&#x7EC6;&#x7C92;&#x5EA6;&#x7684;&#x5BF9;&#x8C61;&#x3002;</p>
</blockquote>
<h2 id="&#x6865;&#x6881;&#x6A21;&#x5F0F;"><a href="#&#x6865;&#x6881;&#x6A21;&#x5F0F;" class="headerlink" title="&#x6865;&#x6881;&#x6A21;&#x5F0F;"></a>&#x6865;&#x6881;&#x6A21;&#x5F0F;</h2><blockquote>
<p>Decouple an abstraction from its implementation so that the two can vary independently.<br><br>&#x5C06;&#x62BD;&#x8C61;&#x548C;&#x5B9E;&#x73B0;&#x89E3;&#x8026;&#xFF0C;&#x4F7F;&#x5F97;&#x4E24;&#x8005;&#x53EF;&#x4EE5;&#x72EC;&#x7ACB;&#x5730;&#x53D8;&#x5316;&#x3002;</p>
</blockquote>
<hr>

<p>main()&#xFF0C;&#x5BA2;&#x6237;</p>
<p>IProduct&#xFF0C;&#x4EA7;&#x54C1;&#x63A5;&#x53E3;</p>
<p>CHouse&#xFF0C;&#x623F;&#x5B50;</p>
<p>CIPod&#xFF0C;ipod</p>
<p>CClothes&#xFF0C;&#x670D;&#x88C5;</p>
<p>CNewCorp&#xFF0C;&#x6865;&#x6881;&#x7C7B;&#xFF0C;MakeMoney()&#x662F;&#x6865;&#x6881;&#x65B9;&#x6CD5;</p>
<p>CNewHouseCorp&#xFF0C;&#x53EA;&#x80FD;&#x751F;&#x4EA7;&#x623F;&#x5B50;&#xFF0C;&#x6240;&#x4EE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x662F;CHouse*</p>
<p>CShanZhaiCorp&#xFF0C;&#x4EC0;&#x4E48;&#x8D5A;&#x94B1;&#x5C31;&#x751F;&#x4EA7;&#x4EC0;&#x4E48;&#xFF0C;&#x6240;&#x4EE5;&#x6784;&#x9020;&#x51FD;&#x6570;&#x662F;IProduct*</p>
<p>&#x8BF4;&#x660E;&#xFF1A;&#x5BA2;&#x6237;&#x76F4;&#x63A5;&#x4F7F;&#x7528;CNewHouseCorp&#x548C;CShanZhaiCorp&#x7C7B;&#xFF0C;&#x5728;main()&#x51FD;&#x6570;&#x91CC;&#x6784;&#x9020;&#x4EA7;&#x54C1;&#xFF0C;&#x7136;&#x540E;&#x4F20;&#x5230;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x91CC;&#x3002;&#x8FD9;&#x4E24;&#x4E2A;&#x7C7B;&#x7684;MakeMoney()&#x51FD;&#x6570;&#xFF0C;&#x5148;&#x8C03;&#x7528;&#x57FA;&#x7C7B;&#x7684;MakeMoney()&#xFF0C;&#x7136;&#x540E;&#x5206;&#x522B;&#x6267;&#x884C;&#x5404;&#x81EA;&#x7684;&#x903B;&#x8F91;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF1A;CNewCorp&#x8D77;&#x5230;&#x4E86;&#x6865;&#x6881;&#x7684;&#x4F5C;&#x7528;&#x3002;&#x53EF;&#x4EE5;&#x5206;&#x522B;&#x589E;&#x52A0;&#x4EA7;&#x54C1;&#x548C;&#x516C;&#x53F8;&#x3002;</p>
<div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/NeatReader-1573316097217.png?x-oss-process=image/resize,m_lfit,h_450" width="1085" height="450" layout="responsive"></amp-img></div>
<p>NewCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProduct.h&quot;</span></span>
class CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CNewCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    virtual <span class="token operator">~</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private<span class="token punctuation">:</span>
    IProduct <span class="token operator">*</span>m_pProduct<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;NewCorp.h&quot;</span></span>
CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span> IProduct <span class="token operator">*</span>pproduct <span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>m_pProduct <span class="token operator">=</span> pproduct<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CNewCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x6BCF;&#x4E2A;&#x516C;&#x53F8;&#x90FD;&#x662F;&#x4E00;&#x6837;&#xFF0C;&#x5148;&#x751F;&#x4EA7;</span>
    this<span class="token operator">-&gt;</span>m_pProduct<span class="token operator">-&gt;</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x7136;&#x540E;&#x9500;&#x552E;</span>
    this<span class="token operator">-&gt;</span>m_pProduct<span class="token operator">-&gt;</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewHouseCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;newcorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;House.h&quot;</span></span>
class CNewHouseCorp <span class="token punctuation">:</span>
    public CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span>CHouse <span class="token operator">*</span>pHouse<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>NewHouseCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;NewHouseCorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span>CHouse <span class="token operator">*</span>pHouse<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CNewCorp</span><span class="token punctuation">(</span>pHouse<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CNewHouseCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CNewHouseCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x8D5A;&#x5927;&#x94B1;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ShanZhaiCorp.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;newcorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IProduct.h&quot;</span></span>
class CShanZhaiCorp <span class="token punctuation">:</span>
    public CNewCorp
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>ShanZhaiCorp.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ShanZhaiCorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span>IProduct <span class="token operator">*</span>pproduct<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token function">CNewCorp</span><span class="token punctuation">(</span>pproduct<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CShanZhaiCorp</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CShanZhaiCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    this<span class="token operator">-&gt;</span>CNewCorp<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x6211;&#x8D5A;&#x94B1;&#x5440;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IProduct.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
class IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">IProduct</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token operator">~</span><span class="token function">IProduct</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    virtual <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    virtual <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>House.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iproduct.h&quot;</span></span>
class CHouse <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>House.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;House.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CHouse</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CHouse<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x5356;&#x51FA;&#x53BB;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Clothes.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iproduct.h&quot;</span></span>
class CClothes <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Clothes.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Clothes.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CClothes</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x8863;&#x670D;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CClothes<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x8863;&#x670D;&#x5356;&#x51FA;&#x53BB;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IPod.h</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">pragma</span> once</span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;iproduct.h&quot;</span></span>
class CIPod <span class="token punctuation">:</span>
    public IProduct
<span class="token punctuation">{</span>
public<span class="token punctuation">:</span>
    <span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IPod.cpp</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IPod.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>
CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">~</span><span class="token function">CIPod</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeProducted</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;ipod&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> CIPod<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">BeSelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;&#x751F;&#x4EA7;&#x51FA;&#x7684;ipod&#x5356;&#x51FA;&#x53BB;&#x4E86;...&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>// Bridge.cpp : &#x5B9A;&#x4E49;&#x63A7;&#x5236;&#x53F0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x5165;&#x53E3;&#x70B9;&#x3002;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;NewHouseCorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;Clothes.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;IPod.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&quot;ShanZhaiCorp.h&quot;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>cout<span class="token punctuation">;</span>
using std<span class="token punctuation">:</span><span class="token punctuation">:</span>endl<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">DoNewRun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CHouse house<span class="token punctuation">;</span>
    CNewHouseCorp <span class="token function">newHouseCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>house<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newHouseCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5C71;&#x5BE8;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CClothes clothes<span class="token punctuation">;</span>
    CShanZhaiCorp <span class="token function">shanZhaiCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>clothes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    shanZhaiCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">DoNewRun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CHouse house<span class="token punctuation">;</span>
    CNewHouseCorp <span class="token function">newHouseCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>house<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newHouseCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;----------&#x5C71;&#x5BE8;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    CIPod ipod<span class="token punctuation">;</span>
    CShanZhaiCorp <span class="token function">shanZhaiCorp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ipod<span class="token punctuation">)</span><span class="token punctuation">;</span>
    shanZhaiCorp<span class="token punctuation">.</span><span class="token function">MakeMoney</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x53EA;&#x6709;&#x4E24;&#x5BB6;&#x516C;&#x53F8;&#xFF0C;&#x4E00;&#x5BB6;&#x662F;&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#xFF0C;&#x53E6;&#x4E00;&#x5BB6;&#x516C;&#x53F8;&#x662F;&#x8863;&#x670D;&#x8D5A;&#x94B1;&#x5C31;&#x751F;&#x4EA7;&#x8863;&#x670D;</span>
    <span class="token function">DoNewRun1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">//&#x53EA;&#x6709;&#x4E24;&#x5BB6;&#x516C;&#x53F8;&#xFF0C;&#x4E00;&#x5BB6;&#x662F;&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#xFF0C;&#x53E6;&#x4E00;&#x5BB6;&#x516C;&#x53F8;&#x662F;ipod&#x8D5A;&#x94B1;&#x5C31;&#x751F;&#x4EA7;ipod</span>
    <span class="token function">DoNewRun2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">_CrtSetDbgFlag</span><span class="token punctuation">(</span>_CRTDBG_LEAK_CHECK_DF <span class="token operator">|</span> _CRTDBG_ALLOC_MEM_DF<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">_CrtDumpMemoryLeaks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre><code>----------&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x5356;&#x51FA;&#x53BB;&#x4E86;...
&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x8D5A;&#x5927;&#x94B1;&#x4E86;...
----------&#x5C71;&#x5BE8;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x8863;&#x670D;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x8863;&#x670D;&#x5356;&#x51FA;&#x53BB;&#x4E86;...
&#x6211;&#x8D5A;&#x94B1;&#x5440;...
----------&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...
&#x751F;&#x4EA7;&#x51FA;&#x7684;&#x623F;&#x5B50;&#x5356;&#x51FA;&#x53BB;&#x4E86;...
&#x623F;&#x5730;&#x4EA7;&#x516C;&#x53F8;&#x8D5A;&#x5927;&#x94B1;&#x4E86;...
----------&#x5C71;&#x5BE8;&#x516C;&#x53F8;&#x662F;&#x8FD9;&#x6837;&#x8FD0;&#x884C;&#x7684;----------
&#x751F;&#x4EA7;&#x51FA;&#x7684;ipod&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;&#x7684;...
&#x751F;&#x4EA7;&#x51FA;&#x7684;ipod&#x5356;&#x51FA;&#x53BB;&#x4E86;...
&#x6211;&#x8D5A;&#x94B1;&#x5440;...  </code></pre><h1 id="&#x6D88;&#x606F;&#x603B;&#x7EBF;"><a href="#&#x6D88;&#x606F;&#x603B;&#x7EBF;" class="headerlink" title="&#x6D88;&#x606F;&#x603B;&#x7EBF;"></a>&#x6D88;&#x606F;&#x603B;&#x7EBF;</h1><h2 id="&#x4EC0;&#x4E48;&#x662F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#xFF1F;"><a href="#&#x4EC0;&#x4E48;&#x662F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#xFF1F;" class="headerlink" title="&#x4EC0;&#x4E48;&#x662F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#xFF1F;"></a>&#x4EC0;&#x4E48;&#x662F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#xFF1F;</h2><p>&#x5BF9;&#x8C61;&#x7684;&#x5173;&#x7CFB;&#x4E4B;&#x95F4;&#x4E00;&#x822C;&#x6709;&#xFF1A;&#x4F9D;&#x8D56;&#x3001;&#x5173;&#x8054;&#x3001;&#x805A;&#x5408;&#x3001;&#x7EC4;&#x5408;&#x548C;&#x7EE7;&#x627F;&#xFF0C;&#x4ED6;&#x4EEC;&#x7684;&#x8026;&#x5408;&#x7A0B;&#x5EA6;&#x4E5F;&#x662F;&#x4F9D;&#x6B21;&#x52A0;&#x5F3A;&#xFF01;&#x5927;&#x89C4;&#x6A21;&#x5F00;&#x53D1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x5BF9;&#x8C61;&#x5F88;&#x591A;&#xFF0C;&#x5173;&#x8054;&#x5173;&#x7CFB;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x6CA1;&#x6709;&#x7EDF;&#x4E00;&#x3001;&#x7B80;&#x4ECB;&#x7684;&#x65B9;&#x6CD5;&#x53BB;&#x7BA1;&#x7406;&#x5BF9;&#x8C61;&#x7684;&#x5173;&#x7CFB;&#x5C06;&#x4F1A;&#x5BFC;&#x81F4;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x548C;&#x8718;&#x86DB;&#x7F51;&#x4E00;&#x6837;&#xFF0C;&#x6216;&#x8005;&#x5FAA;&#x73AF;&#x4F9D;&#x8D56;&#x95EE;&#x9898;&#x3002;<br>&#x57FA;&#x4E8E;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x6280;&#x672F;&#x53EF;&#x4EE5;&#x6709;&#x6548;&#x89E3;&#x51B3;&#x8FD9;&#x4E9B;&#x95EE;&#x9898;&#xFF0C;&#x5BF9;&#x8C61;&#x901A;&#x8FC7;&#x6D88;&#x606F;&#x8054;&#x7CFB;&#x800C;&#x4E0D;&#x662F;&#x76F4;&#x63A5;&#x4F9D;&#x8D56;&#x6216;&#x8005;&#x5173;&#x8054;&#x3002;</p>
<h2 id="&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x5173;&#x952E;&#x6280;&#x672F;"><a href="#&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x5173;&#x952E;&#x6280;&#x672F;" class="headerlink" title="&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x5173;&#x952E;&#x6280;&#x672F;"></a>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x5173;&#x952E;&#x6280;&#x672F;</h2><ul>
<li>&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x7C7B;&#x578B;</li>
<li>&#x6D88;&#x606F;&#x6CE8;&#x518C;</li>
<li>&#x6D88;&#x606F;&#x5206;&#x53D1;</li>
</ul>
<h2 id="&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x5B9A;&#x4E49;"><a href="#&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x5B9A;&#x4E49;" class="headerlink" title="&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x5B9A;&#x4E49;"></a>&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x5B9A;&#x4E49;</h2><p>&#x6211;&#x4EEC;&#x9700;&#x8981;&#x4E00;&#x79CD;&#x6CDB;&#x578B;&#x7684;&#x51FD;&#x6570;&#x7B7E;&#x540D;&#x6765;&#x5B9A;&#x4E49;&#x6210;&#x4E00;&#x4E2A;&#x901A;&#x7528;&#x7684;&#x6D88;&#x606F;&#x683C;&#x5F0F;&#x3002;&#x540C;&#x65F6;&#x9700;&#x8981;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8FD8;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x4E3B;&#x9898;&#x7C7B;&#x578B;&#xFF0C;&#x8BA9;&#x8BA2;&#x9605;&#x8BE5;&#x4E3B;&#x9898;&#x7684;&#x63A5;&#x53D7;&#x8005;&#x63A5;&#x6536;&#x6B64;&#x6D88;&#x606F;&#x3002;<br>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#xFF1A;std::function&lt;Ret(Args&#x2026;)&gt;&#x4F5C;&#x4E3A;&#x901A;&#x7528;&#x7684;&#x51FD;&#x6570;&#x7B7E;&#x540D;&#x3002;</p>
<h2 id="&#x6D88;&#x606F;&#x7684;&#x6CE8;&#x518C;"><a href="#&#x6D88;&#x606F;&#x7684;&#x6CE8;&#x518C;" class="headerlink" title="&#x6D88;&#x606F;&#x7684;&#x6CE8;&#x518C;"></a>&#x6D88;&#x606F;&#x7684;&#x6CE8;&#x518C;</h2><p>&#x603B;&#x7EBF;&#x5185;&#x90E8;&#x7EF4;&#x62A4;&#x4E86;&#x4E00;&#x4E2A;&#x6D88;&#x606F;&#x5217;&#x8868;&#xFF0C;&#x5F53;&#x9700;&#x8981;&#x53D1;&#x9001;&#x6D88;&#x606F;&#x65F6;&#xFF0C;&#x4F1A;&#x904D;&#x5386;&#x6D88;&#x606F;&#x5217;&#x8868;&#xFF0C;&#x4ECE;&#x4E2D;&#x67E5;&#x627E;&#x662F;&#x5426;&#x6709;&#x5408;&#x9002;&#x7684;&#x6D88;&#x606F;&#x548C;&#x6D88;&#x606F;&#x63A5;&#x6536;&#x8005;&#xFF0C;&#x627E;&#x5230;&#x5408;&#x9002;&#x7684;&#x63A5;&#x53D7;&#x8005;&#x4E4B;&#x540E;&#x518D;&#x6B21;&#x5E7F;&#x64AD;&#x3002;<br>&#x6D88;&#x606F;&#x7531;&#xFF1A;&#x6D88;&#x606F;&#x4E3B;&#x9898;+&#x6CDB;&#x578B;&#x51FD;&#x6570;&#x7EC4;&#x6210;&#x3002;topic + std::function&lt;Ret(Args&#x2026;)&gt;&#x8FD9;&#x4E2A;&#x6CDB;&#x578B;&#x51FD;&#x6570;&#x53EF;&#x80FD;&#x662F;&#x6240;&#x6709;&#x7684;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x666E;&#x901A;&#x51FD;&#x6570;&#x3001;&#x6210;&#x5458;&#x51FD;&#x6570;&#x3001;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#x3001;std::function&#x548C;lambda&#x8868;&#x8FBE;&#x5F0F;&#x3002;&#x6D88;&#x606F;&#x7684;&#x7EDF;&#x4E00;&#x683C;&#x5F0F;&#x4E3A;std::function&lt;Ret(Args&#x2026;)&gt;&#x6240;&#x4EE5;&#x9996;&#x5148;&#x5E94;&#x8BE5;&#x8BB2;&#x5404;&#x79CD;&#x8C03;&#x7528;&#x7C7B;&#x578B;&#x8F6C;&#x6362;&#x6210;&#x8BE5;&#x7C7B;&#x578B;&#xFF0C;&#x683C;&#x5F0F;&#x7EDF;&#x4E00;&#x540E;&#x5C31;&#x53EF;&#x4EE5;&#x5C06;&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x4EE5;&#x4FBF;&#x540E;&#x7EED;&#x5206;&#x53D1;&#xFF08;&#x4FDD;&#x5B58;&#x6D88;&#x606F;&#x7684;&#x65B9;&#x6CD5;&#x89C1;&#x540E;&#x9762;&#x7AE0;&#x8282;&#xFF09;&#x3002;<br>&#x63A5;&#x4E0B;&#x6765;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x8403;&#x53D6;&#x7684;&#x5BF9;&#x4E0B;&#x3002;</p>
<h2 id="&#x666E;&#x901A;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function"><a href="#&#x666E;&#x901A;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function" class="headerlink" title="&#x666E;&#x901A;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function"></a>&#x666E;&#x901A;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//&#x524D;&#x7F6E;&#x58F0;&#x660E;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> function_traits<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//&#x666E;&#x901A;&#x51FD;&#x6570;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">enum</span> <span class="token punctuation">{</span>arity <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>Args<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//&#x83B7;&#x53D6;&#x53C2;&#x6570;&#x6570;&#x91CF;</span>
    <span class="token keyword">typedef</span> Ret <span class="token function">function_type</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//&#x5B9A;&#x4E49;&#x51FD;&#x6570;&#x7C7B;&#x578B;</span>
    <span class="token keyword">typedef</span> Ret return_type<span class="token punctuation">;</span>            
    <span class="token keyword">using</span> stl_function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span>function_type<span class="token operator">&gt;</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//stl function&#x7C7B;&#x578B;  lambda&#x53EF;&#x8F6C;&#x6362;&#x6210;stl function</span>
    <span class="token keyword">typedef</span> <span class="token function">Ret</span><span class="token punctuation">(</span><span class="token operator">*</span>pointer<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">template</span><span class="token operator">&lt;</span>size_t I<span class="token operator">&gt;</span>
    <span class="token keyword">struct</span> args
    <span class="token punctuation">{</span>
        <span class="token keyword">static_assert</span><span class="token punctuation">(</span>I <span class="token operator">&lt;</span> arity<span class="token punctuation">,</span> <span class="token string">&quot;index is out of range&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//&#x7C7B;&#x4F3C;bind(_Binder) &#x6E90;&#x7801;&#x5B9E;&#x73B0;,&#x4FDD;&#x5B58;&#x53C2;&#x6570;&#x5E76;&#x4E14;&#x968F;&#x65F6;&#x53EF;&#x7528;.</span>
        <span class="token keyword">using</span> type <span class="token operator">=</span> <span class="token keyword">typename</span> std<span class="token operator">::</span>tuple_element<span class="token operator">&lt;</span>I<span class="token punctuation">,</span> std<span class="token operator">::</span>tuple<span class="token operator">&lt;</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&gt;&gt;</span><span class="token operator">::</span>type<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x51FD;&#x6570;&#x6307;&#x9488;&#x8F6C;&#x6362;&#x4E3A;std-function"><a href="#&#x51FD;&#x6570;&#x6307;&#x9488;&#x8F6C;&#x6362;&#x4E3A;std-function" class="headerlink" title="&#x51FD;&#x6570;&#x6307;&#x9488;&#x8F6C;&#x6362;&#x4E3A;std::function"></a>&#x51FD;&#x6570;&#x6307;&#x9488;&#x8F6C;&#x6362;&#x4E3A;std::function</h2><p>&#x51FD;&#x6570;&#x6307;&#x9488;&#xFF0C;&#x901A;&#x5E38;&#x5728;C&#x8BED;&#x8A00;&#x4E2D;&#x7ECF;&#x5E38;&#x4F7F;&#x7528;&#xFF0C;&#x4ED6;&#x7684;&#x58F0;&#x660E;&#x65B9;&#x5F0F;&#x901A;&#x5E38;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="line-numbers language-c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span>PFUNC<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>&#x6240;&#x4EE5;&#x4E3A;&#x4E86;&#x6211;&#x4EEC;&#x7684;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x8403;&#x53D6;&#x652F;&#x6301;&#x51FD;&#x6570;&#x6307;&#x9488;&#xFF0C;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x5176;&#x8FD4;&#x56DE;&#x503C;&#x548C;&#x5165;&#x53C2;&#x63D0;&#x53D6;&#x51FA;&#x6765;&#x3002;<br>&#x5177;&#x4F53;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//&#x51FD;&#x6570;&#x6307;&#x9488;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>
    <span class="token operator">:</span> <span class="token keyword">public</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x63D0;&#x53D6;std-function&#x7C7B;"><a href="#&#x63D0;&#x53D6;std-function&#x7C7B;" class="headerlink" title="&#x63D0;&#x53D6;std::function&#x7C7B;"></a>&#x63D0;&#x53D6;std::function&#x7C7B;</h2><p>&#x8FD9;&#x4E2A;&#x5C31;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x4E86;&#xFF0C;&#x5165;&#x53C2;&#x548C;&#x8FD4;&#x56DE;&#x503C;&#x76F4;&#x63A5;&#x63D0;&#x53D6;&#x5373;&#x53EF;&#x3002;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//std functional</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Ret<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> function_traits<span class="token operator">&lt;</span>std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;&gt;</span>
    <span class="token operator">:</span> <span class="token keyword">public</span> function_traits<span class="token operator">&lt;</span><span class="token function">Ret</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function"><a href="#&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function" class="headerlink" title="&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function"></a>&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function</h2><p>&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x7279;&#x522B;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;&#x6210;&#x5458;&#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x4E00;&#x5B9A;&#x662F;&#x8981;&#x6709;&#x5177;&#x4F53;&#x5BF9;&#x8C61;&#x8C03;&#x7528;&#x7684;&#x3002;&#x9664;&#x975E;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x9759;&#x6001;&#x51FD;&#x6570;&#xFF08;&#x8FD9;&#x4E2A;&#x548C;&#x666E;&#x901A;&#x51FD;&#x6570;&#x7C7B;&#x4F3C;&#xFF09;&#x3002;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x548C;&#x5177;&#x4F53;&#x7684;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x3002;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//&#x76F4;&#x63A5;&#x6839;&#x636E;&#x53C2;&#x6570;&#x8C03;&#x7528;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> ReturnType<span class="token punctuation">,</span> <span class="token keyword">typename</span> ClassType<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
<span class="token keyword">void</span>  <span class="token function">help1</span><span class="token punctuation">(</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>ClassType<span class="token operator">::</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ClassType<span class="token operator">&amp;</span> obj<span class="token punctuation">,</span> Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>obj<span class="token punctuation">,</span> f<span class="token punctuation">,</span> <span class="token operator">&amp;</span>args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">&gt;</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">func</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">&gt;</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//&#x8FD4;&#x56DE;&#x53EF;&#x8C03;&#x7528;&#x5B9E;&#x4F53;  &#x6B64;&#x65F6;Args&#x53EF;&#x7531;&#x5177;&#x4F53;&#x8C03;&#x7528;&#x65F6;&#x4F20;&#x5165;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> ReturnType<span class="token punctuation">,</span> <span class="token keyword">typename</span> ClassType<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Args<span class="token operator">&gt;</span>
std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span>  <span class="token function">help2</span><span class="token punctuation">(</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>ClassType<span class="token operator">::</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ClassType<span class="token operator">&amp;</span> obj<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">ReturnType</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> func <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>obj<span class="token punctuation">,</span> f<span class="token punctuation">]</span><span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token operator">*</span>f<span class="token punctuation">)</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">&gt;</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//func(std::forward&lt;Args&gt;(args)...);</span>
    <span class="token keyword">return</span> func<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function&#x7684;&#x66F4;&#x591A;&#x7EC6;&#x8282;"><a href="#&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std-function&#x7684;&#x66F4;&#x591A;&#x7EC6;&#x8282;" class="headerlink" title="&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function&#x7684;&#x66F4;&#x591A;&#x7EC6;&#x8282;"></a>&#x6210;&#x5458;&#x51FD;&#x6570;&#x8F6C;&#x6362;&#x4E3A;std::function&#x7684;&#x66F4;&#x591A;&#x7EC6;&#x8282;</h2><p>&#x521A;&#x521A;&#x6211;&#x4EEC;&#x4E8B;&#x5148;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#x867D;&#x7136;&#x652F;&#x6301;&#x4E0D;&#x540C;&#x5165;&#x53C2;&#x548C;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#xFF0C;&#x4F46;&#x662F;&#x51FD;&#x6570;&#x7C7B;&#x578B;&#x4F8B;&#x5982;const&#x7C7B;&#x578B;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5E76;&#x6CA1;&#x6709;&#x652F;&#x6301;&#x3002;&#x63A5;&#x4E0B;&#x91CC;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x5305;&#x542B;&#x4E0D;&#x540C;&#x9650;&#x5B9A;&#x7C7B;&#x578B;&#x7684;&#x51FD;&#x6570;&#x3002;&#x6211;&#x4EEC;&#x53EF;&#x4F7F;&#x7528;&#x5B8F;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x5F0F;&#xFF08;&#x6B64;&#x65B9;&#x6CD5;&#x5728;&#x6807;&#x51C6;&#x5E93;&#x3001;STL&#x5E93;&#x4E2D;&#x591A;&#x6B21;&#x88AB;&#x4F7F;&#x7528;&#xFF09;&#x5B9E;&#x73B0;&#x3002;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//member functional</span>
<span class="token macro property">#<span class="token directive keyword">define</span> FUNCTION_TRAITS(...) \
template&lt;typename ReturnType, typename ClassType, typename...Args&gt; \
struct function_traits&lt;ReturnType(ClassType::*)(Args...) __VA_ARGS__&gt; : \
function_traits&lt;ReturnType(Args...)&gt;{}; \
</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">volatile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">FUNCTION_TRAITS</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">volatile</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5C06;const&#x7B49;&#x7C7B;&#x578B;&#x6269;&#x5C55;&#x5230;&#x51FD;&#x6570;&#x9650;&#x5B9A;&#x7B26;&#x4F4D;&#x7F6E;&#x3002;</p>
<h2 id="&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std-function"><a href="#&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std-function" class="headerlink" title="&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std::function"></a>&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std::function</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> CallObject
<span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;CallObject&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//&#x51FD;&#x6570;&#x5BF9;&#x8C61; &#x6A21;&#x677F;&#x5B9E;&#x73B0;&#x65F6;&#x9700;&#x8981;&#x5177;&#x4F53;&#x5BF9;&#x8C61;&#x7C7B;&#x578B;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Callable<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> function_traits <span class="token operator">:</span> function_traits<span class="token operator">&lt;</span><span class="token keyword">decltype</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Callable<span class="token operator">::</span><span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testFunctionObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">auto</span> f <span class="token operator">=</span> <span class="token function">to_function</span><span class="token punctuation">(</span><span class="token function">CallObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//&#x8F6C;&#x6362;&#x4E3A;std::function</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="&#x5C06;&#x5404;&#x7C7B;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std-function&#x51FD;&#x6570;&#x5B9E;&#x73B0;"><a href="#&#x5C06;&#x5404;&#x7C7B;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std-function&#x51FD;&#x6570;&#x5B9E;&#x73B0;" class="headerlink" title="&#x5C06;&#x5404;&#x7C7B;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std::function&#x51FD;&#x6570;&#x5B9E;&#x73B0;"></a>&#x5C06;&#x5404;&#x7C7B;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#x8F6C;&#x6362;&#x4E3A;std::function&#x51FD;&#x6570;&#x5B9E;&#x73B0;</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">//&#x8F6C;&#x6362;&#x6210;stl&#x7684;function</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">&gt;</span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>stl_function_type <span class="token function">to_function</span><span class="token punctuation">(</span><span class="token keyword">const</span> Function<span class="token operator">&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>stl_function_type<span class="token operator">&gt;</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">&gt;</span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>stl_function_type <span class="token function">to_function</span><span class="token punctuation">(</span>Function<span class="token operator">&amp;&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>stl_function_type<span class="token operator">&gt;</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//&#x8F6C;&#x6362;&#x6210;&#x4EFF;&#x51FD;&#x6570;&#x6307;&#x9488;</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> Function<span class="token operator">&gt;</span>
<span class="token keyword">typename</span> function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>pointer <span class="token function">to_function_pointer</span><span class="token punctuation">(</span><span class="token keyword">const</span> Function<span class="token operator">&amp;</span> lambda<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">static_cast</span><span class="token operator">&lt;</span>function_traits<span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span><span class="token operator">::</span>pointer<span class="token operator">&gt;</span><span class="token punctuation">(</span>lambda<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x901A;&#x8FC7;&#x4EE5;&#x4E0A;&#x65B9;&#x5F0F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53D7;&#x6CDB;&#x578B;&#x7C7B;&#x578B;&#x7684;&#x6D88;&#x606F;&#xFF0C;&#x63A5;&#x4E0B;&#x91CC;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x5C06;&#x5404;&#x7C7B;&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#x8D77;&#x6765;&#xFF0C;&#x4EE5;&#x4FBF;&#x5206;&#x53D1;&#x8C03;&#x7528;&#x3002;<br>&#x4E0B;&#x9762;&#x4ECB;&#x7ECD;&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#x548C;&#x5206;&#x53D1;&#x3002;</p>
<p>&#x6D88;&#x606F;&#x4FDD;&#x5B58;&#xFF1A;&#x7531;&#x4E8E;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x4EE5;&#x53CA;&#x5165;&#x53C2;&#xFF0C;&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x4E4B;&#x524D;&#x4ECB;&#x7ECD;&#x7684;Any&#x4F5C;&#x4E3A;&#x6D88;&#x606F;&#x8F7D;&#x4F53;<br>&#x6D88;&#x606F;&#x5206;&#x53D1;&#xFF1A;&#x8FD9;&#x4E2A;&#x5C31;&#x6BD4;&#x8F83;&#x5BB9;&#x6613;&#x4E86;&#xFF0C;&#x53D6;&#x51FA;&#x5408;&#x9002;&#x7684;&#x51FD;&#x6570;&#x5BF9;&#x8C61;&#xFF08;&#x6D88;&#x606F;&#xFF09;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x5373;&#x53EF;</p>
<h2 id="&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;"><a href="#&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;" class="headerlink" title="&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;"></a>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x8BBE;&#x8BA1;&#x601D;&#x60F3;</h2><p>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x878D;&#x548C;&#x4E86;&#x89C2;&#x5BDF;&#x8005;&#x548C;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x901A;&#x8FC7;&#x7C7B;&#x578B;&#x64E6;&#x9664;&#x64E6;&#x9664;&#x5177;&#x4F53;&#x6D88;&#x606F;&#x7C7B;&#x578B;&#xFF08;Any&#xFF09;&#x3002;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x7528;&#x6765;&#x7EF4;&#x62A4;&#x4E3B;&#x9898;&#x548C;&#x9002;&#x5F53;&#x7684;&#x65F6;&#x5019;&#x5411;&#x89C2;&#x5BDF;&#x8005;&#x5E7F;&#x64AD;&#x6D88;&#x606F;&#x3002;&#x4E2D;&#x4ECB;&#x8005;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x7528;&#x6765;&#x964D;&#x4F4E;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E92;&#x76F8;&#x4F9D;&#x8D56;&#x4EA7;&#x751F;&#x7684;&#x8026;&#x5408;&#x6027;&#x3002;<br>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7EF4;&#x62A4;&#x7684;&#x6D88;&#x606F;&#x4F53;&#x662F;&#x6240;&#x6709;&#x7C7B;&#x578B;&#x7684;&#x53EF;&#x8C03;&#x7528;&#x5BF9;&#x8C61;&#xFF0C;&#x6CA1;&#x6709;&#x5BF9;&#x8C61;&#x4E4B;&#x95F4;&#x7684;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#xFF0C;&#x66F4;&#x6CA1;&#x6709;&#x63A5;&#x53E3;&#x7EE7;&#x627F;&#xFF0C;&#x4E3B;&#x9898;&#x548C;&#x89C2;&#x5BDF;&#x8005;&#x4EC5;&#x4EC5;&#x662F;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x7C7B;&#x578B;&#x7684;&#x6D88;&#x606F;&#x8054;&#x7CFB;&#x8D77;&#x6765;&#xFF0C;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#x5C31;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x7C7B;&#x578B;&#x548C;&#x5165;&#x53C2;&#x3002;</p>
<p>&#x4E0B;&#x56FE;&#x662F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x65F6;&#x5E8F;&#x56FE;&#xFF0C;&#x5F88;&#x597D;&#x7684;&#x8BF4;&#x660E;&#x7684;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x5DE5;&#x4F5C;&#x539F;&#x7406;&#xFF08;&#x6765;&#x81EA;&#x539F;&#x4E66;&#xFF09;<br></p><div class="amp-img-wrapper"><amp-img src="https://pagepig.oss-cn-hangzhou.aliyuncs.com/20180918221836424.png?x-oss-process=image/resize,m_lfit,h_450" width="621" height="438" layout="responsive"></amp-img></div>
<p>&#x5176;&#x4E2D;&#x4E3B;&#x8981;&#x7684;&#x51E0;&#x4E2A;&#x70B9;&#x5C31;&#x662F;&#xFF1A;<br>1.&#x89C2;&#x5BDF;&#x8005;&#x6CE8;&#x518C;&#x6D88;&#x606F;&#x4F53;<br>2.&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x4FDD;&#x5B58;&#x6D88;&#x606F;&#x4F53;<br>3.&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x6D88;&#x606F;<br>4.&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x8C03;&#x7528;&#x5408;&#x9002;&#x4E3B;&#x9898;&#x7684;&#x6D88;&#x606F;&#x4F53;<br>5.&#x89C2;&#x5BDF;&#x8005;&#x6536;&#x5230;&#x6D88;&#x606F;&#x5E76;&#x5904;&#x7406;</p>
<h2 id="&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#x603B;&#x7EBF;"><a href="#&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#x603B;&#x7EBF;" class="headerlink" title="&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#x603B;&#x7EBF;"></a>&#x5B8C;&#x6574;&#x7684;&#x6D88;&#x606F;&#x603B;&#x7EBF;</h2><pre class="line-numbers language-cpp"><code class="language-cpp"><span class="token keyword">class</span> <span class="token class-name">MessageBus</span>
<span class="token punctuation">{</span>
<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token comment" spellcheck="true">//&#x6CE8;&#x518C;&#x6D88;&#x606F;</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span>F<span class="token operator">&amp;&amp;</span> f<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">auto</span> func <span class="token operator">=</span> <span class="token function">to_function</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>F<span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">add</span><span class="token punctuation">(</span>topic<span class="token punctuation">,</span> std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">//&#x53D1;&#x9001;&#x6D88;&#x606F; &#x6CA1;&#x6709;&#x53C2;&#x6570;</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> range<span class="token punctuation">.</span>first<span class="token punctuation">;</span> iter <span class="token operator">!=</span> range<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> f <span class="token operator">=</span> iter<span class="token operator">-</span><span class="token operator">&gt;</span>second<span class="token punctuation">.</span>cast<span class="token operator">&lt;</span>function_type<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//&#x53D1;&#x9001;&#x6D88;&#x606F; &#x6709;&#x53C2;&#x6570;</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span>Args<span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> iter <span class="token operator">=</span> range<span class="token punctuation">.</span>first<span class="token punctuation">;</span> iter <span class="token operator">!=</span> range<span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">auto</span> f <span class="token operator">=</span> iter<span class="token operator">-</span><span class="token operator">&gt;</span>second<span class="token punctuation">.</span>cast<span class="token operator">&lt;</span>function_type<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">f</span><span class="token punctuation">(</span>std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>Args<span class="token operator">&gt;</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment" spellcheck="true">//&#x79FB;&#x9664;&#x67D0;&#x4E2A;&#x4E3B;&#x9898; &#x9700;&#x8981;&#x4E3B;&#x9898;&#x548C;&#x6D88;&#x606F;&#x7C7B;&#x578B;</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> R<span class="token punctuation">,</span> <span class="token keyword">typename</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Args<span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">using</span> function_type <span class="token operator">=</span> std<span class="token operator">::</span>function<span class="token operator">&lt;</span><span class="token function">R</span><span class="token punctuation">(</span>Args<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>function_type<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> range <span class="token operator">=</span> m_map<span class="token punctuation">.</span><span class="token function">equal_range</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_map<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>range<span class="token punctuation">.</span>first<span class="token punctuation">,</span> range<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> F<span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">,</span> F<span class="token operator">&amp;&amp;</span> f<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        string strMsg <span class="token operator">=</span> topic <span class="token operator">+</span> <span class="token keyword">typeid</span><span class="token punctuation">(</span>F<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        m_map<span class="token punctuation">.</span><span class="token function">emplace</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">move</span><span class="token punctuation">(</span>strMsg<span class="token punctuation">)</span><span class="token punctuation">,</span> std<span class="token operator">::</span>forward<span class="token operator">&lt;</span>F<span class="token operator">&gt;</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    std<span class="token operator">::</span>multimap<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> Any<span class="token operator">&gt;</span> m_map<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x6D4B;&#x8BD5;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">MessageBus g_bus<span class="token punctuation">;</span>
string g_topic <span class="token operator">=</span> <span class="token string">&quot;drive&quot;</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//&#x4E3B;&#x9898;&#x7C7B;&#x578B;</span>
<span class="token keyword">struct</span> Subject
<span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//&#x4E3B;&#x9898;&#x5BF9;&#x8C61;&#x53D1;&#x9001;&#x67D0;&#x79CD;&#x6D88;&#x606F;,</span>
    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Car
<span class="token punctuation">{</span>
    <span class="token function">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x6CE8;&#x518C;&#x5230;&#x6D88;&#x606F;&#x603B;&#x7EBF;</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x63A5;&#x6536;&#x5230;&#x67D0;&#x79CD;&#x6D88;&#x606F;&#x7684;&#x54CD;&#x5E94;&#x4F53;(lambda&#x5C01;&#x88C5;)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;car drive:&quot;</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Bus
<span class="token punctuation">{</span>
    <span class="token function">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x6CE8;&#x518C;&#x5230;&#x6D88;&#x606F;&#x603B;&#x7EBF;</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x89C2;&#x5BDF;&#x8005;&#x5BF9;&#x8C61;&#x63A5;&#x6536;&#x5230;&#x67D0;&#x79CD;&#x6D88;&#x606F;&#x7684;&#x54CD;&#x5E94;&#x4F53;(lambda&#x5C01;&#x88C5;)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;bus drive:&quot;</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Subject subject<span class="token punctuation">;</span>
    Car car<span class="token punctuation">;</span>
    Bus bus<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;---------------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x4E0D;&#x51FA;&#x6240;&#x6599;&#xFF0C;&#x89C2;&#x5BDF;&#x8005;Car&#x548C;Bus&#x63A5;&#x6536;&#x5230;&#x4E3B;&#x9898;&#x201D;drive&#x201D;&#x6D88;&#x606F;&#xFF0C;&#x7531;&#x6D88;&#x606F;&#x4F53;&#x89E6;&#x53D1;drive&#x51FD;&#x6570;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x590D;&#x6742;&#x7684;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x68B3;&#x7406;<br>&#x6211;&#x4EEC;&#x4E0A;&#x9762;&#x5B9E;&#x73B0;&#x7684;&#x4EC5;&#x4EC5;&#x662F;&#x7B80;&#x5355;&#x7684;&#x53D1;&#x9001;&#x4E3B;&#x9898;&#xFF0C;&#x7136;&#x540E;&#x54CD;&#x5E94;&#x3002;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x5E0C;&#x671B;&#xFF0C;&#x89C2;&#x5BDF;&#x8005;&#x53D7;&#x5230;&#x6D88;&#x606F;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x8FDB;&#x884C;&#x201C;&#x56DE;&#x590D;&#x201D;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x4F18;&#x52BF;&#x5C31;&#x66F4;&#x4E00;&#x6B65;&#x4F53;&#x73B0;&#x4E86;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x91CD;&#x65B0;&#x6CE8;&#x518C;&#x4E00;&#x79CD;&#x4E3B;&#x9898;&#x5373;&#x53EF;&#x3002;</p>
<pre class="line-numbers language-cpp"><code class="language-cpp">MessageBus g_bus<span class="token punctuation">;</span>
string g_topic <span class="token operator">=</span> <span class="token string">&quot;drive&quot;</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//&#x4E3B;&#x9898;&#x7C7B;&#x578B;</span>
string g_callbacktopic <span class="token operator">=</span> <span class="token string">&quot;driveok&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> Subject
<span class="token punctuation">{</span>
    <span class="token function">Subject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token function">driveok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_callbacktopic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> topic<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">driveok</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;driveok&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Car
<span class="token punctuation">{</span>
    <span class="token function">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x6CE8;&#x518C;&#x5230;&#x6D88;&#x606F;&#x603B;&#x7EBF;</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;car drive:&quot;</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//&#x989D;&#x5916;&#x589E;&#x52A0;&#x5904;&#x7406;&#x51FD;&#x6570;</span>
        g_bus<span class="token punctuation">.</span>send<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>g_callbacktopic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> Bus
<span class="token punctuation">{</span>
    <span class="token function">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//&#x6CE8;&#x518C;&#x5230;&#x6D88;&#x606F;&#x603B;&#x7EBF;</span>
        g_bus<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token function">drive</span><span class="token punctuation">(</span>speed<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">void</span> <span class="token function">drive</span><span class="token punctuation">(</span><span class="token keyword">int</span> speed<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;bus drive:&quot;</span> <span class="token operator">&lt;&lt;</span> speed <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">testBus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Subject subject<span class="token punctuation">;</span>
    Car car<span class="token punctuation">;</span>
    Bus bus<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>g_topic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;---------------&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    subject<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;Car&#x6CE8;&#x518C;&#x4E86;&#x56DE;&#x590D;&#x4E3B;&#x9898;&#xFF0C;&#x5728;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x901A;&#x77E5;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x5373;&#x53EF;&#x5B9E;&#x73B0;&#x201C;&#x56DE;&#x590D;&#x201D;&#x529F;&#x80FD;&#x3002;</p>
<p>&#x601D;&#x8003;:<br>&#x5176;&#x5B9E;&#x6211;&#x4EEC;&#x53EF;&#x5C06;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x548C;&#x72B6;&#x6001;&#x673A;&#x7ED3;&#x5408;&#x4E00;&#x4E0B;&#xFF0C;&#x5F53;&#x5904;&#x4E8E;&#x67D0;&#x79CD;&#x72B6;&#x6001;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x7136;&#x540E;&#x6B64;&#x64CD;&#x4F5C;&#x5B8C;&#x6210;&#x540E;&#x53EF;&#x4EE5;&#x9009;&#x62E9;&#x7EE7;&#x7EED;&#x6267;&#x884C;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;&#xFF0C;&#x8FD9;&#x4E9B;&#x64CD;&#x4F5C;&#x53EF;&#x4EE5;&#x662F;&#x4E0D;&#x540C;&#x7684;&#x4E3B;&#x9898;&#x7C7B;&#x578B;&#x3002;<br>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x5C06;&#x590D;&#x6742;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x7B80;&#x5316;&#x4E86;&#xFF0C;&#x964D;&#x4F4E;&#x4E86;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x7684;&#x590D;&#x6742;&#x5EA6;&#x548C;&#x8026;&#x5408;&#x5EA6;&#xFF0C;&#x4F46;&#x662F;&#x4E5F;&#x8981;&#x6CE8;&#x610F;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x4F7F;&#x7528;&#x573A;&#x666F;&#xFF0C;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x5F88;&#x7B80;&#x5355;&#x7684;&#x65F6;&#x5019;&#x4F7F;&#x7528;&#xFF0C;&#x53CD;&#x800C;&#x5C06;&#x7CFB;&#x7EDF;&#x53D8;&#x7684;&#x5F88;&#x590D;&#x6742;&#xFF0C;&#x5728;&#x5BF9;&#x8C61;&#x5173;&#x7CFB;&#x591A;&#x4E14;&#x590D;&#x6742;&#x7684;&#x573A;&#x666F;&#xFF0C;&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x624D;&#x80FD;&#x66F4;&#x597D;&#x7684;&#x53D1;&#x6325;&#x4F5C;&#x7528;&#x3002;</p>
<p>&#x4E2A;&#x4EBA;&#x603B;&#x7ED3;:<br>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x7684;&#x601D;&#x60F3;&#x662F;&#x603B;&#x7EBF;&#x63A5;&#x7BA1;&#x6240;&#x6709;&#x6D88;&#x606F;&#x5904;&#x7406;&#x903B;&#x8F91;,&#x56E0;&#x6B64;&#x603B;&#x7EBF;&#x9700;&#x8981;&#x5C06;&#x6240;&#x6709;&#x51FD;&#x6570;&#x683C;&#x5F0F;&#x5316;&#x4E3A;&#x7EDF;&#x4E00;&#x63A5;&#x53E3;,&#x683C;&#x5F0F;&#x5316;&#x65F6;&#x9700;&#x8981;&#x4F20;&#x5165;&#x88AB;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x7684;&#x5730;&#x5740;,&#x88AB;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;&#x7C7B;&#x578B;,&#x88AB;&#x8C03;&#x7528;&#x51FD;&#x6570;&#x7684;&#x53C2;&#x6570;(&#x6570;&#x636E;).</p>
<p>&#x6CE8;&#x610F;&#xFF1A;<br>&#x6D88;&#x606F;&#x603B;&#x7EBF;&#x6848;&#x4F8B;&#x4E0D;&#x5B8C;&#x7F8E;,&#x9700;&#x8981;&#x589E;&#x52A0;&#x591A;&#x4E2A;&#x53D1;&#x5E03;&#x8005;,&#x540C;&#x65F6;&#x89E3;&#x8026;&#x603B;&#x7EBF;&#x548C;&#x53D1;&#x5E03;&#x8005;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x641E;&#x6210;&#x4E00;&#x4E2A;&#x3002;</p>
<h1 id="&#x56DE;&#x8C03;&#x6A21;&#x5F0F;"><a href="#&#x56DE;&#x8C03;&#x6A21;&#x5F0F;" class="headerlink" title="&#x56DE;&#x8C03;&#x6A21;&#x5F0F;"></a>&#x56DE;&#x8C03;&#x6A21;&#x5F0F;</h1><p>&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7684;&#x7B80;&#x5355;&#x4EE3;&#x7801;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcretSubject</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> Callback callback<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>Callback callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span>callback <span class="token operator">=</span> callback<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       callback<span class="token punctuation">.</span><span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Callback</span> <span class="token punctuation">{</span>
   <span class="token keyword">void</span> <span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       ConcretSubject subject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcretSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       Callback callback <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token annotation punctuation">@Override</span>
           <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;call&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
       <span class="token punctuation">}</span><span class="token punctuation">;</span>
       subject<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
       subject<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>&#x901A;&#x8FC7;&#x5BF9;&#x6BD4;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#xFF0C;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x548C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x6A21;&#x5F0F;&#x53CA;&#x5176;&#x76F8;&#x4F3C;&#xFF0C;&#x5DEE;&#x522B;&#x4EC5;&#x5728;&#x4E8E;&#x5728;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x7EF4;&#x62A4;&#x8FD9;&#x4E00;&#x4E2A;&#x89C2;&#x5BDF;&#x8005;&#x5217;&#x8868;&#xFF0C;&#x800C;&#x5728;&#x56DE;&#x8C03;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;&#x201C;&#x88AB;&#x89C2;&#x5BDF;&#x8005;&#x201D;&#x53EA;&#x662F;&#x4FDD;&#x5B58;&#x4E86;&#x4E00;&#x4E2A;&#x201C;&#x89C2;&#x5BDF;&#x8005;&#x201D;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x5F62;&#x5F0F;&#x4E0A;&#x7684;&#x7EC8;&#x6781;&#x533A;&#x522B;&#x3002;</p>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x4E00;&#x5BF9;&#x4E00;&#x7684;&#x89C2;&#x5BDF;&#x8005;&#x6A21;&#x5F0F;&#x3002;</p>
<p>&#x53C2;&#x8003;&#x94FE;&#x63A5;&#xFF1A;<br><a href="https://www.cnblogs.com/cbf4life/" target="_blank" rel="noopener">https://www.cnblogs.com/cbf4life/</a><br><a href="https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html" target="_blank" rel="noopener">https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html</a><br><a href="https://www.cnblogs.com/cbf4life/" target="_blank" rel="noopener">https://www.cnblogs.com/cbf4life/</a><br><a href="https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html" target="_blank" rel="noopener">https://www.cnblogs.com/wanggary/archive/2011/04/07/2008796.html</a><br><a href="https://blog.csdn.net/xufeng0991/article/details/50267675" target="_blank" rel="noopener">https://blog.csdn.net/xufeng0991/article/details/50267675</a></p>
</iostream><link rel="stylesheet" href="/css/spoiler.css" type="text/css">
			  		
			  		<!-- google Adsense -->
			  		
					
					
					
					
			    	
					
					<!-- google Adsense Matched content -->
			  		
			  	</div>
				
		  	</article>
		  	
		  	
		  	<!-- TAGS -->
		  	
		  	<div class="meta-content">
				
				<div class="widget">
				  	<h6 class="tag"><span class="fa fa-fw fa-tag"></span>TAGS</h6>
				  	<div class="article-tag">
						<ul class="article-tag-list">
							
					    		<li class="article-tag-list-item">
					    			<a class="article-tag-list-link" href="/tags/其他/">
					    				其他
					    			</a>
					    		</li>
							
						</ul>
					</div>
				</div>
				
			</div>
		  	
		  	
		  	<!-- Categories posts -->
		  	
		  	
		  	
		  	<!-- Detailed categories  posts -->
		  	
		  	
		  	
		  	<!-- Latests -->
		  	
			
		</div>
		
		
		<footer id="footer">
		
			
			
			
			
			<div class="copyright-tool">
				
				
				
				<div class="copyright-title">
					<span>
					&copy; 2020&nbsp;ALaDing
					</span>
				</div>
				
				<div class="copyright-license">
					<aside>
						Powered by <a href="https://hexo.io/">Hexo</a>. <a href="https://github.com/tea3/hexo-generator-amp">AMP-Theme</a> designed by <a href="https://github.com/tea3/">tea</a>.
					</aside>
				</div>
			</div>
			
		</footer>


  	<div id="totop"><a href="#"></a></div>


  </body>
</html>
